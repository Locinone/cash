%!PS-Adobe-2.0
%%Creator: dvips(k) 5.78 Copyright 1998 Radical Eye Software (www.radicaleye.com)
%%Title: doc.dvi
%%Pages: 99
%%PageOrder: Ascend
%%BoundingBox: 0 0 596 842
%%EndComments
%DVIPSCommandLine: dvips -o doc.ps doc.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2002.08.28:1504
%%BeginProcSet: texc.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]/id ch-image N /rw ch-width 7 add 8 idiv string N /rc 0 N /gp 0 N
/cp 0 N{rc 0 ne{rc 1 sub /rc X rw}{G}ifelse}imagemask restore}B /G{{id
gp get /gp gp 1 add N dup 18 mod S 18 idiv pl S get exec}loop}B /adv{cp
add /cp X}B /chg{rw cp id gp 4 index getinterval putinterval dup gp add
/gp X adv}B /nd{/cp 0 N rw exit}B /lsh{rw cp 2 copy get dup 0 eq{pop 1}{
dup 255 eq{pop 254}{dup dup add 255 and S 1 and or}ifelse}ifelse put 1
adv}B /rsh{rw cp 2 copy get dup 0 eq{pop 128}{dup 255 eq{pop 127}{dup 2
idiv S 128 and or}ifelse}ifelse put 1 adv}B /clr{rw cp 2 index string
putinterval adv}B /set{rw cp fillstr 0 4 index getinterval putinterval
adv}B /fillstr 18 string 0 1 17{2 copy 255 put pop}for N /pl[{adv 1 chg}
{adv 1 chg nd}{1 add chg}{1 add chg nd}{adv lsh}{adv lsh nd}{adv rsh}{
adv rsh nd}{1 add adv}{/rc X nd}{1 add set}{1 add clr}{adv 2 chg}{adv 2
chg nd}{pop nd}]dup{bind pop}forall N /D{/cc X dup type /stringtype ne{]
}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore userdict
/eop-hook known{eop-hook}if showpage}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{dup length product length le{dup length product
exch 0 exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}
ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false RMat{BDot}
imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1 false
RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform round
exch round exch itransform moveto rulex 0 rlineto 0 ruley neg rlineto
rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail{dup
/delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}B /d{
-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}
B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B
/bos{/SS save N}B /eos{SS restore}B end

%%EndProcSet
TeXDict begin 39158280 55380996 1000 600 600 (doc.dvi)
@start
%DVIPSBitmapFont: Fa cmmi8 8 1
/Fa 1 106 df<1307EB0F80EB1FC0A2EB0F80EB070090C7FCA9EA01E0EA07F8EA0E3CEA
1C3E1238123012701260EAE07EEAC07C13FC485A120012015B12035BA21207EBC04014C0
120F1380EA1F81EB01801303EB0700EA0F06131EEA07F8EA01F0122E7EAC18>105
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fb cmr8 8 2
/Fb 2 51 df<131C133C137CEA03FC12FFEAFC7C1200B3B113FEB512FEA2172C7AAB23>
49 D<137F3803FFE0380781F8381E00FC0038137E00307F007014800060131F12F000FC
14C07E140FA3007C131FC7FCA21580143F15005C147E5C5C1301495A5CEB078049C7FC13
1E5B5B13704913C0485A485A3907000180120E481303001FB5FC5A481400B6FCA21A2C7C
AB23>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmr10 10.95 1
/Fc 1 62 df<007FB912E0BA12F0A26C18E0CDFCAE007FB912E0BA12F0A26C18E03C167B
A147>61 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fd cmmi10 10.95 3
/Fd 3 63 df<121EEA7F80A2EAFFC0A4EA7F80A2EA1E000A0A798919>58
D<1818187CEF01FC1707EF1FF0EF7FC0933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07
FCED1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CA
FCEA07FCEA1FF0EA7FC048CBFCA2EA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FC
EB01FF9038007FC0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0
EE1FF0EE07FCEE01FF9338007FC0EF1FF0EF07FC1701EF007C1818363678B147>60
D<126012F812FE6C7EEA3FE0EA0FF8EA03FEC66C7EEB3FE0EB0FF8EB03FE903800FF80EC
3FE0EC0FF8EC03FE913800FF80ED3FE0ED0FF8ED03FE923800FF80EE3FE0EE0FF8EE03FE
933800FF80EF3FE0EF0FF8EF03FCA2EF0FF8EF3FE0EFFF80933803FE00EE0FF8EE3FE0EE
FF80DB03FEC7FCED0FF8ED3FE0EDFF80DA03FEC8FCEC0FF8EC3FE0ECFF80D903FEC9FCEB
0FF8EB3FE0EBFF80D803FECAFCEA0FF8EA3FE0EAFF8048CBFC12F81260363678B147>62
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fe cmsy10 10.95 3
/Fe 3 34 df<EB0FFCEB3FFF90B512C0000314F04880488048804880A2481580A3B712C0
AA6C1580A36C1500A26C5C6C5C6C5C6C5CC614C0013F90C7FCEB0FFC22227BA72D>15
D<183818FC1703EF0FF8EF3FE0EFFF80933803FE00EE0FF8EE3FE0EEFF80DB03FEC7FCED
0FF8ED3FE0EDFF80DA03FEC8FCEC0FF8EC3FE0ECFF80D903FEC9FCEB0FF8EB3FE0EBFF80
D803FECAFCEA0FF8EA3FE0EAFF8048CBFC6C7EEA7FE0EA0FF8EA03FEC66C7EEB3FE0EB0F
F8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED3FE0ED0FF8ED03FE923800FF
80EE3FE0EE0FF8EE03FE933800FF80EF3FE0EF0FF8EF03FC170018381800AE007FB812F8
B912FCA26C17F8364778B947>20 D<F10380861901861900861A781A381A3C8686F20780
F203E0F201F0007FBB12FCBDFCA26C1AFCCDEA01F0F203E0F20780F20F001A1E621A381A
78626219016219036250207BA65B>33 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Ff ecbx1200 12 54
/Ff 54 122 df<ED0FFF4AB512C0020F14F0027F80903A01FFF803FC499038C000FE010F
EB00034948497E49485B5C495A4C138001FF6E13005CA3705AEE01F893C8FCA74BB51280
B9FCA5C69038E00003B3B0007FD9FFC1B6FCA538467EC53E>28 D<157F913803FFC0020F
7F4A7F91383FE1F891387F80789138FF007C49143C495A163E4948131EA3130FA3163E16
3C167C16786E13F84B5A4B5A15075E6D6C485A4BC70003B512E0153E15FC6D5B5D4B9139
0007C0004B5E6D6D150F4FC7FC6D6D151E49173E496D5D491778496D15F890261FBFFE4A
5AD93F3F5E9026FE1FFF1403D801FC6E495A00036D5E48486C6D130F000F6F49C8FC001F
6D6D133E48486C6D133C187C007F6D6D5B6F6C485A00FF6E6C485A6FEB87C06F13CFEFFF
806F91C9FC6D6D5B6F49EC01E06F7F6C6CEC3FFF706D13036C6C4A6DEB07C06C6C91B500
F0130FDA800702FCEB1F806C9026E03FF89039FF80FF00000390B5D8F03FEBFFFE6CDBC0
0F5C6C6CDA00035C011F01F8D9007F13E001030180020790C7FC4B477BC557>38
D<EA07C0EA1FF0EA3FF8EA7FFC12FF13FEA213FFA47E7E7EEA07CFEA000FA2131F131EA2
133EA2133C137C13F8A2EA01F0120313E0EA07C0EA1F801300121E120C1022788E1F>44
D<B612F8A91D097F9A25>I<EA07C0EA1FF0EA3FF8EA7FFCEAFFFEA7EA7FFCEA3FF8EA1F
F0EA07C00F0F788E1F>I<17C0EE01E01603A217C01607A2EE0F80A217005EA2163EA216
3C167CA25EA24B5AA25E1503A24B5AA25E150FA24BC7FCA2151E153EA25DA2157815F8A2
4A5AA25D1403A24A5AA25D140FA24AC8FCA2143EA2143C147CA25CA25C1301A2495AA25C
1307A2495AA291C9FC5BA2133EA2133C137CA25BA25B1201A2485AA2485AA25B120FA248
CAFCA2121E123EA25AA2127812F8A25A12602B647ACA38>I<EC3FF849B5FC010F14E001
3F14F890397FF01FFC9039FFC007FE4890380001FF48486D1380000716C049147F000F16
E049143F001F16F0A2003F16F8A249141F007F16FCA600FF16FEB3A3007F16FCA56C6CEC
3FF8A3001F16F0A2000F16E06D147F000716C06D14FF6C6C4913806C6D4813006C6D485A
90397FF01FFC6DB55A010F14E0010314809026003FF8C7FC2F427CC038>I<EC03C01407
141F147FEB03FF133FB6FCA413C3EA0003B3B3ADB712FCA5264177C038>I<ECFFE0010F
13FE013F6D7E90B612E0000315F82607FC0313FE3A0FE0007FFFD81F806D138048C7000F
13C0488001C015E001F07F00FF6E13F07F17F881A46C5A6C5A6C5AC9FC17F05DA217E05D
17C04B13804B1300A2ED1FFC4B5A5E4B5A4B5A4A90C7FC4A5A4A5AEC0FF04A5AEC3F804A
C7127814FE495A494814F8D907E014F0495A495A49C8FC017C140149140348B7FC4816E0
5A5A5A5A5AB8FC17C0A42D417BC038>I<ECFFF0010713FF011F14C0017F14F049C66C7E
D803F8EB3FFED807E06D7E81D80FF86D138013FE001F16C07FA66C5A6C4815806C485BC8
14005D5E4B5A4B5A4B5A4A5B020F1380902607FFFEC7FC15F815FF16C090C713F0ED3FFC
ED0FFEEEFF80816F13C017E0A26F13F0A217F8A3EA0FC0EA3FF0487EA2487EA217F0A25D
17E06C5A494913C05BD83F80491380D81FF0491300D80FFEEBFFFE6CB612F800015D6C6C
14C0011F49C7FC010113E02D427BC038>I<163FA25E5E5D5DA25D5D5D5DA25D92B5FCEC
01F7EC03E7140715C7EC0F87EC1F07143E147E147C14F8EB01F0EB03E0130714C0EB0F80
EB1F00133E5BA25B485A485A485A120F5B48C7FC123E5A12FCB91280A5C8000F90C7FCAC
027FB61280A531417DC038>I<0007150301E0143F01FFEB07FF91B6FC5E5E5E5E5E1680
4BC7FC5D15E092C8FC01C0C9FCAAEC3FF001C1B5FC01C714C001DF14F09039FFE03FFC91
38000FFE01FC6D7E01F06D13804915C0497F6C4815E0C8FC6F13F0A317F8A4EA0F80EA3F
E0487E12FF7FA317F05B5D6C4815E05B007EC74813C0123E003F4A1380D81FC0491300D8
0FF0495AD807FEEBFFFC6CB612F0C65D013F1480010F01FCC7FC010113C02D427BC038>
I<4AB47E021F13F0027F13FC49B6FC01079038807F8090390FFC001FD93FF014C0494813
7F4948EBFFE048495A5A1400485A120FA248486D13C0EE7F80EE1E00003F92C7FCA25B12
7FA2EC07FC91381FFF8000FF017F13E091B512F89039F9F01FFC9039FBC007FE9039FF80
03FF17804A6C13C05B6F13E0A24915F0A317F85BA4127FA5123FA217F07F121FA2000F4A
13E0A26C6C15C06D4913806C018014006C6D485A6C9038E01FFC6DB55A011F5C010714C0
010191C7FC9038003FF02D427BC038>I<121E121F13FC90B712FEA45A17FC17F817F017
E017C0A2481680007EC8EA3F00007C157E5E00785D15014B5A00F84A5A484A5A5E151FC8
48C7FC157E5DA24A5A14035D14074A5AA2141F5D143FA2147F5D14FFA25BA35B92C8FCA3
5BA55BAA6D5A6D5A6D5A2F447AC238>I<EC7FF00103B5FC010F14C0013F14F090397F80
1FFC3A01FC0003FE48486D7E497F4848EC7F80163F484815C0A2001F151FA27FA27F7F01
FE143F6D158002C0137F02F014006C01FC5B6E485A6C9038FF83FCEDE7F86CECFFE06C5D
6C92C7FC6D14C06D80010F14F882013F8090B7FC48013F14802607FC0F14C0260FF80314
E04848C6FC496D13F0003F141F48481307496D13F8150000FF157F90C8123F161F160FA2
1607A36D15F0127F160F6D15E06C6C141F6DEC3FC06C6CEC7F80D80FFE903801FF003A07
FFC00FFE6C90B55AC615F0013F14C0010F91C7FC010013F02D427BC038>I<EC7FF09038
07FFFE011F6D7E017F14E09039FFE03FF0489038800FF848496C7E48488048486D7E001F
80003F1680A2484815C08117E0A212FF17F0A617F8A45D127FA3003F5CA26C7E5D6C6C5B
12076C6C131E6CEBC07C6CEBFFF8013F5B010F01C013F00101130090C8FCA217E05DA2EA
03C0D80FF015C0487E486C491380A217004B5A150F5E49495A6C48495A01C0EBFFE0260F
F0035B6CB65A6C4AC7FC6C14F86C6C13E0D907FEC8FC2D427BC038>I<EE1F80A24C7EA2
4C7EA34C7EA24B7FA34B7FA24B7FA34B7F169F031F80161F82033F80ED3E07037E80157C
8203FC804B7E02018115F0820203814B137F0207815D173F020F814B7F021F8292C77EA2
4A82023E80027E82027FB7FCA291B87EA2498302F0C8FCA20103834A157F0107834A153F
A249488284011F8491C97E4984133E017E82B6020FB612F0A54C457CC455>65
D<DCFFF01470031F01FF14F04AB6EAE0010207EDF803023FEDFE0791B539E001FF0F4949
C7EA3F9F010701F0EC0FFF4901C0804990C87E4948814948814948167F4849163F484916
1F5A4A160F485B19074890CAFC19035A5BA2007F1801A34994C7FC12FFAE127F7F1AF0A2
123FA27F6C18011AE06C7F19036C6D17C06E16077E6C6DEE0F806C6DEE1F006D6C5E6D6C
167E6D6C6C5D6D6D4A5A6D01F0EC07F0010101FEEC1FE06D903AFFF001FF80023F90B6C7
FC020715FC020115F0DA001F1480030001F8C8FC44467AC451>67
D<B9FC18F018FE727E19E026003FFEC7001F13F805017F9438003FFF060F7F727F727F72
7F84737E737EA2737EA2737EA21B80A2851BC0A51BE0AD1BC0A51B8061A21B006162193F
624F5A19FF624E5B06075B4E5B063F90C7FC4DB45A050F13F8BA5A19C04EC8FC18F095C9
FC4B447CC356>I<BA12F8A485D8001F90C71201EF003F180F180318011800A2197E193E
A3191EA21778A285A405F890C7FCA316011603161F92B5FCA5ED001F160316011600A2F1
01E01778A2F103C0A494C7FC1907A21A80A2190FA2191FA2193FF17F0061601807181F4D
B5FCBBFC61A443447DC34A>I<BA1280A419C026003FFEC7121F1701EF007F183F181F18
0F180719E01803A31801A3EE01E0F000F0A419001603A31607160F167F91B6FCA59138FE
007F160F16071603A31601A693C9FCAFB712F0A53C447CC346>I<B7D88003B612FEA526
003FFEC9EBF800B3A791B9FCA54AC9FCB3AAB7D88003B612FEA54F447CC358>72
D<B712E0A5D8001F90C7FCB3B3B3A4B712E0A523447DC32A>I<B500FE067FB512806E95
B6FCA26F5EA2D8003F50C7FC013D6DEE03DFA2013C6DEE079FA26E6CEE0F1FA26E6C161E
A26E6C163CA36E6C1678A26E6C16F0A26E6DEC01E0A26E6DEC03C0A36E6DEC0780A26F6C
EC0F00A26F6C141EA26F6C5CA36F6C5CA26F6C5CA26F6D485AA26F6D485AA26F6D485AA3
706C48C7FCA293383FF81EA2706C5AA2706C5AA3706C5AA2705BA2705BA2705BA2B6057F
B6128071C7FCA2173E171C61447CC36A>77 D<B64BB512FE8181A281D8003F6D91C7EA78
0081013D7F81133C6E7E6E7F6E7F6E7F6E7F82806E7F6E7F6F7E6F7F83816F7F6F7F6F7F
6F7F6F7F8382707F707F707F707F8482707F707F717E7113807113C019E0837113F07113
F87113FC7113FE19FF847213F884848484A28484197F193F191FA2190F1907B616031901
19001A78A24F447CC358>I<923807FFC092B512FE0207ECFFC0021F15F091267FFE0013
FC902601FFF0EB1FFF01070180010313C04990C76C7FD91FFC6E6C7E49486F7E49486F7E
01FF8348496F7E48496F1380A248496F13C0A24890C96C13E0A24819F04982003F19F8A3
007F19FC49177FA400FF19FEAD007F19FC6D17FFA3003F19F8A26D5E6C19F0A26E5D6C19
E0A26C6D4B13C06C19806E5D6C6D4B13006C6D4B5A6D6C4B5A6D6C4B5A6D6C4A5B6D01C0
01075B6D01F0011F5B010101FE90B5C7FC6D90B65A023F15F8020715C002004AC8FC0307
13C047467AC454>I<B9FC18F018FE727E19E0D8001F90C7000F7F05017F716C7E727E72
7E721380A21AC084A21AE0A91AC0A24E1380A21A00604E5A4E5A4D485A050F5B92B712C0
96C7FC18FC18C092CBFCB3A7B712E0A543447DC34D>I<B812F8EFFFC018F818FE727ED8
001F90C7003F13E005037F05007F727E727E727EA28684A286A762A24E90C7FCA24E5A61
187F943801FFF005075B053F138092B7C8FC18F818E018F892C77FEF3FFF050F7F717F71
7FA2717FA2717FA785A61B0F85A2187F73131F72141EB700E06DEB803E72EBE0FC72EBFF
F8060114F0726C13E0CC0007138050457DC354>82 D<DAFFE0131C010701FE133C013F90
38FF807C90B6EAE0FC4815F9489038801FFF3907FC00014848EB007F4848143F4848140F
491407007F15035B1601160012FF177CA27FA26D153C7F7F6D92C7FC6C7EEBFFE014FE6C
EBFFF015FF6C15E016FC6C816C6F7E6C826C826C6C81011F810107811300020F80140003
077FED007F82040F1380828212F082A282A27EA218007EA26C5D6C5E6D14036D5D6D1407
01F84A5A01FFEC3FF002F8EBFFE0486CB65AD8FC1F92C7FCD8F80714FC48C614F0480107
138031467AC43E>I<003FBA12E0A59026FE000FEB8003D87FE09338003FF049171F90C7
1607A2007E1803007C1801A300781800A400F819F8481978A5C81700B3B3A20107B8FCA5
45437CC24E>I<B76C010FB512F8A526003FFEC93803E000B3B3A9011F17076280190F6D
606F151F6D95C7FC6D6D5D197E6D6D5D6D6D1403DA7FFC4A5A6EB4EC3FF0020F9039F003
FFE06E90B61280020193C8FC6E6C14FC030F14E09226007FFEC9FC4D457CC356>I<9038
01FFE0011F13FE017F6D7E48B612E03A03FE007FF84848EB1FFC6D6D7E486C6D7EA26F7F
A36F7F6C5A6C5AEA00F090C7FCA40203B5FC91B6FC1307013F13F19038FFFC01000313E0
481380381FFE00485A5B127F5B12FF5BA35DA26D5B6C6C5B4B13F0D83FFE013EEBFFC03A
1FFF80FC7F0007EBFFF86CECE01FC66CEB8007D90FFCC9FC322F7DAD36>97
D<EB7FC0B5FCA512037EB1ED0FF892B57E02C314E002CF14F89139DFC03FFC9139FF000F
FE02FCEB03FF4A6D13804A15C04A6D13E05CEF7FF0A218F8173FA318FCAC18F8A2177F18
F0A3EFFFE06E15C06E5B6E491380027C491300496C495A903AFC1FC07FFC496CB512F0D9
F00314C049C691C7FCC8EA1FF036467DC43E>I<EC3FFC49B512C0010F14F0013F14FC90
397FF003FE9039FFC001FF0003495A48494813805B120F485AA2485A6F1300007F6E5AED
00784991C7FCA212FFAC6C7EA3123F6DEC03C0A26C6C1407000F16806D140F6C6DEB1F00
6C6D133E6C01F05B3A007FFC03F86DB55A010F14C0010391C7FC9038003FF82A2F7CAD32
>I<EE03FEED07FFA5ED001F160FB1EC3FE0903803FFFC010FEBFF8F013F14CF9039FFF8
07FF48EBC00148903880007F4890C7123F4848141F49140F121F485AA3127F5BA212FFAC
127FA37F123FA26C6C141FA26C6C143F0007157F6C6C91B5FC6CD9C00314FC6C9038F01F
EF6DB5128F011FEBFE0F010713F89026007FC0EBF80036467CC43E>I<EC3FF80103B57E
010F14E0013F8090397FF83FF89039FFC007FC48496C7E48496C7E48486D1380485A001F
ED7FC05B003FED3FE0A2127F5B17F0161F12FFA290B7FCA401F0C9FCA5127FA27FA2123F
17F06C7E16016C6C15E06C6C14036C6DEB07C06C6DEB0F806C01F0EB3F0090397FFE01FE
011FB55A010714F0010114C09026001FFEC7FC2C2F7DAD33>I<EDFF80020F13E0027F13
F049B512F849EB8FFC90390FFE0FFE90381FFC1F14F8133FEB7FF0A2ED0FFCEBFFE0ED03
F0ED00C01600ABB612F8A5C601E0C7FCB3B0007FEBFFE0A527467DC522>I<DAFFE0137E
010F9039FE03FF80013FEBFF8F90B812C048D9C07F133F489038001FF84848EB0FFC4848
903907FE1F80001F9238FF0F00496D90C7FCA2003F82A8001F93C7FCA26D5B000F5D6C6C
495A6C6C495A6C9038C07FF04890B55A1680D8078F49C8FC018013E0000F90CAFCA47F7F
7F90B612C016FC6CEDFF8017E06C826C16FC7E000382000F82D81FF0C77ED83FC0140748
48020113808248C9FC177FA46D15FF007F17006D5C6C6C4A5A6C6C4A5AD80FFEEC3FF83B
07FFC001FFF0000190B612C06C6C92C7FC010F14F8D9007F90C8FC32427DAC38>I<EB7F
C0B5FCA512037EB1ED07FE92383FFF8092B512E002C114F89139C7F03FFC9138CF801F91
39DF000FFE14DE14FC4A6D7E5CA25CA35CB3A7B60083B512FEA537457CC43E>I<137C48
B4FC4813804813C0A24813E0A56C13C0A26C13806C1300EA007C90C7FCAAEB7FC0EA7FFF
A512037EB3AFB6FCA518467CC520>I<EB7FC0B5FCA512037EB293387FFFE0A593380FE0
004C5A4CC7FC167E5EED03F8ED07E04B5A4B5A037FC8FC15FEECC1FCECC3FE14C7ECDFFF
91B57E82A202F97F02E17F02C07FEC807F6F7E826F7E816F7F836F7F816F7F83707E163F
B60003B512F8A535457DC43B>107 D<EB7FC0B5FCA512037EB3B3B3A3B61280A519457C
C420>I<90277F8007FEEC0FFCB590263FFFC090387FFF8092B5D8F001B512E002816E48
80913D87F01FFC0FE03FF8913D8FC00FFE1F801FFC0003D99F009026FF3E007F6C019E6D
013C130F02BC5D02F86D496D7EA24A5D4A5DA34A5DB3A7B60081B60003B512FEA5572D7C
AC5E>I<90397F8007FEB590383FFF8092B512E0028114F8913987F03FFC91388F801F00
0390399F000FFE6C139E14BC02F86D7E5CA25CA35CB3A7B60083B512FEA5372D7CAC3E>
I<EC1FFC49B512C0010714F0011F14FC90397FF80FFF9026FFC0017F48496C7F4848C7EA
3FE000078248486E7E49140F001F82A2003F82491407007F82A400FF1780AA007F1700A4
6C6C4A5AA2001F5E6D141F000F5E6C6C4A5AA26C6C6CEBFFE06C6D485B27007FF80F90C7
FC6DB55A010F14F8010114C09026001FFCC8FC312F7DAD38>I<90397FC00FF8B590B57E
02C314E002CF14F89139DFC03FFC9139FF001FFE000301FCEB07FF6C496D13804A15C04A
6D13E05C7013F0A2EF7FF8A4EF3FFCACEF7FF8A318F017FFA24C13E06E15C06E5B6E4913
806E4913006E495A9139DFC07FFC02CFB512F002C314C002C091C7FCED1FF092C9FCADB6
7EA536407DAC3E>I<90387F807FB53881FFE0028313F0028F13F8ED8FFC91389F1FFE00
0313BE6C13BC14F8A214F0ED0FFC9138E007F8ED01E092C7FCA35CB3A5B612E0A5272D7D
AC2E>114 D<90391FFC038090B51287000314FF120F381FF003383FC00049133F48C712
1F127E00FE140FA215077EA27F01E090C7FC13FE387FFFF014FF6C14C015F06C14FC6C80
0003806C15806C7E010F14C0EB003F020313E0140000F0143FA26C141F150FA27EA26C15
C06C141FA26DEB3F8001E0EB7F009038F803FE90B55A00FC5CD8F03F13E026E007FEC7FC
232F7CAD2C>I<EB01E0A51303A41307A2130FA2131FA2133F137F13FF1203000F90B512
80B7FCA4C601E0C7FCB3A3ED01E0A9150302F013C0137F150790393FF80F8090391FFC1F
006DB5FC6D13FC01015B9038003FE023407EBE2C>I<D97FC049B4FCB50103B5FCA50003
EC000F6C81B3A85EA25EA25E7E6E491380017FD901F713FE9138F807E76DB512C7010F14
07010313FE9026007FF0EBFC00372E7CAC3E>I<B6903803FFFCA5000101E09038003E00
6C163C80017F5D8017F8013F5D6E1301011F5D6E1303010F5D6E13076D5DED800F6D92C7
FC15C05E6DEBE01E163E6D143CEDF07C027F1378EDF8F8023F5B15FD021F5B15FF6E5BA3
6E5BA26E90C8FCA26E5AA26E5AA21578362C7EAB3B>I<B5D8FE1FB539801FFFF0A50001
9027C0003FE0C7EA7C007114786E17F86C6F6C5C6E1601017F6E6C5CA26E011F1403013F
6F5C6E013F1407011F6F5CA26E0179140F010F048090C7FC6E01F95C6D02F0EBC01E1580
6D902681E07F5B18E003C3157C6D9139C03FF07815E76DDA801F5B18F803FF14F96E9039
000FFDE018FF6E486D5BA36E486D5BA26E486D90C8FCA24B7F02075DA26E48147C4B143C
4C2C7EAB51>I<B500FE90383FFFF0A5C601F0903803E0006D6C495A6D6C495A011F4AC7
FC6E5B6D6C137E6DEB807C6D6D5A6DEBC1F0EDE3E06DEBF7C06EB45A806E90C8FC5D6E7E
6E7F6E7FA24A7F4A7F8291381F3FFCEC3E1F027C7F4A6C7E49486C7F01036D7F49487E02
C08049486C7F49C76C7E013E6E7E017E141FB500E090B512FCA5362C7EAB3B>I<B69038
03FFFCA5000101E09038003E006C163C80017F5D8017F8013F5D6E1301011F5D6E130301
0F5D6E13076D5DED800F6D92C7FC15C05E6DEBE01E163E6D143CEDF07C027F1378EDF8F8
023F5B15FD021F5B15FF6E5BA36E5BA26E90C8FCA26E5AA26E5AA21578A215F85D14015D
001F1303D83F805B387FC007D8FFE05B140F92C9FC5C143E495A387FC1F8EB07F06CB45A
6C5B000790CAFCEA01FC36407EAB3B>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fg ecti1095 10.95 73
/Fg 73 123 df<01781330D801FE13700003EB01E0390F1F03C0391E0F07000038139E38
7007FC00E013F038C001C01C096ABB2E>3 D<B8FCA2280278982E>21
D<BD12C0A2520276985C>I<DC0FF0EB1F80DC7FFCEB7FE0923B01F81F01F0F0923B03E0
0783E078DB07C0EB87C092260F801FEBC1F8031F90383F8FC3040014834B149F061F13F0
037E011EEB81E0DD003FC7FCA215FE5D60187EA214015D18FE60A214035D0103B812FEA2
6190290007F00001F8C7FC5D170360A2140F5D170760A2141F5D170F60A3143F92C7121F
60A35C147E173F95C8FCA214FE5C5F177EA213014A14FE5FA213035C4C5AA3495A4C5AA2
4A5CD81C0F13E0007E9038C3F00700FE01875C4C5AEB1F07D8FC1E4948C9FCD8F83EEBC0
3E3AF03C03807CD87878EBC0F03A3FF000FFE0D80FC0013FCAFC455383BF37>27
D<933807FF80043F13F09338FE00FCDB01F0131EDB07E0130F4B48131F4C133F031F147F
4BC7FCA2187E037E14381800A215FE5DA414015DA414030103B712F0A218E0903A0003F0
00070207140F4B14C0A3171F020F15805DA2173F1800141F5D5F177EA2143F92C712FE5F
A34A1301027EECF81CA3160302FEECF03C4A1538A21878187013014A010113F018E09338
00F1C0EF7F800103ED1F004A91C7FCA35C1307A25C121CEA7E0F00FE5BA249CAFC12FCEA
F81E485AEA7878EA3FF0EA07C0385383BF33>I<EE07FC93393FFF87F09338FC03E7923A
03F000F7E0ED07C092390F8003FF031F4913C016005DA2037E903803DF80EF001FA2183F
4B1500A3600201157E5DA218FE6014035D0103B7FC60A2903A0007F000014B130360A317
07020F5D5DA2170F60141F5D171F60A2143F92C7123F95C7FCA34A5C027EEC7E07A317FE
02FE4A5A4A150EA2181E181C13014AEC7C3C1838EF3C70EF1FE04948EC07C094C8FCA349
5AA35CEA1C0F127E00FE5BA249CBFC12FCEAF83EEAF03CEA7878EA3FF0EA0FC03C5383BF
35>I<9038C001C03903E003E03907F007F0140F000F14E013E0A215C013C0141F001F14
801380A2150013005C48133E123EA2143C123C147C14785AA200701370A300605B12E0A2
485BA21C216BBF2E>34 D<15075DA2150EED7F80913803FFF0020F7F91383F9C7E91387C
1C1F9138F03C0FD901E0EB0780903803C038D90780130390380F00784915C0011E13705B
9238F00F80017C141F0178EBE03FA2140101F81500EDC01C93C7FC140313FC01FE5BA2EB
7F0714C702FFC8FC6D7F6D13E015F801077F6D7F01007F021F7F141DEC1C7F91383C3FC0
151FEC380FA2EC7807A21470121E003F13F0485D14E0A2D87E01130F007892C7FC00F013
C000E0141EEAF0035D0070495A15F839780781F0EC83E0003C495A003EEB1F80261F8F7E
C8FC3807FFF86C13E038007F80011EC9FCA2131CA22A4977C32E>36
D<EA01E0EA07F0EA0FF8A6EA07B8EA0030A31370136013E013C0120113801203EA070012
0E120C121C5A5A5A5A0D1B6CBE1C>39 D<ED01801507ED0F00151C5D5D5D14014A5A4A5A
4AC7FC141E143E5C14785C1301495AA2495A5C130F49C8FCA2133EA25BA213FC5B12015B
A212035B1207A25B120FA25BA2121FA290C9FCA25AA2123EA2127EA2127CA65AAB1278A6
7EA47EA2120E120F7EA26C7EA26C7E6C7E1360215A73C325>I<14031580A2EC01C0EC00
E0A21570A215781538153CA3151EA4151FA2150FA7151FA9153FA2153EA3157EA2157CA2
15FCA215F8A21401A215F0A2140315E0A2140715C0A2EC0F80A2141F15005C143EA25CA2
5CA2495A5C1303495A5C130F49C7FC131E5B137C5B5B485A485A485A48C8FC121E5A1270
5A5A205A7FC325>I<1660A316E05EA315015EA3150393C8FCA35D1506A3150E150CA315
1C1518A2B912FEA2C80030C8FCA315701560A315E05DA314015DA3140392C9FCA35C1406
A3140E140CA2373674B145>43 D<EA01E0EA03F81207120F13FCA213F8A2EA03D8EA0018
13381330A21370136013E013C01201EA038013005A120E5A5A5A5A5A0E1B7A881C>I<38
7FFFFCA3B5FCA21605799520>I<120EEA3F80127F12FFA31300127E123C090976881C>I<
1806180E180C181C183818301870186018E0EF01C01880170318005F1706170E5F171817
38173017705F5F16015F16034CC7FC1606160E160C161C161816385E166016E05E15014B
5A93C8FC5D1506150E150C151C5D15301570156015E04A5A5D140392C9FC5C140E140C14
1C14181438143014705C5C13015C130349CAFC1306130E130C131C5B13301370136013E0
5B1201485A90CBFC5A1206120E5A12181238123012705A5A375B80C32E>I<15FE913807
FF8091381F07C091387C01F0ECF000494813F8494813780107147C495A49C7FC167E133E
137EA25BA2485AA2000315FEA25B000715FCA2491301120FA34848EB03F8A44848EB07F0
A448C7EA0FE0A316C0007E141F12FE1680153FA2481500A2157EA25DA25D4813015D6C49
5A127C4A5A4A5A6C49C7FC143E6C5B380FC1F03803FFC0C648C8FC273F76BC2E>I<1506
150E151EA2153C157C15FC1401EC07F8140F143FEB01FF90380FF3F0EB1FC3EB0E071300
15E0A2140FA215C0A2141FA21580A2143FA21500A25CA2147EA214FEA25CA21301A25CA2
1303A25CA21307A25CA2130FA25CA2131FA25CEB7FC0B612E0A215C01F3D76BC2E>I<15
FE913803FFC091380F01F091383C00F84A137C4A7F4948133F49487F4A148049C7FC5BEB
0E0C011E15C0EB1C0EEB3C06133813781370020E133FD9F00C148013E0141C0218137F00
011600EBC0384A13FEEC600102E05B3A00E3C003F89039FF0007F0013C495A90C7485A5E
037FC7FC15FC4A5A4A5AEC0FC04AC8FC147E14F8EB03E0495A011FC9FC133E49141801F0
143C48481438485A1678485A48C85A120E001E4A5AD83FE0130301FF495A397C3FF01FD8
780FB55AD8700391C7FCD8F0015B486C6C5A6E5AEC07C02A3F79BC2E>I<ED7F80913803
FFE091380F80F891383C007C02F87FD901E07F494814804948130F49C7FC010E15C0131E
EB1C18EB3C1CEB380C0178141F17801370A2021C133F6D4814004A5BD91FE0137ED90F80
5B90C8FC4B5A4B5A4B5AED1F8003FFC7FCECFFFC15F0A2EC00FC153E153F8182150F82A4
151FA3123E007E143F00FE5DA3484AC7FC12E015FE5D14016C495A0070495A0078EB0FC0
0038495A6C017EC8FC380F01F83803FFE0C690C9FC2A3F78BC2E>I<1638167E16FE16FC
A3150116F8A3150316F0A2150716E0A2ED0FC0A3ED1F80A216005DA2157EA2157C15FC5D
14015D14035D4A5AA24A5AA24AC7FC143EED038091387C0FC014F8ECF01F01011480EB03
E014C0903807803F010F1400EB1F00133E495B49137E485A485A484813FE48B46C5A4813
F04813FE267C00FF130800F090380FFFFC00601301C714E0913803F8005DA314075DA314
0F5DA3141F5DA3020EC7FC274F7DBC2E>I<02C0EB018002F0130FD901FEEB7F0091B512
FE5E16F0495C1680DABFFCC7FCEC8180D90780C8FC91C9FCA35B130EA3131E131CA3133C
9038381FC0EC7FF0903839E07C90387F803E90387E001F137C01786D7E5B498090C7FCA6
151FA4000C143F003F5D5AA2157F4892C7FC5A00F814FE12E04A5A5D6C495A007013074A
5A0078495A6C495A003E017EC8FC6C485A380FFFF0000313C0C648C9FC293F77BC2E>I<
ED0FE0ED7FF8913801FFFE913807F01F91381F800F91383F0007027E133F02F8137F495A
495A13074948137E4948130049C8FCA2137E13FE5B12015B1203A23907F01FC0ECFFF039
0FE1E07C9038E7803E9038EE001ED81FFC131F01D8EB0F8013F84914C0485AA25B16E048
5AA290C7FCED1FC0A212FEA2153F1680A25A157F1600A215FEA24A5A5D007C13035D4A5A
6C495A4A5A6C017EC7FC380F81FC6CB45A6C13E0C66CC8FC283F76BC2E>I<ED7F809138
03FFE0020F7F91381FC0F891387F007C02FC7F495A4948133F49487F130F5C4948148013
3F91C7FC5BA213FE163FA212015B17005E12035B5EA25E15015B000114035E6D13070000
140F151F0178EB3BF8017C13736D13E390391F03C7F0903807FF07EB01FC90C7485AA25E
151F5E4BC7FCA2157EA25D003E495A007F495A5D4A5A00FE495A4849C8FC0070133E0078
13FC387E03F8383FFFE0000F1380D803FCC9FC293F78BC2E>57 D<131E137FEBFF80A314
00A25B133890C7FCB3A3120EEA3F80127F12FFA390C7FC127E123C112776A61C>I<EB01
E0EB07F0EB0FF8A314F0A214E0EB038090C7FCB3A3EA01E0EA03F81207120F7FA25BA2EA
03D8EA001813381330A21370136013E05B1201485A90C7FC5A120E5A5A5A5A5A15397AA6
1C>I<147F903801FFC0903807C0F090381E00784913380170133C49131C4848131E1203
485A90C7FC120E121E121C003C143E0038143C12780070147C15F812F800FEEB01F01403
EC07E048EB1FC0EC3F800070EB7F00C712FEEB03FC495AEB0FE0495A495A01FFC7FCEA01
FC485A5B485A5BEB80F0120F495A13015C495A6C48C7FC13FEEA01F8C9FCA9EA0380EA0F
E0121F123FA35B6C5A6CC8FC1F416FC02E>63 D<17381778A217FCA21601A216031607A2
160FA2161DA216391679167116E1A2923801C1FEA2ED0380A2ED07005D150E5DA25DA25D
15F05D14015D4A487FA24AC77EA2140E141E021FB6FC5CA20270C77EA25CA2495A13035C
49C8FC1880010E153FA25B133C1338137813F80001167FD807FCEDFFC0B500C0013F13FF
A25C38417BC043>65 D<49B77E18F018FC903B0003FC0001FEEF007F4BEC3F8019C0181F
14074B15E0A2180F140F4B141FA3021F16C04B143FA21980023FED7F004B5C4D5A60027F
4A5A92C7EA0FF0EF1FC0EF7F804AD903FEC7FC92B512F017FE4AC7EA3F8001016F7E4A6E
7E717E717E13034A6E7EA30107825CA3010F5E4A1403A260011F15075C4D5A4D5A133F4A
4A5A4D5A017F4BC7FCEE03FE91C7EA0FF849EC3FF0007F90B612C0B8C8FC16F03B3E7BBD
3F>I<9339FF8001C0030F13E0033F9038F803809239FF807C07913A03FC001E0FDA0FF0
EB0F1FDA3FC09038079F004AC76CB4FC02FE80495A49486E5A495A495A4948157E494815
7C137F49C9FC5B00011778485A5B12071870485AA2485A95C7FC123F5BA2127F5BA312FF
90CCFCA55A170FA2170EA2171E171C173C17381778007F167017F04C5A6C5E6D1403001F
4B5A6D4AC8FC6C6C141E00075D6D14F8D803FCEB01E0C66CEB07C090267FC03FC9FC9038
1FFFFE010713F0010013803A4272BF41>I<49B812F8A390260003FCC7123F18074B1403
1801F000F014075DA3140F5D19E0A2141F4B1338A2EF7801023F027013C04B91C7FCA217
F0027F5CED00011603160F91B65AA39138FE001F0101EC07805CA3010392C8FC5C18074C
5B0107020E130E5C93C7121E181C010F163C4A15381878A2011F5E5C4D5AA2013F15034A
4A5A170F017F151F4D5A91C812FF49020F90C7FC007F90B7FCB9FC5F3D3E7BBD3D>69
D<49B812F0A390260003FCC7123F180F4B14071803F001E014075DA3140F5D19C0A2141F
5D1770EFF003023F02E013804B91C7FCA21601027F5CED0003A216074AEB1F8092B5FCA3
902701FE003FC8FC4A7F82A20103140E5CA2161E0107141C5CA293C9FC130F5CA3131F5C
A3133F5CA2137FA291CBFC497E007FEBFF80B6FCA23C3E7BBD3B>I<49B5D8FC01B512FC
A390260003FEC73803FE004B5D4B5DA2180714074B5DA2180F140F4B5DA2181F141F4B5D
A2183F143F4B5DA2187F147F92C890C7FCA26091B8FC60A24AC7120113014A5DA2170313
034A5DA2170713074A5DA2170F130F4A5DA2171F131F4A5DA2173F133F4A5DA2017F157F
A291C890C8FC496C4A7EB690B6FCA24A5D463E7BBD43>72 D<49B512FEA216FC90390003
FE005D5DA314075DA3140F5DA3141F5DA3143F5DA3147F92C7FCA35C5CA313015CA31303
5CA313075CA3130F5CA3131F5CA3133F5CA2137FA291C8FC497EB6FCA3273E7BBD23>I<
902601FFFC91381FFFFC81A2D90001030013804A6CED7E00197C1938701478EC07BF033F
157082031F15F0140F020E6D5C150F701301141EDA1C075D8203031403143C02386D5C15
01180702787FDA700092C7FCA2705B02F07F4A150E1780043F131E13014AECC01C161FEF
E03C13034A010F133817F004071378130791C7EBF870160318F04915FC010E02015BA217
FF011E80011C5EA2177F133C01385E173F137813F8486C6FC8FCEA07FEB500F080A24A14
0E463E7BBD43>78 D<EE7FC0923807FFF892383F807E9239FC001F80DA01F0EB07C0DA07
E06D7EDA0F806D7E023FC77F027E6E7E4A157C4948157E495A494881495A011F1780495A
91C9121F5B01FE17C0A2485A12035B120749163F120FA25B121F19804848167FA44848EE
FF00A34D5AA390C9485A5A6017076C5F170F604D5AA24D5A4DC7FC6C6C157E17FE001F4B
5A4C5A6D4A5A000F4B5A6C6C4A5A4CC8FC6C6C147E6C6C5C6C6CEB03F0013FEB0FC09026
1FC07FC9FC903807FFFC010013C03A4274BF45>I<49B77E18F018FC903B0003FC0003FE
EF00FF4BEC3F80F01FC01407F00FE05DA2020F16F0A25DA2141FF01FE05DA2023F16C018
3F4B1580187F027F160018FE92C7485A604AEC07F04D5A4AEC3F804CB4C7FC49B612F817
E002FCCAFCA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA25CA2137FA291CB
FC497E007F13FEB5FCA23C3E7BBD3D>I<49B612FCEFFF8018F0903B0003FC000FF8EF01
FE4B6D7E84F03F800207ED1FC05DA219E0140F5DA3021FED3FC05DA2F07F80143F4B1500
18FE4D5A027F5D92C7485AEF0FE0EF1F804A027EC7FC4AEB07F891B612E01780903A01FE
000FE04AEB03F0707E707E0103814A147E177FA213075CA25F130F5C5F1601131F5CA301
3F020314404A16E05F017F160119C091C700011303496C1680B61507933900FE0F004AEC
7E1ECAEA1FFCEF07F03B407BBD42>82 D<92390FF001C0ED7FFE4AB5EA0380913907F00F
C791390FC003EF91381F0001023E903800FF004A805C495A4948143EA2495AA2010F153C
5CA3011F1538A46E91C7FCA2806D7E14FCECFFC06D13F86D13FF16E0010014F86E7F021F
7F02037FEC003F03077F1500167F707E161FA2160FA212075A5F120EA2001E151F94C7FC
A25E003E153E5E123F5E486C495A4B5A6D1307D87DE0EB0F80D8F8F849C8FCD8F07F13FE
90383FFFF8D8E00F13E048C690C9FC32427ABF33>I<48B9FCA3489039001FE00101F8ED
007FD807E04A133F49161F49161E000F143F90C75BA2121E157F001C92C7FC003C171C12
385D00785C1270183C00F001011538C7491400A314035DA314075DA3140F5DA3141F5DA3
143F5DA3147F92C9FCA35C5CA313015CA21303A25CEB0FFC003FB6FCA3383E71BD41>I<
001FB5D8C001B512C0A326003FE0C7380FF8004AEC07E04A5D715A017F1507A291C890C7
FCA2495D170E5BA20001161E171C5BA20003163C17385BA20007167817705BA2000F16F0
5F5BA2001F15015F5BA2003F1503A2495DA2007F1507A290C890C8FCA25E160E12FE161E
161C163C007E153816785E5E15016C4A5A4B5A6C6C49C9FC153E6C6C5B3907E001F03903
F80FE0C6B51280D93FFECAFCEB0FF03A406FBD43>I<B500F891387FFFC094B5FC1980D8
07FEC8380FF8006C48ED07E0495E604DC7FC7F0001160E5F173C17385FA25F16015F4C5A
7F4CC8FC00005D160E5EA25EA25E16F05E6D495AA26D495A150793C9FC150EA25D153C15
385D14805D133FEC81C014835D0287CAFCA2148E149E149C14F8A26D5AA25C5CA25CA291
CBFC131EA23A406DBD43>I<267FFFF890B500F890B512C0B5FC60000390C7D807FEC738
0FF80001FCDA03F86E5A745A6300014F5A98C7FC16071A0E040F151E1A1C041F153C1A38
043B5DA204735D16F304E34A5A150104C34A5AED03834FC8FCED0703190E150E715B031C
153C0401143803381578197003705D15F003E04A5A140103C04A5AEC038001FE4CC9FC00
00EB0700180E140E604A153C18384A157818704A5DA24AECFDC013FF4AECFF80A24A92CA
FC91C7FC5F5B5F5B5F5B705A5B5F52406EBD5A>I<913801FFF85CEDF000A314075DA314
0F5DA3141F5DA3143F92C7FCA35C147EA314FE5CA313015CA313035CA313075CA3130F5C
A3131F5CA3133F91C8FCA35B137EA313FE5BA312015BA312035BA312075BA3120F5BA312
1F5BA3123F90C9FCA35A127EA3EAFFFEA2255B7DC31C>91 D<913801FFF8A2EC000316F0
A3150716E0A3150F16C0A3151F1680A3153F1600A35D157EA315FE5DA314015DA314035D
A314075DA3140F5DA3141F5DA3143F92C7FCA35C147EA314FE5CA313015CA313035CA313
075CA3130F5CA3131F5CA3133F91C8FCA35B137EA2EAFFFEA2255B83C31C>93
D<007FB81280B9FCA27E31047C6E45>95 D<13181338137013E0EA01C0EA0380EA070012
06120E120C121C5A1230A212701260A212E012DEEAFF80A513007E123C0D1B6DBE1C>I<
147E49B47E903907C1C38090391F80EFC090383F00FF017E137F4914804848133F485AA2
48481400120F5B001F5C157E485AA215FE007F5C90C7FCA21401485C5AA21403EDF0385A
A21407EDE078020F1370127C021F13F0007E013F13E0003E137FECF3E1261F01E313C03A
0F8781E3803A03FF00FF00D800FC133E252977A72E>I<EB1FC0EA0FFF5CA2EA003FA291
C7FCA25BA2137EA213FEA25BA21201A25BA21203A25B147C3807F1FF9038F787C09038EE
03E09038FC01F0EA0FF801F013F814005B485A15FC5B1401123FA21300A248130315F812
7EA2140700FE14F05AA2EC0FE0A348EB1FC01580143F1500147E1278007C5B495A383C03
F06C485A380F0F80D807FEC7FCEA01F81E4076BE29>I<EC1FC0ECFFF0903803F07C9038
0FC01E90381F000E013E130F49131F01FC137F485A485A0007147E5B000F143848481300
A2485AA3127F90C8FCA35A5AA55A1506150E007E141E153C1578003E14F0003FEB01E06C
EB07C0390F800F003807C07E3801FFF038007F80202977A729>I<EE3F80ED1FFF1700A2
ED007FA2167EA216FEA25EA21501A25EA21503A25EA21507A25E147E903801FF8F903807
C1CF90391F80EFC090383F00FF017E137F5B48486D5A485AA2485A000F92C7FC5B001F5C
A24848137EA215FE127F90C75AA214015A485CA2140316384814F0A21407167891380FE0
70127C021F13F0007E013F5B003E137FECF3E1261F01E35B3A0F8781E3802703FF00FFC7
FCD800FC133E294077BE2E>I<143F903801FFE0903807C0F090381F0078137E49133C48
5A485A12074848137C491378121F484813F8EC01F0007FEB07E09038001FC0903801FF00
EBFFF8B5128048C8FCA45AA6150C151C153C007C147815F0007EEB01E0003EEB03C06CEB
0F806CEB1E00380780FC3803FFE0C690C7FC1E2976A729>I<167C4BB4FC923807C78092
380F83C0151F160FED3F1FA2157E1780EE0F0093C7FC5DA414015DA414035DA30103B512
F8A390260007E0C7FCA3140F5DA5141F5DA4143F92C8FCA45C147EA414FE5CA413015CA4
495AA4495AA4495AA2121C007E5B12FE49C9FCA2EAFC1E485A12F0EA7878EA3FE0EA0F80
2A5383BF1C>I<EC03E0EC1FF891383E1E389138F80EFC903801F007EB03E001071303D9
0FC013F8EB1F80133F14004914F0137E01FE1307A2484814E0A2150F12034914C0A2151F
1207491480A2153FA2491400A25DA2000314FE140113F0000113034A5A3800F80EEB7C3D
EB1FF1903807C1F8EB00011403A25DA21407A25D140F003C5C127E00FE495A4AC7FC147E
485B38F001F8387C03E0383FFF80D807FEC8FC263B7CA729>I<EB01FC13FF5CA21303A2
5CA21307A25CA2130FA25CA2131FA25CA2133FA291C8FCEC03F890387F0FFE91383E0F80
D97E7813C0ECE007D9FFC013E014801400A2485A5BA25B0003140F16C05BA20007141F16
805BA2000F143F16005B5D001F147EEDFE074913FCA2003F0101130FEDF80E1300161E48
ECF01CA2007E1538A200FE1570020013E048EC7FC00038EC1F0028407ABE2E>I<1470EB
01FCA314F8A2EB00E01400AD137C48B4FC38038F80EA0707000E13C0121E121CEA3C0F12
38A2EA781F00701380A2EAF03F140012005B137E13FE5BA212015BA212035B1438120713
E0000F1378EBC070A214F0EB80E0A2EB81C01383148038078700EA03FEEA00F8163D79BB
1C>I<ED0380ED0FC0151FA31680ED0F0092C7FCADEC07C0EC3FF0EC78F8ECE07CEB01C0
1303EC807EEB0700A2010E13FE5D131E131CEB3C01A201005BA21403A25DA21407A25DA2
140FA25DA2141FA25DA2143FA292C7FCA25CA2147EA214FEA25CA213015CA3383C03F012
7E38FE07E05C495A4848C8FCEAF03EEA707CEA3FF0EA0FC0224F83BB1C>I<EB01FC13FF
5CA21303A25CA21307A25CA2130FA25CA2131FA25CA2133FA291C8FCED07C049EB1FF0ED
7838017EEBE078913801C1FC9038FE038191380703F8EBFC0E140C000190381C00E04A13
00495A5C3803F9C0EBFB8049C8FC13FE485AEBFFC0EBEFF0EBE1FC380FE0FE147F497E6E
7E121F16E01380A2003F1481023F13C001001301A24814031680007EEB1F07160000FE5C
EC0F1E48EB07FC0038EB01F026407ABE29>I<EB07F0EA03FF14E0A2EA000FA214C0A213
1FA21480A2133FA21400A25BA2137EA213FEA25BA21201A25BA21203A25BA21207A25BA2
120FA25BA2121FA25BA2123FA290C7FCA25A1307127EA2EAFE0F130E12FCA2131E131CA2
EA7C381378EA3C70EA1FE0EA0780144079BE17>I<D801F0D93F80137F3D07FC01FFE003
FFC03D0F3E07C1F80F83F03D0E1F0F00FC1E01F8001E011C90387C3800001C49D97E707F
003C01F05C0038157F4A5C26783FC05C12704A91C7FC91C7127E00F003FE1301494A5CEA
007EA20301140301FE5F495CA203031407000160495C180F03075D0003051F13E0494A14
80A2030FEC3F810007F001C0495CA2031F91383E0380120F494AEC0700A2033F150E001F
EF1E1C4991C7EA0FF80007C7000EEC03E0432979A74A>I<D801F0EB3F803A07FC01FFE0
3A0F3E07C1F83A0E1F0F00FC001E011C137C001C49137E003C13F012385C38783FC01270
5C91C7FC00F015FE495CEA007EA2150101FE5C5BA2150300015D5B15075E0003020F1370
4914C0A2031F13F00007ED80E05B1681EE01C0120F49EC0380A2EE0700001FEC0F0E49EB
07FC0007C7EA01F02C2979A733>I<EC1FC0ECFFF8903803F07C90380FC01FEB1F809039
3F000F80017E14C0491307484814E0485A12075B000F15F0485AA2485AA2ED0FE0127F90
C7FCA2151F4815C05AA2ED3F80A2ED7F00A248147E007C5C007E13015D4A5A003E495A6C
495A4A5A260F803EC7FC3807C0FC3801FFF038003F80242977A72E>I<903903E001F890
390FF807FE903A1E7C1E0F80903A1C3E3C07C0013C137801389038E003E0EB783F017001
C013F0ED80019038F07F0001E015F8147E1603000113FEA2C75AA20101140717F05CA201
03140F17E05CA20107EC1FC0A24A1480163F010F15005E167E5E131F4B5A6E485A4B5A90
393FB80F80DA9C1FC7FCEC0FFCEC03E049C9FCA2137EA213FEA25BA21201A25BA21203A2
387FFFE0B5FCA22D3A80A72E>I<027C13C0903801FF03903807C38790391F01CF809038
3E00EF4913FF01FC137F48481400485AA2485A000F147E5B121F15FE48485BA3007F1301
01005BA3481303485CA31407485CA3140F5D007C131F143F147F6C495A5B381F03DF380F
07BF2607FE3FC7FCEA01F8C7FC5C147EA314FE5CA313015CA21303130748B512E0A3223A
77A729>I<D801F013FE3A07FC03FF803A0F3E0F03E0390E1F1C01001EEB3807001C0170
13F0003C9038F00FE0003813E014C0D8783FEB0380007049C7FCA291C8FC12F05BEA007E
A313FE5BA312015BA312035BA312075BA3120F5BA3121F5B0007C9FC242979A726>I<EC
7F80903801FFE0903807C0F890381E003C49131C151E49130E49133E157EA20001147CA2
15106D13007FEBFF8014F86C13FF15806D13C0011F13E013079038007FF0140F1403A214
01123E007E1300007F130100FE14E0A25A48EB03C048EB078012700078EB0F006C133C00
1F13F83807FFE0C690C7FC1F297AA725>I<EB01C0EB03F01307A25CA2130FA25CA2131F
A25CA2133FA291C7FCA2007FB51280B6FC1500D8007EC7FC13FEA25BA21201A25BA21203
A25BA21207A25BA2120FA25BA2121F141C1380A2003F133C1438EB0078147014F05C495A
EA1F03495A6C48C7FCEA07FCEA01F0193A78B81E>I<137C48B4143826038F8013FCEA07
07000E7F001E1401121CD83C0F5C12381503EA781F007001805BA2D8F03F130714000000
5D5B017E130FA201FE5C5B151F1201495CA2153F0003ED8380491403A2157F1607037E13
00A2EDFE0F160E000113019039F803BE1C0000EB073E90397C1E1E3890393FF80FF09039
07E003E0292979A730>I<017CEB038048B4EB07E039038F800FEA0707000E01C013F012
1E001C1407EA3C0F0038140316E0D8781F130100701380A2EAF03F020013C012005B017E
1303168013FE5B1507000115005BA2150E12035B5DA25DA25DA200015C4A5AEBF8030000
495AD97E0FC7FCEB1FFCEB07F0242979A729>I<017C167048B491387001FC3A038F8001
F8EA0707000E01C015FE001E1403001CEDF000EA3C0F0038177C1507D8781F4A133C0070
1380A2D8F03F130F020049133812005B017E011F14784C137013FE5B033F14F0000192C7
12E05BA2170100034A14C049137E17031880A2EF070015FE170E00010101141E01F86D13
1C0000D9039F5BD9FC076D5A903A3E0F07C1E0903A1FFC03FFC0902703F0007FC7FC3729
79A73C>I<903903E003F090390FF80FFC90393C3C1C1F9039701E380F9039E01F703F00
0102F013803B03C00FE07F001380000714C0D9001F131C4892C7FC000E5CA2001E133FA2
C790C8FCA25C147EA314FE5CA313014A1338A3010314781670001C4913F0007E5D010713
0100FE5D010F495A90380EF80727781C780FC7FC9038383C3C393FF01FF83907C007E029
297CA729>I<137C48B4143826038F8013FCEA0707000E7F001E1401001C15F8EA3C0F12
381503D8781F14F000701380A2D8F03F1307020013E012005B017E130F16C013FE5B151F
1201491480A2153F000315005BA25D157EA315FE5D00011301EBF8030000130790387C1F
F8EB3FF9EB07E1EB00035DA214075D121F486C485AA24A5AD87F0090C7FC007E133E0038
137E5CEB01F06C485A381E0FC0D807FFC8FCEA01F8263B79A72C>I<D901F01370D907FC
13F0010F14E090381FFE0190393FFF03C049EB838090387C0FCF9039F803FF009038F000
7E49133C000114386C48137890C75A4A5A4A5A4A5A4AC7FC141E5C5C5C495A495A495A49
C8FC131E4913075B5B48485B4848131E485A01F05BD80FFE137C391F1F81F8383E0FFFD8
3C075B486C5B00705CD8F00190C7FC38E0007C24297BA725>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh ectt1440 14.4 4
/Fh 4 116 df<4AB4EB0780020F01E013C0027FEBF80F91B512FE0103ECFF1F49159F49
15DF49018013FF90393FFC001FD97FF07F49487F4A7F4890C77E484880A24848157F5B48
48153FA2485AA249151F123F5BA2007FEE0F8090CBFCA45A5AAD7E7EA47F003FEE0F80EF
1FC07F121F7FA26C6C153F18806C7E7F6C6C157FEFFF006C7E6C01C0495A6E495A6D6C13
07D93FFCEB1FF86DB46CB45A6D90B55A6D5D6D5D01004AC7FC6E5B020F13E0020190C8FC
324B7BC93D>67 D<90380FFFC090B512F8000314FE486E7E4881824881D9F8007F49EB1F
FC15076F7E6C4813016C486D7EC97E83163FA6ED7FFF021FB5FC49B6FC130F133F90B7FC
0003ECFC3F48EBFC004813C04848C7FCEA3FF05BEA7F8090C8FC5A5AA56C157F7E6D14FF
6D1303D83FF0010F13E001FE90B612F06CB812F87E6C15CF6C15076CECFC036C6C9039E0
007FF0D90FFEC9FC353679B43D>97 D<EA7FFEB5FCA57EC67EAEED3FE0913801FFFC0207
7F021F6D7E5C4A8091B67EEDC07F9139FE001FF04A130F4A13074A805C4A1303A25CA391
C7FCB3A9007FB548B512F8B6008314FC1587A315836C020114F836497DC83D>104
D<903901FFF00F011F01FE138090B6129F000315FF5A5A5A48EB001FD87FF0130701C013
01497F48C8127F5A163FA37E7E6DEC1F0001E091C7FCEA3FFC381FFFE06C13FF6C14FC00
01ECFF806C6C14E0010F14F8010014FE02077FDA001F1380030113C09238007FE0007C15
1F00FEED0FF0160717F86C1503A37F7F16076DEC0FF07F6D143F01FEECFFE09026FFC007
13C091B6FC178000FC1600013F14FC010F14F0D8F80314C02778007FFCC7FC2D3678B43D
>115 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fi ecrm1095 10.95 96
/Fi 96 126 df<486C1360000314E039070001C0000EEB0380000C1400001C5B00181306
0038130E0030130C0070131C00601318A200E01338481330A500CEEB338039FF803FE001
C013F0A3007F131FA2393F800FE0390E0003801C1B80BE1E>16 D<001C1307007FEB1FC0
39FF803FE0A201C013F0A3007F131F001CEB073000001300A500011470491360A2000314
E090C712C048130100061480000E1303000C1400001C5B48130E485B006013181C1B7FBE
1E>I<B812F0A22C0280982D>21 D<BE1280A2590280985A>I<DA03FFEB0FE0021F9038C0
7FF8913AFE00F1F81CD901F890383BE07ED907E090387FC0FF90390FC001FFD91F805CD9
3F005C5B017E167E01FE6D48130049147EAEB91280A3D800FCC7007EC7FCB3AE486C14FF
277FFFF83F13FFA338407FBF35>27 D<EC03FE91381FFFC09138FE01E0903901F80078D9
07E0131C4948137C494813FE90383F00015B137E13FE496D5A167893C7FCAB167EB712FE
A33900FC00011500167EB3AC486C14FF277FFFF83F13FCA32E407FBF32>I<EC03FF021F
13EE9138FE00FEEB01F8903807E001EB0FC0EB1F80EB3F005B017E130001FE147E5BAEB7
12FEA3D800FCC7127EB3AE486C14FF277FFFF83F13FCA32E407FBF32>I<DA03FE49B4FC
91271FFF800F13E0913BFE01E07F00F0902801F80078FC133CD907E0D91BF0130E4948D9
7FE0133E4948484848137FD93F004A5B5B017E92C7FC13FE494A147EDB007E143C96C7FC
AB193FBBFCA3D800FCC7007EC7FC8585B3AC486C02FFEC7F80277FFFF83F9039FC1FFFFE
A347407FBF4B>I<DA03FE49B47E91271FFFC00F13F7913BFE01F07F007F903A01F80038
FCD907E0D9FFF05B4948485BD91F805CD93F005C5B017E92C77E01FE6D8149147EAEBBFC
A3D800FCC7007EC7123FB3AE486C02FFEC7F80277FFFF83F9039FC1FFFFEA347407FBF4B
>I<121C127FEAFF80A9EA7F00AC123EAC121CACC7FCA9121C127FEAFF80A5EA7F00121C
094178C019>33 D<003E131F007FEB3F80A239FF807FC0397F003F80A9007E131F003E14
00A9001C130EA9001813061A2177BF2D>I<14E0A4EB07FC90383FFF8090B512E03901F8
E3F03903E0E07CD807C0131CD80F807FD81F007F003E80003C1580007C140116C0007814
0700F8141F153FA47EED1F806C91C7FCA2127F138013C0EA3FF013FEEA1FFF6C13FC6C13
FF6C14C06C806C6C13F8011F7F130301007FECE7FF14E102E01380157F153FED1FC0A200
18140F127EB41407A55A00E01580150F1260007015005D6C141E003C143E6C5C6C5C3907
80E1F03903F0EFE0C6B51280D93FFEC7FCEB0FF8EB00E0A422497BC32D>36
D<013F1603D9FFC0ED07802601E0E0150F2607C070151F48486CED3F00D9001E157E001E
6D15FE003E02C0EB03FCDA06F0EB0FF8003CD9073F13FD007C903A030FFFF1F00300EB03
E00078ED000700F86E5C02014A5A171F95C7FC173E177E177C5F16015F0203495A0078EC
0007007C5E4C5A003C49131F003E010691C8FC020E133E001E010C137E6C011C137C6D48
5B3907C070012601E0E05B6CB448485A90263F0007147E90C79039C001FF80923A0F8003
C1C0031F90380F80E09339001F0070033E011E1338037E491318037C017C131C4B150C02
010278130E4B01F813064A5A02075CDBC0011407DA0F801503141F1500143E147E147C5C
13015C494816070107020014064A80495A011F0378130E91C8007C130C013E171C017E03
3C1318017C6F133849031F1370000193380F80E049923803C1C049923801FF806C489238
007E0040497BC34B>I<EC0F80EC3FE0ECF870903801E03001031338903807C018A29038
0F801C150CA2131F1400A21480A2151C15181538153015705D5DEB0FC1ECC38002C7CAFC
14C602EE91383FFFF8EB07FC5C4A020713800103923801FC00715A6E5D60496C4A5A010F
5ED91CFE1403013893C7FCD9707F5C01E0150E48486C6C130CD803806D131C0007011F14
1848486C6C1338486E5B02071460003E6E13E0007E6D6C5B0201130100FE6E485A6E6C48
C8FC157FED3F8E16DCDB1FF814306C6E5A15076C6E6C14706D6E1460003F4A6C14E06DD9
0F7F14C06C6C90393C3F80016C6C903AF81FE007803D07F807E007F81F000001B539C003
FFFE6C6C48C713F8D90FF0EC1FE03D437CC046>I<121C127FEAFF80A213C0A3127F121C
1200A512011380A2120313005A1206120E120C121C5A5A12600A1B78BE19>I<14301470
14E0EB01C0EB0380EB07005B131E5BA25B5BA2485AA2485AA212075B120FA290C7FC5AA2
121E123EA3123C127CA6127812F8B21278127CA6123C123EA3121E121FA27E7FA212077F
1203A26C7EA26C7EA213787FA27F7F7FEB0380EB01C0EB00E014701430145A77C323>I<
12C07E12707E7E7E120F6C7E6C7EA26C7E6C7EA21378A27FA2133E131E131FA27F1480A2
130714C0A3130314E0A6130114F0B214E01303A614C01307A31480130FA214005BA2131E
133E133CA25BA25BA2485A485AA2485A48C7FC120E5A5A5A5A5A145A7BC323>I<EB03C0
A2805CA600F0140F00FC143F00FE147F00FF14FF393FC3C3FC390FE187F03903F18FC039
00FDBF00EB3FFCEB0FF0EB03C0EB0FF0EB3FFCEBFDBF3903F18FC0390FE187F0393FC3C3
FC39FF03C0FF00FE147F00FC143F00F0140F00001400A6805CA220277AC32D>I<1506B3
ABBA12E0A2C80006C9FCB3AB3B3C7BB446>I<121C127FEAFF80A213C0A3127F121C1200
A512011380A2120313005A1206120E120C121C5A5A12600A1B788819>I<B512FEA51705
7F951E>I<121C127FEAFF80A5EA7F00121C0909788819>I<16C0A215011680A215031600
5D1506A2150E150CA2151C1518A215381530A21570156015E05DA214015DA2140392C7FC
A25C1406140E140CA2141C1418A214381430A214701460A214E05C13015CA2130391C8FC
A25B1306A2130E130CA2131C131813381330A213701360A213E05BA212015B120390C9FC
A25A1206A2120E120CA2121C1218A21238123012701260A212E05AA2225B7BC32D>I<EB
03FC90381FFF8090383E07C09038F801F048486C7E4848137C49133C0007143E48487FA2
48C7EA0F80A24815C0A4007EEC07E0A500FE15F0B3A3007E15E0A4007F140F6C15C0A46C
15806D131F000F1500A26C6C133EA26C6C5B6C6C5B6C6C485A90383E07C06DB45AD903FC
C7FC243F7CBC2D>I<14C013031307131F137FEA07FFB5FC139FEAF81F1200B3B3ACEB7F
F0B612F8A31D3D78BC2D>I<EB07FC90383FFF8090B512E03901F00FF839078003FC4848
6C7E000E6D7E48EC7F8048EC3FC012300070EC1FE01260A200FEEC0FF07E7FA56CC7FC12
1CC813E0151FA216C0153F1680157F160015FE4A5AA24A5A4A5A4A5A5D4A5A023EC7FC5C
5C495A495A5C495A49C71230131E5B5B491460485A485A485A90C812E048B6FC5A5A4815
C0B7FCA3243D7CBC2D>I<EB07FC90383FFF8090B512E03901F807F83907C003FC48C66C
7E000E6D7E48EC7F80EA1F80486CEB3FC07FA56C5A0007C7FCC81380157FA216005D5D4A
5A4A5A5DEC0FC0023FC7FCEB1FFCECFF809038000FE0EC03F86E7E6E7E157F1680ED3FC0
A216E0A2151F16F0A2120C123F487E487EA4ED3FE05B6CC713C01270ED7F807E6CECFF00
000F495A3907C003FC3903F80FF0C6B55A013F1380D907FCC7FC243F7CBC2D>I<150EA2
151E153EA2157E15FEA214011403A21406140E140C141814381430146014E014C0EB0180
130314001306130E130C5B133813305B13E05B485A120390C7FC1206120E120C5A123812
305A12E0B8FCA3C8EAFE00AC4A7E49B6FCA3283E7EBD2D>I<00061403D807C0130F01F8
13FE90B55AA215F05D5D92C7FC38063FF890C9FCADEB01FE90380FFF8090383E03E09038
7001F8496C7ED807C0137E497F90C713800006141FC813C0A216E0150FA316F0A4123E12
7F487EA490C713E048141F12E0006015C012700030EC3F8012386CEC7F00001E14FE6C49
5A3907C003F83903F00FE0C6B55A013F90C7FCEB07F8243F7CBC2D>I<EC1FE0ECFFF801
0313FE90380FF01F90391F80078090383F0003017EEB0FC049131F4848133F485AA2485A
000FEC1F8049EB0F00001F91C7FCA25B123FA3127F90C9FCEB01FE903807FF8039FF0E03
E0496C7E90383800FC49137E0160133E01E0133F49EB1F8016C05B16E0150FA290C713F0
A67EA56C7E16E0A2121FED1FC07F000F1580153F6C6C14006C6C137E6C6C5B6C6C485A90
387E07F06DB45A010F1380D903FCC7FC243F7CBC2D>I<12301238123E003FB612FCA316
F85A16F016E00070C8FC0060EC01C0ED038016005D48140E150C151C5DC8123015705D4A
5A5D14034AC7FCA2140EA25CA2143C14381478A214F85C1301A31303A313075CA3130FA5
131FAA6D5A6D5A26407BBD2D>I<EB03FC90381FFF80017F13E09038FC03F83901E000FC
4848133E48487F48C77E000E1580001E1407001C15C0003C1403A3123EA2123F15076D14
80D81FE0130F6D140001FC131E6C6C5B6D6C5A6C6D5A6CEBF1E06CEBFF806C91C7FC133F
6D13C06D7F4913F801787F48486C7E3903C01FFF48486C1380260F000313C0487F001E90
38007FE048143F007C140F0078EC07F0150312F8481401A21500A46C15E000781401A200
7C15C06C1403001EEC0780001FEC0F00D80FC0131E6C6C137C3901FC03F86CB512E0011F
1380D903FCC7FC243F7CBC2D>I<EB03FCEB1FFF4913C09038FE07F03901F801F848486C
7E4848137C000F147E48487F5B003FEC1F80A2127F90C713C0A25AED0FE0A516F0A66C14
1FA27F123F153F121F6C6C137F0007146F6D13EF3903F001CF3900F8038F90387C070FD9
1FFE13E0EB07F890C7FC151FA216C0A3ED3F80A2000F1500486C5B486C137EA25D4A5A13
8049485A001C495A001EEB1FC0260FC07FC7FC3803FFFE6C13F838003FC0243F7CBC2D>
I<121C127FEAFF80A5EA7F00121CC7FCB3A3121C127FEAFF80A5EA7F00121C092778A619
>I<121C127FEAFF80A5EA7F00121CC7FCB3A3121C127FEAFF80A213C0A3127F121C1200
A512011380A2120313005A1206120E120C121C5A5A12600A3978A619>I<EB3FF890B5FC
3903C01FC0390F0007F0001CEB01F84814FC48EB00FE1260007C147F12FE7EA4127E003C
14FFC812FEA2EC01FCEC03F8EC07F0EC0FE01580EC1F00143E143C5C14F85C5C13015C5C
1303A291C7FCAB90C8FCA91307EB1FC0497EA56D5A0107C7FC20407BBF2B>63
D<1507A34B7EA24B7EA34B7EA34B7E156FA2EDCFF815C7A291380187FC1583A291380301
FEA391380600FFA2020E80020C137FA2021C800218133FA24A80161FA24A80160FA24A6D
7EA349486D7E91B6FC4981A291C712014981010680A24982177FA24982173FA2496F7EA2
1370717E13F0000183487ED80FFEED3FFEB500C00107B512F8A33D417DC044>65
D<B712FCEEFFC017F0C69039C0000FFC6D48EB03FEEE00FFEF7F80EF3FC018E0171F18F0
170F18F8A718F0171F18E0173F18C0EF7F80EFFF00EE03FEEE0FF8EE7FE091B6C7FC17E0
9139800003FCEE00FEEF7F80EF3FC0EF1FE0EF0FF018F8170718FC1703A218FEA718FC17
07A2EF0FF818F0171FEF3FE0EF7FC0933801FF80496C90380FFE00B85A17E094C7FC373E
7DBD40>I<DB3FF0130C912603FFFE131C021FEBFF80913A7FE00FC03C913AFF0001F07C
D903FCEB0078D907F0EC3CFCD91FE0140F494814074948140349C8FC4848150149150012
034848167CA24848163CA24848161CA2123F5B180C127FA349160012FFAC127F7F180CA2
123FA27F001F171C18186C7EA26C6C163818306C6C1670000117606D16E06C6CED01C06D
6CEC03806D6C14076D6CEC0F00D907F0141ED903FC5CD900FF14F091397FE007E0021FB5
1280020349C7FC9138003FF036427BBF41>I<B712FCEEFF8017E0C69039C0001FF86D48
EB03FEEE00FFEF3F80717E717E717E717E717EA2717E84841980183F19C0A319E0181FA4
19F0AB19E0A4183F19C0A21980187FA2190018FEA24D5A4D5A17074D5A4D5A4D5A05FFC7
FCEE03FE496CEB1FF8B85A178004FCC8FC3C3E7DBD45>I<B912C0A3C69038C000016D48
EB001FEF0FE01703A217011700A31860A418301630A41800A21670A216F01501150791B5
FCA3EC8007150115001670A21630A21806A3180C93C7FCA4181C1818A21838A21878A218
F0170117031707171F496CEB01FFB912E0A3373E7DBD3D>I<B91280A3C69038C000036D
48EB003FEF1FC017071703A21701A31700A41860A21630A31800A31670A216F015011507
91B5FCA3EC8007150115001670A21630A693C8FCAFEBFFE0B612F0A3333E7DBD3B>I<DB
3FF0130C912603FFFE131C021FEBFF80913A7FE00FC03C913AFF0001F07CD903FCEB0078
D907F0EC3CFCD91FE0140F494814074948140349C8FC4848150149150012034848167CA2
4848163CA24848161CA2123F5B180C127FA34993C7FC12FFAB041FB512F0127F7F933900
0FFE00EF03FC123FA27F121FA26C7EA26C7EA26C7E6C7EA26C7E6D6C14076D7E6D6C140F
D907F8141C6D6CEC387CD900FFECF03C913A7FF007E01C021FB5EA800C020349C8FC9138
003FF03C427BBF47>I<B6D8C01FB512F8A3C601C0C7381FF8006D486E5AB3A691B7FCA3
0280C7120FB3A9496C4A7EB6D8C01FB512F8A33D3E7DBD44>I<B612C0A30001EBE00038
007F80B3B3B23801FFE0B612C0A31A3E7DBD21>I<010FB512F8A3D900071300EC01FEB3
B3A7123FEA7F80EAFFC0A44A5A1380D87F005B006C130700705C6C495A6C495A000F495A
2603C07EC7FC3800FFF8EB3FC025407DBD2E>I<B600C090380FFFF8A3C601C0C7000313
806D48913801FC006018E04D5A604DC7FC170E5F5F17F0EE01C04C5A4CC8FC160E5E5E5E
5E4B5A4B5A15074B7E151F4B7E4B7E15FF913881CFF891388387FCEC870791388E03FE91
389C01FF14B8DAF0007F4A6D7E1480707E707EA2707E707EA2707E707EA2707F717EA271
7E717EA2717E84717E4D7E496C4A1380B600C090B512FCA33E3E7DBD46>I<B612F0A3C6
01E0C8FCEB7F80B3B01703A517071706A4170EA3171EA2173E177E17FEEE01FC1607496C
133FB8FCA3303E7DBD38>I<B56C93381FFFF06E5EA2C6F1F000D96FE0EE6FE0A2D967F0
16CFA3D963F8ED018FA2D961FCED030FA3D960FE1506A2027F150CA36E6C1418A36E6C14
30A26E6C1460A36E6C14C0A26E6CEB0180A36E6CEB0300A26E6C1306A3037F5BA26F6C5A
A36F6C5AA26F6C5AA36F6C5AA2923803F980A36FB4C7FCA26F5AA213F0486C147CD807FE
4D7EB500F00138011FB512F0A34C3E7DBD53>I<B56C91387FFFF88080D8007F03031300
6EEC00FCD96FF815786E15301367EB63FE80136101607F6E7EA26E7E6E7EA26E7E6E7EA2
6E7E6E7EA26E7F6F7E82153F6F7E82150F6F7E8215036F7E6F1380A2EE7FC0EE3FE0A2EE
1FF0EE0FF8A2EE07FCEE03FEA2EE01FF7013B018F0177F173FA2171F170F1707A2170301
F01501487ED807FE1500B500F01570A218303D3E7DBD44>I<EDFFE0020713FC91393FC0
7F809139FE000FE0D901F8EB03F0D907E0EB00FC4948147E49488049C86C7E017E6F7E01
FE8248486F7E48486F7EA248486F7EA248486F7E001F83A24982003F1880A3007F18C049
163FA300FF18E0AC007F18C06D167FA4003F18806D16FF001F1800A36C6C4B5AA26C6C4B
5A00035F6D150700015F6C6C4B5A017F4B5A6D6C4A5A011F93C7FCD90FE014FE6D6C495A
D901F8EB03F0D900FEEB0FE091393FC07F80912607FFFCC8FC020013E03B427BBF46>I<
B712F016FF17C0C69039C0003FF06D48EB07F8EE01FE707E831880EF3FC0A2EF1FE0A218
F0A818E0A2EF3FC0A2EF7F80180017FEEE03FC4C5AEE3FE091B6128004FCC7FC0280C9FC
B3A7497EB612C0A3343E7DBD3D>I<EDFFE0020713FC91393FC07F809139FE000FE0D901
F8EB03F0D907F0EB01FCD90FC0EB007E49488049C86C7E498201FE6F7E48486F7E000383
491503000783491501000F8348486F7EA34848EE7F80A3007F18C0A249163FA200FF18E0
AC007F18C0A26D167FA3003F1880A26C6CEEFF00A36C6C4B5AA20007021F5C6C6C90397F
C003F8EDE0706C6C48486C485A3C00FE0380180FE0017ED9001C5B013F91380C1F80D91F
83D90E3FC7FCD90FC3EB067ED907F3EB07FC902601FB8013F06DB46C485A91273FE07F80
13600207B5FC020013E392380003C019E0831801933801F0039438F807C0EFFC0F94B5FC
A2701480A271130060173FEF1FF8EF07E03B527BBF46>I<B712C016FCEEFF80C69039C0
007FE06D48EB0FF0EE03FC707E707E717E717EA284171F84A760173F6060177F4DC7FCEE
01FC4C5AEE0FE0EEFF8091B500FCC8FC5E91388000FFEE3FC0EE0FE0707E707E83707EA2
707EA684A7190618C0177FA2190E496C91383FE00CB600C0011F131C94380FF038943807
F870CA3801FFE09438003F803F407DBD43>I<D907FC131890393FFF803890B512E03A01
FC03F8783903F0007CD807C0EB1EF84848130F48C71207481403003E1401007E1400A200
7C157812FCA21638A36C1518A27EA26C6C14007F7FEA3FF813FF6C13F06C13FF15F06C14
FC0001806CECFF80013F14C0010714E0EB007F020713F09138007FF8151FED0FFC150715
03ED01FEA200C01400A3167EA27EA3167C7E16FC6C15F86C14016C15F06C14036DEB07E0
D8FBE0EB0FC0D8F1F8EB1F80D8F07FEB7F0039E01FFFFC010713F039C0007FC027427BBF
32>I<003FB9FCA3D9E000EBC00190C7397F80003F007EEF1F80007C170F007817070070
1703A300601701A548EF00C0A5C81600B3B24B7E4A7F0107B612F8A33A3E7DBD41>I<B6
00C090387FFFF8A3C601C0C7000313006D48EC00FC18781830B3B3A4013F16706E1560A2
18E0011F5E6E1401130F6E4A5A01074BC7FC6D6C5C6D6C140E6D6C143C027F5C91393FC0
01F091390FF00FE00203B51280020049C8FCED1FF03D407DBD44>I<B500FE913803FFFE
A3000301C09138007FE06C49ED1F806C90C913006E150E017F160CA26E151C013F161880
011F5EA26E1570010F1660A26D6C5DA28001034B5AA26E1403010193C7FC806D1506A26F
130E027F140CA26E6C5BA281021F5CA26F1370020F14608102075CA2EDFC0102035CA26E
6C48C8FCA215FF6E1306A2168EED7F8C16CCED3FD8A216F86F5AA26F5AA36F5AA36F5AA2
3F407EBD44>I<B500FE013FB56C48B5FCA3000701C0010101F0C7EA3FF86C90C8D87FC0
EC0FE06CF207C0053FED03806C1B00A26E6E6C5C017F1906A26E4A7E013F61A26E4A7E01
1F03675DA2EFE7FC6D6C02C35DA204017F6D6C02815DA2846D6C49C65DA36D6C01066D6C
485AA36E4990383FC0036D96C7FCA26F486D6C5A027F1706A26F48EB0FF0023F5FA2DBE0
7014F8021F016001075BA204E014FC6E6C4801035BA203F115FE912607F98001015BA219
FF6EB4C85BA36E486F5AA34B153F020094C8FCA24B810378151EA20370150E0330150C58
407EBD5D>I<007FB56C48B512E0A3C601FCC7383FFC00D93FF8EC1FE06D48EC0F8095C7
FC6D6C140E6D6C140C171C6D6C5C6D6C14305F6D6D13E06E6C5B4C5A91383FE003DA1FF0
90C8FC160691380FF80E913807FC0C5E913803FE38913801FF305E6E13E06F5AA26F7E6F
7EA26F7E4B7EA2ED33FEED71FF156103C07F02016D7E15804A486C7E4A6D7E14064A6D7E
021C6D7E5C02306D7E02706D7E5C4A6D7F49486E7E130391C86C7E496F7E130E011E6F7E
013E8201FF82000701C0EC3FFFB500F049B512FEA33F3E7EBD44>I<B692B51280A30001
01F092383FF8006C49ED0FC0017F5F013F94C7FC6E150E011F160C6D6C5D6E1538010716
306D6C157018606D6C5D6F13016D5E6E6C13036F91C8FC023F14066E6C130E170C6E6C13
1C6F131802075C6E6C137017606E6C13E06E6D5AEE8180ED7FC304E3C9FCED3FE7ED1FF6
16FC150F6F5AB3A44B7E020FB512FCA3413E7FBD44>I<003FB712F0A349C7EA3FE013F0
01C0EC7FC090C8FC003EEDFF80003C4A1300A200384A5A00785D007014074B5AA24B5A00
604A5AA24B5AA24B5AC74890C7FCA24A5A5D14074A5AA24A5A4A5AA24A5AA24A5A4990C8
FCA2495A5C01071518495AA2495A495AA2495A1738495A4890C8FCA2485A491570120748
4815F0A24848140148481403160F4848143FED01FFB8FCA32D3E7BBD37>I<EAFFFEA2EA
FC00B3B3B3B3AFEAFFFEA20F5B78C319>I<12C0A27E1260A21270123012381218A2121C
120CA2120E1206A212077EA27F12017F1200A27F1360A213701330A213381318131C130C
A2130E1306A213077FA2801301A2801300801460A214701430A214381418A2141C140CA2
140E1406140780A2811401A2811400A281156015701530A215381518A2151C150CA2150E
1506A215078116801501A216C01500A2225B7BC32D>I<EAFFFEA2EA007EB3B3B3B3AFEA
FFFEA20F5B7FC319>I<007FB812FCB912FEA26C17FC3704796E46>95
D<EA01801203EA0700120E120C121C12181238123012701260A212E05AA512CEEAFF8013
C0A3127FA2EA3F80EA0E000A1B79BE19>I<EB1FF0EBFFFC3803E03F390F000FC0001C6D
7E001F6D7E486C6C7E6D6C7EA3157E6C5A6CC7FCC8FCA4EC1FFEEB03FF90381FF87EEB7F
803801FC00EA07F0485A485A485A127F90C7FC160312FEA315FEA21401007F14BE14033A
3F80071F06261FC00E138E3A0FF03C0FFC3A03FFF007F83A003FC003E0282A7CA82D>I<
EA01F812FFA3120712031201B1EC07F8EC1FFF9138780FC09039F9E003F09039FB8001F8
01FFC77E49147E4980EE1F805B17C0160F17E0A2160717F0AA17E0160FA317C0161F1780
6DEC3F007F01F6147E01F75C9039E38001F89039C1C003E09039C0F81F809026803FFEC7
FCC7EA07F02C407EBE32>I<49B4FC010F13E090383F00F8017C131E484813074848131F
4848EB3F804848137FA2485AA248C7EA3F00151E4891C7FCA2127E12FEAB127FA36C15C0
7F001F14016D1480000F14036C6CEB07006C6C13066C6C131E6C6C133890383F01F09038
0FFFC0D901FEC7FC222A7DA828>I<ED01F815FFA3150715031501B114FF010713C19038
1F80F190387C00394848131D4848130F4848130748481303A248481301123F90C7FC5AA3
127E12FEAA127E127FA27E7F001F1403A26C6C13076C6C130F6C6CEB0DFC6C6CEB3DFE6C
6C903871FFF090383F01E190380FFF81903A01FE01F8002C407DBE32>I<EB03FC90381F
FF8090387E07E09038F801F048486C7E4848137C48487F000F143F48487F168048C7FC15
0F5A16C0127EA212FEA2B7FCA248C9FCA6127E127FA36C15C07F001F14016C6C14801503
6C6CEB07006C6C130E6C6C5B6C6C5B90383F01F090380FFFC0D901FEC7FC222A7DA828>
I<EC1FC0ECFFF0903803F038903807C0FC90380F81FE131FEB3F01133E137EEC00FC4913
00AFB6FCA3D800FCC7FCB3AE487E387FFFFEA31F407FBF1C>I<167E903903FC01FF903A
0FFF07878090393E07CE0F9038FC03FC3901F801F83B03F000FC070049017CC7FC000714
7EA248487FA86C6C137EA20003147C6D13FC6C6C485A6D485A9038BE07C026038FFFC8FC
EB03FC48CAFCA47FA27F6C7E90B512F06C14FE6F7E6C6C14E048B612F83907C0001FD81F
80EB03FC48C87E003E157E48153E163F4881A56C5D007C153E007E157E6C5D6C6C495A6C
6C495AD803F0EB0FC0D800FE017FC7FC90383FFFFC010313C0293D7EA82D>I<EA01F812
FFA3120712031201B1EC03FC91380FFF8091383C0FC09138F003E0D9F9C07F9039FB8001
F8140001FF6D7E5BA25BA25BB3A6486C497EB539F07FFFF8A32D3F7EBE32>I<EA01C0EA
07F0487EA56C5AEA01C0C8FCACEA01F8127FA3120712031201B3AC487EB512E0A3133D7E
BC19>I<1470EB01FCEB03FEA5EB01FCEB00701400AC14FE133FA313011300147EB3B3A6
123C007E137CB413FCA214F8130100FE13F0387803E0383E07C0380FFF00EA01FC175084
BC1C>I<EA01F812FFA3120712031201B292387FFF80A392381FFC00ED0FE016804BC7FC
151C5D5D5DEC03C04AC8FC140E141E143E147F9038F9FF809038FB9FC0EBFF0F496C7E01
FC7FEBF8036E7E816E7E157E8182151F6F7E826F7EA282486C14FEB539F03FFFE0A32B3F
7EBE30>I<EA01F812FFA3120712031201B3B3B1487EB512F0A3143F7EBE19>I<2701F803
FCEB01FE00FF903B0FFF8007FFC0913B3C0FC01E07E0913BF003E07801F02607F9C0D9F0
E07F3D03FB8001F9C000FC000101005C01FFD900FF147E4992C7FCA2495CA2495CB3A648
6C496C14FFB528F07FFFF83F13FCA346287EA74B>I<3901F803FC00FF90380FFF809138
3C0FC09138F003E02607F9C07F3A03FB8001F80001130001FF6D7E5BA25BA25BB3A6486C
497EB539F07FFFF8A32D287EA732>I<EB01FE90380FFFC090383F03F090387C00F8D801
F0133E48487F4848EB0F80A24848EB07C0001F15E090C712034815F0A2007EEC01F8A400
FE15FCA9007E15F8A3007F14036C15F0A26C6CEB07E0000F15C06D130F000715806C6CEB
1F006C6C133ED800FC13FC90383F03F090380FFFC0D901FEC7FC262A7DA82D>I<3901F8
07F800FFEB1FFF9138780FC09039F9E003F03A03FB8001F86CB4C77E49147E49147FEE3F
8049141F17C0A2EE0FE0A317F01607A9EE0FE0A4EE1FC0A2EE3F806D15006D5C16FE6D49
5A9039FB8003F89039F9C007E09039F8F81F80DA3FFEC7FCEC07F091C9FCAD487EB512F0
A32C3A7EA732>I<02FF130C0107EBC01C90381F80F090387E003849EB1C3CD803F8130E
4848EB077C491303484814FC001F1401485A150048C8FCA412FEA97E7EA36C7E15016C7E
000F14037F000714076C6C130E6C6C131CD8007E137890383F01E090380FFFC0903801FE
0090C8FCAD4B7E92387FFFF8A32D3A7DA730>I<3903F00FC000FFEB3FF0ECF0F89038F1
C3FC00071383EA03F33801F70313F6EC01F89038FE0060491300A45BB3A4487EB512F8A3
1E287EA723>I<90387FC0603903FFF8E03807C03D381E000F481303481301A200701300
12F01560A27EA27EB41400EA7FC013FE383FFFE06C13FC00077F6CEBFF80C66C13C00107
13E0EB003FEC0FF000C01303EC01F814007E1578A27EA27E15F07EEC01E06C14C039F780
078039F1E01F0038E0FFFC38C01FE01D2A7DA824>I<1318A61338A41378A213F8A21201
12031207001FB512C0B6FCA2D801F8C7FCB3A21560A96C6C13E015C0A2EB7E0190383F03
8090381F8700EB07FEEB01F81B397EB723>I<D801F814FC00FF147FA300071403000314
0100011400B3A51501A3150312006D1307ED0EFE017C497E6D4913F890381F80F0903807
FFE00100903800FC002D297EA732>I<B539C007FFE0A32707FC000113006C48EB007C16
78000115707F00001560A2017E5CA2017F13016D5CA26D6C48C7FCA26E5A010F1306A26D
6C5AA2ECF01C01031318A26D6C5AA2ECFC7001001360A2EC7EC0A2147F6E5AA26EC8FCA3
140EA22B287EA630>I<B53B87FFFC03FFF0A33D0FFC003FE0007FC0D807F06D48EB3F00
00036E48131E70131C6C7E03071418826C6C010F5CA26D6E1370017E01191460A2017F6E
13E06D01305CA20280EBFC01011FD9607C5BA290280FC0E07E03C7FCEDC03EA2D907E1EB
3F06ED801F1786D903F3148CED000F17CCD901FEEB07D8A217F86D486D5AA302786D5AA3
02306D5A3C287EA641>I<3B7FFFC00FFFE0A3000390390007FE00C6EC03F86D14E06D5C
02805B6D6C48C7FC010F130E903807E00C6E5A903803F83801015B6D6C5A6E5AEC7F8014
3F141F6E7E81141FEC3BF0EC71F8ECE1FCECC0FE903801807E01037FD907007F010E6D7E
010C130F011C6D7E498001F86D7E000181D80FFC497EB590381FFFF8A32D277FA630>I<
B539C007FFE0A32707FC000113006C48EB007C0001157816707F000015607F017E5CA26D
495AA2EC8003011F91C7FCA290380FC006A2ECE00E0107130CA26D6C5AA2ECF838010113
3014FC01005BA2EC7EC0A2147F6E5AA26EC8FCA3140EA2140CA2141C1418A25CA25C1238
007C13E000FE5B13015C49C9FCEA7C07EA700EEA383CEA1FF8EA07E02B3A7EA630>I<00
1FB61280A29038E0007F90C71300001E14FE001C495A140300185C0038495A4A5A003013
1F5D4A5A4AC7FCA2C712FE495A13035C495A495A131F9138C00180EB3F80EB7F00A213FE
485A000314035B48481400485A001F5C495B485A48C7123F4849B4FC90B6FCA221277EA6
28>I<153FEC03FFEC0FE0EC3F80EC7E00495A5C495AA2495AB3AA130F5C131F495A91C7
FC13FEEA03F8EA7FE048C8FCEA7FE0EA03F8EA00FE133F806D7E130F801307B3AA6D7EA2
6D7E80EB007EEC3F80EC0FE0EC03FFEC003F205B7AC32D>I<126012F0B3B3B3B3B11260
045B76C319>I<12FCEAFFC0EA07F0EA01FCEA007E6D7E131F6D7EA26D7EB3AA80130380
6D7E1300147FEC1FC0EC07FEEC00FFEC07FEEC1FC0EC7F0014FC1301495A5C13075CB3AA
495AA2495A133F017EC7FC485AEA07F0EAFFC000FCC8FC205B7AC32D>I
E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fj ectt1095 10.95 93
/Fj 93 127 df<01F81370D803FE13F83907FF01FC001F13834813EF48EBFFF8D8FFDF13
F0010713E0486C1380D87C0113003838007C1E0B78B72F>3 D<020E13E091381F01F0EC
3F03EC7F079138FE0FE0903901FC1FC0903903F83F80903907F07F0090380FE0FE90383F
C3FC49485A49485A4848485A3903F83F80484848C7FC380FE0FE381FC1FC48485A48485A
38FE0FE000FC5B00FE7F387F07F0383F83F86C6C7E6C6C7E3807F07F6C6C6C7E3901FE1F
E06C6C6C7E90387F87F86D6C7E90380FE0FE903807F07F903903F83F80903901FC1FC090
3900FE0FE091387F07F0EC3F03EC1F0191380E00E024297DA82F>19
D<EA700738F80F8000FC7F00FE7F387F07F0383F83F86C6C7E6C6C7E3807F07F3903FC3F
C06C6C6C7E6C6C6C7E90387F87F890381FC1FC6D6C7E903807F07F903903F83F80903901
FC1FC0903900FE0FE091387F07F0EC3F03EC7F079138FE0FE0903901FC1FC0903903F83F
80903907F07F0090380FE0FE90381FC1FC90387F87F849485A4848485A4848485A2607F0
7FC7FC380FE0FE381FC1FC48485A48485A38FE0FE000FC5B00F85BD87007C8FC242979A8
2F>I<121FEA3F80EA7FC0EAFFE0B2EA7FC0B0EA3F80C7FCA8121FEA3F80EA7FC0EAFFE0
A5EA7FC0EA3F80EA1F000B396EB82F>33 D<003C130F007EEB1F80B4EB3FC0A96C1480A7
007E131FA8003CEB0F001A1B76B82F>I<90390780078090390FC00FC0A9011F131F0280
1380A4003FB612FC4815FEB8FCA36C15FE3A003F003F00A2495B017E137EA901FE13FE49
5BA2007FB612FEB8FCA36C15FE6C15FC3A01F801F800A30003130301F05BA96C486C5A28
387DB72F>I<14F0497EA5EB07FE90383FFFE090B512F800038048804880261FFDFB1380
3A3FE1F87FC001C1131FD87F81EB0FE001011307007E15F012FE12FC150FA3ED07E012FE
007E91C7FC127FEA3F8113E1EA1FF9EA0FFF7E6CEBFF806C14E06C6C13F8010F7F01017F
8102F81380ED7FC0151FED0FE0A200181407007E15F0150312FFA312FE1507A2007E15E0
007F140FED1FC0D83FC1133F01E1EBFF80261FFDFB13006CB55A6C5C6C5CC65C013F13C0
D907FEC7FCEB01F8A66D5A24477BBE2F>I<EA07C0EA0FF0EA1FF8EA3FFCA213FEA213FF
7E7E7EEA003FA4137F137EA213FE13FC1201EA03F8A2EA0FF0121FEA3FE0EAFFC0138013
00127C1238101F70B72F>39 D<143C147EEB01FE1303EB07FCEB0FF8EB1FE0EB3FC0EB7F
80EBFF005B485A485AA2485A5B120F5B121F5BA2123F90C7FCA25A127EA312FE5AAD7E12
7EA3127F7EA27F121FA27F120F7F12077F6C7EA26C7E6C7E7FEB7F80EB3FC0EB1FE0EB0F
F8EB07FCEB03FE1301EB007E143C174771BE2F>I<127812FCB4FC7F6C7E6C7EEA0FF06C
7E6C7E6C7E1200137FEB3F80A2EB1FC0130F14E0130714F01303A214F81301A214FC1300
A314FE147EAD14FE14FCA3130114F8A2130314F0A2130714E0130F14C0131FEB3F80A2EB
7F0013FE1201485A485A485AEA3FE0485A485A90C7FC12FC1278174778BE2F>I<EB01E0
497EA700301403007CEC0F8000FEEC1FC0D8FF83137F9038E3F1FF267FF3F31380001FB5
EAFE006C5C000314F0C614C0013F90C7FCEB0FFCEB3FFF90B512C0000314F0000F14FC48
803A7FF3F3FF8026FFE3F113C0903883F07FD8FE03131F007CEC0F800030EC0300000091
C7FCA76D5A22277AAE2F>I<143C147EB0003FB612FC4815FEB8FCA36C15FEC7007EC7FC
B1143C28297DAF2F>I<EA07C0EA0FF0EA1FF8123F13FCA213FEA2121F120F1207EA007E
13FE13FC1201A2EA03F8EA0FF0123FEAFFE013C01380EA7E0012380F18708A2F>I<007F
B512F8B612FCA46C14F81E0678962F>I<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA
1F000B0B6E8A2F>I<16E0ED01F01503A2150716E0150F16C0151F1680153F16005D157E
15FE5DA214015D14035D14075D140F5D141F5D143F92C7FCA25C147E14FE5C13015C1303
5C13075C130F5CA2131F5C133F91C8FC5B137E13FE5B12015B12035BA212075B120F5B12
1F5B123F90C9FC5A127E12FE5AA25A127824477BBE2F>I<EB01FE903807FF80011F13E0
497F497F90B57E48EB03FE3903FC00FF497F4848EB3F804848EB1FC049130F001F15E049
1307A248C7EA03F0A3007EEC01F8A448EC00FCAD6C1401007E15F8A3007F14036C15F0A2
6D1307001F15E06D130FA26C6CEB1FC0A26C6CEB3F806C6CEB7F006D5B3901FF03FE6CEB
FFFC6D5B6D5B6D5B01071380D901FEC7FC263A7CB82F>I<EB0380497EA2130FA2131F13
3FA2137FEA01FF5A127FB5FCA213CF138FEA7E0F1200B3B0003FB512F85A15FCA215F8A2
1E3977B82F>I<EB0FFC90383FFF8090B512E0000314F848804880391FF80FFF263FE001
1380903880007F48C7EA3FC0007E141FED0FE000FE140716F07E1503A3127E1218C8FCA2
150716E0150F16C0151FA2ED3F80ED7F005D4A5A4A5A4A5A4A5A4A5A4A5A4A5A4AC7FC49
5AEB07FC495A495A495AEB7F8049C8FC485A4848EB01E0D80FF8EB03F0485A485A48B6FC
B7FCA46C15E024397BB82F>I<EB07FF013F13E048B512F84814FE4880481580261FFC01
13C09038E0003FD83F80EB1FE06D130716F01503A26C5A6CC7FCC8FC150716E0150FA2ED
1FC0157FEDFF80020F130090380FFFFE495B5DA215FE6D7FD9000113809138003FC0ED1F
E0ED07F0150316F8150116FC1500A21218127EB4FCA2150116F8481403A2007FEC07F06D
EB1FE0D83FE0133F3A1FFE01FFC06CB612806C15006C5CC614F8013F13E0010390C7FC26
3A7CB82F>I<EC07F84A7EA2141F143F157C147F147E14FEEB01FC14F8130314F01307EB
0FE014C0131F1480133FEB7F00137E13FE5B485A12035B12075B485A121F5B123F90C7FC
127E12FEB712FE16FFA46C15FEC8EA7C00AA91387FFFFC91B512FEA46E13FC28397DB82F
>I<000FB6FC481580A416000180C8FCAEEB83FE90389FFFC090B512F08181819038FE03
FFD9F000138049133F0180EB1FC0150F6CC713E0C81207A216F01503A4123C127EB4FC15
0716E0150F5A007EEC1FC0007F143F6DEB7F803A3FC001FF00391FF80FFE90B55A6C5C00
035C6C14C06C6C90C7FCEB0FF824397BB72F>I<EC1FE0ECFFFC010313FF010F14805B49
14C090387FF03F9039FF800FE03901FE001F485A485A5B4848EB0FC049EB0780001F91C7
FC5B123F90C9FC5AA2007E1310903807FF80011F13E0D8FE7F13F848B57E00FD80B7FCEB
FC019039F0007F8001C0EB3FC049131F90C7EA0FE0A248140716F01503A3127EA4127F6C
140716E07F001F140F6DEB1FC06C6C133F6DEB7F806C6CEBFF003803FE0390B55A6C5C6C
5C013F13E0010F1380D903FEC7FC243A7BB82F>I<1278B712F816FCA416F800FCC7EA07
F0ED0FE0ED1FC00078EC3F80C8FCED7F0015FE4A5A5D14034A5A5D140F5D141F5D143F92
C7FC5C147E14FE5CA213015CA2495AA313075CA3130F5CA5131F5CAA6DC8FC263A7CB82F
>I<EB03FF011F13E0017F13F848B512FE4880481580260FFE0113C03A1FF0003FE04913
1FD83F80EB07F0A248C7EA03F8007E1401A5007F14036C15F06D13076C6CEB0FE06C6CEB
1FC001F8137F3A03FF03FF006CEBFFFE6C6C13F8011F13E0497F90B512FC000314FF2607
FC001380D80FF0EB3FC0D81FC0EB0FE04848EB07F090C712034815F8007E140100FE15FC
481400A66C1401007E15F8007F14036D13076C6CEB0FF06C6CEB1FE06D133F3A0FFE01FF
C06CB612806C15006C5C6C6C13F8011F13E0010390C7FC263A7CB82F>I<EB03FC90381F
FF80017F13E090B57E0003804880390FFE07FEEBF00148486C7E48487F49EB3F8048C712
1F007E15C0150F12FE4815E01507A416F0A37E127E007F140FA26C6C131F6D133F6C6C13
FF380FF80390B6FC6C14FB6C14F36C14E36C6C138790391FFE07E0EB00801400150F16C0
151FA2ED3F80121E003FEC7F00486C5B5D4A5A140749485A393FC07FF090B55A6C5C6C5C
6C49C7FC6C13F838007FC0243A7BB82F>I<121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80
EA1F00C7FCB1121FEA3F80EA7FC0EAFFE0A5EA7FC0EA3F80EA1F000B276EA62F>I<EA07
C0EA0FE0EA1FF0EA3FF8A5EA1FF0EA0FE0EA07C0C7FCB1EA07C0EA0FF0EA1FF8123F13FC
A213FEA2121F120F1207EA007E13FE13FC1201A2EA03F8EA0FF0123FEAFFE013C01380EA
7E0012380F3470A62F>I<1640ED01E0ED07F0150F153FED7FE0913801FFC04A1300EC0F
FEEC1FF8EC7FF0ECFFC001035B4948C7FCEB1FFCEB3FF0EBFFE0481380000790C8FCEA0F
FCEA3FF8EA7FE0485A90C9FC13C06C7EEA3FF8EA0FFC6CB4FC00017F6C13E0EB3FF0EB1F
FCEB07FE6D6C7E01007FEC7FF0EC1FF8EC0FFEEC03FF6E13C09138007FE0ED3FF0150F15
07ED01E0ED0040242F7BB22F>I<003FB612FC4815FEB8FCA36C15FECAFCA9007FB612FE
B8FCA36C15FE6C15FC28157DA52F>I<1230127812FE7E13C06C7EEA3FF8EA0FFC6CB4FC
00017F6C13E0EB3FF0EB1FFCEB07FE6D6C7E01007FEC7FF0EC1FF8EC0FFEEC03FF6E13C0
9138007FE0ED3FF0150F153FED7FE0913801FFC04A1300EC0FFEEC1FF8EC7FF0ECFFC001
035B4948C7FCEB1FFCEB3FF0EBFFE0481380000790C8FCEA0FFCEA3FF8EA7FE0485A90C9
FC5A12781230242F7BB22F>I<EB1FFF90B512F0000314FC000F14FF4815804815C0387F
F001903980003FE000FEC7120FED07F06C1403A3007E1407ED0FE0C8121FED7FC0EC01FF
4A1380020F1300EC1FFCEC3FF04A5A15804AC7FC495AA2495A5CA213075CA7130390C9FC
A9EB01C0EB07F0A2497EA36D5AA2EB01C024397BB82F>I<EC1FE0ECFFF801037F010F13
FF4914805B90397FE03FC09039FF800FE03901FE0007EA03F83A07F001F3F09038E007FD
390FC01FFF4A13F848485A130048EBFE0F003EEBFC073A7E01F803FCECF001EA7C03ECE0
00A2EAFC0712F84A137CA86E13FC12FCD87C0314F8A2ECF001D87E0114F0ECF8033A3E00
FC07E0003FEBFE0F6C90387FFFC013806C6C6C13806E13003907E007FC9038F001F06C6C
C712F8D801FEEB01FC3900FF800790387FE03F6DB512F86D14F06D14C0010314800100EB
FE00EC1FF0263A7CB82F>I<143F4A7EA24A7EA4903801F3E0A501037FA314E101077FA4
14C0010F7FA490381F807EA4013F137F4A7EA4017E6D7EA2017FB5FCA290B67EA49038FC
000F48486D7EA4000381491303A3D87FFF90383FFF80A2B56C4813C0A26C496C1380A22A
397EB82F>I<007FB512E0B612FC15FF168016C06C15E03A03F0001FF0150FED03F8A215
0116FC1500A5150116F8150316F01507ED1FE0ED7FC090B61280160015FC15FF16C016E0
9039F0000FF0ED03F8ED01FC150016FE167EA2163FA6167F167E16FEA2ED01FC1507ED1F
F8007FB6FCB712F016E0168016006C14F828387EB72F>I<91387F8038903903FFE07C01
0FEBF8FC4913FC4913FF5BEBFFC048EB003F4848130FEA07F849130748481303A2484813
015B123F90C8FCA25A127E1678160012FE5AAC7E127EA21678007F15FC7EA27F121F6D13
016C6C14F86D130312076DEB07F0D803FE130F6C6CEB1FE06C9038C07FC06DB512806D14
006D5B6D5B010313F09038007F80263A7CB82F>I<007FB57EB612F015FC81816C812607
E0017F9138003FE0151F6F7E6F7E15036F7EA26F7EA2167E167F82A41780161FAB163F17
00A35E167EA216FE4B5AA24B5A15074B5A151F4B5A4AB45A007FB65AB7C7FC5D5D15F06C
148029387EB72F>I<007FB612FCB77EA47ED803F0C7127EA7163C93C7FCA515F04A7EA4
90B5FCA6EBF001A46E5A92C8FCA5160FEE1F80A9007FB7FCB8FCA46C160029387DB72F>
I<007FB612FEB8FCA47ED803F0C7123FA7161E1600A6157815FCA490B5FCA6EBF000A415
7892C7FCAE387FFFE0B57EA46C5B28387DB72F>I<02FE13E0903907FFC1F04913F3013F
13FB4913FF90B6FC4813813903FE007F49133F4848131F485A49130F485A15075B123F90
C712035AA2127EED01E092C7FC12FE5AA9EDFFFE4A13FFA27E127E6E13FEED03F0127F15
077E7F121F6D130FA26C7E6D131F6C6C133F6C7E6D137F3901FF81FF6C90B5FC7F6D13FB
010F13E36DEBC1E0D900FEC7FC283A7DB82F>I<3B7FFF807FFF80A2B56CB512C0A26C49
6C1380A23B03F00003F000B290B6FCA69038F00003B3A23B7FFF807FFF80A2B56CB512C0
A26C496C1380A22A387EB72F>I<007FB512FEB7FCA46C14FE390007E000B3B3A8007FB5
12FEB7FCA46C14FE203879B72F>I<D87FFCEB7FFC486C14FE15FFA2157F6C4814FCD807
C0EB1FC01680ED3F00157E15FE5D4A5A4A5A14075D4A5A4A5A143F92C7FC147E5C13C15C
EBC3FC13C7EBCFFE80EBDFBF9038FF1F80140F01FE7FEBFC0701F87F140301F07FEBE001
01C07F140081157C157E153E153FED1F80A2ED0FC0150716E01503D87FFCEB0FFE486CEB
1FFFA46C48EB0FFE28387DB72F>75 D<387FFFF080B5FCA27E5CD801F8C8FCB3B0161E16
3FA9007FB7FCA2B8FCA27E16FE28387DB72F>I<D87FF0ECFFE06D5B00FF16F06D5B007F
16E0A2D807DE903807BE00A301DF130F01CF143EA2EC801FA201C7131EA2ECC03EA201C3
133CECE07CA201C11378ECF0F8A301C013F014F9A2EC79E0A3EC3FC0A3EC1F80A2EC0F00
91C7FCADD87FFC903803FFE0A2486C4913F0A26C486D13E0A22C387FB72F>I<D87FF890
383FFF807F00FF4A13C07F007F6E1380A2D803EF903801F000A2148013E7A214C013E3A2
14E0A213E114F0A213E014F8A21478147CA2143EA3141FA3EC0F81A2140715C1A2140315
E1A2140115F1A21400A215F91579A2157D153DA2D87FFF131FA2B51280150F6C13006F5A
2A387EB72F>I<90383FFFC00003B512FC488048804815804815C0EBF00001C0133F4848
EB1FE090C7120F007E1407A400FE15F0481403B3A96C1407A2007E15E0A3007F140FA26D
131F6C6CEB3FC09038F801FF90B6FC6C15806C15006C5C6C5CD8003F13C0243A7BB82F>
I<007FB512E0B612F815FEEDFF8016C06C15E03A03F0007FF0151FED07F81503ED01FCA2
150016FE167EA616FE16FC1501A2ED03F81507ED1FF0157F90B612E016C01680EDFE0015
F815E001F0C8FCB0387FFF80B57EA46C5B27387DB72F>I<90383FFFC00003B512FC4880
48804815804815C0EBF00001C0133F4848EB1FE090C7120FA2007E1407A300FE15F04814
03B3A814FC130139FE00FE07007E15E0147FA2007FEB3F8FA29038801FDFD83FC0EBFFC0
EBF00F90B6FC6C15806C15006C5C6C5CEA003FEB00016E7EA2157FA2ED3F80A2ED1FC0A2
ED0FE0A2ED07C024467BB82F>I<387FFFFEECFFC0B612F015FC6C80812603F0037F9138
007FC0153F6F7E150F1507821503A515075E150F151F4B5A157F913803FF8090B6C7FC5D
5D5D81819038F003FF9138007F80153F151F82150FA9EEC1E0EEC3F0A316E33A7FFF8007
E7EEFFE0B512C06F13C06C497E6F1380C9EA3E002C397EB72F>I<90391FF8038090397F
FF07C048B512C74814EF4814FF5A381FF80F383FC00349C6FC48C7127F007E143F12FE48
141FA2150FA46CEC0780007E91C7FC127F6C7E7FEA1FF86CB47E6C13F86CEBFF806C14E0
6C6C13F8010F7F01007FEC0FFF02001380ED3FC0151FED0FE01507A216F00078140312FC
A56C140716E06C140F7F6DEB1FC001F0137F9039FE01FF8090B612005D00FD5CD8F87F5B
011F13E0D8700390C7FC243A7BB82F>I<007FB71280B812C0A53AFC003F000FA70078ED
0780C791C7FCB3B290381FFFFE497FA46D5B2A387EB72F>I<3B7FFF801FFFE0B56C4813
F0A46C496C13E0D803F0C7EAFC00B3B16D1301A200015DA26D13036C6C495AA2017F495A
EC801F90393FE07FC06DB55A6D91C7FC6D5B6D5B010013F0EC3FC02C397FB72F>I<D87F
FE90381FFF8000FF16C06D5BA2497F007F1680D807E0903801F800A36D130300035DA36D
130700015DA36D130F00005DA36D131F017E5CA46D49C7FCA490381F807EA46D6C5AA401
075B14E1A301035B14F3A301015BA46DB45AA56E5A6EC8FC2A397EB72F>I<D87FF89038
01FFE0486C4913F0A46C486D13E0001FC8EA0F806D141F000F1600A76C6C143EA7EC1F80
6C6C486C5AA4EC7FE01479A3000115789039F0F9F0F8A414F001F113F800005DA39038F9
E079A201FB137DA390397BC03DE0A4017F133FEC801FA3013F5CEC000F011E6D5A2C397F
B72F>I<D83FFFEBFFFC02817F5AA27E02005BD801FCEB1F806C6C133F93C7FC017F5B15
7E90383F80FE5DEB1FC1010F5B14E301075B14F701035B14FF6D5BA26D5BA26EC8FCA44A
7EA2497FA2497F14F7ECF3F0EB07E3ECE1F8EB0FC181EB1F808190383F007E157F017E7F
8201FE131F49800001140F498000036E7ED87FFE90381FFF806D5BB515C0A26C1680497F
2A387EB72F>I<D87FFE90381FFF8000FF16C06D5BA2497F007F1680D807F0903803F800
6C6C495AA200015D6D130F00005D6D131F017E5C017F133F6D91C7FC6E5A011F137EA2EC
C0FE010F5B14E101075BA2903803F3F0A201015B14FF6D5BA26E5AA36EC8FCB1903807FF
F8A2497FA26D5BA22A387EB72F>I<003FB612F84815FCA5007EC7EA03F8ED07F0150F16
E0ED1FC0153F1680003CEC7F00C85A5D4A5A14035D4A5A140F5D4A5A143F5D4AC7FC5C5C
495A13035C495A130F5C495A133F5C49C8FC5B5B48481478000315FC5B485A120F5B485A
123F5B48C8FC90B6FCB7FCA46C15F826387CB72F>I<387FFFFEB6FCA414FE00FCC7FCB3
B3B3A5B512FE14FFA46C13FE18476DBE2F>I<127812F87EA27E127E127F7E7F121F7F12
0F7F12077F1203A27F12017F12007F137E137F7F80131F80130FA2801307801303801301
80130080147E147F80A281141F81140F811407811403811401811400A281157E157F8116
80151F16C0150F16E0150716F01503A21501ED00E024477BBE2F>I<387FFFFEB6FCA47E
C7123FB3B3B3A5007FB5FCB6FCA46C13FE18477DBE2F>I<497EEB07E0EB1FF8EB7FFE90
B5FC000314C0000F14F0393FFC3FFC39FFF00FFF497EEB800148C7127F0078141E002014
04200E79B32F>I<007FB612E0A2B712F0A36C15E0A224077B7D2F>I<EB7FF03803FFFE48
6D7E4880488048809038C01FF8EC03FC14016E7E6C48137E6CC7127FC87EA4EC7FFF0107
B5FC133F48B6FC120748EBF83F381FFE00EA3FF0EA7FC090C7FC12FE5AA45D7E007F5CD9
80037F263FE01F13FF90B712807E6C14DF6C140F0001D9FC01130026007FE0C8FC292A7B
A82F>97 D<EA7FF0487EA4127F1201AAEC0FF0EC3FFC91B5FC01FB14C090B67E82ECF03F
9138C00FF891388003FCEC0001496D7E5B167F4980A21780161FA8163FA26D15005EA26D
14FEA26D495AEC80076E485A9138F03FF091B55A5E01FB5C01F991C7FC3900F07FFC9038
001FE029397EB72F>I<903803FFC0010F13F8013F7F90B57E488048158048EB007FEA0F
F85B485A49EB3F004848131E90C9FC5A127EA212FE5AA87E127EA2127FED07806C6CEB0F
C07F6C6C131F6D1480D80FFC137F3A07FF81FF006C90B5FC6C5C6C5C013F13F0010F13C0
D903FEC7FC222A79A82F>I<913803FF804A7FA480EC000FAAEB03FCEB1FFF017F13CF90
B512EF4814FF5A3807FE07380FF801391FF0007F01C0133F485A151F48C7FC150F127E12
FEA25AA87E007E141FA2127F6C6C133F157F6C7E6D13FF380FF8012607FE0713FF90B712
806C14EF6C14CF6C6C138F90261FFE071300D907F8C8FC29397DB72F>I<EB03FE90380F
FF80013F13E090B57E488048803907FE07FE390FF800FF497FD81FC0EB3F80003F141F49
14C090C7120F5A127E16E000FE14075AB7FCA516C000FCC9FC7E127EA2127F6C6CEB03C0
ED07E06C7E6D130FD80FF8EB1FC0D807FE133F9039FF80FF806C90B5FC6C15006C6C13FC
6D5B010F13E0010190C7FC232A7BA82F>I<4AB4FC020713C0021F13E0147F91B512F0A2
49130FEB03FC9138F807E0903907F001804AC7FCA8007FB61280B712C0A46C1580260007
E0C7FCB3A9003FB512FC4880A46C5C24397DB82F>I<903903F801FE903A1FFF07FF8001
7F13DF90B712C05A5AD9FE0FEB0F803B07F803FC070048486C6CC7FCEBE00049137E001F
147F497FA66D5B000F147E6D13FEEBF0016C6C485A3903FE0FF890B5FC485C5D485C019F
90C8FCEB83F80180C9FCA37FEA07E490B512F06C14FF4815C0488148813A3FC0001FF890
C7EA01FC007E6E7E007C157E00FC153E48153F82A46C5D007C153E007F15FE6C6C495A01
E01307D81FFEEB7FF86CB65A6C5D000115806C92C7FC011F13F8010313C02A3E7DA72F>
I<EA7FF0487EA4127F1201AAEC0FF0EC3FFCECFFFE01FB7F90B67EA29138F03FC0ECC01F
4A6C7E14004913075BA35BB3A23B7FFFE07FFF80B56CB512C0A46C496C13802A387EB72F
>I<EB0380EB0FE0A2497EA36D5AA2EB038090C9FCA9383FFFE0487FA47EEA0003B3A900
7FB6FCB7FC1680A216007E213979B82F>I<EC0380EC0FE0A2EC1FF0A3EC0FE0A2EC0380
91C7FCA990B512E015F05AA27EA2EB0003B3B3A5140715E0007E130F15C0B4131FEC3F80
14FF90B512006C5B5C6C5B000F13E0000113801C4E7CB82F>I<EA7FF0487EA4127F1200
AB0207B5FC5C1780A21700809138003F804BC7FC15FE4A5A4A5A4A5A4A5A4A5A4A5A4AC8
FC5C01F97F13FB90B57EECE7E0ECC7F01483EC01F8496C7E497F49137E816F7EA26F7E6F
7E823B7FFFF03FFFC0B56C5A17E0A217C06C497E2B387EB72F>I<387FFFF080B5FCA27E
A2EA0001B3B3A8007FB612E0A2B712F0A26C15E0A224387BB72F>I<903901F801F83A7F
8FFC0FFC3AFFDFFE1FFE90B5487E92B51280A23A7FFE1FFE1F3B07FC0FFC0FC001F813F8
9039F007F00701E013E0A301C013C0B3A33B7FFC3FFC3FFCD8FFFE01FE13FE027F137FA2
023F133FD87FFC01FC13FC2F2880A72F>I<EC0FF0397FF03FFC486CB47E01FB7F90B67E
A26C9038F03FC00001EBC01F4A6C7E14004913075BA35BB3A23B7FFFE07FFF80B56CB512
C0A46C496C13802A287EA72F>I<EB03FC90381FFF80497F90B512F0488048803907FE07
FE390FF801FF9038E0007F4848EB3F8049131F003F15C090C7120F4815E0007E1407A248
EC03F0A96C1407007E15E0A2007F140FA26C6CEB1FC0A26C6CEB3F806D137F3A0FF801FF
003907FE07FE6CB55A6C5C6C5C6D5B011F1380D903FCC7FC242A7BA82F>I<EC0FF0397F
F03FFC486CB5FC01FB14C090B67E826CEBF03F00019038C00FF891388003FCEC0001496D
7E5B167F4980A21780161FA8163FA26D15005EA26D14FEA26D495AEC80076E485A9138F0
3FF091B55A5E01FB5C01F991C7FC9038F87FFCEC1FE091C9FCAD387FFFE0B57EA46C5B29
3C7EA72F>I<903903FE01E090390FFF83F0013F13E390B512F34814FB4814FF48130338
0FFC0001F0133F4848131F485A49130F48C71207A2127E150312FE5AA77E1507127E127F
150F6C7E151F6C6C133F01F0137F6C6C13FF3807FE036CB6FC6C14FB6C14F36D13C3011F
1303EB03FC90C7FCAD4AB512E0A24A14F0A26E14E0A22C3C7DA72F>I<ED0FF0D87FFFEB
7FFE0281B5FCB51287028F14806C139F9138BFF87F39001FFFC09238003F004A131E4A90
C7FC5C5CA25C5CA45CAF007FB512F881B6FCA27E5D29287EA72F>I<90381FFC0E48B512
9F000714FF5A5A5A387FF007EB800000FEC77EA24880A37E007F141E01C090C7FCEA3FFC
381FFFF06CEBFF80000314E0C614F8011F13FE9038007FFF02011380EC007F0078EC1FC0
00FC140FED07E0A27EA27E6D130F6DEB1FC06D133F9039FC01FF8090B6FC16005D00F814
F8013F13E0D8700790C7FC232A7AA82F>I<130F497EAA007FB612C0B712E0A46C15C026
001F80C7FCB216F0ED01F8A5ECC003ED07F090380FE00F9138F81FE06DB512C0A26D1480
6DEBFE009038007FF8EC1FE025337EB12F>I<3A7FF001FFC0486C487FA4007F7F0001EB
0007B3A4150FA2151F153F6D137F6CB448B5128091B612C07FA26D13E7010F01831380D9
03FEC8FC2A287EA62F>I<D87FFF90383FFF80B56C4813C0A46C496C1380D801F0903803
E000A26D130700005DA26D130F017C5CA36D49C7FCA36D133EA36D6C5AA36D6C5AA39038
03E1F0A3903801F3E0A36DB45AA36E5AA26EC8FC2A277EA62F>I<3B7FFF801FFFE06E5A
B515F0A26C16E04A7ED807C0C7EA3E00A36D147E0003157CA56C6C5CEC0F80EC1FC0EC3F
E0A36C6C486C5AEC7DF1A214FD15F914F9D978F85B1379137DA2ECF079157B013FEB7FC0
14E0153FA2ECC01F6D486C5A2C277FA62F>I<3A3FFF80FFFE4801C17FA46C01805B2700
7E001FC7FC6D5B157E6D6C5AEB0FC0903807C1F8ECE3F0903803F3E0EB01FF6D5B5D6EC8
FC80A25C4A7E81903801F3E0903803E3F0EB07E1ECC0F849487E011F137E90383F003E01
3E7F017E80496D7E3B7FFF807FFF806EB5FCB515C0A26C16804A7E2A277EA62F>I<3B7F
FF803FFF80B54913C014C0A214806C6E13803B01F00003E0007F12004B5A7F137C017E49
5A133EA2013F49C7FC7FA290380F803EA214C001075BA214E001035BA2EB01F05D14F1EB
00F95DA2147BEC7FC0143FA25D141FA292C8FCA3143EA35CA214FC000F5BEA1F81EA3FC1
EBC3F0EB07E0131FEBFFC06C5BA26C48C9FC6C5AEA03F02A3C7EA62F>I<003FB612F848
15FCA416F8007EC7EA0FF0ED1FE0ED3FC0ED7F80EDFF00003C495AC7485A4A5A4A5A4A5A
4A5A4A5A4AC7FC495A495A495A495A495A495A495A49C7123C4848147E485A485A485A48
5A485A48B612FEB7FCA46C15FC27277DA62F>I<ED3FE0913803FFF0140F5C147F16E091
38FFE0004AC7FC495A5CB3A21303495A133F383FFFE0B55A5C49C8FC6D7E80003F7F3800
3FF013076D7E1301B3A2806D7EECFFE091387FFFE016F0141F8014039138003FE024477B
BE2F>I<127CA212FEB3B3B3AD127CA207476CBE2F>I<EA7FC0EAFFFC13FF8014E07EC66C
7E13076D7E1301B3A2806D7EECFFC091387FFFC06E13F0801407141F5C4A13C09138FFC0
004AC7FC495A5CB3A21303495A137F387FFFE0B5FC148091C8FC13FCEA7FC024477BBE2F
>I<D801FC1307D807FFEB0F80489038C01FC048EBF03F48EBFEFF4890B51280D8FFDF14
0001035B48C65B007CEB3FF80038EB0FE0220B7AB72F>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fk ecbx1095 10.95 61
/Fk 61 123 df<DB7FF8EB3FE0913B0FFFFE03FFF8027FD9FF8F13FE903C01FFC01FFFF0
FF902707FE000713C1D91FFC011F491380D93FF0491303495A17FE495A17FC48496F1300
041FEB007C040F91C7FCABBAFCA40001902780000FFCC8FCB3AE007FD9FE03B512FCA441
407EBF3D>27 D<ED7FF891380FFFFE027F6D7E903A01FFC01FC0903A07FE0003E0D91FFC
497ED93FF0EB1FF84948133FA2495A4C7E48496D5AA3705A705AEE038093C8FCA6923803
FFFCB8FCA40001903880000FB3AE007FD9FE03B512F0A434407EBF3A>I<ED7FF8020FB5
127C027F14FC903901FFC00F903907FE001FD91FFC133FEB3FF0495AA2495AA24849131F
160FACB8FCA40001903880000FB3AE007FD9FE03B512F0A434407EBF3A>I<391F8003F0
397FC007FCEBE00F00FF14FEA4007F14FCA4EBC007A2003F14F8A5EB8003A2001F14F0A4
EB0001A26C14E0A5000E13001F2076BF34>34 D<143CA449B47E011F13F0017F13FE48B6
FC3A03FE3C7FC0D807F0EB0FE0D80FE0EB03F0D81FC0EB01F801801300D83F00147CA200
7E15FCED03FE150700FE140FA37EA20180EB07FC13C001E0EB01F001F090C7FCEA7FFEEB
FFFC14FF6C14E015F86C8015FF6C15806C15C06C15E0C615F07F011F14F81303D9003F13
FCA2EC3C7FED1FFE150F001F1407D87FC01303D8FFE01301A31500A301C014FC1380EA7E
0000781401007C15F86C140316F06CEC07E0D80FC0130FD807E0EB3FC0D803FEEBFF806C
B5EAFE006C6C5B011F13E0010390C7FCEB003CA427497AC334>36
D<EA0F80EA3FE0EA7FF013F8EAFFFCA313FEA3127FA2123FEA0FCEEA000EA2131E131CA2
133C13381378A213F0A2EA01E0EA03C01207EA0F80EA1F00121E120C0F20798D1D>44
D<B612E0A81B087F9723>I<EA0780EA1FE0EA3FF0EA7FF8EAFFFCA6EA7FF8EA3FF0EA1F
E0EA07800E0E798D1D>I<1606160E161E161CA2163C163816781670A216F016E0150116
C015031680A2150716005D150EA2151E151C153C1538A21578157015F05DA214015D1403
5D140792C7FCA25C140E141E141CA2143C143814781470A214F05C13015CA213035C1307
91C8FC5B130EA2131E131C133C1338A21378137013F05BA212015B12035BA2120790C9FC
5A120E121E121CA2123C123812781270A212F05AA2275B7AC334>I<ECFFE0010713FC01
1F13FFD97FE013C09039FF803FE03A01FE000FF000038148486D7E491303000F81001F81
A348486D1380A3007F16C0A500FF16E0B3A2007F16C0A5003F1680A26D5B001F1600A200
0F5D6D130700075D6C6C495A6C6C495A6C6D485A90397FE0FFC0011FB5C7FC010713FC01
0013E02B3D7CBB34>I<140F5C147F495A130F48B5FCB6FCA213F7EAFE071200B3B3AA00
3FB612F8A4253C79BB34>I<903803FF80013F13F890B512FE00036E7E2607F80F7F260F
C00113F048486C7F48C76C7ED87FC06D7E7F486C6D7E7FA26F1380A46C5AA2EA1FC00007
C7FCC814005DA25E153F5E4B5A5E4B5A4A5B5E4A90C7FC4A5AEC0FF84A5A5DEC3F804AC8
FC14FED901F8EB0780495A495A4948EB0F00495A013EC7FC5B495C485A90B7FC485D5A5A
5A5A5AB7FC5EA3293C7BBB34>I<ECFFE0010F13FC013FEBFF80D9FF0113E03A01F8007F
F0D803E06D7E484880D80FF06D7E13FC486C80A47F5BA2120F6C485CD803F0133FC85BA2
4B5A5E4B5A4A5B4A90C7FCEC0FFC903807FFF05D15FE90390001FF809138007FE0ED3FF8
6F7E826F7E17806F13C0A3D8078015E0EA1FE0EA7FF8A2487EA417C0A2495B007F168049
1500D83FC05B001F4A5AD80FF0495A3A07FE01FFF06CB65AC61580011F01FCC7FC010113
C02B3D7CBB34>I<ED01F0A215031507150F151FA2153F157F15FFA25C5C5CEC0FBF153F
141E143C147C147814F0EB01E0130314C0EB0780EB0F005B133E133C5B5B12015B485A48
5A120F48C7FC121E5A5A12F8B812F8A4C8387FF000AB49B612F8A42D3C7DBB34>I<000E
1518D80FC014F801FC131F90B65AA25E5E5E93C7FC15FC5D15E092C8FC14F80180C9FCA9
903881FFC0018F13F801BF13FE9039FF01FF809039F8007FE001E06D7E4980496D7E6CC7
FCC87F150F82A31780A2120FEA3FC0487E487EA41700A25B6C48495A5B007CC75B6C143F
003F5D6C6C495AD80FE0495A2607FC075B0001B6C7FC6C14FC013F13F0010790C8FC293D
7BBB34>I<EC03FE91383FFFC091B512F0903903FE01F890390FF8007CD93FE07F90397F
C001FE4948487E485C4813005B1207120F5B001F6E5A6F5A003F91C8FCA25B127FA3EC3F
FC00FF49B47E01F9B57E9039FBC03FF09138800FF8D9FF007F6F7E49806F13805B17C0A3
4915E0A5127FA5123FA217C0121F7F000F16805D6C6C150000035D6D495A6C6D485A6C90
38E07FF0013FB55A010F1480010349C7FC9038007FE02B3D7CBB34>I<121E121F13F090
B712F0A35A17E017C0178017005EA2485D007CC7EA01F84B5A00784A5A5E150F4B5A484A
C7FC157E5DC85A14014A5A4A5AA24A5A141F5D143FA24AC8FCA25CA2495AA21303A31307
5CA2130FA5131FAA6D5A6D5A6D5A2C3F7ABD34>I<ECFFE0010713FE011F6D7E90397F80
3FE09039FC000FF0D801F06D7E48486D7E00076E7E491300000F8182A2487EA27F7F7F01
FF14FE14C0ECE0016C9038F803FC02FE5B9138FF87F06CECDFE0EDFF806C4AC7FC6C806C
816D14E0011F8016FC017F80EA01FE2603F83F7F2607F00F148048487E261FC00114C000
3F6D7E4848011F13E090C77E150348140048157F163F161FA2160FA217C07E7E6DEC1F80
6C6C15005ED81FF0147E6C6C495A3A07FF801FF8000190B512E06C6C1480011F49C7FC01
0113E02B3D7CBB34>I<ECFFE0010F13FC013F13FF90397FC07FC04848C66C7E48486D7E
00076E7E484880001F1407003F814980007F80A2178012FFA217C0A517E0A5007F5CA312
3F5D6C7E000F5C6C7E0003143B3901FF807B39007FFFF3011F13C30107018313C090C712
03A317805DA2D807F01500487E486C5C150F5EA24B5A4B5A49495A6C48495AD9C0015B26
07F80790C7FC6CB512FC6C14F06C6C13C0D90FFCC8FC2B3D7CBB34>I<EA0780EA1FE0EA
3FF0EA7FF8EAFFFCA6EA7FF8EA3FF0EA1FE0EA0780C7FCACEA0780EA1FE0EA3FF0EA7FF8
EAFFFCA6EA7FF8EA3FF0EA1FE0EA07800E2879A71D>I<16F84B7EA24B7EA34B7EA24B7F
A34B7FA24B7FA34B7F157D03FD7F15F8A2020180EDF07F020380EDE03FA2DA07C07F8202
0F814B7E021F811500824A81023E7F027E81147C8202FC814A7F0101825C91B7FC4982A2
498202C0C7123F83010F834A80011F8391C8FC834983013E81017E83137C83D801FE83B5
00FC49B612F8A4453F7CBE4E>65 D<B812F8EFFF8018F018FC26003FFCC7EA3FFEEF0FFF
7113807113C019E08319F0A27113F8A74D13F0A34D13E019C04D13804D13004D5AEFFFF8
91B712E095C7FC18F002FCC7EA3FFE943807FF807113C07113E07113F0F07FF819FCA2F0
3FFEA219FFA819FEA2187F19FCF0FFF85F4D13F04D13E0053F13C0BA120018FC18F095C7
FC403E7DBD4A>I<922607FF80131C92B500F8133C020702FE137C023F9138FF80FC91B5
38003FE1010301F0EB07F74901C0EB01FF011F90C8FCD93FFC153F4948151F495A484915
0F481707484915035C48170191C9FC481700A2485AA2197C127FA2491700A212FFAC127F
A27F193C123FA36C7E197C6C1878806C18F86E16F06C6D15016CEF03E06C6DED07C06D6C
150FD93FFEED1F806D6CED3F00010701C014FE6D01F0EB03F8010001FFEB1FF0023F90B5
12C0020792C7FC020014F8030713803E407ABE4B>I<B912FEA426003FFEC7EA3FFF1707
1701838484841980180FA21807A3EE078019C01803A395C7FC160FA2161F163F16FF91B6
FCA44AC6FC163F161F160FA204071478A319F0A393C8FCA2180119E0A21803A21807A218
0FF01FC0183F18FF1703173FBAFC1980A33D3E7DBD44>69 D<B912F8A426007FFCC713FC
171F170717011700A2187C187E183EA2181EA4041E131F180FA31800A2163EA2167E16FE
150391B5FCA4ECFC031500167E163EA2161EA693C8FCAEB712C0A4383E7CBD41>I<B600
FE017FB6FCA426007FFCC8383FFE00B3A691B8FCA402FCC8123FB3A8B600FE017FB6FCA4
483E7CBD51>72 D<B71280A426003FFEC7FCB3B3B2B71280A4213E7DBD27>I<B500FE05
1FB512E06E5FA26F5ED8003FF28000A2013D6D16F7A2013C6DED01E7A26E6CED03C7A26E
6CED0787A36E6CED0F07A26E6C151EA26E6C153CA26E6D1478A36E6D14F0A26E6DEB01E0
A26F6CEB03C0A26F6CEB0780A36F6CEB0F00A26F6C131EA26F6C5BA26F6D5AA36F6D5AA2
6FEBE1E0A293387FF3C0A270B45AA37090C7FCA2705AA2705AA2017E6E5AB6041FB612E0
A2705A705A5B3E7DBD62>77 D<B500FE033FB5FC8081A2C66C6D9138003F006F151E8101
7B7F01797F8113786E7E6E7F6E7F6E7F82806E7F6E7F6E7F6F7E6F7F83816F7F6F7F6F7F
6F7F8381707E7013807013C07013E07013F018F8827013FC7013FEEF7FFF71139E19DE71
13FE8383838383A2187F183F181F180F1807A21803180101FC1600B500FC167E193E191E
A2483E7CBD51>I<ED3FFE0203B512E0021F14FC913AFFF007FF8049D980007F010790C7
EA7FF0D90FFCEC1FF8D93FF8EC0FFE49486E7E49486E7F48496E7FA248496E7F48844890
C96C7EA2488449163FA2003F84A34848707EA400FF1980AD007F1900A26D5EA2003F60A3
6C6C4C5AA26C606E15FF6C606C6D4A5B6E5C6C606C6D4A5B6D6C4A90C7FC6D6C4A5A6DB4
EC7FFC01079039C001FFF06DD9F0075B010090B61280021F02FCC8FC020714F09126003F
FEC9FC41407ABE4E>I<B812F017FF18E018F828003FFE00017F9338003FFE94380FFF80
837113C019E0A27113F0A319F8A719F0A34D13E0A219C04D13804D1300EF3FFE4CB45A91
B712F018C005FCC7FC4ACAFCB3A6B77EA43D3E7DBD47>I<B812C017FCEFFF8018F02800
3FFE000113FC9338003FFE717E05077F85717FA2717FA285A761A24D5BA24D5B61DD1FFE
C8FC4D5A933803FFF091B712C04DC9FCA2913AFE000FFF80040313E004007F717E84173F
84171F84A685A5F20180F203C019C083A2719038E00780A2B76C6C9038F00F0071EBFC3F
9439007FFFFE061F13F8CC13E04A3F7DBD4E>82 D<903A01FF8001C0011FEBF803017FEB
FE0748B6128F489038007FDFD807F8EB0FFF4848130348487F4848EB007F163F127F4914
1F160F12FF1607A27FA26D1403A27F01FC91C7FC13FF6C13F8ECFF8015FC6CECFF806C15
E016F86C816C816C816C16806C6C15C0131F010715E0EB007F020314F0EC001F15030300
13F8167F163F12F0161FA2160FA27EA217F07E7EEE1FE07E6DEC3FC013E06DEC7F8001FE
903801FF003AFEFFE007FED8FC3FB512F8D8F80F5CD8F003148027E0001FFCC7FC2D407A
BE3A>I<003FB912F8A4903BFC007FFC007F01E0160FD87F80EE03FC90C71501007E1700
A2007C187CA20078183CA548181EA5C81600B3B1011FB712F0A43F3D7CBC48>I<B76C90
B61280A426003FFEC96CC7FC193EB3B3A5011F5FA2806D17FC616D6D1401616D6D4A5A6D
16076D6DEC1FC0DA7FF84A5ADA3FFE49B4C8FC913A0FFFC00FFC020390B55A020015E003
1F1480030101F8C9FC493F7DBD50>I<007FB912F8BA12FCA46C18F83E06776851>95
D<903807FF80013F13F048B512FC3903FC03FF2607E00013C0D80FF86D7E001F6E7E7F6F
7EA26F7EA26C5A6C5AEA01C0C8FCA3EC03FF49B5FC130F017F138F3901FFF00F00071380
481300EA1FFC485A127F5B12FF5BA3151FA26D133F127F6D49B4FC273FFC01F713FC391F
FE07E30007B5128100019038FE007F26001FF890C7FC2E2B7DA932>97
D<13FFB5FCA412077EB0ED7FE0913807FFFC021F13FFDA7F0013C002F8EB3FF04A6D7E4A
6D7E02806D7E8391C77E1880A218C082A318E0AA18C0A35E1880A24C13006E5C6E130F6E
5CD9FDF0495AD9F8F8EB7FE0903AF07F01FFC0D9E01FB5C7FCD9C00713F8C813C033407D
BE3A>I<EC7FF00103B5FC011F14C090397FE01FE09039FF8003F0489038000FF8484814
FC0007141F485A121F5B123FED0FF8007FEC07F049EB01C092C7FC12FFAB127FA27FA200
3F151E7F001F153E000F153C6D147C6C6C14F86C90388001F0C69038C003E090397FF00F
C0011FB51200010713FC9038007FE0272B7DA92E>I<EE07F8ED07FFA4ED003F161FB0EC
7FE0903803FFFC011F13FF90397FF00FDF9039FFC003FF000390C7FC4848147F000F153F
49141F121F485AA2127F5BA312FFAA127FA37F123FA2121F6D143F000F157F6C6C14FF6C
6C497F6CD98007EBFFE03A007FE01F9F90391FFFFE1F010713F89026007FC0EBE0003340
7DBE3A>I<ECFFE0010713FC013F13FFD97FE013803A01FF803FC0489038001FE04848EB
0FF0484814F8ED07FC485A003FEC03FEA3485A16FFA200FF80A390B7FCA301F0C8FCA512
7FA36C7E160F121F6D141F000F151E6C6C143E0003157C6C6C14F86C9038C003F090397F
F01FE0011FB512C00107EBFE009038007FF0282B7DA92F>I<EC07FCEC7FFF49B512C090
3907FE1FE090381FF83F90393FF07FF0EB7FE0A2EBFFC0A2481380ED3FE0ED0F8092C7FC
ABB612E0A400010180C7FCB3AE007FEBFF80A424407DBF20>I<903A03FF8003F0013F90
38F81FFC90B538FE7FFE0003903801FFFC3A07FC007FE1000F15E04848EB3FF0003FEDF8
7C49011F1300A2007F81A7003F5DA26D133F001F5D6C6C495A00075D9039FF01FF80DAFF
FEC7FCD80F3F13F801031380001ECAFCA2121FA37F7F90B6FC6C15F016FC6C15FF17806C
16C017E0120F271FC0000113F04848EB001F48C8EA0FF8160712FE1603A46C15076C16F0
6D140F6C6CEC1FE06C6CEC3FC0D80FF8ECFF803B03FF800FFE00C690B512F8011F14C001
0101FCC7FC2F3D7DA834>I<13FFB5FCA412077EB0ED3FF0EDFFFE02036D7EDA0FC07F91
391E007FE04A6D7E5C5C4A6D7E5CA25CA391C7FCB3A5B5D8FC07B512E0A4333F7CBE3A>
I<EA01F8487E487E487E481380A66C13006C5A6C5A6C5AC8FCA913FFB5FCA412077EB3AD
B512F8A415407CBF1D>I<EC1F80EC3FC0EC7FE0ECFFF04913F8A66D13F0EC7FE0EC3FC0
EC1F8091C7FCA9EC07F8EB0FFFA4EB003F141FB3B3A4121FEA3F80EA7FC0D8FFE013F014
3FA215E0EC7FC0D87FC01380903880FF00383F81FE6CB45A000713F0C613801D5385BF20
>I<13FFB5FCA412077EB1923803FFFEA4030013804CC7FC4B5AED03F04B5AED1FC04B5A
037EC8FC5DEC03F8EC07E04A7E4A7EEC7FFC14FF818102E77F02837F1401496C7F826F7E
6F7E151F6F7E826F7F6F7F816F7F83B5D8F807EBFFC0A4323F7DBE37>I<13FFB5FCA412
077EB3B3B1B512FCA4163F7CBE1D>I<D801FED93FF049B47E00FFDAFFFE010713F00203
9026FF801F13FCDA0FC09039C07E07FE913C1E007FE0F003FF00074990273FF1E0011380
000349ECF3C04AECF7806D486DB4C713C04A5CA24A5CA391C75BB3A5B5D8FC07B5D8E03F
13FFA450297CA857>I<D801FEEB3FF000FFECFFFE02036D7EDA0FC07F91391E007FE000
07496D7E00035B5C6D486D7E5CA25CA391C7FCB3A5B5D8FC07B512E0A433297CA83A>I<
EC7FF0903803FFFE011FEBFFC090397FE03FF09039FF800FF848496C7E48486D7E48486D
7E48486D1380001F16C0A2003F16E049147F007F16F0A400FF16F8AA007F16F0A46C6CEC
FFE0A2001F16C0000F16806D5B6C6C4913006C6C495A6C6D485A3A007FE03FF0011FB512
C0010791C7FC9038007FF02D2B7DA934>I<01FFEB7FE0B53807FFFC021F13FFDA7F0113
C09139F8007FF00007496D7E6C496D7E02806D7E8391C77E18808218C0A38218E0AA18C0
5EA34C1380A218006E495A6E131F6E5C6E495A6EEBFFE0DA7F035B021FB5C7FC020713F8
020013C092C9FCADB512FCA4333B7DA83A>I<3901FE01FC00FF903807FF804A13E09138
3F1FF0143C00079038783FF8000313F014E013FF14C0ED1FF09138800FE0ED038092C7FC
A291C8FCB3A4B6FCA425297DA82B>114 D<90381FF80E48B5123E000714FE380FE00738
1F800148C7FC007E147E007C143E12FC151EA27E7E6D90C7FC13E013FF6C13FCECFF806C
14E06C14F86C80000380C680133F01031480EB000F020113C000F0EB007F153F6C141FA2
150F7EA26C1580151F6C15006D5B01E0137E9038F803FC00FCB512F0D8F03F13C026E007
FEC7FC222B7DA929>I<EB0780A5130FA4131FA3133F137FA213FF5A1207001FEBFFFCB6
FCA30001EB8000B3A2151EA96C143C14C0A290387FE07890383FF0F090381FFFE0010713
C0010013001F3B7EB928>I<01FFEC07F8B5EB07FFA40007EC003F6C151FB3A6163FA316
7F6C15FFA26E487F6C913907DFFFE090397FE01F9F90391FFFFE1F010713F8010001E0EB
E000332A7CA83A>I<B500F890381FFFC0A400030180903803F8006CED01E06E13036C5E
80017F4A5A80160F013F92C7FC6E5B011F141E6E133E010F143C6E137C010714786E13F8
6D5C15816D5C15C16DEBC3C015E315E7027F5B15FF6E90C8FCA26E5AA26E5AA26E5AA26E
5AA26E5A32287EA737>I<B53CF83FFFF801FFFCA4000390C7903980001F80F10F006E01
7F5C6C70131E16FF6C6D6E5BA26E48157C017F6F13785DD93FF0D9CFF85BA29126F80787
1301011F03FC5B150FD90FFC903903FE03C0A29126FE1E011307010703FF5B153E902703
FF3C00018FC7FCA203F8EB7F9F6D16DEA26D49EB3FFCA24B131F027F5DA26E486D5AA24B
1307021F5DA26EC76C5A46287EA74B>I<B5D8F801B5FCA400019039C0003FC06C93C7FC
6D6C137E6E137C6D6C5B6D6C485A6D6C485A6D6C485A6D495A6D139F03FFC8FC6D5B6E5A
6E5A141F6E7E81814A7F4A7F147E91387C7FE002F87F49486C7E49486C7E49486C7E9038
0F8007011F6D7ED93F0080017E6D7F017C6D7FD801FC6E7EB5D88003B512C0A432287EA7
37>I<B500F890381FFFC0A400030180903803F8006CED01E06E13036C5E80017F4A5A80
160F013F92C7FC6E5B011F141E6E133E010F143C6E137C010714786E13F86D5C15816D5C
15C16DEBC3C015E315E7027F5B15FF6E90C8FCA26E5AA26E5AA26E5AA26E5AA26E5AA214
035D14075D000C130F003F91C9FC486C5A38FFC01E143E143C5C14F8387F81F0495A383E
0FC06CB45A6C48CAFCEA03F8323B7EA737>I<003FB612FCA39039F0003FF801C0EB7FF0
90C712FF003E4913E016C0484913805C4A130000785C4A5A143F4A5A5DC7485A5B495B5D
4990C7FC5B4948133C5C495A137F494813785C485B5A484913F891C7FC48481301001F14
034848130749EB0FF04848137FB7FCA326287DA72E>I E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fl ecbx1440 14.4 39
/Fl 39 122 df<EE7FFC031FB57E4AB612E0020715F8023F9038C00FFC913AFFFC0001FE
4901F0EB007F010701C0EB03FF4949497F4990C75A5B5C495A4D7F01FF6F5B5CA27190C7
FC715AEF00F895C8FCAA0407B512C0BAFCA5C601F8C7120F83B3B3A6B6D8F807B612C0A5
42547DD349>28 D<18C0EF01E01703A218C01707A2EF0F80A218005FA2173EA2173C177C
A25FA25F1601A24C5AA24C5AA25F160FA24CC7FCA2161E163EA25EA2167816F8A24B5AA2
5E1503A24B5AA25E150FA24BC8FCA2151E153EA25DA2157815F8A24A5AA24A5AA25D1407
A24A5AA292C9FC5CA2143EA2143C147CA25CA25C1301A2495AA25C1307A2495AA291CAFC
5BA2133EA2133C137CA25BA2485AA25B1203A2485AA25B120FA248CBFCA2121E123EA25A
A2127812F8A25A1260337879D942>47 D<151E153E15FE1403140F147FEB07FF0003B5FC
B6FCA3EBF87FEAFC00C7FCB3B3B3A6007FB712FCA52E4E76CD42>49
D<EC1FFE49B512F0010F14FC013FECFF804915E02701FF803F7F2703FC000713FCD807F0
01017F48486D7FD81F806E138048C87E7013C0D87FE016E001F8806D16F000FF817F7013
F8A56C5AA26C5A6C5AEA0380C914F05EA218E05E18C05E18804C13005F4C5A4C5A5F4B5B
4B5B4B5B94C7FCED0FFC4B5A4B5AED7FC04B5A4A90C8FCEC03FC4A5A4A4814F84A5A4A5A
4AC8FC02FEEC01F0495A495A495A5CD90F80140349C8FC013E1507017FB7FC90B812E05A
5A5A5A5A5A5AB9FC18C0A4354E7ACD42>I<913807FFC0027F13FC0103B67E010F15E090
261FF80313F890267FC0007F01FEC7EA3FFE48488148486E138013FE486C6C6D13C08048
17E080A66C5B18C06C5B6C90C75AD80038168090C8FC4C1300A24C5A5F4C5A4B5B4B13C0
030F5BDB7FFEC7FC91387FFFF816C016FCEEFF80DA000313E09238007FF8EE3FFE707E70
138018C07013E018F07013F8A218FC82A218FEA3EA03C0EA0FF0EA3FFC487EA2B5FCA218
FCA25E18F8A26C4816F0495C4916E0D83FE04A13C06C485CD80FF04A1380D807FE91387F
FE003B03FFE003FFFC6C90B65A6C6C15E0010F92C7FC010114FCD9001F1380374F7BCD42
>I<17FC1601A216031607160FA2161F163F167FA216FF5D5DA25D5D5D167F153E157E15
FC15F8EC01F01403EC07E015C0EC0F80141FEC3F00143E5C14FC495A5C495A1307495A5C
49C7FC5B137E137C5B1201485A5B485A120F485A90C8FC123E127E5ABA1280A5C901FCC7
FCAF021FB71280A5394F7CCE42>I<486C150601F0153E01FEEC01FED9FFF0133F91B65A
5F5F5F5F5F94C7FC16FC5E16E093C8FC15FC01F0138091CAFCAC913807FF80023F13F891
B512FE01F36E7E9026FFFC0113E09139E0007FF891C76C7E496E7E01F86E7E5B70138049
16C0C9FC18E08218F0A418F8A31203EA0FE0EA3FF8487EA212FF7FA218F0A25B5E6C4816
E05B01C016C06CC85A18806C6C4A13007FD80FF04A5A6C6CECFFFCD803FE4913F02701FF
E00F5B6C6CB612806D92C7FC010F14F8010114C09026003FFCC8FC354F7ACD42>I<ED07
FE92B512C0020314F0021F14FC91397FFC01FE9139FFE0007F01030180EB3F804990C712
1F4948EC7FC0494814FF4948010313E0495A49485B5A485BA2485BA2486F13C091C7FC48
03001300177E94C7FC5AA25B127FA2ED3FF04AB5FC020714C000FF4914F091391F807FF8
91393E001FFE02786D7E4A6D13807013C06D5A4A6D13E018F05C7013F8A291C813FCA449
16FEA3127FA6123FA37F6C17FCA36C17F85E7E6E15F06C17E06C6D5B6E15C06C4B13806D
6C491300D93FFC495A6DB4EBFFFC010790B512F06D5D01001580021F01FCC7FC020313C0
374F7BCD42>I<121F7F7FEBFF8091B8FCA45A18FE18FC18F818F0A218E018C018804817
000180C8123E007EC9127E5F007C4B5A4C5A5F16074C5A484B5A4CC7FC167E167CC912FC
4B5A4B5AA24B5A150F4B5AA24B5AA24BC8FC5DA25C5D1403A214075D140FA3141FA2143F
A34A5AA414FFA65BAB6D5B6E5A6E5A6E5A385279D042>I<913803FFC0023F13FC49B67E
010715E090260FFC0013F8D93FE0EB1FFCD97F80EB07FE49C76C7E496E13804848800003
17C049157F120718E0173F120FA27FA27F7F6E147F02E015C08002FC14FF6C01FF15806F
481300EDE0036C9138F807FE6F485A6C9138FF1FF06CEDFFE017806D4AC7FC7F010F6E7E
6D81010115F06D81010315FE010F81D93FF71580D97FC115C02701FF807F14E048EB001F
48486D14F04848010314F848481300496E13FC003F151F491407007F6F13FE491400177F
00FF163F49151F170F1707A21703A218FCA27F127F6DED07F8A26C6CED0FF07F6C6CED1F
E06C6CED3FC06C6CEDFF806C01C0010313006C01FCEB3FFE6C6CB612F8011F15E0010715
80010002FCC7FC020F13C0374F7BCD42>I<EA07E0EA1FF8EA3FFCEA7FFEA2B5FCA6EA7F
FEA2EA3FFCEA1FF8EA07E0C7FCB3A3EA07E0EA1FF8EA3FFCEA7FFEA2B5FCA6EA7FFEA2EA
3FFCEA1FF8EA07E0103576B425>58 D<932603FFF01407047F01FF140F0307B600E0131F
033F03F8133F92B700FE137F02039126C003FF13FF020F01F8C7EA3FC1023F01C0EC0FE3
91B5C80003B5FC4901FC814949814901E082011F498249498292CA7E4948834948835A4A
83485B4885A24849187FA2485B1B3FA2485B1B1FA25AA21B0091CDFCA2B5FCAE7EA280A3
6C1A1FA36C7FA21B3F6C7F1B3E6C7F1B7E6C6D187C6C1AFC6E18F86C19016D6CEF03F06D
7E6FEE07E06D6DEE0FC001076DEE1F806D01F8EE3F006D6D16FE6D01FF4B5A023F01C0EC
07F8020F01FCEC3FF00203903AFFC001FFC0020091B6C7FC033F15FC030715F0DB007F14
80040301F0C8FC505479D25F>67 D<B81280A5D8000701F0C7FCB3B3B3B2B81280A52952
7DD130>73 D<B600F04EB612F06F606F60A3D800076D4E49C7FCA2DADFFFF01F7FA202CF
6D173EA302C76D177CA202C36D17F8A202C16DEE01F0A202C06DEE03E0A36F6CEE07C0A2
6F6CEE0F80A26F6CEE1F00A36F6D153EA26F6D5DA26F6D5DA36F6D4A5AA26F6D4A5AA270
6C4A5AA3706C4A5AA2706C4AC7FCA2706D133EA3706D5BA2706D5BA2706D485AA2706D48
5AA3716C485AA2716C485AA2716C48C8FCA37113BEA27113FCA2715BA3715BA2715BA2D9
1FF06F5AB600FE050FB712F0A2725AA272C7FC74527CD17D>77 D<B600F84BB612FC8181
81A2D800076E91C7383FE00070EE0F80828214DF02CF7F02C77F8202C37F14C102C0806F
7F836F7F816F7F6F7F83816F7F6F80707F8482707F707F707F8482707F7080717F858371
7F717F85717F83717F7114801AC07213E0847213F07213F81AFC7213FE847213FF72148F
1BCF7313EF857313FF85A285858585A286868686A286868686EB1FF0B600FE177F1B3F1B
1F1B0FA25E527CD167>I<93381FFF800303B512FC033FECFFC092B712F00207D9F80113
FE021F903A80001FFF804A48C700077FDAFFF8020113F049496E7F4901C0ED3FFC49496F
7E4990C96C7E4948707F013F854948707F4948707F48864A8248864A177F48864849717E
A3481B804A83481BC0A44890CB6C13E0A5B51AF0AF6C1BE06E5FA46C1BC0A26E5F6C1B80
A36C6D4D1300A26C6D4D5AA26C626C6D4C5B6E5E6C626D6C4C5B6E5E6D6D4B5B6D6D4B5B
6D6D4B90C7FC6D6D4B5A01016D4A13F86D01FE02075B91263FFFC0013F13C06ED9F801B5
5A020790B648C8FC020116F8DA003F15C003074AC9FCDB001F1380545479D263>I<B912
FCF0FFE019FE737E1AE0D8000F01E0C7003F7F060313FC06007F737E7313807313C07313
E0851BF0A21BF885A21BFCA91BF8A3611BF0A21BE04F13C0614F13804F13004F5A060713
F8063F5B92B812C097C7FC19F8198003E0CBFCB3AEB712FEA54E527CD15A>I<B912E018
FF19F019FE737ED8000701F0C714E0060F7F060313FC06007F737E737F8587737FA28785
A287A863A261636361634F90C8FC4F5A4F5A06035B060F13E095B5128092B748C9FC19F0
19C019F09226F0000713FC050013FF063F7F727F727F727F727FA2727FA28486A886A71D
707513F8A2851C017301C013F0A273EBE003B86C6D9038F007E0739038FC1FC0070190B5
1280736C1400080F5BCE13F85D537CD162>82 D<DA0FFE141C91B500F0133C010702FC13
7C011F02FF13FC017F15C19026FFF00113E148903980001FFB4890C7EA07FFD807FC1401
4848804848153F171F4848150FA2007F1607491503A2170112FFA217007FA26D167CA27F
7F6D93C7FC6C7E14C014F8ECFF806C14F8EDFFC06C15FC6CEDFF8017F06C16FC6C826C70
7E6C836D82011F8201078213016D6C81020781EC007F030380ED003F040314801600173F
837113C0838312F883A3837EA319807EA26C5E19007F6D4B5A7F6D4B5A01FC4B5A6D151F
D9FFC04A5AD97FF8ECFFE028FE1FFF80075B010790B6C7FCD8FC0115FC486C6C14F04801
0F14C0489026007FFCC8FC3A5479D249>I<003FBB12FCA59126C0007FEB000301FCC7ED
003FD87FF0F00FFE49180749180349180190C81600A2007E1A7EA3007C1A3EA500FC1A3F
481A1FA6C91700B3B3AC49B912C0A550517BD05B>I<EC3FFE0107B512E0011F14FC017F
14FF2701FFC00F13C02703FE00037F486C01007F6E6D7E486D80707EA2707EA3707F6C5B
6C90C7FC6C5AC9FCA60307B5FC0203B6FC147F0103B7FC011FEBF00F017F1300EBFFFC00
0313F04813C0485B4890C7FC5A5B485AF081F012FF5BA35EA26D5C127F6D5C003F03F713
C36DD901E314E06CD9C00714FF00079026F01F8114C06C90B5C61480C602FC6D1300011F
01F0EB3FFC01010180EB07F03C387CB642>97 D<913803FFE0023F13FE91B67E010315E0
010F9038003FF8D93FFCEB07FC4948497E4948131F4849497E485B485BA24890C7FC5A5B
003F6F5A705A705A007F92C8FC5BA312FFAD127F7FA3123F7F6CEE0F80A26C6D141F1800
6C6D5C6C6D143E6C6D147E6C6D5C6D6C495A6DB4EB07F0010F9038C01FE06D90B5128001
014AC7FCD9003F13F80203138031387CB63A>99 D<943803FF80040FB5FCA5EE003F170F
B3A4913803FF80023F13F849B512FE0107ECFF8F011F9038C03FEF90273FFE0007B5FCD9
7FF8130149487F484980484980484980488291C8FC5A5B123FA2127F5BA312FFAD127FA3
7F123FA3121F7F6C5E6C6D5C5F6C6D91B5FC6C6D5B6C6D4914E0D97FFCD90FEFEBFF80D9
1FFFEB7F8F010790B5120F010114FC6D6C13E00207010049C7FC41547CD249>I<913807
FF80027F13F849B512FE01076E7E011F010313E0903A3FFC007FF0D97FF06D7E49486D7E
4849130F48496D7E48824890C77E1880485A82003F17C0A3485A18E082A212FFA290B8FC
A401FCCAFCA6127FA37F123FA2EF03E06C7E17076C17C06C6D140F18806C6D141F6C6DEC
3F006C6D147ED97FFC495AD91FFFEB07F86D9038E03FF0010390B512C001005D023F01FC
C7FC020113E033387CB63C>I<DA1FFE14FE49B539E007FF80010FDAFC1F13C0013FDAFF
7F13E090267FF807EBFF072701FFE001EBF07F48497E484990387FF83F91C7003F14C048
EEFC1F489338FE070049021F90C7FCA2003F82A9001F5EA26D143F6C5E6C5E6E137F6C6D
495A6C6D485B6CD9F80713804890B6C8FCD803EF14FC01C114E02707C01FFEC9FC49CBFC
A2487EA37FA27F13FC90B612FE6CEDFFF017FCEFFF806C8318F06C836C837F48B87E1207
D80FFCC700037F4848EC003F4848150F48486F138083485A83A56D5D007F18006D5D003F
5F6C6C4B5A01FE153FD807FFED7FF06C01C049485AC601FC011F1380013FB648C7FC010F
15F8010115C0D9000F01F8C8FC3B4F7CB542>103 D<EB3FF8B5FCA51203C6FCB3A4EE1F
FC93B57E030314E0030F14F892391FC07FFC92397E003FFE03F86D7EECF9F04B6D7FECFB
C0ECFF8092C76C7FA25CA25CA45CB3ACB6D8F807B612C0A542537CD249>I<133FEBFFC0
487F487FA2487FA66C5BA26C5B6C5B013FC7FC90C8FCAEEB1FF8B5FCA512017EB3B3A6B6
12F0A51C547CD324>I<EB3FF8B5FCA51203C6FCB3A50407B512F0A59339007FF000EF3F
C04D5A4DC7FCEE01FC4C5AEE0FF04C5A4C5A4CC8FC16FEED03FC4B5A4B5A4B5A4B7E4B7E
ECF9FF02FB7F91B57EA28203BF7F031F7F14FE4A6C7FDAF0077F6F7FA26F7F6F7F167F83
707F707FA2707F707F707FA2707F707F84B6D8F00F14FEA53F537DD245>107
D<EB3FF8B5FCA51203C6FCB3B3B3B1B612F8A51D537CD224>I<D93FF0D91FF84AB47EB5
91B56C010F13F8030302E0013F13FE030F6E90B6FCDB3F809027F803F80F7F922A7E007F
FC07E0077F000302F890283FFE0F80037FC6D9F1F0011F49487EDAF3E0DAFF3E814B153C
DAF7805D92C76C496D7F14FF4A5EA24A5EA34A5EB3ADB6D8F80FB66CB612F8A565367BB5
6E>I<D93FF0EB1FFCB591B57E030314E0030F14F892391FC07FFC92397E003FFE000302
F86D7EC6EBF1F04B6D7FECF3C0ECF78092C76C7F14FF5CA25CA45CB3ACB6D8F807B612C0
A542367CB549>I<913801FFC0023F13FE91B67E010315E0010F018013F8903A3FFC001F
FED97FF0EB07FF49486D7F48496D7F48496D7F91C8127F4883488349153F001F83A2003F
8349151FA2007F83A400FF1880AC007F1800A3003F5F6D153FA2001F5FA26C6C4B5AA26C
6D4A5A6C5F6C6D495B6C6D495B6D6C4990C7FCD93FFCEB1FFE6DB46CB45A010790B512F0
010115C0D9003F49C8FC020313E039387CB642>I<D93FF8EB7FF0B50107B5FC031F14C0
037F14F09126F9FF0013FCDAFFF8EB3FFF000302E0010F7FC602806D7F92C76C7F4A824A
804A6E7F85187F85A2183F85A4721380AD4E1300A44E5AA26118FF616E5C616E4A5B6E4A
5B6F495B03E04990C7FC6FEB7FFE913AF9FE01FFF802F8B65A033F14C0030749C8FC0300
13E093CAFCB1B612F8A5414D7DB549>I<90393FF001FCB590380FFF804B13E0037F13F0
9238FE1FF89138F1F83F00019138F07FFC6CEBF3E015C0ECF780A2ECFF00EE3FF84AEB1F
F0EE0FE093C7FC5CA45CB3ABB612FEA52E367DB535>114 D<903903FFC00E011FEBFC1E
90B6127E000315FE3907FE003FD80FF0130F4848130348481301491300127F90C8127EA2
48153EA27FA27F01F091C7FC13FCEBFF806C13FEECFFF06C14FE6F7E6C15E06C816C15FC
6C81C681133F010F15801301D9000F14C0EC003F030713E0150100F880167F6C153FA216
1F7EA217C07E6D143F17807F6DEC7F0001F85C6DEB03FE9039FF801FFC486CB512F0D8F8
1F14C0D8F00791C7FC39E0007FF02B387CB634>I<147CA614FCA41301A31303A21307A2
130F131F133F137F13FF1203000F90B512FEB7FCA426007FFCC8FCB3A9EE0F80ABEE1F00
6D7EA2011F143E806D6D5A6DEBC1F86DEBFFF001005C023F1380DA03FEC7FC294D7ECB33
>I<D93FF8913801FFC0B50207B5FCA50003ED001FC61607B3AE5FA35FA25F137F5F6D6C
14F7DC01E713F06D6CD907C7EBFFC0903A0FFF801F876D90B51207010114FC6D6C13F002
0701C091C7FC42377CB549>I<B600E1B6D8800FB5FCA500019026F0000301C0C7EA3FE0
6E6D6DEC0F806CF21F00A26E6D6D5C017F193E6E147F72147E013F197C6E6F14FC6D6117
FF6F6E13016D4A5E03C06E13036D615E03E001E7EB80076D02075E03F001C313C06D4E5A
160F03F80181EBE01F6D96C7FC6F48C6FC735A027F49153EDBFE3E90387FF87E023F177C
167EDBFF7C90383FFCFC6E01FC5D4CEB1FFF6E5FA24C7F6E5F4C7F6E5FA24C7F6E5F4C7F
A26E94C8FC93C8FC6F5DA2033E157C58367DB45F>119 D<B600E090381FFFFCA5000101
F8C7000113006CEE007C6E15FC017F5E6E1401013F5E8017036D6D5C17076D5E6F130F6D
5E6F131F6D93C7FC815F6D6D133E177E6D157C6F13FC027F5C811601DA3FFF5B16036E5C
16876E5C16CF6E5C16EF16FF6E91C8FCA26E5BA26E5BA26F5AA36F5AA26F5AA26F5AA35E
151F93C9FC5D153E157ED81FC0137C487E486C13FC486C5B14015D4A5A14074A5A6C4848
5A4948CAFC495A383F81FC6CB45A6C5B000313C0C648CBFC3E4D7DB445>121
D E
%EndDVIPSBitmapFont
end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%PaperSize: a4

%%EndSetup
%%Page: 1 1
1 0 bop 0 91 a Fl(Con)l(ten)l(ts)0 295 y Fk(1)84 b(Mo)s(dule)34
b Fj(Cash)h Fk(:)46 b(The)35 b(Caml)f(Shell)2327 b(2)136
408 y Fi(1.1)92 b(Cop)m(yrigh)m(t)33 b(&)d(source-co)s(de)h(license)37
b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(3)136 520 y(1.2)92 b(Ca)m(v)m(eats)77 b(.)46 b(.)g(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)137 b(3)136 633 y(1.3)92 b(Naming)31 b(con)m(v)m(en)m(tions)86
b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)137 b(3)343 746 y(1.3.1)105 b(Common)31 b(naming)h(con)m(v)m(en)
m(tions)62 b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(3)343 859 y(1.3.2)105 b(Cash)30 b(o)m(wn)i(naming)f(con)m(v)m(en)m
(tions)j(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137 b(4)136
972 y(1.4)92 b(A)30 b(w)m(ord)i(ab)s(out)e(Unix)g(standards)49
b(.)d(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(4)0 1175 y Fk(2)84 b(Pro)s(cess)34 b(notation)2955
b(5)136 1288 y Fi(2.1)92 b(Pro)s(cedures)32 b(and)f(syn)m(tax)f
(extensions)37 b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(5)136 1401 y(2.2)92 b(In)m(terfacing)32 b(pro)s(cess)e(output)h(to)g
(Caml)57 b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(5)136 1514 y(2.3)92 b(More)31 b(complex)g(pro)s(cess)f(op)s(erations)
62 b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(7)136 1627 y(2.4)92 b(Multiple)32 b(stream)e(capture)65
b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(7)136 1740 y(2.5)92 b(Pro)s(cess)31 b(\034lters)49
b(.)d(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)137 b(8)0 1943 y Fk(3)84 b(System)34
b(calls)3155 b(8)136 2056 y Fi(3.1)92 b(Errors)68 b(.)45
b(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137 b(9)136 2169 y(3.2)92
b(I/O)26 b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137
b(9)343 2282 y(3.2.1)105 b(P)m(erv)-5 b(asiv)m(es)31
b(I/O)f(op)s(erations)63 b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)137 b(9)343 2395 y(3.2.2)105 b(Channel)31 b(manipulation)i(and)e
(standard)g(c)m(hannels)65 b(.)45 b(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)137 b(9)343 2508 y(3.2.3)105
b(String)31 b(c)m(hannels)56 b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(11)343 2621 y(3.2.4)105
b(Rev)m(ealed)31 b(c)m(hannels)g(and)g(\034le)g(descriptors)82
b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)92 b(11)343 2734 y(3.2.5)105 b(Channel-mapping)33
b(mac)m(hinery)92 b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(14)343 2847 y(3.2.6)105 b(Unix)30 b(I/O)79 b(.)46 b(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(15)343 2959 y(3.2.7)105 b(Bu\033ered)31 b(I/O)79 b(.)45
b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
92 b(23)136 3072 y(3.3)g(File)31 b(system)77 b(.)45 b(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)92 b(24)136 3185 y(3.4)g(Directories,)32 b(globbing)g(and)e(temp)h
(\034les)38 b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(31)136 3298 y(3.5)g(Pro)s(cesses)84 b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(36)343 3411 y(3.5.1)105 b(Pro)s(cess)30 b(ob)5 b(jects)30
b(and)h(pro)s(cess)f(reaping)91 b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(39)343 3524 y(3.5.2)105 b(Pro)s(cess)30 b(w)m(aiting)47
b(.)f(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
92 b(41)343 3637 y(3.5.3)105 b(Analysing)30 b(pro)s(cess)g(status)g(co)
s(des)77 b(.)46 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(42)136
3750 y(3.6)g(Pro)s(cess)31 b(state)79 b(.)46 b(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(42)136 3863 y(3.7)g(User)30 b(and)h(group)g(database)g(access)48
b(.)e(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(44)136 3976 y(3.8)g(A)m(ccessing)31 b(command-line)i(argumen)m(ts)45
b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(45)136
4089 y(3.9)g(System)31 b(parameters)58 b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(46)136
4201 y(3.10)47 b(Signal)32 b(system)55 b(.)46 b(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(46)136 4314 y(3.11)47 b(Time)39 b(.)46 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)92 b(47)343 4427 y(3.11.1)60 b(T)-8 b(erminology)29
b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)92 b(48)343 4540 y(3.11.2)60 b(Basic)30 b(data)h(t)m(yp)s
(es)76 b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)92 b(48)343 4653 y(3.11.3)60 b(Time)31 b(zones)72
b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)92 b(49)343 4766 y(3.11.4)60 b(Pro)s(cedures)84
b(.)46 b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)92 b(50)136 4879 y(3.12)47 b(En)m(vironmen)m(t)34
b(v)-5 b(ariables)64 b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)92 b(52)343 4992 y(3.12.1)60
b(P)m(ath)31 b(lists)f(and)h(colon)g(lists)38 b(.)46
b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(54)343
5105 y(3.12.2)60 b($USER,)30 b($HOME,)h(and)g($P)-8 b(A)g(TH)29
b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(54)136 5218
y(3.13)47 b(T)-8 b(erminal)33 b(device)d(con)m(trol)91
b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(55)343 5331 y(3.13.1)60 b(P)m(ortabilit)m(y)33 b(across)d(OS)g(v)-5
b(arian)m(ts)41 b(.)k(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(55)1927 5589 y(1)p eop
%%Page: 2 2
2 1 bop 343 91 a Fi(3.13.2)60 b(Miscellaneous)31 b(pro)s(cedures)89
b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(56)343
204 y(3.13.3)60 b(The)31 b(tt)m(y_info)g(record)g(t)m(yp)s(e)85
b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(56)343
317 y(3.13.4)60 b(Other)31 b(terminal-device)h(pro)s(cedures)46
b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(68)343 430 y(3.13.5)60
b(Con)m(trol)32 b(terminals,)f(sessions,)f(and)g(terminal)i(pro)s(cess)
e(groups)60 b(.)46 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(70)343 543 y(3.13.6)60 b(Pseudo-terminals)53 b(.)45
b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(71)0 746 y Fk(4)84 b(Net)m(w)m(orking)3134 b(72)136
859 y Fi(4.1)92 b(So)s(c)m(k)m(ets)i(.)46 b(.)g(.)f(.)h(.)f(.)h(.)g(.)f
(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(72)136 972 y(4.2)g(So)s(c)m(k)m(et)32 b(addresses)83
b(.)46 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)92 b(73)136 1085 y(4.3)g(High-lev)m(el)32
b(in)m(terface)49 b(.)d(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)92 b(74)136 1198 y(4.4)g(So)s(c)m(k)m(et)32
b(primitiv)m(es)60 b(.)46 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(75)136 1311 y(4.5)g(P)m(erforming)
33 b(input)e(and)g(output)g(on)f(so)s(c)m(k)m(ets)72
b(.)45 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(77)136 1424 y(4.6)g(So)s(c)m(k)m
(et)32 b(options)24 b(.)46 b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(77)136
1537 y(4.7)g(Database-information)33 b(en)m(tries)88
b(.)46 b(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(79)0 1740 y Fk(5)84 b(Strings)33 b(and)i(c)m(haracters)2644
b(81)136 1853 y Fi(5.1)92 b(Manipulating)32 b(\034le)f(names)69
b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(81)343 1966 y(5.1.1)105 b(T)-8 b(erminology)29 b(.)46
b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)92 b(82)343 2079 y(5.1.2)105 b(Pro)s(cedures)84 b(.)46
b(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)92 b(82)343 2192 y(5.1.3)105 b(Other)31 b(string)g(manipulation)h
(facilities)42 b(.)k(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(86)343 2304
y(5.1.4)105 b(Character)32 b(predicates)54 b(.)45 b(.)h(.)g(.)f(.)h(.)f
(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(86)0 2508 y Fk(6)84
b(Reading)34 b(delimited)g(strings)2492 b(87)0 2711 y(7)84
b(Record)34 b(I/O)g(and)g(\034eld)h(parsing)2341 b(90)136
2824 y Fi(7.1)92 b(Reading)31 b(records)j(.)45 b(.)h(.)g(.)f(.)h(.)f(.)
h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(90)136 2937 y(7.2)g(P)m(arsing)32 b(\034elds)70 b(.)46
b(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g
(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)92 b(91)343 3050 y(7.2.1)105 b(Field)31
b(readers)79 b(.)45 b(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h
(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)92 b(94)343 3163 y(7.2.2)105 b(F)-8
b(orw)m(ard-progress)33 b(guaran)m(tees)f(and)e(empt)m(y-string)i(matc)
m(hes)d(.)45 b(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(96)0 3366 y Fk(8)84 b(Running)32 b(Cash)3013 b(96)136
3479 y Fi(8.1)92 b(Making)31 b(true)g(executables)54
b(.)45 b(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)
f(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(97)136 3592 y(8.2)g(Making)31 b(b)m(yteco)s(de-only)g(executables)91
b(.)46 b(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)
h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92 b(97)136
3705 y(8.3)g(Cash)31 b(scripts)43 b(.)i(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h
(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)
f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(97)136 3818 y(8.4)g(Cash)31 b(switc)m(hes)46 b(.)g(.)f(.)h(.)g(.)f(.)
h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f
(.)h(.)g(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)f(.)h(.)f(.)h(.)g(.)f(.)h(.)92
b(98)0 4104 y Fl(1)131 b(Mo)t(dule)44 b Fh(Cash)e Fl(:)58
b(The)44 b(Caml)g(Shell)0 4425 y Fi(Cash)33 b(is)f(a)h(Unix)g(shell)g
(that)g(is)g(em)m(b)s(edded)h(within)g(Ob)5 b(jectiv)m(e)34
b(Caml.)48 b(It's)33 b(a)g(Caml)g(implemen)m(tation)j(of)c(\(an)0
4538 y(as)37 b(large)h(as)g(p)s(ossible)f(subset)g(of)7
b(\))37 b(the)h(API)f(of)h(Scsh,)h(the)f(Sc)m(heme)h(Shell)f(b)m(y)g
(Olin)g(Shiv)m(ers.)63 b(See)38 b(the)g(Scsh)0 4651 y(man)m(ual)29
b([)p Fj(ftp://ftp.scsh.net/pub/scsh/0.5/scsh-)t(manual.ps.gz)p
Fi(])f(of)f(whic)m(h)i(this)f(man)m(ual)i(is)d(a)h(mere)0
4764 y(adaptation.)50 b(\()p Fg(This)34 b(is)h(to)f(che)-5
b(ck)38 b(that)d(Olin)f("did)h(it.)48 b([He])34 b(did)h(it)f(al)5
b(l)35 b(by)g([him]self")f(\026)h(you)g(should)g(at)g(le)-5
b(ast)0 4877 y(r)g(e)g(ad)30 b(his)d(for)-5 b(ewor)g(d,)30
b(`A)-5 b(cknow)5 b(le)-5 b(dgments'.)41 b(In)28 b(no)g(way)g(prior)g
(know)5 b(le)-5 b(dge)30 b(of)e(Scsh)g(is)g(ne)-5 b(c)g(essary)29
b(to)g(use)g(Cash.)p Fi(\))141 5013 y(Cash)c(is)f(designed)i(for)f
(writing)g(useful)g(standalone)h(Unix)e(programs)i(and)f(shell)g
(scripts)g(\026)g(it)g(spans)f(a)h(wide)0 5126 y(range)34
b(of)g(application,)i(from)e(\020script\021)41 b(applications)36
b(usually)d(handled)i(with)f(p)s(erl)g(or)g(sh,)g(to)g(more)g(standard)
0 5239 y(systems)29 b(applications)j(usually)f(written)g(in)f(C.)1927
5589 y(2)p eop
%%Page: 3 3
3 2 bop 141 91 a Fi(Cash)37 b(has)h(t)m(w)m(o)g(comp)s(onen)m(ts:)56
b(a)37 b(pro)s(cess)g(notation)h(for)f(running)i(programs)f(and)f
(setting)h(up)f(pip)s(elines)0 204 y(and)f(redirections)h(\(not)f(y)m
(et)f(implemen)m(ted\),)40 b(and)c(a)f(complete)i(syscall)e(library)h
(for)f(lo)m(w-lev)m(el)j(access)d(to)g(the)0 317 y(op)s(erating)e
(system.)46 b(This)32 b(man)m(ual)i(giv)m(es)e(a)g(complete)i
(description)f(of)f(Cash.)46 b(\(A)32 b(general)h(discussion)g(of)e
(the)0 430 y(design)i(principles)g(b)s(ehind)g(Scsh)f(can)h(b)s(e)f
(found)g(in)h(the)f(pap)s(er)h(\020A)f(Sc)m(heme)i(Shell\021)40
b([)p Fj(ftp://ftp.scsh.net/)0 543 y(pub/scsh/papers/scsh-)t
(paper.ps.gz)p Fi(].)0 805 y Ff(1.1)112 b(Cop)m(yrigh)m(t)36
b(&)i(source-co)s(de)g(license)0 1000 y Fi(Cash)h(op)s(en-source)h(and)
f(can)g(b)s(e)g(freely)g(redistributed;)44 b(it)39 b(is)g(distributed)h
(under)f(the)h(terms)f(of)f(the)i(GNU)0 1113 y(Lesser)30
b(General)i(Public)f(License)g(v)m(ersion)g(2.1)g(\(see)f(the)h(\034le)
f Fj(LGPL)g Fi(in)h(the)g(distribution\).)0 1375 y Ff(1.2)112
b(Ca)m(v)m(eats)0 1571 y Fi(It)40 b(is)g(imp)s(ortan)m(t)i(to)e(note)h
(what)g(Cash)g(is)f Fg(not)p Fi(,)i(as)e(w)m(ell)i(as)e(what)h(it)f
(is.)70 b(Cash)41 b(is)f(primarily)h(designed)g(for)0
1684 y(the)f(writing)g(of)f(shell)g(scripts)h(\026)f(programming.)70
b(It)39 b(is)g(not)g(a)h(v)m(ery)f(comfortable)i(system)e(for)g(in)m
(teractiv)m(e)0 1796 y(command)46 b(use:)67 b(the)45
b(curren)m(t)g(release)g(lac)m(ks)f(job)g(con)m(trol,)49
b(command-line)e(editing,)h(a)c(terse,)k(con)m(v)m(enien)m(t)0
1909 y(command)32 b(syn)m(tax,)e(and)h(it)f(do)s(es)g(not)h(read)g(in)f
(an)h(initialisation)h(\034le)e(analogous)i(to)e Fj(login)g
Fi(or)h Fj(.profile)p Fi(.)141 2022 y(Ho)m(w)m(ev)m(er,)h(Cash)f(has)f
(a)g(v)m(ersion)h(string:)0 2159 y Fj(val)47 b(version)g(:)g(string)0
2421 y Ff(1.3)112 b(Naming)36 b(con)m(v)m(en)m(tions)0
2616 y Fi(F)-8 b(ollo)m(wing)36 b(Scsh,)e(w)m(e)g(use)g(a)f(general)i
(naming)f(sc)m(heme)h(that)f(consisten)m(tly)g(emplo)m(ys)h(a)e(set)g
(of)h(abbreviations.)0 2729 y(This)c(is)g(in)m(tended)i(to)f(mak)m(e)g
(it)f(easier)h(to)g(remem)m(b)s(er)g(the)g(names)g(of)f(things.)0
2988 y Fk(1.3.1)103 b(Common)34 b(naming)f(con)m(v)m(en)m(tions)0
3183 y Fi(Some)e(of)f(the)h(common)g(con)m(v)m(en)m(tions)i(w)m(e)e
(share)g(with)f(Scsh)h(are:)136 3345 y Fe(\017)46 b Fj(fdes)30
b Fi(or)h Fj(fd)f Fi(means)h(\020\034le)f(descriptor,\021)40
b(a)30 b(small)h(in)m(teger)g(used)g(in)f(Unix)g(to)h(represen)m(t)g
(I/O)g(c)m(hannels.)136 3522 y Fe(\017)46 b Fj(call_with_...)73
b Fi(Pro)s(cedures)42 b(that)g(call)f(their)h(argumen)m(t)h(on)f(some)f
(computed)i(v)-5 b(alue)41 b(are)h(usually)227 3635 y(named)21
b Fj(call_with_...)p Fi(,)h Fg(e.g.)p Fi(,)h Fj(call_with_fdes_in)d
Fg(in_channel)g(pr)-5 b(o)g(c)p Fi(,)24 b(whic)m(h)d(calls)g
Fg(pr)-5 b(o)g(c)21 b Fi(on)g Fg(in_channel)p Fi('s)227
3748 y(\034le)34 b(descriptor,)h(returning)g(whatev)m(er)f
Fg(pr)-5 b(o)g(c)35 b Fi(returns.)49 b(The)34 b(abbreviated)g(name)g
(means)g(\020call)g(with)f(\034le)227 3861 y(descriptor)f(from)e(in_c)m
(hannel.\021)136 4038 y Fe(\017)46 b Fj(with_...)63 b
Fi(Pro)s(cedures)39 b(that)g(call)f(their)h(argumen)m(t)h(in)e(some)g
(sp)s(ecial)g(dynamic)h(con)m(text)g(frequen)m(tly)227
4151 y(ha)m(v)m(e)29 b(names)f(of)f(the)g(form)h Fj(with_...)p
Fi(.)39 b(F)-8 b(or)28 b(example,)h Fj(with_env)e Fg(env)h(thunk)p
Fi(.)40 b(These)27 b(functions)h(set)f(the)227 4264 y(pro)s(cess)34
b(en)m(vironmen)m(t)i(b)s(o)s(dy)-8 b(,)35 b(execute)f(their)h(th)m
(unk,)h(and)e(then)h(return)f(after)g(resetting)h(the)g(en)m(viron-)227
4377 y(men)m(t)d(to)e(its)g(original)i(state.)136 4554
y Fe(\017)46 b Fj(create_...)52 b Fi(or)34 b Fj(delete_...)52
b Fi(Pro)s(cedures)35 b(that)g(create)g(\(resp.)52 b(delete\))36
b(ob)5 b(jects)34 b(in)g(the)h(\034le)f(system)227 4667
y(\(\034les,)d(directories,)h(temp)f(\034les,)f(\034fos,)g
Fg(etc.)p Fi(\),)h(b)s(egin)g(with)g Fj(create_...)39
b Fi(\(resp.)i Fj(delete_...)p Fi(\).)136 4844 y Fe(\017)46
b Fj(low_...)54 b Fi(These)35 b(are)g(lo)m(w)m(er-lev)m(el)j(Cash)d
(primitiv)m(es)g(that)h(are)f(not)g(commonly)h(used)f(\(but)g(for)g
(imple-)227 4957 y(men)m(ting)d(the)f(higher-lev)m(el)h(ones\).)136
5134 y Fe(\017)46 b Fj(..._info...)41 b Fi(Data)30 b(structures)h(pac)m
(k)-5 b(aging)32 b(up)f(information)h(ab)s(out)e(v)-5
b(arious)31 b(OS)g(en)m(tities)g(frequen)m(tly)227 5247
y(end)21 b(in)f Fd(:)15 b(:)g(:)q Fj(_info)p Fi(.)37
b(Examples:)f Fj(user_info_...)p Fi(,)22 b Fj(file_info_...)p
Fi(,)g Fj(group_info_...)p Fi(,)g(and)f Fj(host_info_...)p
Fi(.)1927 5589 y(3)p eop
%%Page: 4 4
4 3 bop 0 91 a Fk(1.3.2)103 b(Cash)35 b(o)m(wn)g(naming)e(con)m(v)m(en)
m(tions)0 287 y Fi(This)39 b(paragraph)h(is)e(in)m(tended)j(for)d
(users)h(already)g(familiar)g(with)h(Scsh,)g(to)f(help)h(them)f(to)g
(\034nd)g(the)g(corre-)0 399 y(sp)s(onding)31 b(pro)s(cedures')g(names)
g(while)g(translating)g(their)g(scripts)f(:-\).)41 b(Y)-8
b(ou)31 b(ma)m(y)g(skip)f(it)g(it)g(y)m(ou)h(wish.)141
536 y(W)-8 b(e)27 b(had)h(to)f(extend)h(Scsh's)e(con)m(v)m(en)m(tions)k
(for)d(t)m(w)m(o)h(sorts)f(of)f(reasons:)39 b(\034rst,)28
b(Caml)g(b)s(eing)f(statically)g(t)m(yp)s(ed,)0 649 y(Scsh's)32
b(p)s(olymorphic)i(pro)s(cedures)f(are)g(often)f(presen)m(t)i(in)e(2)h
(to)f(4)h(v)m(ersions)f(in)h(Cash,)g(su\036xed)g(b)m(y)f(a)h(t)m(yp)s
(e)f(tag)0 762 y(indicativ)m(e)37 b(of)f(the)g(t)m(yp)s(e)f(of)h(the)g
(main)g(argumen)m(t)i(this)d(pro)s(cedure)i(op)s(erates)f(on.)57
b(The)36 b(most)g(common)h(tags)0 875 y(are:)136 1062
y Fe(\017)46 b Fd(:)15 b(:)g(:)q Fi(_in)31 b(:)40 b(argumen)m(t)33
b(is)d(an)g(in_c)m(hannel)136 1250 y Fe(\017)46 b Fd(:)15
b(:)g(:)q Fi(_out:)41 b(argumen)m(t)33 b(is)d(an)g(out_c)m(hannel)136
1438 y Fe(\017)46 b Fd(:)15 b(:)g(:)q Fi(_fd)31 b(:)40
b(argumen)m(t)32 b(is)e(a)g(\034le)h(descriptor)136 1625
y Fe(\017)46 b Fd(:)15 b(:)g(:)q Fi(_fn)31 b(:)40 b(argumen)m(t)32
b(is)e(a)g(\034le)h(name)141 1837 y(Second,)d(Caml)f(is)e(m)m(uc)m(h)j
(stricter)e(ab)s(out)h(the)f(lexical)g(syn)m(tax)g(of)g(its)f(iden)m
(ti\034ers)j(than)e(Lisp)g(lik)m(e)h(languages,)0 1949
y(so)j(w)m(e)h(generally)g(translated)h(them)f(this)f(w)m(a)m(y:)136
2137 y Fe(\017)46 b Fj(from->to)30 b Fi(b)s(ecomes)h
Fj(to_of_from)p Fi(,)f(sta)m(ying)h(in)f(Caml's)h(naming)g(philosoph)m
(y)136 2325 y Fe(\017)46 b Fj(predicate?)79 b Fi(b)s(ecomes)43
b Fj(is_predicate)p Fi(.)78 b(Com)m(bined)46 b(with)d(the)h(\034rst)f
(extension,)k(this)c(giv)m(es,)k Fg(e.g.)p Fi(,)227 2438
y Fj(file-directory?)66 b Fi(comes)40 b(in)f(the)g(4)h(\035a)m(v)m(ors)
g Fj(is_file_directory_fn)p Fi(,)g Fj(is_file_directory_fd)p
Fi(,)227 2550 y Fj(is_file_directory_in)30 b Fi(and)h
Fj(is_file_directory_out)p Fi(.)136 2738 y Fe(\017)46
b Fj(!)p Fi(,)28 b(the)g(Sc)m(heme)i(mark)m(er)e(for)g
(side-e\033ecting)g(pro)s(cedures,)h(b)s(ecomes)f Fj(_bang)g
Fi(\(for)f(lac)m(k)h(of)g(a)f(b)s(etter)h(trans-)227
2851 y(lation\).)141 3039 y(There)21 b(are)g(sev)m(eral)g(exceptions:)
36 b Fj(file-exists?)g Fi(b)s(ecomes)21 b(the)g(sligh)m(tly)f(more)h
(euphonic)h Fj(is_file_existing_fn)p Fi(,)0 3152 y Fj
(is_file_existing_fd)p Fi(,)28 b Fg(etc.)40 b Fi(and)28
b Fj(file-not-exist?)38 b Fi(is)28 b Fj(file_not_exists_fn)p
Fi(,)f Fj(file_not_exists_fd)p Fi(,)0 3264 y Fg(etc.)41
b Fi(b)s(ecause)30 b(it)g(do)s(esn't)h(yield)f(a)g(b)s(o)s(ol)g(in)g
(Cash)g(and)h(is)f(no)g(more)h(really)g(a)f(predicate.)42
b Fj(move->fdes)29 b Fi(has)h(the)0 3377 y(3)i(v)m(ersions)g
Fj(move_fd_to_fdes)p Fi(,)g Fj(move_in_channel_to_fdes)f
Fi(and)h Fj(move_out_channel_to_fdes)p Fi(.)44 b(There)0
3490 y(are)31 b(more)g(around)g Fj(dup)p Fi(-ing)g(pro)s(cedures)g
(\(see)f(section)h([3.2.6]\).)141 3603 y(All)37 b(this)h(generally)g
(mak)m(es)g(iden)m(ti\034ers)h(ev)m(en)f(longer)h(than)f(the)g(Sc)m
(heme)h(ones)e(\(sorry)h(for)f(this\),)i(except)0 3716
y(for)30 b Fj(\(current-input-port\))f Fi(or)h Fj
(\(with-current-input-port)46 b(...\))40 b Fi(whic)m(h)31
b(b)s(ecome)f(the)h(more)f(civilized)0 3829 y Fj(stdin)g
Fi(and)h Fj(with_stdin)47 b(...)p Fi(.)0 4096 y Ff(1.4)112
b(A)37 b(w)m(ord)g(ab)s(out)h(Unix)f(standards)0 4291
y Fi("The)e(w)m(onderful)h(thing)f(ab)s(out)g(Unix)f(standards)h(is)f
(that)h(there)g(are)g(so)f(man)m(y)h(to)g(c)m(ho)s(ose)g(from.")f(Y)-8
b(ou)35 b(ma)m(y)0 4404 y(b)s(e)f(totally)h(b)s(ewildered)g(ab)s(out)g
(the)f(m)m(ultitude)j(of)c(v)-5 b(arious)35 b(standards)f(that)h
(exist.)52 b(Rest)34 b(assured)g(that)h(this)0 4517 y(no)m(where)29
b(in)f(this)f(man)m(ual)i(will)e(y)m(ou)h(encoun)m(ter)i(an)d(attempt)i
(to)e(sp)s(ell)g(it)g(all)h(out)g(for)f(y)m(ou;)i(y)m(ou)e(could)i(not)
e(read)0 4630 y(and)k(in)m(ternalise)h(suc)m(h)f(a)f(t)m(wisted)h
(accoun)m(t)h(without)g(bleeding)f(from)g(the)g(nose)f(and)h(ears.)141
4743 y(Ho)m(w)m(ev)m(er,)26 b(y)m(ou)d(migh)m(t)g(k)m(eep)g(in)g(mind)g
(the)g(follo)m(wing)h(simple)e(fact:)37 b(of)22 b(all)h(the)f
(standards,)j(P)m(osix)e(is)f(the)h(least)0 4856 y(common)34
b(denominator.)51 b(So)33 b(when)h(this)f(man)m(ual)i(rep)s(eatedly)e
(refers)g(to)g(P)m(osix,)i(the)e(p)s(oin)m(t)h(is)f(\020the)g(thing)h
(w)m(e)0 4969 y(are)d(describing)h(should)f(b)s(e)g(p)s(ortable)g(just)
f(ab)s(out)h(an)m(ywhere.\021)51 b(Cash)31 b(stic)m(ks)g(to)f(P)m(osix)
i(when)f(at)g(all)g(p)s(ossible;)0 5082 y(its)40 b(ma)5
b(jor)41 b(departure)g(is)f(sym)m(b)s(olic)h(links,)i(whic)m(h)e
(aren't)g(in)g(P)m(osix)f(\(see)h(\026)f(it)h(really)f
Fg(is)g Fi(a)g(least)h(common)0 5195 y(denominator\).)1927
5589 y(4)p eop
%%Page: 5 5
5 4 bop 0 91 a Fl(2)131 b(Pro)t(cess)44 b(notation)0
318 y Fi(Scsh)25 b(has)h(a)f(notation)i(for)e(con)m(trolling)i(Unix)e
(pro)s(cesses)g(that)h(tak)m(es)f(the)h(form)g(of)f(s-expressions;)h
(this)g(notation)0 431 y(can)32 b(then)g(b)s(e)g(em)m(b)s(edded)h
(inside)f(of)f(standard)i(Sc)m(heme)g(co)s(de.)44 b(This)32
b(notation)h(is)e(not)h(y)m(et)g(done)h(for)e(Cash.)45
b(If)0 544 y(y)m(ou)37 b(w)m(an)m(t)h(to)f(ha)m(v)m(e)g(a)g(feeling)g
(of)f(what)h(it'll)g(resem)m(ble)h(to,)g(refer)f(to)g(the)g(Scsh)f(man)
m(ual)i([)p Fj(ftp://ftp.scsh.)0 657 y(net/pub/scsh/0.5/scsh-)t
(manual.ps.gz)p Fi(],)c(c)m(hapter)h(2.)50 b(Th)m(us)34
b(w)m(e)g(skip)f(directly)h(to)g(the)g(basic)f(blo)s(c)m(ks)h(on)0
770 y(top)d(of)f(whic)m(h)h(this)g(notation)g(is)f(built)h(\(after)g(a)
f(little)h(adv)m(ertising)h(for)e(the)g(Scsh)h(API\).)0
1037 y Ff(2.1)112 b(Pro)s(cedures)38 b(and)g(syn)m(tax)g(extensions)0
1232 y Fi(It)c(is)f(a)i(general)g(design)f(principle)i(in)e(Scsh/Cash)h
(that)f(all)h(functionalit)m(y)g(made)g(a)m(v)-5 b(ailable)36
b(through)f(sp)s(ecial)0 1345 y(syn)m(tax)24 b(is)h(also)f(a)m(v)-5
b(ailable)26 b(in)f(a)f(straigh)m(tforw)m(ard)j(pro)s(cedural)f(form.)
38 b(So)25 b(there)g(are)g(pro)s(cedural)h(equiv)-5 b(alen)m(ts)25
b(for)0 1458 y(all)33 b(of)f(the)g(pro)s(cess)g(notation.)48
b(In)32 b(this)h(w)m(a)m(y)-8 b(,)34 b(the)f(programmer)h(is)e(not)h
(restricted)g(b)m(y)g(the)f(particular)i(details)0 1570
y(of)c(the)h(syn)m(tax.)141 1707 y(Ha)m(ving)36 b(a)e(solid)i(pro)s
(cedural)g(foundation)g(also)f(allo)m(ws)g(for)g(general)h(notational)h
(exp)s(erimen)m(tation)g(using)0 1820 y(Camlp4)f(macros.)53
b(F)-8 b(or)35 b(example,)h(the)f(programmer)h(can)f(build)g(his)g(o)m
(wn)g(pip)s(eline)g(notation)h(on)f(top)f(of)g(the)0
1933 y Fj(fork)c Fi(and)g Fj(fork_with_pipe)f Fi(pro)s(cedures.)41
b(Chapter)31 b([3])g(giv)m(es)f(the)g(full)g(story)f(on)h(all)h(the)f
(pro)s(cedures)g(in)g(the)0 2046 y(syscall)g(library)-8
b(.)0 2313 y Ff(2.2)112 b(In)m(terfacing)37 b(pro)s(cess)h(output)f(to)
g(Caml)0 2508 y Fi(There)31 b(is)f(a)g(family)h(of)f(pro)s(cedures)h
(that)f(can)h(b)s(e)f(used)h(to)f(capture)i(the)e(output)i(of)e(pro)s
(cesses)f(as)h(Caml)h(data.)141 2645 y Fj(run_with_...)52
b Fi(all)35 b(fork)f(o\033)g(subpro)s(cesses,)h(collecting)h(the)f(pro)
s(cess')f(output)h(to)g(stdout)g(in)f(some)h(form)0 2757
y(or)c(another.)44 b(The)32 b(subpro)s(cess)f(runs)g(with)h(\034le)f
(descriptor)h(1)g(and)f(the)h(curren)m(t)g Fj(stdout)f
Fi(c)m(hannel)i(b)s(ound)e(to)h(a)0 2870 y(pip)s(e.)0
3007 y Fj(val)47 b(run_with_in_channel)f(:)h(\(unit)g(->)g(unit\))g(->)
g(Pervasives.in_channel)227 3145 y Fi(V)-8 b(alue)31
b(is)f(an)h(in_c)m(hannel)h(op)s(en)f(on)f(pro)s(cess's)g
Fj(stdout)p Fi(.)40 b(Returns)31 b(immediately)g(after)g(forking)f(c)m
(hild.)0 3356 y Fj(val)47 b(run_with_out_channel)f(:)h(\(unit)g(->)g
(unit\))g(->)g(Pervasives.out_channel)227 3494 y Fi(V)-8
b(alue)31 b(is)f(an)h(out_c)m(hannel)i(op)s(en)d(on)h(pro)s(cess's)e
Fj(stdin)p Fi(.)41 b(Returns)30 b(immediately)i(after)e(forking)g(c)m
(hild.)0 3705 y Fj(val)47 b(run_with_file)g(:)g(\(unit)f(->)h(unit\))g
(->)g(string)227 3843 y Fi(V)-8 b(alue)31 b(is)f(name)h(of)f(a)h(temp)g
(\034le)f(con)m(taining)j(pro)s(cess's)c(output.)42 b(Returns)30
b(when)h(pro)s(cess)f(exits.)0 4054 y Fj(val)47 b(run_with_string)g(:)f
(\(unit)h(->)g(unit\))g(->)g(string)227 4192 y Fi(V)-8
b(alue)31 b(is)f(a)h(string)f(con)m(taining)j(pro)s(cess')d(output.)41
b(Returns)30 b(when)h(eof)g(read.)0 4403 y Fj(val)47
b(run_with_strings)g(:)f(\(unit)h(->)g(unit\))g(->)g(string)g(list)227
4541 y Fi(Splits)31 b(pro)s(cess')f(output)h(in)m(to)h(a)e(list)g(of)g
(newline-delimited)j(strings.)41 b(Returns)30 b(when)h(eof)f(read.)41
b(The)227 4654 y(delimiting)32 b(newlines)f(are)g(not)g(included)g(in)g
(the)f(strings)h(returned.)141 4865 y(In)20 b(sexp)g(pro)s(cedures)h(b)
s(elo)m(w,)j(`data',)f(`ob)5 b(ject')21 b(and)g(`item')g(should)g
(conform)g(to)g(some)f(Lisp/Sc)m(heme)j(syn)m(tax.)0
4978 y(See)j(sexp.mli)g(and)g(atomo.mll)h(for)f(details)g(on)g(the)g
(supp)s(orted)g(syn)m(tax.)39 b Fj(Sexp.simple)25 b Fi(v)-5
b(alues)26 b(can)g(b)s(e)f(prin)m(ted)0 5091 y(with)31
b Fj(Sexp.display)p Fi(.)0 5228 y Fj(val)47 b(run_with_sexp)g(:)g
(\(unit)f(->)h(unit\))g(->)g(Sexp.simple)1927 5589 y
Fi(5)p eop
%%Page: 6 6
6 5 bop 227 91 a Fi(Reads)30 b(a)h(single)f(ob)5 b(ject)31
b(from)f(pro)s(cess')g(stdout)h(with)g Fj(Sexp.read)p
Fi(.)40 b(Returns)30 b(as)g(so)s(on)g(as)g(the)h(read)227
204 y(completes)h(.)0 415 y Fj(val)47 b(run_with_sexps)g(:)g(\(unit)f
(->)h(unit\))g(->)g(Sexp.simple)g(list)227 553 y Fi(Rep)s(eatedly)31
b(reads)f(ob)5 b(jects)31 b(from)f(pro)s(cess')g(stdout)h(with)g
Fj(Sexp.read)p Fi(.)40 b(Returns)30 b(accum)m(ulated)j(list)227
666 y(up)s(on)e(eof.)141 877 y(The)g(follo)m(wing)h(pro)s(cedures)f
(are)f(also)h(of)f(utilit)m(y)h(for)f(generally)h(parsing)g(input)g
(streams)g(in)f(Cash.)0 1014 y Fj(val)47 b(string_of_in_channel)f(:)h
(Pervasives.in_channel)g(->)g(string)227 1152 y Fi(Reads)30
b(the)h(c)m(hannel)h(un)m(til)f(eof,)g(then)f(returns)h(the)g(accum)m
(ulated)i(string.)0 1363 y Fj(val)47 b(sexp_list_of_in_channel)f(:)h
(Pervasives.in_channel)g(->)g(Sexp.simple)f(list)227
1501 y Fi(Rep)s(eatedly)31 b(reads)f(data)h(from)f(the)h(c)m(hannel)h
(un)m(til)g(eof,)e(then)h(returns)g(the)f(accum)m(ulated)j(list)d(of)g
(items)227 1614 y(in)h(a)f(sc)m(hemeish)h(form.)41 b(Note:)g(y)m(ou)30
b(can)h(read)g(one)g(item)g(with)g Fj(Sexp.read)p Fi(.)0
1825 y Fj(val)47 b(string_list_of_in_channel)f(:)h
(Pervasives.in_channel)g(->)g(string)g(list)227 1963
y Fi(Rep)s(eatedly)31 b(reads)f(newline-terminated)k(strings)c(from)g
(the)h(c)m(hannel)h(un)m(til)f(eof,)g(then)g(returns)g(the)227
2076 y(accum)m(ulated)i(list)d(of)g(strings.)41 b(The)31
b(delimiting)g(newlines)h(are)e(not)h(part)g(of)f(the)g(returned)i
(strings.)0 2287 y Fj(val)47 b(list_of_in_channel)f(:)94
2400 y(\(Pervasives.in_channel)g(->)h('a\))g(->)g
(Pervasives.in_channel)g(->)g('a)g(list)227 2538 y Fi(Generalises)30
b(these)g(t)m(w)m(o)h(pro)s(cedures.)41 b(It)29 b(uses)g(a)h(reader)g
(to)g(rep)s(eatedly)g(read)g(ob)5 b(jects)30 b(from)f(a)h(c)m(hannel.)
227 2651 y(It)g(accum)m(ulates)i(these)f(ob)5 b(jects)30
b(in)m(to)i(a)e(list,)g(whic)m(h)i(is)e(returned)i(up)s(on)e(eof.)141
2862 y(The)e Fj(string_list_of_in_channel)f Fi(and)h
Fj(sexp_list_of_in_channel)e Fi(pro)s(cedures)i(are)g(trivial)g(to)f
(de-)0 2975 y(\034ne,)k(b)s(eing)f(merely)h Fj(list_of_in_channel)f
Fi(curried)h(with)g(the)g(appropriate)h(parsers:)47 3088
y Fj(let)47 b(string_list_of_in_channel)f(=)h(list_of_in_channel)g
(input_line)47 3201 y(let)g(sexp_list_of_in_channel)f(=)h
(list_of_in_channel)g(Sexp.read)141 3337 y Fi(The)31
b(follo)m(wing)h(comp)s(ositions)f(also)f(hold:)47 3450
y Fj(run_with_string)47 b(thunk)f(=)h(run_with_in_channel)g(o)g
(string_of_in_channel)47 3563 y(run_with_strings)g(thunk)f(=)h
(run_with_in_channel)g(o)g(string_list_of_in_channel)47
3676 y(run_with_sexp)g(thunk)g(=)f(run_with_in_channel)h(o)g(Sexp.read)
47 3789 y(run_with_sexps)g(thunk)f(=)h(run_with_in_channel)g(o)g
(sexp_list_of_in_channel)0 3925 y(val)g(fold_in_channel)g(:)94
4038 y(Pervasives.in_channel)f(->)94 4151 y(\(Pervasives.in_channel)g
(->)h('a\))g(->)g(\('a)g(->)g('b)g(->)g('b\))g(->)g('b)g(->)g('b)227
4289 y(fold_in_channel)30 b Fg(ichan)i(r)-5 b(e)g(ader)35
b(op)d(se)-5 b(e)g(d)32 b Fi(can)f(b)s(e)f(used)g(to)h(p)s(erform)f(a)h
(v)-5 b(ariet)m(y)30 b(of)g(iterativ)m(e)227 4402 y(op)s(erations)h(o)m
(v)m(er)h(an)e(input)h(stream.)41 b(It)30 b(rep)s(eatedly)h(uses)f
Fg(r)-5 b(e)g(ader)32 b Fi(to)f(read)f(an)h(ob)5 b(ject)31
b(from)f Fg(ichan)p Fi(.)41 b(If)227 4515 y(the)29 b(\034rst)g(read)h
(returns)f(eof,)g(then)h(the)f(en)m(tire)h Fj(fold_in_channel)e
Fi(op)s(eration)i(returns)f(the)h(seed.)40 b(If)27 b(the)227
4628 y(\034rst)k(read)g(op)s(eration)g(returns)g(some)f(other)h(v)-5
b(alue)31 b Fg(v)p Fi(,)g(then)f Fg(op)h Fi(is)f(applied)h(to)g
Fg(v)f Fi(and)h(the)g(seed:)40 b Fg(op)33 b(v)227 4741
y(se)-5 b(e)g(d)p Fi(.)42 b(This)29 b(should)h(return)f(a)g(new)h(seed)
f(v)-5 b(alue,)30 b(and)f(the)h(reduction)g(then)g(lo)s(ops,)f(reading)
h(a)f(new)h(v)-5 b(alue)227 4854 y(from)31 b(the)f(c)m(hannel,)i(and)f
(so)f(forth.)227 4966 y(F)-8 b(or)31 b(example,)g Fj
(list_of_in_channel)f Fg(r)-5 b(e)g(ader)34 b(channel)d
Fi(could)g(b)s(e)f(\(and)h(in)g(fact)f(is\))g(de\034ned)i(as)603
5079 y Fj(List.rev)47 b(\(fold_in_channel)f(channel)h(reader)g(\(::\))g
([]\))1927 5589 y Fi(6)p eop
%%Page: 7 7
7 6 bop 227 91 a Fi(An)30 b(imp)s(erativ)m(e)i(w)m(a)m(y)f(to)g(lo)s
(ok)f(at)g Fj(fold_in_channel)g Fi(is)g(to)g(sa)m(y)g(that)h(it)g
(abstracts)f(the)h(idea)g(of)f(a)g(lo)s(op)227 204 y(o)m(v)m(er)i(a)e
(stream)h(of)f(v)-5 b(alues)30 b(read)h(from)f(some)h(c)m(hannel,)h
(where)f(the)g(seed)f(v)-5 b(alue)31 b(expresses)e(the)i(lo)s(op)227
317 y(state.)0 656 y Ff(2.3)112 b(More)38 b(complex)e(pro)s(cess)i(op)s
(erations)0 851 y Fi(The)28 b(pro)s(cedures)g(in)f(the)h(previous)f
(section)h(pro)m(vide)h(for)e(the)g(common)i(case,)f(where)g(the)g
(programmer)h(is)e(only)0 964 y(in)m(terested)38 b(in)e(the)h(output)g
(of)f(the)h(pro)s(cess.)58 b(These)37 b(pro)s(cedures)g(pro)m(vide)g
(more)g(complicated)h(facilities)f(for)0 1077 y(manipulating)32
b(pro)s(cesses.)0 1213 y Fj(type)94 b(proc)47 b(=)g(Proc_3_4.proc)227
1350 y Fi(The)31 b(t)m(yp)s(e)f(of)g(a)h(pro)s(cess)f(ob)5
b(ject;)31 b(it)f(encapsulates)h(the)g(subpro)s(cess')f(pro)s(cess)g
(id)g(and)h(exit)g(co)s(de;)f(it)h(is)227 1463 y(the)f(v)-5
b(alue)30 b(passed)g(to)f(the)h Fj(wait)p Fi([3.5.2])h(system)e(call)h
(\(whic)m(h)h(giv)m(es)f(access)f(to)h(the)g(exit)g(co)s(de)f(when)i
(it)e(is)227 1576 y(ready\).)41 b(See)31 b(also)f Fj(pid_of_proc)p
Fi([3.5.1])0 1785 y Fj(val)47 b(run_with_inchan_plus_proc)f(:)94
1898 y(\(unit)h(->)g(unit\))g(->)g(Pervasives.in_channel)f(*)h(proc)227
2035 y Fi(This)31 b(pro)s(cedure)g(can)g(b)s(e)f(used)g(if)g(the)h
(programmer)h(also)e(wishes)h(access)f(to)g(the)h(pro)s(cess')f(pid,)h
(exit)227 2148 y(status,)g(or)f(other)h(information.)42
b(It)30 b(forks)f(o\033)h(a)h(subpro)s(cess,)f(returning)i(t)m(w)m(o)f
(v)-5 b(alues:)41 b(a)30 b(c)m(hannel)i(op)s(en)227 2261
y(on)f(the)g(pro)s(cess')f(stdout)g(\(and)h(curren)m(t)h
Fj(stdout)p Fi(\),)e(and)h(the)g(subpro)s(cess's)f(pro)s(cess)g(ob)5
b(ject.)227 2374 y(F)-8 b(or)31 b(example,)g(to)g(uncompress)g(a)f(tec)
m(h)i(rep)s(ort,)f(reading)g(the)g(uncompressed)g(data)g(in)m(to)g
(Cash,)g(and)227 2487 y(also)g(b)s(e)f(able)g(to)h(trac)m(k)g(the)g
(exit)f(status)g(of)g(the)h(decompression)h(pro)s(cess,)e(use)g(the)g
(follo)m(wing:)321 2599 y Fj(let)47 b(\(chan,)g(child\))g(=)415
2712 y(run_with_inchan_plus_proc)g(\(fun)f(\(\))h(->)g(exec_path)g
("zcat")g(["tr91-145.tex.Z"]}\))f(in)321 2825 y(let)h(paper)g(=)g
(string_of_in_channel)f(chan)h(in)321 2938 y(let)g(status)g(=)g(wait)g
(child)g(in)321 3051 y(\(*)g(...use)g(paper,)g(status)g(and)g(child)f
(here...)h(*\))141 3260 y Fi(Note)29 b(that)g(y)m(ou)g(m)m(ust)h
Fg(\034rst)e Fi(do)h(the)g Fj(string_of_in_channel)f
Fi(and)h Fg(then)g Fi(do)g(the)g Fj(wait)f Fi(\026)h(the)g(other)h(w)m
(a)m(y)0 3373 y(around)h(ma)m(y)g(lo)s(c)m(k)g(up)f(when)h(the)g(zcat)g
(\034lls)f(up)h(its)f(output)h(pip)s(e)f(bu\033er.)0
3509 y Fj(val)47 b(run_with_outchan_plus_proc)f(:)94
3622 y(\(unit)h(->)g(unit\))g(->)g(Pervasives.out_channel)f(*)h(proc)
227 3759 y Fi(This)31 b(pro)s(cedure)g(is)f(the)h(dual)g(of)f(the)g
(preceding:)42 b(the)31 b(program)g(has)g(to)f(write)h(to)g(the)f(c)m
(hild's)i(stdin.)40 b(It)227 3872 y(forks)30 b(o\033)g(a)g(subpro)s
(cess,)g(returning)i(t)m(w)m(o)g(v)-5 b(alues:)40 b(a)31
b(c)m(hannel)g(op)s(en)g(on)f(the)h(pro)s(cess')f(stdin)h(\(and)227
3985 y(curren)m(t)h Fj(stdin)p Fi(\),)e(and)h(the)g(subpro)s(cess's)f
(pro)s(cess)g(ob)5 b(ject.)41 b(\(Be)30 b(prepared)i(to)e(SIGPIPE\).)0
4324 y Ff(2.4)112 b(Multiple)35 b(stream)i(capture)0
4519 y Fj(type)94 b(fd)47 b(=)g(int)227 4656 y Fi(The)31
b(Unix)f(view)g(of)g(\034le)h(descriptors.)41 b(See)31
b([3.2])g(for)f(explanations)h(ab)s(out)g(ho)m(w)g(\034le)g
(descriptors)g(are)227 4769 y(managed)h(b)m(y)e(Cash.)141
4978 y(Occasionally)-8 b(,)45 b(the)c(programmer)h(ma)m(y)f(w)m(an)m(t)
i(to)d(capture)i(m)m(ultiple)h(distinct)e(output)g(streams)g(from)g(a)0
5091 y(pro)s(cess.)f(F)-8 b(or)31 b(instance,)g(he)g(ma)m(y)g(wish)f
(to)h(read)g(the)g(stdout)f(and)h(stderr)g(streams)f(in)m(to)i(t)m(w)m
(o)g(distinct)f(strings.)0 5203 y(This)f(is)g(accomplished)i(with)f
(the)g Fj(run_with_collecting)f Fi(pro)s(cedure.)0 5340
y Fj(val)47 b(run_with_collecting)f(:)1927 5589 y Fi(7)p
eop
%%Page: 8 8
8 7 bop 94 91 a Fj(fd)47 b(list)g(->)94 204 y(\(unit)g(->)g(unit\))g
(->)g(Unix.process_status)f(*)h(Pervasives.in_channel)g(list)227
342 y Fi(Run)30 b(pro)s(cesses)g(that)h(pro)s(duce)g(m)m(ultiple)h
(output)f(streams)g(and)g(return)g(c)m(hannels)g(op)s(en)g(on)f(these)
227 455 y(streams.)41 b(T)-8 b(o)31 b(a)m(v)m(oid)h(issues)d(of)h
(deadlo)s(c)m(k,)h Fj(run_with_collecting)f Fi(do)s(esn't)h(use)f(pip)s
(es.)40 b(Instead,)30 b(it)227 568 y(\034rst)f(runs)g(the)g(pro)s(cess)
f(with)i(output)f(to)g(temp)h(\034les,)f(then)g(returns)g(c)m(hannels)h
(op)s(en)f(on)g(the)g(temp)h(\034les.)227 681 y(F)-8
b(or)31 b(example,)321 794 y Fj(run_with_collecting)47
b([1;)g(2])g(\(fun)f(\(\))h(->)g(exec_path)g("ls")g([]\))227
907 y Fi(runs)31 b Fj(ls)f Fi(with)h(stdout)f(\(fd)h(1\))f(and)h
(stderr)g(\(fd)f(2\))g(redirected)i(to)f(temp)s(orary)f(\034les.)41
b(When)31 b(the)f Fj(ls)g Fi(is)227 1020 y(done,)h Fj
(run_with_collecting)f Fi(returns)h(three)g(v)-5 b(alues:)40
b(the)31 b Fj(ls)f Fi(pro)s(cess')g(exit)g(status,)h(and)g(t)m(w)m(o)
227 1132 y(c)m(hannels)h(op)s(en)e(on)h(the)g(temp)s(orary)g(\034les.)
40 b(The)31 b(\034les)f(are)h(deleted)g(b)s(efore)f Fj
(run_with_collecting)227 1245 y Fi(returns,)h(so)f(when)h(the)g(c)m
(hannels)h(are)e(closed,)h(they)g(v)-5 b(anish.)227 1358
y(F)d(or)31 b(example,)g(if)f(Kaiming)i(has)e(his)g(mailb)s(o)m(x)h
(protected,)h(then)321 1471 y Fj(let)47 b(\(status,)g(fds\))g(=)462
1584 y(run_with_collecting)g([1;)g(2])556 1697 y(\(fun)g(\(\))g(->)g
(exec_path)g("cat")f(["/usr/kmshea/mbox"]\))h(in)368
1810 y(\(status,)g(List.map)g(string_of_in_channel)f(fds\))227
1923 y Fi(migh)m(t)32 b(pro)s(duce)227 2036 y Fj(-)47
b(:)g(\(Unix.process_status)g(*)g(list)g(string\))f(=)227
2149 y(\(Unix.WEXITED)h(1,)g(["";)g("cat:)g(/usr/kmshea/mbox:)f
(Permission)h(denied\\n"]\))0 2490 y Ff(2.5)112 b(Pro)s(cess)37
b(\034lters)0 2686 y Fi(These)31 b(pro)s(cedures)g(are)f(useful)g(for)h
(forking)f(o\033)g(pro)s(cesses)g(to)g(\034lter)h(text)g(streams.)0
2822 y Fj(val)47 b(char_filter)g(:)g(\(char)f(->)h(char\))g(->)g(unit)g
(->)g(unit)227 2960 y Fi(Returns)31 b(a)f(pro)s(cedure)h(that)g(when)g
(called,)g(rep)s(eatedly)g(reads)g(a)f(c)m(haracter)i(from)f(the)g
(curren)m(t)h Fj(stdin)p Fi(,)227 3073 y(applies)f(its)f(\034rst)h
(argumen)m(t)h Fg(\034lter)e Fi(to)h(the)f(c)m(haracter,)j(and)e
(writes)f(the)h(result)g(to)f(the)h(curren)m(t)h Fj(stdout)p
Fi(.)227 3186 y(The)f(pro)s(cedure)g(returns)g(up)s(on)g(reac)m(hing)h
(eof)e(on)h Fj(stdin)p Fi(.)0 3397 y Fj(val)47 b(string_filter)g(:)g
(?buflen:int)f(->)h(\(string)g(->)g(string\))g(->)g(unit)g(->)g(unit)
227 3535 y Fi(Returns)31 b(a)f(pro)s(cedure)h(that)g(when)g(called,)g
(rep)s(eatedly)g(reads)g(a)f(string)h(from)f(the)h(curren)m(t)h
Fj(stdin)p Fi(,)227 3648 y(applies)f(its)f(\034rst)h(argumen)m(t)h
Fg(\034lter)e Fi(to)h(the)f(string,)h(and)g(writes)g(the)f(result)h(to)
g(the)f(curren)m(t)i Fj(stdout)p Fi(.)227 3761 y(The)f(pro)s(cedure)g
(returns)g(up)s(on)g(reac)m(hing)h(eof)e(on)h Fj(stdin)p
Fi(.)227 3874 y(The)g(optional)h Fj(buflen)e Fi(argumen)m(t)i(con)m
(trols)f(the)g(n)m(um)m(b)s(er)h(of)e(c)m(haracters)i(eac)m(h)f(in)m
(ternal)h(read)227 3986 y(op)s(eration)g(requests;)e(this)g(means)h
(that)g Fj(filter)f Fi(will)g(nev)m(er)h(b)s(e)g(applied)g(to)f(a)h
(string)f(longer)i(than)227 4099 y Fj(buflen)e Fi(c)m(hars.)41
b(The)31 b(default)g Fj(buflen)f Fi(v)-5 b(alue)31 b(is)f(1024.)0
4484 y Fl(3)131 b(System)44 b(calls)0 4711 y Fi(Cash)c(aims)h(at)f(pro)
m(viding)h(essen)m(tially)g(complete)h(access)e(to)g(the)g(basic)h
(Unix)f(k)m(ernel)h(services:)59 b(pro)s(cesses,)0 4824
y(\034les,)36 b(signals)f(and)g(so)f(forth.)54 b(As)34
b(the)h Fj(Unix)f Fi(mo)s(dule)h(pro)m(vides)h(a)f(fairly)f(go)s(o)s(d)
g(P)m(osix)i(in)m(terface,)h(Cash)e(often)0 4936 y(relies)f(on)h(it)f
(to)g(giv)m(e)g(an)h(extended)g(in)m(terface.)53 b(In)33
b(particular,)k(it)d(unco)m(v)m(ers)h(the)g(opaque)f
Fj(Unix.file_descr)0 5049 y Fi(t)m(yp)s(e,)46 b(and)d(all)g(the)h
(necessary)e(connections)i(with)g(the)f(so-called)h(`rev)m(ealed')g(c)m
(hannels.)79 b(Cash)43 b(adds)g(v)m(ery)0 5162 y(few)37
b(restrictions)i(to)e(the)h(w)m(a)m(y)h Fj(Pervasives)p
Fi(,)f Fj(Unix)g Fi(and)g Fj(Cash)f Fi(functions)h(\(esp)s(ecially)f
(I/O\))h(ma)m(y)g(b)s(e)f(freely)0 5275 y(in)m(termixed.)45
b Fg(E.g.)p Fi(,)31 b Fj(Unix.read)g Fi(on)g(a)h Fj(Unix.file_descr)e
Fi(obtained)j(b)m(y)e Fj(Unix.in_channel_of_descr)g Fi(still)1927
5589 y(8)p eop
%%Page: 9 9
9 8 bop 0 91 a Fi(needs)32 b(careful)g(sync)m(honization)h(with)f
Fj(Unix.lseek)g Fi(and/or)g Fj(seek_in/tell_in)f Fi(if)g(P)m(erv)-5
b(asiv)m(es)33 b(I/O)e(is)g(to)h(b)s(e)0 204 y(in)m(terlea)m(v)m(ed.)0
471 y Ff(3.1)112 b(Errors)0 666 y Fi(The)23 b Fj(Unix)f
Fi(mo)s(dule)g(already)h(raises)f(exceptions)h(for)f(an)m(y)h(errno)g
Fd(<>)e Fi(0,)j(so)e(if)g(an)m(y)g(syscall)g(returns,)i(it)f
(succeeded.)0 779 y(Note)i(that)g(Cash)g(should)h(automatically)g
(retry)f(an)m(y)g(in)m(terrupted)j(system)c(call)h(it)g(de\034nes,)i
(so)d(they)h(nev)m(er)h(raise)0 892 y Fj(Unix.EINTR)p
Fi(.)0 1029 y Fj(val)47 b(errno_error)g(:)g(Unix.error)f(->)h(string)g
(->)g(string)g(->)g('a)227 1167 y Fi(Raises)30 b(a)g
Fj(Unix)g Fi(error)h(exception)g(for)g Fj(Unix.error)e
Fi(argumen)m(t.)43 b(This)30 b(is)g(just)g(for)g(compatibilit)m(y)j
(with)227 1280 y(Scsh.)0 1491 y Fj(val)47 b(unwind_protect)g(:)g
(\(unit)f(->)h('a\))g(->)g(\('b)g(->)g(unit\))g(->)g('b)g(->)g('a)227
1629 y(unwind_protect)30 b Fg(thunk)j(pr)-5 b(ote)g(ct)34
b(e)-5 b(d)p Fi(,)32 b(named)f(after)f(a)h(similar)f(functionalit)m(y)i
(of)e(Lisp,)h(calls)f(th)m(unk,)227 1742 y(then,)h(b)s(efore)g
(returning)g(its)f(result)h(\(b)s(e)f(it)h(a)f(v)-5 b(alue)31
b(or)f(an)h(exception\),)g(ensures)g(that)f Fg(pr)-5
b(ote)g(ct)33 b Fi(is)227 1854 y(applied)e(to)f Fg(e)-5
b(d)p Fi(.)42 b(It)29 b(can)h(b)s(e)g(used,)g Fg(e.g.)p
Fi(,)h(to)f(ensure)g(that)g(a)g(\034le)h(is)e(closed)h(after)h(an)f
(action,)h(regardless)f(of)227 1967 y(an)m(y)h(exception)g(this)g
(action)g(ma)m(y)g(raise.)0 2422 y Ff(3.2)112 b(I/O)0
2617 y Fk(3.2.1)103 b(P)m(erv)-6 b(asiv)m(es)36 b(I/O)e(op)s(erations)0
2813 y Fi(Con)m(trarily)c(to)f(Scsh,)g(when)g(using)g(\034le)g
(descriptors,)h(Cash)f(do)s(esn't)f(attempt)i(to)f(b)m(ypass)f(the)h
(underlying)h(I/O)0 2925 y(system,)24 b(whic)m(h)h(is)e(reasonably)h
(e\036cien)m(t.)40 b(So)24 b(to)f(use)g Fj(Pervasives)g
Fi(primitiv)m(es)i(on)e(\034le)h(descriptors,)i(y)m(ou)d(should)0
3038 y(use)37 b Fj(in_channel_of_fd)g Fi(or)g Fj(out_channel_of_fd)g
Fi(to)g(get)h(the)f(prop)s(er)h(c)m(hannel.)63 b Fj(Unix)47
b(read)36 b Fi(and)i Fj(write)0 3151 y Fi(primitiv)m(es)31
b(are)g(still)f(a)m(v)-5 b(ailable)32 b(for)e(those)h(who)g
Fg(r)-5 b(e)g(al)5 b(ly)31 b Fi(w)m(an)m(t)h(them.)0
3415 y Fk(3.2.2)103 b(Channel)35 b(manipulation)f(and)g(standard)h(c)m
(hannels)0 3610 y Fj(val)47 b(close_fd_after)g(:)g(fd)f(->)h(\(fd)g(->)
g('a\))g(->)g('a)0 3747 y(val)g(close_in_after)g(:)94
3860 y(Pervasives.in_channel)f(->)h(\(Pervasives.in_channel)g(->)g
('a\))g(->)g('a)0 3996 y(val)g(close_out_after)g(:)94
4109 y(Pervasives.out_channel)f(->)h(\(Pervasives.out_channel)g(->)g
('a\))g(->)g('a)227 4247 y(close_..._after)30 b Fg(channel/fd)j(c)-5
b(onsumer)31 b Fi(return)g Fg(\(c)-5 b(onsumer)34 b(channel/fd\))p
Fi(,)d(but)f(close)h(the)f(c)m(hannel)227 4360 y(\(or)h(\034le)g
(descriptor\))g(on)g(return.)0 4684 y Fj(val)47 b(with_stdin)g(:)g
(Pervasives.in_channel)f(->)h(\(unit)g(->)g('a\))g(->)g('a)0
4820 y(val)g(with_stdout)g(:)g(Pervasives.out_channel)f(->)h(\(unit)g
(->)g('a\))g(->)g('a)0 4957 y(val)g(with_stderr)g(:)g
(Pervasives.out_channel)f(->)h(\(unit)g(->)g('a\))g(->)g('a)227
5095 y Fi(These)31 b(pro)s(cedures)g(install)g(the)f(giv)m(en)h(c)m
(hannel)h(as)e(the)h Fj(stdin)p Fi(,)f Fj(stdout)p Fi(,)g(and)h
Fj(stderr)f Fi(c)m(hannel,)227 5208 y(resp)s(ectiv)m(ely)-8
b(,)32 b(for)e(the)g(duration)i(of)e(a)g(call)h(to)g(their)g(2d)f
(argumen)m(t.)1927 5589 y(9)p eop
%%Page: 10 10
10 9 bop 0 91 a Fj(val)47 b(set_stdin)g(:)g(Pervasives.in_channel)f(->)
h(unit)0 228 y(val)g(set_stdout)g(:)g(Pervasives.out_channel)f(->)h
(unit)0 364 y(val)g(set_stderr)g(:)g(Pervasives.out_channel)f(->)h
(unit)227 502 y Fi(These)31 b(pro)s(cedures)g(set)f(the)h(standard)g
(I/O)f(c)m(hannels)i(to)e(new)h(v)-5 b(alues,)30 b(the)h(old)g(ones)f
(b)s(eing)227 615 y(abandoned)i(in)f(the)f(great)h(bit)g(buc)m(k)m(et)h
(\026)e(no)h(\035ush,)g(no)f(close.)141 826 y(NOTE:)e(The)f(six)f(pro)s
(cedures)h(ab)s(o)m(v)m(e)g(don't)h(c)m(hange)g(the)f(\034le)g
(descriptor)g(asso)s(ciated)g(to)g(their)g(c)m(hannel)i(ar-)0
939 y(gumen)m(t,)24 b(so)c Fg(e.g.)p Fi(,)j Fj(stdout)c
Fi(ma)m(y)i(b)s(e)f(asso)s(ciated)h(to)f(another)i(\034le)e(descriptor)
i(than)e(1.)38 b(Use)19 b Fj(\(out_channel_of_fd)47 b(1\))0
1052 y Fi(to)33 b(get)g(a)g(non-side-e\033ected)h(c)m(hannel.)49
b(So)33 b(y)m(ou)g(can)g(go)g(\034shin')g(in)g(the)g(great)h(bit)f(buc)
m(k)m(et)p Fd(:)15 b(:)g(:)35 b Fj(flush_all)d Fi(will)0
1165 y(\035ush)e(those)h(c)m(hannels)h(to)s(o.)0 1302
y Fj(val)47 b(close_in)g(:)g(Pervasives.in_channel)f(->)h(bool)0
1438 y(val)g(close_out)g(:)g(Pervasives.out_channel)f(->)h(bool)227
1576 y Fi(Closing)31 b(a)g(c)m(hannel)g(or)g(\034le)g(descriptor:)41
b(the)31 b(3)f(pro)s(cedures)h(around)h(return)f(true)g(if)f(they)g
(closed)h(an)227 1689 y(op)s(en)f(c)m(hannel/fd)i(\(this)e(di\033ers)g
(from)g Fj(Pervasives.close_{in,out})p Fi(\).)39 b(If)29
b(the)h(c)m(hannel)i(w)m(as)e(already)227 1802 y(closed,)h(they)f
(return)i(false;)e(this)g(is)g(not)h(an)f(error.)0 2013
y Fj(val)47 b(close_fd)g(:)g(fd)g(->)g(bool)227 2151
y Fi(If)30 b(the)g Fj(fd)g Fi(arg)h(to)g(close_fd)f(has)g(a)h(c)m
(hannel)h(allo)s(cated)f(to)f(it,)h(the)g(c)m(hannel)h(is)e(shifted)g
(to)g(a)h(new)g(\034le)227 2264 y(descriptor)h(created)f(with)g
Fj({in,out}_channel_of_dup_fd)46 b(fd)30 b Fi(b)s(efore)h(closing)g
(the)f Fj(fd)p Fi(.)40 b(The)227 2377 y(c)m(hannel)31
b(then)f(has)f(its)g(rev)m(ealed)i(coun)m(t)f(set)g(to)f(zero.)41
b(This)29 b(re\035ects)h(the)g(design)f(criteria)i(that)f(c)m(hannels)
227 2490 y(are)h(not)g(asso)s(ciated)f(with)h(\034le)g(descriptors,)g
(but)g(with)f(op)s(en)h(\034les.)227 2603 y(T)-8 b(o)31
b(close)g(a)f(\034le)h(descriptor,)g(and)g(an)m(y)g(asso)s(ciated)f(c)m
(hannel)i(it)f(migh)m(t)g(ha)m(v)m(e,)h(y)m(ou)f(m)m(ust)g(instead)f
(sa)m(y)227 2715 y(one)h(of)f(\(as)g(appropriate\):)321
2828 y Fj(close_in)47 b(\(in_channel_of_fd)g(fd\))321
2941 y(close_out)g(\(out_channel_of_fd)g(fd\))141 3152
y Fi(These)36 b(t)m(w)m(o)h(pro)s(cedures)f(are)g(used)g(to)g(sync)m
(hronise)g(Unix')f(standard)i(I/O)e(\034le)h(descriptors)g(and)g
(Caml's)0 3265 y(curren)m(t)c(I/O)e(c)m(hannels.)0 3402
y Fj(val)47 b(stdchans_to_stdio)f(:)h(unit)g(->)g(unit)227
3540 y Fi(This)31 b(causes)f(the)h(standard)g(I/O)f(\034le)h
(descriptors)g(\(0,)f(1,)h(and)g(2\))f(to)h(tak)m(e)f(their)h(v)-5
b(alues)31 b(from)f(the)227 3653 y(curren)m(t)i(standard)f(I/O)g(c)m
(hannels.)41 b(It)30 b(is)g(exactly)h(equiv)-5 b(alen)m(t)31
b(to)g(the)f(series)g(of)g(redirections:)368 3766 y Fj(fdes_of_dup_in)
47 b(~newfd:0)g(stdin;)368 3878 y(fdes_of_dup_out)g(~newfd:1)g(stdout;)
368 3991 y(fdes_of_dup_out)g(~newfd:2)g(stderr)227 4104
y Fi(Wh)m(y)31 b(not)f Fj(move_..._to_fdes)p Fi(?)40
b(Because)31 b Fj(stdout)f Fi(and)g Fj(stderr)g Fi(migh)m(t)i(b)s(e)e
(the)h(same)f(c)m(hannel.)0 4316 y Fj(val)47 b(stdio_to_stdchans)f(:)h
(unit)g(->)g(unit)227 4453 y Fi(This)31 b(causes)f(the)h(bindings)g(of)
f(the)g(curren)m(t)i(standard)f(I/O)g(c)m(hannels)g(to)g(b)s(e)f(c)m
(hanged)i(to)e(c)m(hannels)227 4566 y(constructed)i(o)m(v)m(er)f(the)g
(standard)g(I/O)f(\034le)h(descriptors.)41 b(It)30 b(is)g(exactly)h
(equiv)-5 b(alen)m(t)31 b(to)f(the)h(series)f(of)227
4679 y(assignmen)m(ts:)368 4792 y Fj(set_stdin)47 b(\(in_channel_of_fd)
g(0\);)368 4905 y(set_stdout)g(\(out_channel_of_fd)g(1\);)368
5018 y(set_stderr)g(\(out_channel_of_fd)g(2\))227 5131
y Fi(Ho)m(w)m(ev)m(er,)32 b(y)m(ou)f(are)g(more)g(lik)m(ely)f(to)h
(\034nd)g(the)f(dynamic-exten)m(t)j(v)-5 b(arian)m(t,)31
b Fj(with_stdio_channels)p Fi(,)227 5244 y(b)s(elo)m(w,)h(to)e(b)s(e)g
(of)g(use)g(in)h(general)g(programming.)1905 5589 y(10)p
eop
%%Page: 11 11
11 10 bop 0 91 a Fj(val)47 b(with_stdio_chans)g(:)f(\(unit)h(->)g('a\))
g(->)g('a)227 229 y Fi(Binds)31 b(the)f(standard)h(c)m(hannels)h
Fj(stdin)p Fi(,)e Fj(stdout)p Fi(,)g(and)h Fj(stderr)f
Fi(to)h(b)s(e)f(c)m(hannels)h(on)g(\034le)g(descriptors)g(0,)227
342 y(1,)g(2,)f(and)h(then)g(calls)f(its)g(1st)h(argumen)m(t.)42
b Fj(with_stdio_chans)47 b(thunk)30 b Fi(is)g(equiv)-5
b(alen)m(t)31 b(to:)321 455 y Fj(with_stdin)47 b(\(in_channel_of_fd)g
(0\))415 568 y(\(fun)g(\(\))g(->)g(with_stdout)g(\(out_channel_of_fd)f
(1\))556 681 y(\(fun)h(\(\))g(->)g(with_stderr)g(\(out_channel_of_fd)f
(2\))h(thunk\)\))0 1019 y Fk(3.2.3)103 b(String)34 b(c)m(hannels)0
1214 y Fi(Ocaml)d(has)f(no)h(string)g(c)m(hannels,)g(but)g(Cash)g(em)m
(ulates)g(them)g(with)g(temp)g(\034les.)0 1351 y Fj(val)47
b(make_string_in_channel)f(:)h(string)g(->)g(Pervasives.in_channel)227
1489 y Fi(Returns)31 b(a)f(c)m(hannel)i(that)f(reads)f(c)m(haracters)i
(from)f(the)f(supplied)h(string.)0 1700 y Fj(val)47 b
(make_string_out_channel)f(:)h(unit)g(->)g(Pervasives.out_channel)227
1838 y Fi(A)30 b(string)h(output)g(c)m(hannel)h(is)e(a)g(c)m(hannel)i
(that)f(collects)g(the)g(c)m(haracters)h(giv)m(en)f(to)f(it)h(in)m(to)g
(a)f(string)227 1951 y(\(w)m(ell,)i(a)e(temp)h(\034le,)g(in)g(fact\).)0
2162 y Fj(val)47 b(string_out_channel_output)f(:)94 2275
y(?close:bool)h(->)g(Pervasives.out_channel)f(->)h(string)227
2413 y Fi(The)31 b(accum)m(ulated)i(string)e(is)e(retriev)m(ed)j(b)m(y)
f(applying)g Fj(string_out_channel_output)e Fi(to)i(the)227
2526 y(c)m(hannel.)42 b(Y)-8 b(ou)31 b(can)g(call)g(this)f(ev)m(en)h
(on)f(a)h(closed)f(c)m(hannel.)43 b(Ho)m(w)m(ev)m(er,)32
b(as)e(the)g(em)m(ulation)j(main)m(tains)f(a)227 2639
y(hidden)g(input)f(c)m(hannel)h(on)e(the)h(temp)g(\034le,)g(y)m(ou)f
(can)h(use)f(a)h Fg(\003close:true)h Fi(argumen)m(t)g(to)e(close)h(b)s
(oth)227 2751 y(c)m(hannels,)h(and)f(free)f(the)h(underlying)g(disk)f
(storage.)41 b(This)31 b(will)f(also)h(mak)m(e)g(the)f(out_c)m(hannel)
227 2864 y(unrecognised)i(as)e(a)g(string)h(output)g(c)m(hannel.)0
3076 y Fj(val)47 b(call_with_string_out_channel)f(:)94
3189 y(?close:bool)h(->)g(\(Pervasives.out_channel)f(->)h(unit\))g(->)g
(string)227 3326 y Fi(The)31 b(\034rst)f(arg)h Fg(pr)-5
b(o)g(c)g(e)g(dur)g(e)34 b Fi(v)-5 b(alue)31 b(is)f(called)h(on)g(a)f
(c)m(hannel.)42 b(When)31 b(it)f(returns,)227 3439 y
Fj(call_with_string_out_channel)g Fi(returns)h(a)f(string)h(con)m
(taining)h(the)f(c)m(haracters)h(that)f(w)m(ere)227 3552
y(written)h(to)e(that)h(c)m(hannel)h(during)f(the)g(execution)g(of)f
Fg(pr)-5 b(o)g(c)g(e)g(dur)g(e)p Fi(.)0 3891 y Fk(3.2.4)103
b(Rev)m(ealed)36 b(c)m(hannels)f(and)f(\034le)h(descriptors)0
4086 y Fi(The)h(material)h(in)e(this)h(section)g(and)g(the)g(follo)m
(wing)h(one)e(is)h(not)f(critical)i(for)e(most)h(applications.)57
b(Y)-8 b(ou)36 b(ma)m(y)0 4199 y(safely)30 b(skim)g(or)g(completely)i
(skip)d(this)i(section)g(on)f(a)g(\034rst)h(reading.)141
4312 y(Caml)k(do)s(esn't)g(sp)s(ecify)f(what)h(happ)s(ens)g(to)f(the)h
(\034le)g(descriptor)h(when)f(a)g(c)m(hannel)h(is)e(garbage-collected:)
0 4425 y(is)g(it)g(closed)h(or)f(not)g(?)52 b(In)33 b(the)i(follo)m
(wing)h(discussion,)f(w)m(e)g(supp)s(ose)f(the)g(same)g(b)s(eha)m
(viour)i(as)d(man)m(y)i(Sc)m(heme)0 4537 y(implemen)m(tations)d(whic)m
(h)e(close)g(c)m(hannels)g(when)g(they)g(collect)g(them.)41
b(An)m(yw)m(a)m(y)-8 b(,)31 b(the)e(same)h(argumen)m(ts)h(apply)0
4650 y(when)g(exec'ing)g(another)h(program.)141 4763
y(Dealing)38 b(with)g(Unix)f(\034le)h(descriptors)g(in)f(a)g(Caml)h(en)
m(vironmen)m(t)i(is)d(di\036cult.)62 b(In)37 b(Unix,)i(op)s(en)e
(\034les)g(are)0 4876 y(part)32 b(of)g(the)g(pro)s(cess)f(en)m
(vironmen)m(t,)j(and)f(are)f(referenced)g(b)m(y)g(small)g(in)m(tegers)h
(called)g Fg(\034le)g(descriptors)p Fi(.)46 b(Op)s(en)0
4989 y(\034le)e(descriptors)h(are)f(the)h(fundamen)m(tal)h(w)m(a)m(y)f
(I/O)f(redirections)h(are)f(passed)g(to)g(subpro)s(cesses,)j(since)d
(\034le)0 5102 y(descriptors)31 b(are)g(preserv)m(ed)g(across)f(fork's)
g(and)h(exec's.)141 5215 y(Caml,)48 b(on)c(the)f(other)i(hand,)i(uses)c
(c)m(hannels)i(for)f(sp)s(ecifying)f(I/O)g(sources.)80
b(Channels)45 b(are)f(garbage-)0 5328 y(collected)d(Caml)g(ob)5
b(jects,)43 b(not)d(in)m(tegers.)70 b(When)41 b(a)f(c)m(hannel)h(b)s
(ecomes)f(unreac)m(hable,)45 b(it)40 b(can)h(b)s(e)e(collected)1905
5589 y(11)p eop
%%Page: 12 12
12 11 bop 0 91 a Fi(\(and)38 b(the)g(asso)s(ciated)g(\034le)g
(descriptor)h(ma)m(y)f(b)s(e)f(closed\).)63 b(Because)39
b(\034le)f(descriptors)g(are)g(just)f(in)m(tegers,)k(it's)0
204 y(imp)s(ossible)27 b(to)f(garbage)i(collect)f(them)h(\026)e(one)h
(w)m(ouldn't)i(b)s(e)d(able)h(to)g(collect)g(an)g(unreac)m(hable)i(c)m
(hannel)f(on)e(\034le)0 317 y(descriptor)k(3)f(unless)g(there)h(w)m
(ere)g(no)g(3's)f(in)g(the)g(system,)g(and)h(y)m(ou)f(could)h(further)g
(pro)m(v)m(e)g(that)g(y)m(our)g(program)0 430 y(w)m(ould)i(nev)m(er)f
(again)g(compute)g(a)g(3.)40 b(This)31 b(is)f(di\036cult)h(at)g(b)s
(est.)141 543 y(If)44 b(a)h(Caml)h(program)g(only)f(used)g(Caml)h(c)m
(hannels,)k(and)45 b(nev)m(er)h(actually)g(used)f(\034le)g
(descriptors,)50 b(this)0 656 y(w)m(ould)36 b(not)g(b)s(e)e(a)h
(problem.)56 b(But)35 b(Caml)h(co)s(de)f(m)m(ust)g(descend)h(to)f(the)g
(\034le)h(descriptor)g(lev)m(el)f(in)g(at)g(least)g(t)m(w)m(o)0
769 y(circumstances:)136 956 y Fe(\017)46 b Fi(when)31
b(in)m(terfacing)h(to)f(foreign)g(co)s(de)136 1144 y
Fe(\017)46 b Fi(when)31 b(in)m(terfacing)h(to)f(a)f(subpro)s(cess.)141
1332 y(This)k(causes)f(a)h(problem.)52 b(Supp)s(ose)34
b(w)m(e)g(ha)m(v)m(e)h(a)f(Caml)g(c)m(hannel)h(constructed)g(on)f(top)g
(of)g(\034le)g(descriptor)0 1445 y(2.)58 b(W)-8 b(e)36
b(in)m(tend)i(to)e(fork)g(o\033)f(a)h(program)i(that)e(will)h(inherit)g
(this)f(\034le)h(descriptor.)58 b(If)36 b(w)m(e)g(drop)h(references)g
(to)0 1557 y(the)42 b(c)m(hannel,)j(the)d(garbage)h(collector)f(could)g
(prematurely)h(close)e(\034le)h(2)f(b)s(efore)h(w)m(e)g(fork)e(the)i
(subpro)s(cess.)0 1670 y(The)29 b(in)m(terface)h(describ)s(ed)g(b)s
(elo)m(w)f(is)g(in)m(tended)h(to)f(\034x)g(this)g(and)g(other)g
(problems)h(arising)f(from)g(the)g(mismatc)m(h)0 1783
y(b)s(et)m(w)m(een)j(c)m(hannels)g(and)e(\034le)h(descriptors.)141
1896 y(The)40 b(Caml)h(run)m(time)g(main)m(tains)h(a)d(list)h(of)f(op)s
(en)h(c)m(hannels,)k(from)c(whic)m(h)h(one)f(can)g(retriev)m(e)h(the)f
(Caml)0 2009 y(c)m(hannel)k(allo)s(cated)f(for)f(a)g(giv)m(en)g(\034le)
h(descriptor.)77 b(Cash)42 b(imp)s(oses)g(the)g(further)h(restriction)g
(that)f(there)h(is)0 2122 y(at)d(most)f(one)h(op)s(en)f(c)m(hannel)i
(for)f(eac)m(h)g(op)s(en)f(\034le)h(descriptor.)69 b(This)39
b(is)g(not)h(enforced)g(b)m(y)g(the)g Fj(Unix)f Fi(mo)s(d-)0
2235 y(ule's)32 b(functions)g Fj({in,out}_channel_of_descr)p
Fi(,)g(whic)m(h)h(will)f(happily)h(allo)s(cate)g(a)e(new)i(c)m(hannel)g
(eac)m(h)g(time)0 2348 y(they)39 b(are)g(called,)j(eac)m(h)e(with)g
(its)e(o)m(wn)i(bu\033er,)i(but)d(the)g(system)g(only)f(kno)m(ws)i(one)
f(p)s(osition)g(in)g(the)g(\034le)h(\026)0 2461 y(the)d(Caml)g(run)m
(time)h(b)s(eha)m(viour)g(can)f(b)s(e)f(understo)s(o)s(d,)i(but)f(only)
g(with)g(serious)f(insigh)m(t)i(\(and)f(the)f(sources\).)0
2574 y(So,)e(for)f Fj(Cash.{in,out}_channel_of_fd)f Fi(to)h(b)s(e)g
(able)h(to)f(giv)m(e)h(an)f(unam)m(biguous)i(answ)m(er)f(\(i.e.)49
b(the)33 b(previ-)0 2687 y(ously)i(op)s(ened)h(c)m(hannel)h(on)e(this)g
(fd,)i(not)e(an)m(y)m(one)i(of)e(those)h(already)f(op)s(ened,)j(nor)d
(a)h(new)f(one)h(\026)g(except)f(if)0 2800 y(there)k(w)m(as)f(none)g
(\026\),)j(y)m(ou)d(should)g(only)g(use)g(the)g(Cash)g(v)m(ersions.)64
b(In)37 b(an)m(y)h(case,)i(if)e(there)g(are)h(more)f(than)0
2912 y(one)i(c)m(hannel)i(op)s(ened)e(on)h(a)e(\034le)i(descriptor,)i
(these)d(functions)h(will)f(signal)g(an)h(error.)70 b(This)40
b(is)f(nearly)h(the)0 3025 y(only)35 b(incompatibilit)m(y)i(b)s(et)m(w)
m(een)f Fj(Unix)f Fi(and)g Fj(Cash)g Fi(\(the)g(second)g(b)s(eing)g
(that)g Fj(Unix.open_file)g Fi(do)s(esn't)f(call)0 3138
y Fj(set_close_on_exec)p Fi(\).)141 3275 y(The)h(c)m(hannel)h(data)f
(structure)g(has)f(one)h(Cash-sp)s(eci\034c)g(\034eld)g(b)s(esides)f
(the)g(descriptor:)50 b Fg(r)-5 b(eve)g(ale)g(d)p Fi(.)56
b(When)0 3388 y(a)38 b(c)m(hannel)h(is)f(closed)g(with)h
Fj(\(close_{in,out})46 b(channel\))p Fi(,)40 b(the)e(c)m(hannel's)h
(\034le)g(descriptor)f(is)g(closed,)i(it)e(is)0 3501
y(unlink)m(ed)k(from)e(the)h(op)s(en)f(c)m(hannel)i(list,)h(and)e(the)g
(c)m(hannel's)h Fg(descriptor)f Fi(\034eld)g(is)f(reset)g(to)h(some)f
("no)h(fd")0 3613 y(v)-5 b(alue.)141 3726 y(When)22 b(a)g(\034le)g
(descriptor)g(is)g(closed)g(with)g Fj(\(close_fd)47 b(fdes\))p
Fi(,)23 b(an)m(y)f(asso)s(ciated)g(c)m(hannel)h(is)e(shifted)h(to)g(a)f
(new)0 3839 y(\034le)37 b(descriptor)h(created)g(with)f
Fj(\({in,out}_channel_of_dup_fd)46 b(fdes\))p Fi(.)60
b(The)37 b(c)m(hannel)h(has)f(its)g(rev)m(ealed)0 3952
y(coun)m(t)27 b(reset)g(to)f(zero)h(\(and)f(hence)h(b)s(ecomes)g
(eligible)g(for)f(closing)g(on)h(exec)f(or)g(GC\).)g(See)h(discussion)f
(b)s(elo)m(w.)40 b(T)-8 b(o)0 4065 y(really)28 b(put)g(a)f(stak)m(e)h
(through)h(a)f(descriptor's)g(heart)g(without)h(w)m(aiting)g(for)f
(asso)s(ciated)f(c)m(hannels)i(to)f(b)s(e)f(closed,)0
4178 y(y)m(ou)k(m)m(ust)g(sa)m(y)f(one)h(of)141 4404
y Fj(close_in)47 b(\(in_channel_of_fd)f(fdes\))141 4517
y(close_out)h(\(out_channel_of_fd)f(fdes\))141 4743 y
Fi(The)35 b Fg(r)-5 b(eve)g(ale)g(d)37 b Fi(\034eld)d(is)g(an)g(aid)h
(to)f(garbage)h(collection.)53 b(It)33 b(is)h(an)g(in)m(teger)i
(semaphore.)52 b(If)33 b(it)h(is)g(zero,)h(the)0 4856
y(c)m(hannel's)f(\034le)f(descriptor)h(can)f(b)s(e)g(closed)g(when)g
(the)g(c)m(hannel)i(is)d(collected.)49 b(Essen)m(tially)-8
b(,)35 b(the)e Fg(r)-5 b(eve)g(ale)g(d)36 b Fi(\034eld)0
4968 y(re\035ects)30 b(whether)g(or)g(not)g(the)f(c)m(hannel's)i
(\034le)f(descriptor)g(has)g(escap)s(ed)f(to)h(the)f(Caml)h(user.)41
b(If)28 b(the)i(Caml)g(user)0 5081 y(do)s(esn't)i(kno)m(w)i(what)f
(\034le)f(descriptor)i(is)e(asso)s(ciated)g(with)h(a)g(giv)m(en)g(c)m
(hannel,)i(then)e(he)f(can't)h(p)s(ossibly)f(retain)0
5194 y(an)41 b(\020in)m(teger)g(handle\021)49 b(on)41
b(the)g(c)m(hannel)g(after)g(dropping)g(p)s(oin)m(ters)g(to)g(the)g(c)m
(hannel)g(itself,)i(so)d(the)h(garbage)0 5307 y(collector)32
b(is)e(free)g(to)g(close)h(the)g(\034le.)1905 5589 y(12)p
eop
%%Page: 13 13
13 12 bop 141 91 a Fi(Channels)45 b(allo)s(cated)h(with)f
Fj(open_in)f Fi(and)g Fj(open_out)g Fi(are)h(unrev)m(ealed)h(c)m
(hannels)g(\026)e Fg(i.e.)p Fi(,)k Fg(r)-5 b(eve)g(ale)g(d)47
b Fi(is)0 204 y(initialised)28 b(to)g(0.)39 b(No)27 b(one)h(kno)m(ws)g
(the)f(c)m(hannel's)i(\034le)f(descriptor,)h(so)e(the)h(\034le)f
(descriptor)i(can)e(b)s(e)g(closed)h(when)0 317 y(the)j(c)m(hannel)h
(is)e(collected.)141 430 y(The)k(functions)g Fj({in,out}_channel_of_fd)
f Fi(and)h Fj(fd_of_{in,out}_channel)e Fi(are)i(used)g(to)f(shift)g
(bac)m(k)0 543 y(and)i(forth)g(b)s(et)m(w)m(een)i(\034le)e(descriptors)
h(and)f(c)m(hannels.)56 b(When)35 b Fj(fd_of_{in,out}_channel)f
Fi(rev)m(eals)i(a)f(c)m(han-)0 656 y(nel's)44 b(\034le)h(descriptor,)j
(it)d(incremen)m(ts)g(the)g(c)m(hannel's)g Fg(r)-5 b(eve)g(ale)g(d)48
b Fi(\034eld.)82 b(When)45 b(the)f(user)g(is)g(through)h(with)0
769 y(the)31 b(\034le)g(descriptor,)h(he)f(can)g(call)g
Fj(release_{in,out}_channel_handle)f Fg(channel)p Fi(,)h(whic)m(h)h
(decremen)m(ts)g(the)0 882 y(coun)m(t.)82 b(The)44 b(functions)g
Fj(call_with_fdes_{in,out})f Fg(channel)i(pr)-5 b(o)g(c)45
b Fi(automate)g(this)f(proto)s(col.)81 b(If)42 b Fg(pr)-5
b(o)g(c)0 995 y Fi(thro)m(ws)31 b(out)g(of)f(the)g Fj
(call_with_fdes_...)40 b Fi(application,)32 b(the)f(exception)g(is)f
(caugh)m(t,)i(the)f(descriptor)g(handle)0 1108 y(released,)37
b(then)f(the)g(exception)h(is)e(re-raised.)56 b(When)36
b(the)g(user)f(maps)h(a)f(\034le)h(descriptor)g(to)g(a)f(c)m(hannel)i
(with)0 1220 y Fj({in,out}_channel_of_fd)p Fi(,)30 b(the)g(c)m(hannel)i
(has)f(its)f(rev)m(ealed)h(\034eld)g(incremen)m(ted.)141
1333 y(Not)e(all)g(\034le)g(descriptors)h(are)f(created)h(b)m(y)f
(requests)f(to)h(mak)m(e)h(c)m(hannels.)41 b(Some)30
b(are)f(inherited)h(on)f(pro)s(cess)0 1446 y(in)m(v)m(o)s(cation)k(via)
f Fj(exec\(2\))p Fi(,)f(and)h(are)g(simply)f(part)i(of)e(the)h(global)g
(en)m(vironmen)m(t.)47 b(Subpro)s(cesses)31 b(ma)m(y)h(dep)s(end)0
1559 y(up)s(on)37 b(them,)i(so)d(if)g(a)g(c)m(hannel)j(is)d(later)h
(allo)s(cated)g(for)g(these)f(\034le)h(descriptors,)i(is)d(should)h(b)s
(e)f(considered)i(as)0 1672 y(a)g(rev)m(ealed)i(c)m(hannel.)66
b(F)-8 b(or)39 b(example,)i(when)e(the)g(Caml)g(shell's)f(pro)s(cess)g
(starts)h(up,)h(it)f(op)s(ens)f(c)m(hannels)i(on)0 1785
y(\034le)32 b(descriptors)g(0,)f(1,)h(and)g(2)f(for)g(the)h(initial)g
(v)-5 b(alues)32 b(of)e Fj(stdin)p Fi(,)i Fj(stdout)p
Fi(,)f(and)h Fj(stderr)p Fi(.)43 b(These)32 b(c)m(hannels)g(are)0
1898 y(initialised)f(with)f Fg(r)-5 b(eve)g(ale)g(d)33
b Fi(set)c(to)h(1,)g(so)f(that)i Fj(stdin)p Fi(,)e Fj(stdout)p
Fi(,)h(and)g Fj(stderr)f Fi(are)h(not)g(closed)g(ev)m(en)h(if)e(the)h
(user)0 2011 y(drops)h(the)f(c)m(hannel.)141 2147 y(Unrev)m(ealed)f
(\034le)f(c)m(hannels)i(ha)m(v)m(e)f(the)f(nice)g(prop)s(ert)m(y)h
(that)f(they)g(can)g(b)s(e)g(closed)g(when)h(all)f(p)s(oin)m(ters)g(to)
g(the)0 2260 y(c)m(hannel)33 b(are)f(dropp)s(ed.)45 b(This)31
b(can)h(happ)s(en)h(during)f(gc,)g(or)g(at)g(an)f Fj(exec\(\))h
Fi(\026)f(since)h(all)g(memory)g(is)f(dropp)s(ed)0 2373
y(at)i(an)g Fj(exec\(\))p Fi(.)47 b(No)32 b(one)h(kno)m(ws)g(the)g
(\034le)g(descriptor)g(asso)s(ciated)g(with)g(the)g(c)m(hannel,)i(so)d
(the)h(exec'd)g(pro)s(cess)0 2486 y(certainly)e(can't)g(refer)g(to)f
(it.)141 2599 y(This)37 b(facilit)m(y)g(preserv)m(es)h(the)f
(transparen)m(t)i(ma)m(y-close-on-collect)g(prop)s(ert)m(y)f(for)f
(\034le)g(c)m(hannels)h(that)f(are)0 2712 y(used)22 b(in)h(straigh)m
(tforw)m(ard)i(w)m(a)m(ys,)g(y)m(et)d(allo)m(ws)i(access)e(to)g(the)h
(underlying)h(Unix)e(substrate)g(without)i(in)m(terference)0
2825 y(from)35 b(the)g(garbage)i(collector.)55 b(This)36
b(is)e(critical,)k(since)d(shell)g(programming)i(absolutely)f(requires)
f(access)g(to)0 2938 y(the)c(Unix)f(\034le)g(descriptors,)h(as)f(their)
h(n)m(umerical)i(v)-5 b(alues)30 b(are)h(a)f(critical)h(part)g(of)f
(the)h(pro)s(cess)f(in)m(terface.)141 3051 y(A)44 b(c)m(hannel's)i
(underlying)f(\034le)g(descriptor)g(can)g(b)s(e)f(shifted)h(around)g
(with)g Fj(dup\(2\))f Fi(when)h(con)m(v)m(enien)m(t.)0
3164 y(That)35 b(is,)h(the)e(actual)i(\034le)f(descriptor)g(on)g(top)g
(of)f(whic)m(h)i(a)f(c)m(hannel)h(is)e(constructed)i(can)f(b)s(e)f
(shifted)h(around)0 3276 y(underneath)c(the)e(c)m(hannel)i(b)m(y)e(the)
g(Cash)g(run)m(time)i(when)f(necessary)-8 b(.)40 b(This)29
b(is)g(imp)s(ortan)m(t,)i(b)s(ecause)e(when)g(the)0 3389
y(user)f(is)g(setting)h(up)f(\034le)g(descriptors)h(prior)g(to)f(a)h
Fj(exec\(2\))p Fi(,)f(he)g(ma)m(y)h(explicitly)f(use)g(a)h(\034le)f
(descriptor)h(that)g(has)0 3502 y(already)g(b)s(een)g(allo)s(cated)h
(to)f(some)g(c)m(hannel.)41 b(In)29 b(this)f(case,)i(the)f(Cash)g(run)m
(time)h(just)e(shifts)g(the)h(c)m(hannel's)h(\034le)0
3615 y(descriptor)k(to)f(some)g(new)g(lo)s(cation)h(with)f
Fj(dup)p Fi(,)h(freeing)f(up)g(its)g(old)g(descriptor.)49
b(This)33 b(prev)m(en)m(ts)h(errors)g(from)0 3728 y(happ)s(ening)j(in)f
(the)g(follo)m(wing)h(scenario.)57 b(Supp)s(ose)36 b(w)m(e)g(ha)m(v)m
(e)h(a)f(\034le)g(op)s(en)g(on)f(c)m(hannel)j Fg(f)p
Fi(.)56 b(No)m(w)36 b(w)m(e)g(w)m(an)m(t)i(to)0 3841
y(run)30 b(a)g(program)h(that)f(reads)g(input)g(on)g(\034le)g(0,)g
(writes)g(output)h(to)f(\034le)g(1,)g(errors)g(to)g(\034le)g(2,)g(and)g
(logs)g(execution)0 3954 y(information)35 b(on)f(\034le)g(3.)50
b(W)-8 b(e)34 b(w)m(an)m(t)i(to)e(run)g(this)f(program)i(with)g(input)f
(from)g Fg(f)p Fi(.)50 b(So)34 b(w)m(e)g(write)g(\(in)g(an)g(sh-lik)m
(e)0 4067 y(syn)m(tax,)29 b(since)g(Cash)h(pip)s(eline)f(syn)m(tax)g
(is)g(not)g(\034xed)g(for)g(no)m(w)h(\026)f(here,)h Fg($f$)f
Fi(denotes)g(a)g(Caml)h(input)g(c)m(hannel\):)141 4203
y Fj(\023run)47 b("/usr/shivers/bin/prog)f(1>output.txt)h(2>error.log)g
(3>trace.log)g(0<)p Fg($f$)p Fj("\024)141 4316 y Fi(No)m(w,)d(supp)s
(ose)c(b)m(y)h(ill)f(c)m(hance)i(that,)i(un)m(b)s(ekno)m(wnst)e(to)e
(us,)j(when)e(the)g(op)s(erating)h(system)e(op)s(ened)h
Fg(f)p Fi('s)0 4429 y(\034le,)g(it)e(allo)s(cated)g(descriptor)h(3)e
(for)g(it.)65 b(If)38 b(w)m(e)h(blindly)g(redirect)h
Fj(trace.log)e Fi(in)m(to)i(\034le)e(descriptor)i(3,)h(w)m(e'll)0
4542 y(clobb)s(er)35 b Fg(f)e Fi(!)52 b(Ho)m(w)m(ev)m(er,)37
b(the)e(c)m(hannel-sh)m(u\037ing)j(mac)m(hinery)d(sa)m(v)m(es)g(us:)48
b(when)35 b(the)f Fj(\023run)47 b(...\024)34 b Fi(form)g(tries)h(to)0
4655 y(dup)28 b Fj(trace.log)p Fi('s)g(\034le)g(descriptor)h(to)f(3,)h
Fj(dup)f Fi(will)g(notice)h(that)g(\034le)f(descriptor)h(3)f(is)g
(already)g(asso)s(ciated)g(with)0 4768 y(an)35 b(unrev)m(ealed)i(c)m
(hannel)g(\()p Fg(i.e.)p Fi(,)f Fg(f)p Fi(\).)55 b(So,)36
b(it)g(will)f(\034rst)g(mo)m(v)m(e)i Fg(f)d Fi(to)i(some)f(other)h
(\034le)g(descriptor.)56 b(This)35 b(k)m(eeps)g Fg(f)0
4881 y Fi(aliv)m(e)c(and)g(w)m(ell)g(so)f(that)h(it)f(can)h(subsequen)m
(tly)g(b)s(e)f(dup'd)h(in)m(to)g(descriptor)h(0)e(for)g
Fj(prog)p Fi('s)g(stdin.)141 4994 y(The)k(c)m(hannel-shifting)i(mac)m
(hinery)f(mak)m(es)f(the)f(follo)m(wing)i(guaran)m(tee:)49
b(a)34 b(c)m(hannel)h(is)e(only)g(mo)m(v)m(ed)i(when)0
5107 y(the)41 b(underlying)h(\034le)f(descriptor)h(is)f(closed,)j
(either)d(b)m(y)g(a)g Fj(close\(\))g Fi(or)g(a)f Fj(dup2\(\))h
Fi(op)s(eration.)73 b(Also)40 b(when)0 5220 y(explicitly)22
b(ask)m(ed)f(b)m(y)h Fj(with_stdin)p Fi([3.2.2],)i Fj(set_stdout)d
Fi(and)h(consorts.)37 b(Otherwise)23 b(a)e(c)m
(hannel/\034le-descriptor)0 5332 y(asso)s(ciation)31
b(is)e(stable.)1905 5589 y(13)p eop
%%Page: 14 14
14 13 bop 141 91 a Fi(Under)40 b(normal)g(circumstances,)i(all)e(this)f
(mac)m(hinery)h(just)f(w)m(orks)g(b)s(ehind)h(the)f(scenes)g(to)h(k)m
(eep)f(things)0 204 y(straigh)m(tened)j(out.)71 b(The)41
b(only)f(time)h(the)g(user)f(has)g(to)h(think)f(ab)s(out)h(it)f(is)g
(when)h(he)g(starts)f(accessing)g(\034le)0 317 y(descriptors)27
b(from)f(c)m(hannels,)i(whic)m(h)f(he)g(should)f(almost)h(nev)m(er)f
(ha)m(v)m(e)h(to)g(do.)39 b(If)25 b(a)h(user)g(starts)g(asking)g(what)g
(\034le)0 430 y(descriptors)36 b(ha)m(v)m(e)g(b)s(een)g(allo)s(cated)g
(to)f(what)h(c)m(hannels,)i(he)d(has)g(to)h(tak)m(e)f(resp)s(onsibilit)
m(y)h(for)f(managing)i(this)0 543 y(information.)0 807
y Fk(3.2.5)103 b(Channel-mapping)33 b(mac)m(hinery)0
1002 y Fi(The)24 b(pro)s(cedures)g(pro)m(vided)h(in)f(this)f(section)h
(are)g(almost)g(nev)m(er)g(needed.)39 b(Y)-8 b(ou)24
b(ma)m(y)g(safely)f(skim)g(or)h(completely)0 1115 y(skip)30
b(this)g(section)h(on)g(a)f(\034rst)g(reading.)141 1228
y(Here)36 b(are)g(the)h(routines)f(for)g(manipulating)i(c)m(hannels)f
(in)f(Cash.)57 b(The)37 b(imp)s(ortan)m(t)g(p)s(oin)m(ts)f(to)g(remem)m
(b)s(er)0 1341 y(are:)136 1528 y Fe(\017)46 b Fi(A)30
b(c)m(hannel)i(is)e(asso)s(ciated)g(with)h(an)g(op)s(en)f(\034le,)h
(not)g(a)f(particular)i(\034le)f(descriptor.)136 1716
y Fe(\017)46 b Fi(The)23 b(asso)s(ciation)f(b)s(et)m(w)m(een)h(a)f(c)m
(hannel)i(and)e(a)g(particular)i(\034le)e(descriptor)h(is)f(nev)m(er)g
(c)m(hanged)i Fg(exc)-5 b(ept)24 b Fi(when)227 1829 y(requested)h(b)m
(y)g Fj(set_std...)38 b Fi(or)25 b Fj(with_std...)38
b Fi(\(see)25 b([3.2.2]\),)i(or)d(when)i(the)f(\034le)g(descriptor)g
(is)f(explicitly)227 1942 y(closed.)47 b(\020Closing\021)41
b(includes)33 b(b)s(eing)g(used)f(as)h(the)f(target)i(of)e(a)g
Fj(dup2)p Fi(,)h(so)f(the)h(set)f(of)g(pro)s(cedures)h(b)s(elo)m(w)227
2055 y(that)39 b(close)g(their)g(targets)g(are)g Fj(close_...)p
Fi(,)h(t)m(w)m(o-argumen)m(t)i Fj(dup_...)p Fi(,)e(and)f
Fj(move_..._to_fdes)p Fi(.)65 b(If)227 2168 y(the)28
b(target)h(\034le)f(descriptor)h(of)e(one)h(of)g(these)g(routines)g
(has)g(an)g(allo)s(cated)g(c)m(hannel,)i(the)f(c)m(hannel)g(will)f(b)s
(e)227 2280 y(shifted)h(to)f(another)h(freshly-allo)s(cated)g(\034le)g
(descriptor,)h(and)f(mark)m(ed)g(as)f(unrev)m(ealed,)i(th)m(us)f
(preserving)227 2393 y(the)i(c)m(hannel)h(but)f(freeing)f(its)h(old)f
(\034le)h(descriptor.)141 2581 y(These)37 b(rules)g(are)f(what)h(is)g
(necessary)f(to)h(\020mak)m(e)g(things)g(w)m(ork)g(out\021)44
b(with)37 b(no)g(surprises)f(in)h(the)g(general)0 2694
y(case.)0 2830 y Fj(val)47 b(in_channel_of_fd)g(:)f(fd)h(->)g
(Pervasives.in_channel)0 2967 y(val)g(out_channel_of_fd)f(:)h(fd)g(->)g
(Pervasives.out_channel)0 3103 y(val)g(fd_of_in_channel)g(:)f
(Pervasives.in_channel)h(->)g(fd)0 3240 y(val)g(fd_of_out_channel)f(:)h
(Pervasives.out_channel)g(->)g(fd)227 3378 y Fi(These)31
b(incremen)m(t)h(the)f(c)m(hannel's)h(rev)m(ealed)f(coun)m(t.)0
3589 y Fj(val)47 b(in_channel_revealed)f(:)h(Pervasives.in_channel)g
(->)g(int)0 3726 y(val)g(out_channel_revealed)f(:)h
(Pervasives.out_channel)g(->)g(int)227 3863 y Fi(Return)31
b(the)g(c)m(hannel's)g(rev)m(ealed)h(coun)m(t.)0 4075
y Fj(val)47 b(release_in_channel_handle)f(:)h(Pervasives.in_channel)g
(->)g(unit)0 4211 y(val)g(release_out_channel_handle)f(:)h
(Pervasives.out_channel)g(->)g(unit)227 4349 y Fi(Decremen)m(t)32
b(the)f(c)m(hannel's)h(rev)m(ealed)f(coun)m(t.)0 4560
y Fj(val)47 b(call_with_fdes_in)f(:)h(\(fd)g(->)g('a\))g(->)g
(Pervasives.in_channel)g(->)g('a)0 4697 y(val)g(call_with_fdes_out)f(:)
h(\(fd)g(->)g('a\))g(->)g(Pervasives.out_channel)g(->)g('a)227
4835 y(call_with_fdes_...)40 b Fg(c)-5 b(onsumer)34 b(channel)c
Fi(calls)h Fg(c)-5 b(onsumer)31 b Fi(on)g(the)f(\034le)h(descriptor)g
(underlying)227 4948 y Fg(channel)p Fi(;)g(tak)m(es)g(care)g(of)f(rev)m
(ealed)h(b)s(o)s(okk)m(eeping.)41 b(While)31 b Fg(c)-5
b(onsumer)31 b Fi(is)f(running,)i(the)e Fg(channel)p
Fi('s)227 5060 y(rev)m(ealed)i(coun)m(t)f(is)f(incremen)m(ted.)1905
5589 y(14)p eop
%%Page: 15 15
15 14 bop 141 91 a Fi(Mapping)31 b Fj(fd)f Fe(!)g Fj(fd)g
Fi(and)h Fj(channel)f Fe(!)g Fj(channel)p Fi(.)0 228
y Fj(val)47 b(move_fd_to_fdes)g(:)f(fd)h(->)g(fd)g(->)g(fd)141
364 y(move_fd_to_fdes)28 b Fg(fd)j(tar)-5 b(get-fd)p
Fi(:)41 b(if)29 b Fj(fd)f Fi(is)h(a)g(\034le-descriptor)h(not)f(equal)h
(to)f Fg(tar)-5 b(get-fd)p Fi(,)30 b(dup)g(it)e(to)i
Fg(tar)-5 b(get-fd)0 477 y Fi(and)31 b(close)f(it.)41
b(Returns)30 b Fg(tar)-5 b(get-fd)p Fi(.)0 614 y Fj(val)47
b(move_in_channel_to_fdes)f(:)94 727 y(Pervasives.in_channel)g(->)h(fd)
g(->)g(Pervasives.in_channel)0 863 y(val)g(move_out_channel_to_fdes)f
(:)94 976 y(Pervasives.out_channel)g(->)h(fd)g(->)g
(Pervasives.out_channel)227 1114 y(move_{in,out}_channel_to_fdes)30
b Fg(channel)j(tar)-5 b(get-fd)p Fi(:)41 b Fg(channel)31
b Fi(is)f(shifted)h(to)f Fg(tar)-5 b(get-fd)p Fi(,)32
b(b)m(y)227 1227 y(duping)e(its)f(underlying)i(\034le-descriptor)f(if)f
(necessary)-8 b(.)41 b Fg(channel)p Fi('s)29 b(original)h(\034le)g
(descriptor)g(is)f(closed)g(\(if)227 1340 y(it)i(w)m(as)f(di\033eren)m
(t)i(from)f Fg(tar)-5 b(get-fd)p Fi(\).)41 b(Returns)31
b(the)f(c)m(hannel.)43 b(This)30 b(op)s(eration)h(resets)f
Fg(channel)p Fi('s)227 1453 y(rev)m(ealed)i(coun)m(t)f(to)g(1.)141
1777 y(In)h(all)h(cases)g(when)g Fg(fd)f Fi(or)h Fg(channel)g
Fi(is)g(actually)g(shifted,)g(if)g(there)g(is)f(a)h(c)m(hannel)h
(already)f(using)g Fg(tar)-5 b(get-fd)p Fi(,)0 1890 y(it)30
b(is)g(\034rst)h(relo)s(cated)g(to)f(some)h(other)g(\034le)g
(descriptor.)0 2154 y Fk(3.2.6)103 b(Unix)34 b(I/O)0
2349 y Fi(The)29 b(9)f(next)g(pro)s(cedures)g(pro)m(vide)h(the)g
(functionalit)m(y)g(of)f(C's)g Fj(dup\(\))g Fi(and)g
Fj(dup2\(\))p Fi(.)40 b(The)28 b(X_of_dup_Y)h(ones)0
2462 y(con)m(v)m(ert)j(an)m(y)f(fd/c)m(hannel)h(to)e(an)m(y)h(other)g
(kind,)f(and)h(X_of_dup_X)g(is)f(named)h(dup_X.)0 2598
y Fj(val)47 b(dup_fd)g(:)g(?newfd:fd)f(->)h(fd)g(->)g(fd)0
2735 y(val)g(fdes_of_dup_in)g(:)g(?newfd:fd)f(->)h
(Pervasives.in_channel)g(->)g(fd)0 2871 y(val)g(fdes_of_dup_out)g(:)f
(?newfd:fd)h(->)g(Pervasives.out_channel)g(->)g(fd)0
3008 y(val)g(in_channel_of_dup_fd)f(:)h(?newfd:fd)g(->)g(fd)g(->)g
(Pervasives.in_channel)0 3144 y(val)g(dup_in)g(:)g(?newfd:fd)f(->)h
(Pervasives.in_channel)g(->)g(Pervasives.in_channel)0
3281 y(val)g(in_channel_of_dup_out)f(:)94 3394 y(?newfd:fd)h(->)g
(Pervasives.out_channel)f(->)h(Pervasives.in_channel)0
3530 y(val)g(out_channel_of_dup_fd)f(:)94 3643 y(?newfd:fd)h(->)g(fd)g
(->)g(Pervasives.out_channel)0 3780 y(val)g(out_channel_of_dup_in)f(:)
94 3893 y(?newfd:fd)h(->)g(Pervasives.in_channel)f(->)h
(Pervasives.out_channel)0 4029 y(val)g(dup_out)g(:)94
4142 y(?newfd:fd)g(->)g(Pervasives.out_channel)f(->)h
(Pervasives.out_channel)227 4280 y Fi(These)30 b(pro)s(cedures)f(use)g
(the)g(Unix)g Fj(dup\(\))g Fi(syscall)f(to)h(replicate)i(their)e(fd/c)m
(hannel)i(last)e(argumen)m(t.)42 b(If)28 b(a)227 4393
y Fj(newfd)i Fi(\034le)h(descriptor)g(is)f(giv)m(en,)h(it)f(is)g(used)g
(as)g(the)g(target)h(of)f(the)h(dup)f(op)s(eration,)i(i.e.,)e(the)h(op)
s(eration)227 4506 y(is)f(a)h Fj(dup2\(\))p Fi(.)40 b(In)30
b(this)g(case,)g(pro)s(cedures)h(that)g(return)h(a)e(c)m(hannel)i
(\(suc)m(h)f(as)f Fj(dup_in)p Fi(\))g(will)h(return)g(one)227
4619 y(with)g(the)g(rev)m(ealed)g(coun)m(t)h(set)e(to)h(one.)41
b(F)-8 b(or)31 b(example,)g Fj(dup_in)47 b(\003newfd:5)f(stdin)30
b Fi(pro)s(duces)h(a)f(new)227 4732 y(c)m(hannel)h(with)f(underlying)g
(\034le)g(descriptor)g(5,)g(whose)g(rev)m(ealed)g(coun)m(t)h(is)d(1.)41
b(If)28 b Fj(newfd)h Fi(is)g(not)g(sp)s(eci\034ed,)227
4844 y(then)i(the)g(op)s(erating)g(system)f(c)m(ho)s(oses)g(the)h
(\034le)g(descriptor,)g(and)g(an)m(y)g(returned)g(c)m(hannel)h(is)e
(mark)m(ed)i(as)227 4957 y(unrev)m(ealed.)227 5070 y(If)e(the)g
Fj(newfd)g Fi(target)i(is)e(giv)m(en,)h(and)f(some)h(c)m(hannel)h(is)e
(already)h(using)f(that)h(\034le)g(descriptor,)g(the)227
5183 y(c)m(hannel)h(is)e(\034rst)h(quietly)f(shifted)g(\(with)h
(another)h Fj(dup)p Fi(\))e(to)g(some)h(other)g(\034le)g(descriptor)g
(\(zeroing)h(its)227 5296 y(rev)m(ealed)g(coun)m(t\).)1905
5589 y(15)p eop
%%Page: 16 16
16 15 bop 227 91 a Fi(Since)31 b(Caml)g(do)s(esn't)g(pro)m(vide)g
(read/write)h(c)m(hannels,)g Fj({in,out}_channel_of_dup_in)d
Fi(can)i(b)s(e)227 204 y(useful)f(for)h(getting)g(an)f(output)i(v)m
(ersion)f(of)f(an)g(input)h(c)m(hannel,)h(or)f Fg(vic)-5
b(e)34 b(versa)p Fi(.)41 b(F)-8 b(or)31 b(example,)g(if)f
Fj(p)g Fi(is)227 317 y(an)h(input)g(c)m(hannel)h(op)s(en)e(on)h(a)f(tt)
m(y)-8 b(,)31 b(and)g(w)m(e)g(w)m(ould)h(lik)m(e)f(to)f(do)h(output)g
(to)g(that)f(tt)m(y)-8 b(,)32 b(w)m(e)f(can)g(simply)227
430 y(use)f Fj(out_channel_of_dup_in)47 b(p)30 b Fi(to)h(pro)s(duce)g
(an)f(equiv)-5 b(alen)m(t)32 b(output)f(c)m(hannel)h(for)e(the)h(tt)m
(y)-8 b(.)227 543 y(Ho)m(w)m(ev)m(er,)32 b(y)m(ou)f(are)g(resp)s
(onsible)f(for)h(the)f(op)s(en)h(mo)s(des)f(of)g(the)h(c)m(hannel)h
(when)f(doing)g(so.)0 749 y Fj(type)94 b(seek_command)47
b(=)g(Unix.seek_command)f(=)94 862 y(|)h(SEEK_SET)227
998 y Fi(p)s(ositions)30 b(are)h(relativ)m(e)h(to)e(the)h(b)s(eginning)
g(of)f(the)h(\034le)94 1181 y Fj(|)47 b(SEEK_CUR)227
1317 y Fi(p)s(ositions)30 b(are)h(relativ)m(e)h(to)e(the)h(curren)m(t)h
(p)s(osition)94 1500 y Fj(|)47 b(SEEK_END)227 1636 y
Fi(p)s(ositions)30 b(are)h(relativ)m(e)h(to)e(the)h(end)g(of)f(the)g
(\034le)227 1819 y(P)m(ositioning)j(mo)s(des)d(for)g
Fj(seek_...)0 2025 y(val)47 b(seek_fd)g(:)g(?whence:seek_command)f(->)h
(fd)g(->)g(int)g(->)g(int)0 2162 y(val)g(seek_in)g(:)94
2275 y(?whence:seek_command)f(->)h(Pervasives.in_channel)g(->)g(int)g
(->)g(int)0 2411 y(val)g(seek_out)g(:)94 2524 y(?whence:seek_command)f
(->)h(Pervasives.out_channel)g(->)g(int)g(->)g(int)227
2660 y Fi(Rep)s(osition)31 b(the)f(I/O)g(cursor)h(for)f(a)h(\034le)f
(descriptor)i(or)e(c)m(hannel.)42 b(This)31 b(giv)m(es)f(the)h
Fj(Unix.lseek)227 2773 y Fi(functionalit)m(y)h(applied)f(to)f(fd's)f
(and)i(c)m(hannels.)41 b(Not)30 b(all)h(suc)m(h)f(v)-5
b(alues)30 b(are)g(seek)-5 b(able;)31 b(this)f(is)f(dep)s(enden)m(t)227
2886 y(on)i(the)g(OS)f(implemen)m(tation.)44 b(The)30
b(return)i(v)-5 b(alue)30 b(is)g(the)h(resulting)g(p)s(osition)g(of)f
(the)g(I/O)g(cursor)h(in)227 2999 y(the)g(I/O)f(stream.)0
3205 y Fj(val)47 b(tell_fd)g(:)g(fd)g(->)g(int)0 3342
y(val)g(tell_in)g(:)g(Pervasives.in_channel)f(->)h(int)0
3478 y(val)g(tell_out)g(:)g(Pervasives.out_channel)f(->)h(int)227
3614 y Fi(Return)31 b(the)g(p)s(osition)f(of)g(the)h(I/O)f(cursor)h(in)
f(the)h(the)g(I/O)f(stream.)41 b(Not)30 b(all)h(\034le)f(descriptors)h
(or)227 3727 y(c)m(hannels)h(supp)s(ort)e(cursor-rep)s(orting;)i(this)f
(is)f(dep)s(enden)m(t)i(on)e(the)h(OS)f(implemen)m(tation.)0
3934 y Fj(type)94 b(file_perm)47 b(=)g(int)0 4070 y(type)94
b(open_flag)47 b(=)g(Unix.open_flag)f(=)94 4183 y(|)h(O_RDONLY)227
4319 y Fi(Op)s(en)31 b(for)f(reading)94 4502 y Fj(|)47
b(O_WRONLY)227 4638 y Fi(Op)s(en)31 b(for)f(writing)94
4821 y Fj(|)47 b(O_RDWR)227 4957 y Fi(Op)s(en)31 b(for)f(reading)h(and)
g(writing)94 5140 y Fj(|)47 b(O_NONBLOCK)227 5276 y Fi(Op)s(en)31
b(in)f(non-blo)s(c)m(king)i(mo)s(de)1905 5589 y(16)p
eop
%%Page: 17 17
17 16 bop 94 91 a Fj(|)47 b(O_APPEND)227 229 y Fi(Op)s(en)31
b(for)f(app)s(end)94 417 y Fj(|)47 b(O_CREAT)227 555
y Fi(Create)32 b(if)d(nonexisten)m(t)94 742 y Fj(|)47
b(O_TRUNC)227 880 y Fi(T)-8 b(runcate)32 b(to)f(0)f(length)i(if)d
(existing)94 1068 y Fj(|)47 b(O_EXCL)227 1205 y Fi(F)-8
b(ail)31 b(if)f(existing)94 1393 y Fj(|)47 b(O_NOCTTY)227
1531 y Fi(Don't)31 b(mak)m(e)g(this)f(dev)h(a)f(con)m(trolling)j(tt)m
(y)94 1719 y Fj(|)47 b(O_DSYNC)227 1856 y Fi(W)-8 b(rites)31
b(complete)h(as)e(`Sync)m(hronised)i(I/O)e(data)h(in)m(tegrit)m(y)h
(completion')94 2044 y Fj(|)47 b(O_SYNC)227 2182 y Fi(W)-8
b(rites)31 b(complete)h(as)e(`Sync)m(hronised)i(I/O)e(\034le)h(in)m
(tegrit)m(y)h(completion')94 2369 y Fj(|)47 b(O_RSYNC)227
2507 y Fi(Reads)30 b(complete)i(as)e(writes)h(\(dep)s(ending)g(on)g
(O_SYNC/O_DSYNC\))227 2695 y(The)g(\035ags)g(to)f Fj(open_file_...)p
Fi(.)0 2906 y Fj(val)47 b(open_file_out)g(:)94 3019 y(?perms:file_perm)
g(->)94 3132 y(string)g(->)g(open_flag)f(list)h(->)g
(Pervasives.out_channel)0 3269 y(val)g(open_file_in)g(:)94
3381 y(?perms:file_perm)g(->)94 3494 y(string)g(->)g(open_flag)f(list)h
(->)g(Pervasives.in_channel)227 3632 y(open_file_...)40
b Fg(\003p)-5 b(erms)33 b(fname)f(\035ags)p Fi(:)41 b
Fg(p)-5 b(erms)31 b Fi(defaults)f(to)h Fj(0o666)p Fi(.)40
b Fg(\035ags)31 b Fi(is)f(a)g(list)g(of)g Fj(open_flag)p
Fi(s.)227 3745 y(Y)-8 b(ou)31 b(m)m(ust)g(use)f(exactly)h(one)f(of)g
(the)h Fj(O_RDONLY)p Fi(,)f Fj(O_WRONLY)p Fi(,)g(or)h
Fj(O_RDWR)f Fi(\035ags.)227 3858 y(Caml)h(do)g(not)g(ha)m(v)m(e)g
(input/output)h(c)m(hannels,)g(so)e(it's)g(one)h(or)g(the)f(other.)42
b(\(Y)-8 b(ou)30 b(can)h(hac)m(k)227 3971 y(sim)m(ultaneous)f(I/O)f(on)
g(a)g(\034le)g(b)m(y)g(op)s(ening)g(it)g(R/W,)f(taking)h(the)g(result)g
(input)g(c)m(hannel,)i(and)e(duping)h(it)227 4084 y(to)h(an)f(output)i
(c)m(hannel)g(with)e Fj(out_channel_of_dup_in)p Fi(.\))0
4295 y Fj(val)47 b(open_fdes)g(:)94 4408 y(?perms:file_perm)g(->)f
(string)h(->)g(open_flag)g(list)g(->)g(fd)227 4546 y
Fi(Same)31 b(as)f Fj(open_file_{in,out})p Fi(,)g(but)h(returns)g(a)f
(\034le)h(descriptor.)0 4757 y Fj(val)47 b(open_input_file)g(:)94
4870 y(?flags:open_flag)g(list)f(->)h(string)g(->)g
(Pervasives.in_channel)0 5006 y(val)g(open_output_file)g(:)94
5119 y(?flags:open_flag)g(list)f(->)94 5232 y(?perms:file_perm)h(->)f
(string)h(->)g(Pervasives.out_channel)1905 5589 y Fi(17)p
eop
%%Page: 18 18
18 17 bop 227 91 a Fi(These)31 b(are)g(equiv)-5 b(alen)m(t)31
b(to)g Fj(open_file_...)p Fi(,)e(after)i(adding)g(the)g(read/write)h
(mo)s(de)e(to)h(the)g Fj(flags)227 204 y Fi(argumen)m(t)i(to)d
Fj(O_RDONLY)g Fi(or)g Fj(O_WRONLY)p Fi(,)h(resp)s(ectiv)m(ely)f(\(so)g
(don't)h(use)g(them\).)41 b Fj(Flags)30 b Fi(defaults)h(to)f([])227
317 y(for)g Fj(open_input_file)p Fi(,)g(and)h Fj([O_CREAT;)47
b(O_TRUNC])30 b Fi(for)g Fj(open_output_file)p Fi(.)40
b(These)31 b(pro)s(cedures)227 430 y(are)g(for)f(compatibilit)m(y)j
(with)d(Scsh,)h(and)g(the)f(defaults)h(mak)m(e)g(the)g(pro)s(cedures)g
(bac)m(kw)m(ards-compatible)227 543 y(with)g(their)g(Sc)m(heme)h
(standard)f(unary)g(de\034nitions.)0 750 y Fj(val)47
b(openfile)g(:)94 863 y(string)g(->)g(open_flag)f(list)h(->)g
(file_perm)g(->)g(Unix.file_descr)227 1000 y Fi(F)-8
b(or)31 b(Cash)g(prop)s(er)f(op)s(eration,)i(y)m(ou)f(m)m(ust)g(use)f
(this)g(op)s(en\034le)h(in)g(place)g(of)f(the)g(Unix)g(one;)h(ours)f
(calls)227 1113 y Fj(Unix.set_close_on_exec)g Fi(on)g(the)h(returned)h
(\034le_descr,)f(to)g(mak)m(e)g(all)f(the)h(c)m(hannel-mapping)227
1226 y(mac)m(hinery)h(w)m(ork)f(smo)s(othly)-8 b(.)141
1433 y(The)31 b(6)f(pro)s(cedures)h(b)s(elo)m(w)g(are)g(for)f
(compatibilit)m(y)j(with)e(Sc)m(heme.)0 1570 y Fj(val)47
b(with_input_from_file)f(:)h(string)g(->)g(\(unit)g(->)g('a\))g(->)g
('a)0 1706 y(val)g(with_output_to_file)f(:)h(string)g(->)g(\(unit)g(->)
g('a\))g(->)g('a)0 1843 y(val)g(with_errors_to_file)f(:)h(string)g(->)g
(\(unit)g(->)g('a\))g(->)g('a)227 1979 y Fi(The)31 b(\034le)g(named)g
(b)m(y)g(the)f(\034rst)h(argumen)m(t)h(is)e(op)s(ened)h(for)f(input)h
(or)f(output,)i(an)e(input)h(or)g(output)227 2092 y(c)m(hannel)h
(connected)g(to)f(it)f(is)g(made)h(in)m(to)g Fj(stdin)p
Fi(,)f Fj(stdout)g Fi(or)h Fj(stderr)f Fi(\(see)g Fj(with_std...)40
b Fi(in)31 b([3.2.2]\))227 2205 y(and)g(the)g(th)m(unk)g(is)f(called.)
41 b(When)31 b(it)f(returns,)h(the)g(c)m(hannel)h(is)e(closed)g(and)h
(the)g(previous)f(default)h(is)227 2318 y(restored.)41
b(The)31 b(v)-5 b(alue)31 b(yielded)g(b)m(y)f(the)h(th)m(unk)g(is)f
(returned.)227 2431 y(Note:)41 b(the)31 b(op)s(en)f(functions)h(used)f
(are)h Fj(Pervasives.open_{in,out})p Fi(.)40 b(If)29
b(y)m(ou)i(need)227 2544 y Fj(open_file_{in,out})p Fi(,)f(it's)g(easy)g
(enough)i(to)e(co)s(ok)g(up)h(y)m(our)f(o)m(wn)i(wrapp)s(er)f(with)g
Fj(unwind_protect)227 2657 y Fi(and)g Fj(with_std...)0
2864 y(val)47 b(call_with_input_file)f(:)h(string)g(->)g
(\(Pervasives.in_channel)g(->)g('a\))f(->)h('a)0 3001
y(val)g(call_with_output_file)f(:)h(string)g(->)g
(\(Pervasives.out_channel)g(->)g('a\))f(->)h('a)0 3137
y(val)g(call_with_fdes_fn)f(:)94 3250 y(?perms:file_perm)h(->)94
3363 y(string)g(->)g(open_flag)f(list)h(->)g(\(fd)g(->)g('a\))g(->)g
('a)227 3499 y(call_with_...)40 b Fg(..)h(\034lename)33
b(..)40 b(pr)-5 b(o)g(c)32 b Fi(call)f Fg(pr)-5 b(o)g(c)31
b Fi(with)g(a)g(c)m(hannel)h(or)e(fd)g(op)s(ened)h(on)g
Fg(\034lename)p Fi(.)40 b(This)227 3612 y(c)m(hannel)32
b(or)f(fd)f(is)g(closed)g(b)s(efore)h(returning)g(the)g(v)-5
b(alue)31 b(yielded)f(b)m(y)h Fg(pr)-5 b(o)g(c)p Fi(.)42
b(The)31 b(op)s(en)f(pro)s(cedures)h(used)227 3725 y(are)g
Fj(Pervasives.open_{in,out})f Fi(and)g Fj(open_fdes)p
Fi([3.2.6].)0 4046 y Fj(type)94 b(fdes_flags)47 b(=)94
4158 y(|)g(FD_CLOEXEC)0 4295 y(val)g(fdes_flags_fd)g(:)g(fd)f(->)h
(fdes_flags)g(list)0 4432 y(val)g(fdes_flags_in)g(:)g
(Pervasives.in_channel)f(->)h(fdes_flags)g(list)0 4568
y(val)g(fdes_flags_out)g(:)g(Pervasives.out_channel)f(->)h(fdes_flags)g
(list)0 4705 y(val)g(set_fdes_flags_fd)f(:)h(fd)g(->)g(fdes_flags)g
(list)g(->)g(unit)0 4841 y(val)g(set_fdes_flags_in)f(:)h
(Pervasives.in_channel)g(->)g(fdes_flags)g(list)g(->)f(unit)0
4978 y(val)h(set_fdes_flags_out)f(:)94 5091 y(Pervasives.out_channel)g
(->)h(fdes_flags)g(list)g(->)g(unit)227 5227 y Fi(These)29
b(pro)s(cedures)h(allo)m(w)g(reading)g(and)f(writing)h(of)f(an)g(op)s
(en)g(\034le's)g(\035ags.)40 b(The)29 b(only)g(suc)m(h)g(\035ag)h
(de\034ned)227 5340 y(b)m(y)h(P)m(osix)g(is)f Fj(FD_CLOEXEC)p
Fi(;)g(y)m(our)h(Unix)e(implemen)m(tation)34 b(ma)m(y)d(pro)m(vide)g
(others.)1905 5589 y(18)p eop
%%Page: 19 19
19 18 bop 227 91 a Fi(These)31 b(pro)s(cedures)g(should)g(not)f(b)s(e)g
(particularly)i(useful)e(to)h(the)g(programmer,)h(as)e(the)h(Cash)f
(run)m(time)227 204 y(already)h(pro)m(vides)g(automatic)h(con)m(trol)g
(of)e(the)h(close-on-exec)g(prop)s(ert)m(y)-8 b(,)32
b(as)e(long)h(as)f(y)m(ou)g(don't)h(use)227 317 y Fj(Unix.open_file)f
Fi(without)i(using)e Fj(Unix.set_close_on_exec)g Fi(immediately)i(\()p
Fj(openfile)p Fi([3.2.6])227 430 y(do)s(es)e(it)h(for)f(y)m(ou\))h
(\025)f(this)g(is)g(the)h(second)g(incompatibilit)m(y)h(with)f
Fj(Unix)f Fi(\(the)h(\034rst)g(b)s(eing)227 543 y Fj
(Unix.{in,out}_channel_of_descr)p Fi(\).)40 b(Unrev)m(ealed)32
b(c)m(hannels)f(alw)m(a)m(ys)g(ha)m(v)m(e)h(their)f(\034le)g
(descriptors)227 656 y(mark)m(ed)h(close-on-exec,)f(as)f(they)h(can)f
(b)s(e)g(closed)h(when)g(the)g(Cash)f(pro)s(cess)g(execs)g(a)h(new)f
(program.)227 769 y(Whenev)m(er)i(the)e(user)h(rev)m(eals)f(or)h(unrev)
m(eals)g(a)g(c)m(hannel's)g(\034le)g(descriptor,)h(the)e(run)m(time)i
(automatically)227 882 y(sets)e(or)h(clears)f(the)h(\035ag)g(for)f(the)
h(programmer.)42 b(Programmers)32 b(that)f(manipulate)h(this)e(\035ag)h
(should)g(b)s(e)227 995 y(a)m(w)m(are)h(of)e(these)h(extra,)g
(automatic)g(op)s(erations.)0 1206 y Fj(val)47 b(fdes_status_fd)g(:)g
(fd)f(->)h(open_flag)g(list)0 1342 y(val)g(fdes_status_in)g(:)g
(Pervasives.in_channel)f(->)h(open_flag)g(list)0 1479
y(val)g(fdes_status_out)g(:)f(Pervasives.out_channel)h(->)g(open_flag)g
(list)0 1615 y(val)g(set_fdes_status_fd)f(:)h(fd)g(->)g(open_flag)g
(list)g(->)g(unit)0 1752 y(val)g(set_fdes_status_in)f(:)h
(Pervasives.in_channel)g(->)g(open_flag)g(list)g(->)f(unit)0
1889 y(val)h(set_fdes_status_out)f(:)94 2001 y(Pervasives.out_channel)g
(->)h(open_flag)g(list)g(->)g(unit)227 2139 y Fi(These)31
b(pro)s(cedures)g(allo)m(w)g(reading)h(and)f(writing)g(of)f(an)h(op)s
(en)f(\034le's)h(status)f(\035ags)g(\(see)g(table)h(b)s(elo)m(w\).)227
2252 y(Note)g(that)g(this)f(\034le-descriptor)i(state)e(is)g(shared)h
(b)s(et)m(w)m(een)h(\034le)f(descriptors)g(created)g(b)m(y)g
Fj(dup_..)40 b Fi(\(and)227 2365 y Fj(fork...)p Fi(\))g(\026)29
b(if)f(y)m(ou)i(create)g(c)m(hannel)g Fg(b)f Fi(b)m(y)g(applying)h
Fj(dup_...)40 b Fi(to)29 b(c)m(hannel)h Fg(a)p Fi(,)f(and)h(c)m(hange)g
Fg(b)p Fi('s)f(status)227 2478 y(\035ags,)i(y)m(ou)g(will)f(also)h(ha)m
(v)m(e)g(c)m(hanged)h Fg(a)p Fi('s)e(status)g(\035ags.)141
2689 y(Status)h(\035ags)f(for)g Fj(open_file_...)p Fi(,)g
Fj(fdes_status_...)40 b Fi(and)31 b Fj(set_fdes_status_...)p
Fi(.)752 2925 y Fj(Allowed)46 b(operations)658 b(Status)47
b(flag)752 3038 y
(--------------------------------------------------------------)0
3151 y(Open+Get+Set)188 b(These)46 b(flags)h(can)g(be)g(used)423
b(O_APPEND)752 3264 y(in)47 b(open_file_...,)704 b(O_NONBLOCK)752
3377 y(fdes_status_...)46 b(and)611 b(O_SYNC)470 b(\(...SYNC)46
b(aren't)752 3490 y(set_fdes_status_...)g(calls)329 b(O_DSYNC)423
b(impl.)46 b(in)h(3.04\))2255 3603 y(O_RSYNC)752 3716
y(--------------------------------------------------------------)0
3829 y(Open+Get)376 b(These)46 b(flags)h(can)g(be)g(used)423
b(O_RDONLY)752 3942 y(in)47 b(open_file_...)f(and)564
b(O_WRONLY)752 4054 y(fdes_status_...)46 b(calls,)h(but)g(are)94
b(O_RDWR)752 4167 y(ignored)46 b(by)h(set_fdes_status_...)752
4280 y(--------------------------------------------------------------)0
4393 y(Open)564 b(These)46 b(flags)h(are)g(only)g(relevant)141
b(O_CREAT)752 4506 y(for)47 b(open_file_...)f(calls;)h(they)141
b(O_EXCL)752 4619 y(are)47 b(ignored)f(by)h(fdes_status_...)94
b(O_NOCTTY)329 b(\(not)46 b(impl.)h(in)g(3.04\))752 4732
y(and)g(set_fdes_status_...)f(calls.)94 b(O_TRUNC)0 4968
y(val)47 b(pipe)g(:)g(unit)g(->)g(Pervasives.in_channel)f(*)h
(Pervasives.out_channel)227 5106 y Fi(Returns)31 b(t)m(w)m(o)g(c)m
(hannels,)h(the)f(read)g(and)f(write)h(end-p)s(oin)m(ts)h(of)e(a)g
(Unix)g(pip)s(e.)0 5317 y Fj(val)47 b(fold_input)g(:)g(\('a)g(->)f('b)h
(->)g('a\))g(->)g('a)g(->)g(\('c)g(->)g('b\))g(->)g('c)g(->)g('a)1905
5589 y Fi(19)p eop
%%Page: 20 20
20 19 bop 227 91 a Fj(fold_input)30 b Fg(f)i(init)f(r)-5
b(e)g(ader)35 b(sour)-5 b(c)g(e)32 b Fi(is)e(a)g(folder)h(in)f(the)h
(sort)f(of)g(List.fold_left,)i(but)f(instead)f(of)g(folding)227
204 y(a)h('a)f(list,)g(y)m(ou)h(giv)m(e)g(it)f(a)h Fg(r)-5
b(e)g(ader)32 b Fi(function)f(\(suc)m(h)g(as)f Fj(read_line)p
Fi(\),)g(and)h(a)f Fg(sour)-5 b(c)g(e)33 b Fi(\(as)d
Fj(stdin)p Fi(\).)40 b(The)227 317 y(elemen)m(ts)32 b(to)e(fold)h(are)f
(computed)i(b)m(y)f(applying)g Fg(r)-5 b(e)g(ad_line)32
b Fi(to)e(the)h Fg(sour)-5 b(c)g(e)p Fi(.)42 b(F)-8 b(or)31
b(directories,)h(see)227 430 y Fj(fold_directory)p Fi([3.4])f(and)g
Fj(directory_files)p Fi([3.4].)141 753 y(Note)38 b(ab)s(out)h(the)f
Fj(read_string...)64 b Fi(pro)s(cedures:)56 b(the)39
b(ones)f(with)h(a)f Fj(?src:fd)g Fi(argumen)m(t)i(\(default)f(to)0
866 y(fd)46 b(0,)52 b(and\))47 b(directly)g(use)g Fj(Unix.read)p
Fi(.)90 b(But)47 b(those)g(with)g(a)g Fj(?src:in_channel)f
Fi(argumen)m(t)j(\(default)f(to)0 979 y Fj(stdin)p Fi(,)g(and\))d(use)g
Fj(Pervasives.input)p Fi(;)52 b(this)44 b(is)h(to)f(p)s(ermit)i
(seamless)e(mixing)h(of)g(calls)g(to)f(these)h(pro)s(ce-)0
1092 y(dures)38 b(and)g(P)m(erv)-5 b(asiv)m(es)39 b(I/O)e(op)s
(erations.)64 b(F)-8 b(or)38 b(large)h(blo)s(c)m(ks)e(of)h(data,)i(it)e
(migh)m(t)h(b)s(e)e(more)i(e\036cien)m(t)g(to)f(use)0
1205 y Fj(read_string)47 b(\003src:\(fd_of_in_channel)f(chan\))p
Fi(,)g(since)d(there's)g(no)g(bu\033ering,)k(but)c(mixing)g(this)g
(with)0 1318 y(P)m(erv)-5 b(asiv)m(es)34 b(ma)m(y)f(require)h(sync)m
(hronization)h(\()p Fj(seek_in)p Fi(\))e(whic)m(h)h(is)e(to)h(y)m(our)h
(c)m(harge.)50 b(Similar)34 b(considerations)0 1431 y(apply)d(to)f
(write_string)p Fd(:)15 b(:)g(:)0 1567 y Fj(type)94 b(error_packet)47
b(=)94 1680 y(|)g(Sys__error)g(of)g(string)94 1793 y(|)g(Unix__error)g
(of)g(\(Unix.error)f(*)h(string)g(*)g(string\))0 1930
y(exception)g(String_io_error)94 2042 y(of)g(\(error_packet)g(*)g
(string)f(*)h(string)g(*)g(int)g(*)g(int)g(*)g(int\))227
2180 y Fi(This)31 b(is)f(the)g(exception)i(raised)e(b)m(y)h(the)g
(read_string)p Fd(:)15 b(:)g(:)r Fi(/write_string)p Fd(:)g(:)g(:)33
b Fi(pro)s(cedures.)41 b(It)30 b(con)m(tains)227 2293
y(the)h(original)g(error_pac)m(k)m(et,)i(the)e(name)g(of)f(the)h(pro)s
(cedure,)g(the)g(string)g(the)f(op)s(eration)i(has)e(b)s(een)227
2406 y(attempted)i(on,)e(the)g(start)g(index,)g(the)g(index)h(upto)f
(whic)m(h)h(data)f(has)g(already)g(b)s(een)g(read/written,)i(the)227
2519 y(end_)f(index.)0 2729 y Fj(val)47 b(read_string)g(:)g(?src:fd)f
(->)h(int)g(->)g(string)0 2865 y(val)g(read_string_in)g(:)g
(?src:Pervasives.in_channel)f(->)h(int)g(->)g(string)0
3002 y(val)g(read_string_bang)g(:)94 3115 y(?src:fd)g(->)g(?start:int)f
(->)h(?end_:int)g(->)g(string)g(->)g(int)0 3251 y(val)g
(read_string_bang_in)f(:)94 3364 y(?src:Pervasives.in_channel)g(->)h
(?start:int)g(->)g(?end_:int)g(->)g(string)f(->)h(int)227
3502 y Fi(These)31 b(calls)f(read)h(exactly)g(as)f(m)m(uc)m(h)i(data)f
(as)f(y)m(ou)g(requested,)h(unless)f(there)h(is)f(not)h(enough)g(data)
227 3615 y(\(eof)7 b(\).)40 b Fj(read_string_bang...)f
Fg(str)29 b Fi(reads)h(the)f(data)h(in)m(to)g(string)g
Fg(str)f Fi(at)g(the)h(indices)f(in)h(the)f(half-op)s(en)227
3728 y(in)m(terv)-5 b(al)32 b([)p Fg(start)p Fi(,)p Fg(end_)p
Fi(\);)f(the)g(default)f(in)m(terv)-5 b(al)32 b(is)e(the)g(whole)i
(string:)40 b Fg(start)31 b Fj(=)46 b(0)31 b Fi(and)f
Fg(end_)h Fj(=)227 3841 y(String.length)f Fg(str)p Fi(.)40
b(They)31 b(will)g(p)s(ersisten)m(tly)f(retry)h(on)f(partial)i(reads)e
(and)h(when)g(in)m(terrupted)i(un)m(til)227 3953 y(\(1\))e(error,)g
(\(2\))g(eof,)f(or)g(\(3\))h(the)g(input)g(request)f(is)g(completely)i
(satis\034ed.)40 b(P)m(artial)33 b(reads)d(can)h(o)s(ccur)227
4066 y(when)g(reading)h(from)e(an)h(in)m(termitten)m(t)i(source,)e(suc)
m(h)g(as)f(a)g(pip)s(e)g(or)h(tt)m(y)-8 b(.)227 4179
y Fj(read_string{,in})30 b Fi(returns)h(the)g(string)f(read;)h
Fj(read_string_bang...)40 b Fi(returns)31 b(the)g(n)m(um)m(b)s(er)h(of)
227 4292 y(c)m(haracters)g(read.)41 b(They)31 b(b)s(oth)f(raise)h
Fj(End_of_file)f Fi(at)g(eof.)40 b(A)30 b(request)h(to)f(read)h(zero)g
(b)m(ytes)f(returns)227 4405 y(immediately)-8 b(,)33
b(with)e(no)f(eof)g(c)m(hec)m(k.)227 4518 y(The)h(v)-5
b(alues)30 b(of)g Fj(start)g Fi(and)h Fj(end_)f Fi(m)m(ust)h(sp)s
(ecify)e(a)i(w)m(ell-de\034ned)h(in)m(terv)-5 b(al)32
b(in)e Fj(str)p Fi(,)h(i.e.,)f Fj(0)47 b(<=)g(start)227
4631 y(<=)g(end_)g(<=)g(String.length)g(str)p Fi(.)227
4744 y(An)m(y)31 b(partially-read)h(data)f(is)e(included)j(in)f(the)f
(error)h(exception)h(pac)m(k)m(et.)41 b(Error)32 b(returns)f(on)227
4857 y(non-blo)s(c)m(king)h(input)f(are)g(considered)g(an)g(error.)0
5067 y Fj(val)47 b(read_string_partial)f(:)h(?src:fd)g(->)g(int)g(->)g
(string)0 5203 y(val)g(read_string_partial_in)f(:)h
(?src:Pervasives.in_channel)g(->)g(int)g(->)f(string)0
5340 y(val)h(read_string_bang_partial)f(:)1905 5589 y
Fi(20)p eop
%%Page: 21 21
21 20 bop 94 91 a Fj(?src:fd)47 b(->)g(?start:int)f(->)h(?end_:int)g
(->)g(string)g(->)g(int)0 228 y(val)g(read_string_bang_partial_in)f(:)
94 341 y(?src:Pervasives.in_channel)g(->)h(?start:int)g(->)g(?end_:int)
g(->)g(string)f(->)h(int)227 472 y Fi(These)31 b(are)f(atomic)i(b)s
(est-e\033ort/forw)m(ard-progress)g(calls.)40 b(Best)31
b(e\033ort:)40 b(they)30 b(ma)m(y)h(read)g(less)f(than)g(y)m(ou)227
585 y(request)h(if)f(there)h(is)f(a)g(lesser)g(amoun)m(t)i(of)e(data)h
(immediately)h(a)m(v)-5 b(ailable)31 b(\()p Fg(e.g.)p
Fi(,)g(b)s(ecause)f(y)m(ou)h(are)227 698 y(reading)h(from)e(a)g(pip)s
(e)h(or)f(a)h(tt)m(y\).)41 b(F)-8 b(orw)m(ard)32 b(progress:)41
b(if)30 b(no)g(data)h(is)f(immediately)i(a)m(v)-5 b(ailable)31
b(\()p Fg(e.g.)p Fi(,)227 810 y(empt)m(y)g(pip)s(e\),)g(they)g(will)f
(blo)s(c)m(k.)41 b(Therefore,)31 b(if)f(y)m(ou)h(request)g(an)f
Fg(n)i Fd(>)g Fg(0)e Fi(b)m(yte)h(read,)g(while)g(y)m(ou)g(ma)m(y)227
923 y(not)g(get)g(ev)m(erything)g(y)m(ou)g(ask)m(ed)f(for,)h(y)m(ou)f
(will)h(alw)m(a)m(ys)h(get)e(something)i(\(barring)f(eof)7
b(\).)227 1036 y(There)28 b(is)f(one)g(case)g(in)g(whic)m(h)i(the)e
(forw)m(ard-progress)i(guaran)m(tee)g(is)e(cancelled:)40
b(when)28 b(the)f(programmer)227 1149 y(explicitly)k(sets)f(the)h(c)m
(hannel)h(to)e(non-blo)s(c)m(king)i(i/o.)41 b(In)30 b(this)g(case,)g
(if)g(no)h(data)g(is)f(immediately)227 1262 y(a)m(v)-5
b(ailable,)32 b(the)f(pro)s(cedure)g(will)g(not)g(blo)s(c)m(k,)f(but)h
(will)g(immediately)h(return)f(a)f(zero-b)m(yte)i(read.)227
1375 y Fj(read_string_partial{,in})e Fi(reads)g(the)h(data)g(in)m(to)g
(a)g(freshly)f(allo)s(cated)h(string,)g(whic)m(h)g(it)g(returns)227
1488 y(as)f(its)g(v)-5 b(alue.)41 b Fj(read_string_bang_partial...)f
Fg(str)30 b Fi(reads)g(the)h(data)g(in)m(to)g(string)g
Fg(str)f Fi(at)g(the)h(indices)227 1601 y(in)g(the)f(half-op)s(en)h(in)
m(terv)-5 b(al)32 b([)p Fj(start)p Fi(,)p Fj(end_)p Fi(\);)e(the)h
(default)g(in)m(terv)-5 b(al)31 b(is)f(the)h(whole)g(string:)41
b Fj(start)47 b(=)g(0)227 1714 y Fi(and)31 b Fj(end_)47
b(=)g(String.length)g(string)p Fi(.)40 b(It)30 b(returns)h(the)f(n)m
(um)m(b)s(er)i(of)e(b)m(ytes)h(read.)227 1827 y(The)g(v)-5
b(alues)30 b(of)g Fj(start)g Fi(and)h Fj(end_)f Fi(m)m(ust)h(sp)s
(ecify)e(a)i(w)m(ell-de\034ned)h(in)m(terv)-5 b(al)32
b(in)e Fj(str)p Fi(,)h(i.e.,)f Fj(0)47 b(<=)g(start)227
1940 y(<=)g(end_)g(<=)g(String.length)g(str)p Fi(.)227
2052 y(A)30 b(request)h(to)f(read)h(zero)g(b)m(ytes)f(returns)h
(immediatedly)-8 b(,)33 b(with)e(no)f(eof)g(c)m(hec)m(k.)227
2165 y(In)g(sum,)h(there)g(are)f(only)h(three)g(w)m(a)m(ys)g(y)m(ou)g
(can)f(get)h(a)f(zero-b)m(yte)i(read:)41 b(\(1\))31 b(y)m(ou)f(request)
h(one,)g(\(2\))f(y)m(ou)227 2278 y(turn)h(on)g(non-blo)s(c)m(king)h
(i/o,)e(or)h(\(3\))g(y)m(ou)f(try)g(to)h(read)g(at)f(eof)g(\(but)h
(then)g(End_of_\034le)h(is)e(raised\).)227 2391 y(These)h(are)g(the)f
(routines)h(to)g(use)f(for)g(non-blo)s(c)m(king)i(input.)41
b(They)31 b(are)f(also)h(useful)f(when)h(y)m(ou)g(wish)f(to)227
2504 y(e\036cien)m(tly)i(pro)s(cess)e(data)h(in)f(large)h(blo)s(c)m
(ks,)g(and)g(y)m(our)f(algorithm)i(is)e(insensitiv)m(e)h(to)g(the)f
(blo)s(c)m(k)h(size)f(of)227 2617 y(an)m(y)h(particular)h(read)f(op)s
(eration.)0 2808 y Fj(val)47 b(write_string)g(:)g(?dst:fd)f(->)h
(?start:int)g(->)g(?end_:int)g(->)g(string)g(->)f(unit)0
2944 y(val)h(write_string_out)g(:)94 3057 y
(?dst:Pervasives.out_channel)f(->)h(?start:int)g(->)g(?end_:int)g(->)g
(string)f(->)h(unit)227 3188 y Fi(These)31 b(pro)s(cedures)g(write)g
(all)g(the)f(data)h(requested.)41 b(If)30 b(the)g(pro)s(cedure)i
(cannot)f(p)s(erform)f(the)h(write)227 3301 y(with)g(a)g(single)f(k)m
(ernel)h(call)g(\(due)g(to)g(in)m(terrupts)g(or)g(partial)g(writes\),)g
(it)g(will)f(p)s(erform)h(m)m(ultiple)h(write)227 3414
y(op)s(erations)f(un)m(til)h(all)e(the)h(data)g(is)f(written)h(or)g(an)
f(error)h(has)f(o)s(ccurred.)42 b(A)30 b(non-blo)s(c)m(king)i(i/o)e
(error)h(is)227 3527 y(considered)h(an)e(error.)41 b(\(Error)32
b(exception)f(pac)m(k)m(ets)h(for)e(this)g(syscall)g(include)h(the)g
(amoun)m(t)h(of)e(data)227 3640 y(partially)h(transferred)g(b)s(efore)g
(the)f(error)h(o)s(ccurred.\))227 3753 y(In)f Fj(write_string...)40
b Fg(str)p Fi(,)30 b(the)h(data)g(written)g(are)g(the)g(c)m(haracters)h
(of)e(the)g(string)h Fg(str)f Fi(in)g(the)227 3866 y(half-op)s(en)h(in)
m(terv)-5 b(al)32 b([)p Fg(start)p Fi(,)p Fg(end_)p Fi(\).)41
b(The)30 b(default)h(in)m(terv)-5 b(al)32 b(is)e(the)g(whole)i(string:)
40 b Fg(start)30 b Fj(=)47 b(0)30 b Fi(and)h Fg(end_)227
3979 y Fj(=)47 b(String.length)g(string)p Fi(.)40 b(The)31
b(v)-5 b(alues)30 b(of)g Fj(start)g Fi(and)h Fj(end_)f
Fi(m)m(ust)h(sp)s(ecify)e(a)i(w)m(ell-de\034ned)227 4091
y(in)m(terv)-5 b(al)32 b(in)e Fj(str)p Fi(,)g(i.e.,)h
Fj(0)47 b(<=)g(start)g(<=)g(end_)g(<=)g(String.length)f(str)p
Fi(.)227 4204 y(A)30 b(zero-b)m(yte)i(write)f(returns)g(immediately)-8
b(,)32 b(with)f(no)g(error.)227 4317 y(Output)h(to)e(bu\033ered)h(c)m
(hannels:)42 b Fj(write-string)p Fi('s)30 b(e\033orts)g(end)h(as)f(so)s
(on)g(as)g(all)g(the)h(data)g(has)f(b)s(een)227 4430
y(placed)i(in)e(the)h(output)g(bu\033er.)41 b(Errors)31
b(and)g(true)f(output)i(ma)m(y)f(not)f(happ)s(en)h(un)m(til)h(a)e
(later)h(time,)g(of)227 4543 y(course.)0 4734 y Fj(val)47
b(write_string_partial)f(:)94 4847 y(?dst:fd)h(->)g(?start:int)f(->)h
(?end_:int)g(->)g(string)g(->)g(int)0 4983 y(val)g
(write_string_partial_out)f(:)94 5096 y(?dst:Pervasives.out_channel)g
(->)h(?start:int)g(->)g(?end_:int)g(->)g(string)f(->)h(int)227
5227 y Fi(These)31 b(routines)g(are)g(the)f(atomic)i(b)s
(est-e\033ort/forw)m(ard-progress)g(analog)f(to)g Fj(write_string...)p
Fi(.)227 5340 y(They)g(return)g(the)g(n)m(um)m(b)s(er)h(of)e(b)m(ytes)g
(written,)i(whic)m(h)f(ma)m(y)g(b)s(e)f(less)g(than)h(y)m(ou)g(ask)m
(ed)f(for.)41 b(P)m(artial)1905 5589 y(21)p eop
%%Page: 22 22
22 21 bop 227 91 a Fi(writes)31 b(can)g(o)s(ccur)f(when)h(\(1\))g(w)m
(e)g(write)g(o\033)f(the)h(ph)m(ysical)g(end)g(of)f(the)g(media,)i
(\(2\))e(the)h(write)g(is)227 204 y(in)m(terrrupted,)i(or)e(\(3\))f
(the)h(\034le)g(descriptor)g(is)f(set)g(for)g(non-blo)s(c)m(king)i
(i/o.)227 317 y(If)e(the)g(\034le)h(descriptor)g(is)f(not)h(set)f(up)h
(for)f(non-blo)s(c)m(king)i(i/o,)f(then)f(a)h(successful)f(return)h
(from)f(these)227 430 y(pro)s(cedures)h(mak)m(es)g(a)f(forw)m(ard)i
(progress)e(guaran)m(tee)j(\026)d(that)h(is,)f(a)g(partial)i(write)f
(to)s(ok)f(place)h(of)f(at)227 543 y(least)h(one)f(b)m(yte:)306
672 y Fe(\017)46 b Fi(If)30 b(w)m(e)h(are)f(at)h(the)g(end)f(of)g(ph)m
(ysical)h(media,)h(and)e(no)h(write)g(tak)m(es)g(place,)g(an)f(error)h
(exception)h(is)397 785 y(raised.)41 b(So)31 b(a)f(return)h(implies)g
(w)m(e)g(wrote)g Fg(something)p Fi(.)306 915 y Fe(\017)46
b Fi(If)29 b(the)i(call)f(is)g(in)m(terrupted)i(after)f(a)f(partial)h
(transfer,)f(it)g(returns)h(immediately)-8 b(.)42 b(But)31
b(if)e(the)i(call)f(is)397 1028 y(in)m(terrupted)j(b)s(efore)d(an)m(y)h
(data)g(transfer,)f(then)h(the)g(write)g(is)f(retried.)227
1157 y(If)g(w)m(e)h(request)f(a)g(zero-b)m(yte)i(write,)f(then)g(the)g
(call)g(immediately)h(returns)e(0.)41 b(If)29 b(the)i(\034le)g
(descriptor)g(is)227 1270 y(set)f(for)h(non-blo)s(c)m(king)g(i/o,)g
(then)g(the)g(call)g(ma)m(y)f(return)i(0)e(if)g(it)g(w)m(as)h(unable)g
(to)g(immediately)h(write)227 1383 y(an)m(ything)g(\()p
Fg(e.g.)p Fi(,)f(full)f(pip)s(e\).)41 b(Barring)31 b(these)f(t)m(w)m(o)
i(cases,)e(a)h(write)g(either)g(returns)g Fg(nwritten)e
Fd(>)h Fi(0,)h(or)227 1496 y(raises)f(an)h(error)g(exception.)227
1609 y(Con)m(trarily)h(to)f(Scsh,)f(non-blo)s(c)m(king)i(i/o)f(is)f
(also)g(a)m(v)-5 b(ailable)32 b(on)e(bu\033ered)h(c)m(hannels.)42
b(Doing)227 1722 y(non-blo)s(c)m(king)32 b(i/o)f(to)f(a)h(bu\033ered)g
(c)m(hannel)h(is)e(w)m(ell-de\034ned:)42 b(if)30 b(a)h(Sys_blo)s(c)m(k)
m(ed_io)h(encapsulated)227 1835 y(exception)g(is)d(raised,)i(the)g
(bufuer)g(is)f(full)g(and)h(writing)g(one)g(c)m(haracter)h(w)m(ould)g
(blo)s(c)m(k.)0 2046 y Fj(type)94 b(selectable)47 b(=)94
2159 y(|)g(Nothing)94 2272 y(|)g(Read_in)g(of)g(Pervasives.in_channel)
94 2385 y(|)g(Read_fd)g(of)g(fd)94 2498 y(|)g(Write_out)g(of)g
(Pervasives.out_channel)94 2611 y(|)g(Write_fd)g(of)g(fd)94
2724 y(|)g(Except_in)g(of)g(Pervasives.in_channel)94
2836 y(|)g(Except_fd)g(of)g(fd)227 2974 y Fi(The)31 b(kind)f(of)g
(things)h(y)m(ou)g(can)g(ask)e(to)i Fj(select)p Fi(.)0
3185 y Fj(val)47 b(select_bang)g(:)g(?timeout:float)f(->)h(selectable)g
(array)g(->)g(int)g(*)g(int)f(*)h(int)0 3322 y(val)g(select)g(:)g
(?timeout:float)f(->)h(selectable)g(array)g(->)g(selectable)g(array)227
3460 y Fi(The)31 b Fj(select)f Fi(pro)s(cedure)h(allo)m(ws)h(a)e(pro)s
(cess)g(to)g(blo)s(c)m(k)h(and)g(w)m(ait)g(for)f(ev)m(en)m(ts)h(on)g(m)
m(ultiple)h(I/O)227 3573 y(c)m(hannels.)42 b(The)31 b
Fg(sele)-5 b(ctable)33 b Fi(argumen)m(t)f(is)e(an)h(arra)m(y)g(of)f
Fj(Read_in)g Fi(or)g Fj(Except_in)g Fi(input)h(c)m(hannels)h(and)227
3686 y Fj(Read_fd)d Fi(or)f Fj(Except_fd)h Fi(in)m(teger)h(\034le)f
(descriptors,)g(and)g Fj(Write_out)g Fi(output)g(c)m(hannels)h(and)f
Fj(Write_fd)227 3799 y Fi(in)m(teger)j(\034le)f(descriptors.)41
b(The)31 b(pro)s(cedure)g(returns)g(an)g(arra)m(y)g(whose)f(elemen)m
(ts)i(are)f(a)f(subset)g(of)g(the)227 3911 y(arra)m(y)g(argumen)m(t.)42
b(In)29 b(this)g(result)h(arra)m(y)-8 b(,)31 b(ev)m(ery)e
Fj(Read_in)g Fi(or)h Fj(Read_fd)f Fi(elemen)m(t)i(of)d(is)h(ready)h
(for)f(input;)227 4024 y(ev)m(ery)i Fj(Write_out)f Fi(or)g
Fj(Write_fd)g Fi(elemen)m(t)i(is)e(ready)h(for)f(output;)h(ev)m(ery)g
Fj(Except_in)f Fi(or)g Fj(Except_fd)227 4137 y Fi(elemen)m(t)i(has)e
(an)h(exceptional)h(condition)f(p)s(ending.)227 4250
y(The)g Fj(select)f Fi(call)h(will)g(blo)s(c)m(k)f(un)m(til)i(at)e
(least)h(one)f(of)g(the)h(I/O)f(c)m(hannels)i(passed)e(to)h(it)f(is)g
(ready)h(for)227 4363 y(op)s(eration.)42 b(The)31 b Fg(time)-5
b(out)30 b Fi(v)-5 b(alue)31 b(can)g(b)s(e)f(used)g(to)h(force)f(the)h
(call)g(to)f(time-out)i(after)e(a)h(giv)m(en)g(n)m(um)m(b)s(er)227
4476 y(of)f(seconds.)41 b(Its)29 b(default)i(means)g(w)m(ait)g
(inde\034nitely)-8 b(.)43 b(A)30 b(zero)g(v)-5 b(alue)31
b(can)g(b)s(e)f(used)g(to)h(p)s(oll)f(the)h(I/O)227 4589
y(c)m(hannels.)227 4702 y(If)f(an)g(Unix)g(I/O)g(c)m(hannel)i(app)s
(ears)f(more)g(than)g(once)g(in)f(the)h(selectable)g(argumen)m(t)h
(\026)f(p)s(erhaps)227 4815 y(o)s(ccuring)g(once)g(as)f(a)g(Caml)h(c)m
(hannel,)g(and)g(once)g(as)e(the)i(c)m(hannel's)g(underlying)h(in)m
(teger)f(\034le)g(descriptor)227 4928 y(\026)g(only)f(one)h(of)f(these)
g(t)m(w)m(o)i(references)f(ma)m(y)g(app)s(ear)g(in)f(the)h(returned)g
(v)m(ector.)42 b(Bu\033ered)31 b(I/O)227 5041 y(c)m(hannels)h(are)f
(handled)g(sp)s(ecially)f(\026)h(if)f(an)g(input)h(c)m(hannel's)h
(bu\033er)f(is)f(not)g(empt)m(y)-8 b(,)32 b(or)f(an)f(output)227
5153 y(c)m(hannel's)i(bu\033er)f(is)f(not)g(y)m(et)h(full,)f(then)h
(these)g(c)m(hannels)g(are)g(immediately)h(considered)f(eligible)h(for)
227 5266 y(I/O)f(without)g(using)g(the)f(actual,)i(primitiv)m(e)f
Fj(select)f Fi(system)g(call)h(to)f(c)m(hec)m(k)i(the)f(underlying)g
(\034le)1905 5589 y(22)p eop
%%Page: 23 23
23 22 bop 227 91 a Fi(descriptor.)42 b(This)30 b(w)m(orks)h(prett)m(y)g
(w)m(ell)g(for)g(bu\033ered)g(input)g(c)m(hannels,)g(but)g(is)f(a)g
(little)h(problematic)i(for)227 204 y(bu\033ered)e(output)h(c)m
(hannels.)227 317 y(The)f Fj(select_bang)f Fi(pro)s(cedure)h(is)f
(similar,)h(but)g(indicates)g(the)g(subset)f(of)g(activ)m(e)h(I/O)f(c)m
(hannels)i(b)m(y)227 430 y(side-e\033ecting)g(the)e(argumen)m(t)j(arra)
m(y)-8 b(.)41 b(Non-activ)m(e)32 b(I/O)e(c)m(hannels)i(in)e(the)h
(argumen)m(t)h(arra)m(y)f(are)227 543 y(o)m(v)m(erwritten)i(with)e
Fj(Nothing)f Fi(v)-5 b(alues.)227 656 y(The)30 b(call)g(returns)h(the)f
(n)m(um)m(b)s(er)h(of)e(activ)m(e)h(elemen)m(ts)h(remaining)h(in)d(the)
h(arra)m(y)-8 b(.)42 b(As)29 b(a)g(con)m(v)m(enience,)j(the)227
769 y(v)m(ectors)f(passed)f(in)h(to)f Fj(select_bang)g
Fi(are)h(allo)m(w)m(ed)h(to)f(con)m(tain)h Fj(Nothing)e
Fi(v)-5 b(alues)30 b(as)g(w)m(ell)h(as)f(in)m(tegers)227
882 y(and)h(c)m(hannels.)227 995 y Fg(R)-5 b(emark:)41
b Fi(I)30 b(\(Olin\))h(ha)m(v)m(e)h(found)e(the)h Fj(select_bang)f
Fi(in)m(terface)h(to)g(b)s(e)f(the)h(more)g(useful)f(of)g(the)g(t)m(w)m
(o.)227 1108 y(After)g(the)h(system)f(call,)h(it)f(allo)m(ws)h(y)m(ou)g
(to)g(c)m(hec)m(k)g(a)f(sp)s(eci\034c)h(I/O)f(c)m(hannel)i(in)f
(constan)m(t)g(time.)0 1421 y Fk(3.2.7)103 b(Bu\033ered)34
b(I/O)0 1616 y Fi(Caml)e(c)m(hannels)h(use)f(bu\033ered)g(I/O)g(\026)f
(data)i(is)e(transferred)h(to)g(or)g(from)f(the)h(OS)g(in)g(blo)s(c)m
(ks.)44 b(Cash)32 b(pro)m(vides)0 1729 y(con)m(trol)27
b(of)e(this)g(mec)m(hanism:)40 b(the)26 b(programmer)h(ma)m(y)f(force)f
(sa)m(v)m(ed-up)i(output)f(data)g(to)g(b)s(e)f(transferred)h(to)f(the)0
1842 y(OS)j(when)g(he)g(c)m(ho)s(oses,)g(and)g(ma)m(y)g(also)g(c)m(ho)s
(ose)g(whic)m(h)h(I/O)e(bu\033ering)h(p)s(olicy)g(to)f(emplo)m(y)i(for)
e(a)h(giv)m(en)g(c)m(hannel)0 1955 y(\(or)j(turn)g(bu\033ering)g(o\033)
f(completely\).)141 2068 y(It)i(can)g(b)s(e)g(useful)g(to)g(turn)g(I/O)
g(bu\033ering)h(o\033)f(in)g(some)g(cases,)g(for)g(example)h(when)f(an)
h(I/O)f(stream)g(is)g(to)0 2181 y(b)s(e)h(shared)h(b)m(y)g(m)m(ultiple)
h(subpro)s(cesses.)50 b(F)-8 b(or)34 b(this)g(reason,)g(Cash)g(allo)s
(cates)g(an)g(un)m(bu\033ered)h(c)m(hannel)g(for)e(\034le)0
2294 y(descriptor)i(0)e(at)h(start-up)g(time.)51 b(Because)34
b(shells)g(frequen)m(tly)g(share)g(stdin)f(with)i(subpro)s(cesses,)f
(if)f(the)h(shell)0 2407 y(do)s(es)k(bu\033ered)h(reads,)i(it)d(migh)m
(t)i(\020steal\021)46 b(input)39 b(in)m(tended)h(for)e(a)g(subpro)s
(cess.)64 b(F)-8 b(or)39 b(this)g(reason,)h(all)f(shells,)0
2520 y(including)i(sh,)h(csh,)f(scsh)e(and)h(cash,)i(read)e(stdin)g(un)
m(bu\033ered.)70 b(Applications)40 b(that)g(can)g(tolerate)h
(bu\033ered)0 2633 y(input)31 b(on)g(stdin)f(can)h(reset)f
Fj(stdin)g Fi(to)h(blo)s(c)m(k)f(bu\033ering)i(for)e(higher)h(p)s
(erformance.)141 2745 y(There)g(are)g(three)g(bu\033ering)g(p)s
(olicies)g(that)g(ma)m(y)f(b)s(e)g(c)m(hosen:)0 2882
y Fj(type)94 b(bufpolicy)47 b(=)94 2995 y(|)g(Block)227
3126 y Fi(General)31 b(blo)s(c)m(k)g(bu\033ering)g(\(general)h
(default\).)94 3295 y Fj(|)47 b(Line)227 3427 y Fi(Line)31
b(bu\033ering)h(\(tt)m(y)e(default\).)94 3595 y Fj(|)47
b(Nobuf)227 3727 y Fi(Direct)31 b(I/O)f(\026)h(no)g(bu\033ering.)141
3919 y(The)37 b(line)g(bu\033ering)g(p)s(olicy)f(\035ushes)g(output)h
(whenev)m(er)h(a)e(newline)h(is)f(output;)k(whenev)m(er)e(the)f
(bu\033er)f(is)0 4032 y(full;)k(or)d(whenev)m(er)h(an)g(input)f(is)g
(read)g(from)g(stdin.)60 b(Line)38 b(bu\033ering)g(is)e(the)h(default)h
(for)e(c)m(hannels)j(op)s(en)e(on)0 4145 y(terminal)d(devices.)47
b Fg(Oops:)e(Pervasives)36 b(I/O)f(implementation)e(do)-5
b(esn)c('t)35 b(supp)-5 b(ort)35 b(it,)f(so)g(line)g(bu\033ering)i(is)e
(not)0 4258 y(implemente)-5 b(d.)0 4394 y Fj(val)47 b
(set_chan_buffering_in)f(:)94 4507 y(Pervasives.in_channel)g(->)h
(?size:int)g(->)g(bufpolicy)g(->)g(unit)0 4644 y(val)g
(set_chan_buffering_out)f(:)94 4757 y(Pervasives.out_channel)g(->)h
(?size:int)g(->)g(bufpolicy)g(->)g(unit)227 4888 y
(set_chan_buffering_...)40 b Fg(channel)31 b Fj(\003size:)p
Fg(size)h(p)-5 b(olicy)31 b Fi(allo)m(ws)g(the)f(programmer)j(to)d
(assign)g(a)227 5001 y(particular)i(I/O)e(bu\033ering)i(p)s(olicy)e(to)
g(a)h(c)m(hannel,)h(and)e(to)h(c)m(ho)s(ose)g(the)f(size)h(of)f(the)g
(asso)s(ciated)h(bu\033er.)227 5114 y(The)g Fg(size)f
Fi(argumen)m(t)i(requests)e(an)h(I/O)f(bu\033er)h(of)f
Fg(size)g Fi(b)m(ytes.)41 b(If)29 b(not)i(giv)m(en,)g(a)f(reasonable)i
(default)f(is)227 5227 y(used;)g(if)f(giv)m(en)h(and)g(zero,)g
(bu\033ering)g(is)f(turned)h(o\033)f(\(i.e.,)h Fj(\003size:0)f
Fi(for)g(an)m(y)h(p)s(olicy)f(is)g(equiv)-5 b(alen)m(t)31
b(to)227 5340 y Fg(p)-5 b(olicy)31 b Fc(=)f Fj(Nobuf)p
Fi(\).)1905 5589 y(23)p eop
%%Page: 24 24
24 23 bop 227 91 a Fi(Implemen)m(tation)33 b(notes:)41
b(y)m(ou)31 b(can't)g(set)f(a)g(size)g(lo)m(w)m(er)i(than)f(the)g
(actual)g(con)m(ten)m(ts)h(of)e(the)h(bu\033er;)g(so)227
204 y(y)m(ou)g(ma)m(y)g(ha)m(v)m(e)g(to)g(\035ush)f(out_c)m(hannels,)j
(or)d(only)h(use)f(it)g(on)h(new)g(in_c)m(hannels,)h(i.e.,)f(b)s(efore)
f(I/O)g(is)227 317 y(p)s(erformed)h(on)g(the)f(c)m(hannel.)43
b(Y)-8 b(ou)30 b(can't)h(set)f(a)h(size)f(higher)h(than)g(the)g(curren)
m(t)h(standard)f(size)f(\(4)h(Kb\))227 430 y(y)m(et.)41
b(The)31 b Fj(Nobuf)f Fi(p)s(olicy)g(is)g(em)m(ulated)i(b)m(y)f(a)f
(bu\033er)h(of)f(size)g(1.)41 b(With)30 b(Ocaml)h(3.04,)227
543 y Fj(set_chan_buffering_in)f Fi(is)g(ine\033ectiv)m(e.)0
741 y Fj(val)47 b(force_output)g(:)g(Pervasives.out_channel)f(->)h
(unit)227 874 y Fi(This)31 b(pro)s(cedure)g(\035ushes)f(bu\033ered)h
(output,)h(and)f(raises)f(a)g(write-error)i(exception)f(on)g(error.)0
1072 y Fj(val)47 b(flush_all_chans)g(:)f(unit)h(->)g(unit)227
1206 y Fi(This)31 b(pro)s(cedure)g(\035ushes)f(all)h(op)s(en)f(output)i
(c)m(hannels)f(with)g(bu\033ered)g(data.)0 1530 y Ff(3.3)112
b(File)36 b(system)0 1725 y Fi(Besides)20 b(the)h(follo)m(wing)h(pro)s
(cedures,)i(whic)m(h)e(allo)m(w)g(access)e(to)h(the)g(computer's)h
(\034le)f(system,)h(Cash)e(also)h(pro)m(vides)0 1838
y(a)g(set)h(of)f(pro)s(cedures)h(whic)m(h)g(manipulate)h(\034le)f
Fg(names)p Fi(.)37 b(These)22 b(string-pro)s(cessing)g(pro)s(cedures)g
(are)g(do)s(cumen)m(ted)0 1951 y(in)30 b(section)h([5.1].)0
2088 y Fj(type)94 b(override)47 b(=)94 2201 y(|)g(Don't)94
2314 y(|)g(Delete)94 2426 y(|)g(Query)0 2563 y(val)g(create_directory)g
(:)94 2676 y(?perms:file_perm)g(->)f(?override:override)h(->)g(string)g
(->)g(unit)0 2812 y(val)g(create_fifo)g(:)94 2925 y(?perms:file_perm)g
(->)f(?override:override)h(->)g(string)g(->)g(unit)0
3062 y(val)g(create_hard_link)g(:)f(?override:override)h(->)g(string)g
(->)g(string)g(->)g(unit)0 3198 y(val)g(create_symlink)g(:)g
(?override:override)f(->)h(string)g(->)g(string)g(->)g(unit)227
3332 y Fi(These)31 b(pro)s(cedures)g(create)g(ob)5 b(jects)31
b(of)e(v)-5 b(arious)31 b(kinds)f(in)g(the)h(\034le)g(system.)227
3445 y(The)g Fg(\003override)h Fi(argumen)m(t)g(con)m(trols)g(the)e
(action)h(if)f(there)h(is)f(already)h(an)g(ob)5 b(ject)30
b(in)h(the)g(\034le)f(system)227 3558 y(with)h(the)g(new)g(name:)306
3683 y Fe(\017)46 b Fj(Don't)30 b Fi(\(o)m(v)m(erride\):)43
b(signal)30 b(an)h(error)g(\(default\))306 3808 y Fe(\017)46
b Fj(Query)p Fi(:)40 b(prompt)32 b(the)f(user)306 3933
y Fe(\017)46 b Fj(Delete)p Fi(:)40 b(delete)32 b(the)e(old)h(ob)5
b(ject)31 b(\(with)g Fj(delete_file)f Fi(or)g Fj(delete_directory,)g
Fi(as)397 4046 y(appropriate\))j(b)s(efore)d(creating)h(the)g(new)g(ob)
5 b(ject.)227 4171 y Fg(Perms)31 b Fi(defaults)f(to)h
Fj(0o777)f Fi(\(but)h(is)f(mask)m(ed)g(b)m(y)h(the)g(curren)m(t)h
(umask\).)227 4284 y(Note:)40 b(curren)m(tly)-8 b(,)31
b(if)d(y)m(ou)g(try)h(to)f(create)i(a)e(hard)h(or)g(sym)m(b)s(olic)f
(link)h(from)f(a)h(\034le)f(to)h(itself,)f(y)m(ou)h(will)g(error)227
4397 y(out)i(with)g Fg(\003override)h Fj(Don't)p Fi(,)e(and)g(simply)h
(delete)g(y)m(our)g(\034le)g(with)f Fg(\003override)i
Fj(Delete)p Fi(.)40 b(Catc)m(hing)32 b(this)227 4510
y(will)f(require)g(some)f(sort)h(of)f(true-name)i(pro)s(cedure,)f(whic)
m(h)h(Cash)e(\(nor)h(Scsh\))g(curren)m(tly)g(do)g(not)g(ha)m(v)m(e.)0
4708 y Fj(val)47 b(delete_file)g(:)g(string)f(->)h(unit)0
4844 y(val)g(delete_directory)g(:)f(string)h(->)g(unit)0
4981 y(val)g(delete_filesys_object)f(:)h(string)g(->)g(bool)227
5114 y Fi(These)31 b(pro)s(cedures)g(delete)g(ob)5 b(jects)30
b(from)h(the)g(\034le)f(system.)40 b(The)31 b Fj(delete_filesys_object)
227 5227 y Fi(pro)s(cedure)h(will)e(delete)i(an)e(ob)5
b(ject)31 b(of)f(an)m(y)h(t)m(yp)s(e)f(from)g(the)h(\034le)g(system:)40
b(\034les,)30 b(\(empt)m(y\))i(directories,)227 5340
y(symlinks,)e(\034fos,)g Fg(etc.)1905 5589 y Fi(24)p
eop
%%Page: 25 25
25 24 bop 227 91 a Fi(If)29 b(the)g(ob)5 b(ject)30 b(b)s(eing)f
(deleted)i(do)s(esn't)e(exist,)g Fj(delete_directory)g
Fi(and)g Fj(delete_file)g Fi(raise)h(an)f(error,)227
204 y(while)i Fj(delete_filesys_object)f Fi(simply)g(returns.)0
415 y Fj(val)47 b(read_symlink)g(:)g(string)f(->)h(string)227
553 y Fi(Return)31 b(the)g(\034lename)g(referenced)h(b)m(y)e(sym)m(b)s
(olic)h(link)f Fj(fname)p Fi(.)0 765 y Fj(val)47 b(rename_file)g(:)g
(?override:override)f(->)h(string)g(->)g(string)g(->)g(unit)227
902 y Fi(When)31 b(using)f Fj(rename_file)g Fg(old_fname)j(new_fname)p
Fi(,)d(if)g(y)m(ou)h(o)m(v)m(erride)h(an)e(existing)h(ob)5
b(ject,)30 b(then)227 1015 y Fg(old_fname)h Fi(and)f
Fg(new_fname)g Fi(m)m(ust)h(t)m(yp)s(e-matc)m(h)h(\026)f(either)g(b)s
(oth)g(directories,)g(or)g(b)s(oth)227 1128 y(non-directories.)43
b(This)30 b(is)g(required)h(b)m(y)g(the)f(seman)m(tics)i(of)e(Unix)g
Fj(rename\(\))p Fi(.)227 1241 y(Note:)41 b(there)31 b(is)f(an)g
(unfortunate)i(atomicit)m(y)g(problem)f(with)g(the)g
Fj(rename_file)f Fi(pro)s(cedure:)41 b(if)30 b(y)m(ou)227
1354 y(sp)s(ecify)g Fj(\003override:Don't)p Fi(,)g(but)g(create)h
(\034le)g Fg(new_fname)f Fi(sometime)i(b)s(et)m(w)m(een)g
Fj(rename_file)p Fi('s)227 1467 y(existence)e(c)m(hec)m(k)g(and)g(the)g
(actual)g(rename)g(op)s(eration,)h(y)m(our)e(\034le)h(will)g(b)s(e)f
(clobb)s(ered)h(with)g Fg(old_fname)p Fi(.)227 1580 y(There)h(is)f(no)h
(w)m(a)m(y)g(to)g(\034x)f(this)g(problem,)i(giv)m(en)f(the)f(seman)m
(tics)i(of)e(Unix)g Fj(rename\(\))p Fi(;)g(at)g(least)h(it)f(is)227
1693 y(highly)h(unlik)m(ely)g(to)g(o)s(ccur)f(in)h(practice.)0
1904 y Fj(val)47 b(set_file_mode_fn)g(:)f(string)h(->)g(file_perm)g(->)
g(unit)0 2041 y(val)g(set_file_mode_fd)g(:)f(fd)h(->)g(file_perm)g(->)g
(unit)0 2177 y(val)g(set_file_mode_in)g(:)f(Pervasives.in_channel)h(->)
g(file_perm)g(->)g(unit)0 2314 y(val)g(set_file_mode_out)f(:)h
(Pervasives.out_channel)g(->)g(file_perm)g(->)g(unit)0
2450 y(val)g(set_file_owner_fn)f(:)h(string)g(->)g(int)g(->)g(unit)0
2587 y(val)g(set_file_owner_fd)f(:)h(fd)g(->)g(int)g(->)g(unit)0
2723 y(val)g(set_file_owner_in)f(:)h(Pervasives.in_channel)g(->)g(int)g
(->)g(unit)0 2860 y(val)g(set_file_owner_out)f(:)h
(Pervasives.out_channel)g(->)g(int)g(->)g(unit)0 2996
y(val)g(set_file_group_fn)f(:)h(string)g(->)g(int)g(->)g(unit)0
3133 y(val)g(set_file_group_fd)f(:)h(fd)g(->)g(int)g(->)g(unit)0
3269 y(val)g(set_file_group_in)f(:)h(Pervasives.in_channel)g(->)g(int)g
(->)g(unit)0 3406 y(val)g(set_file_group_out)f(:)h
(Pervasives.out_channel)g(->)g(int)g(->)g(unit)227 3544
y Fi(These)31 b(pro)s(cedures)g(set)f(the)h(p)s(ermission)f(bits,)h(o)m
(wner)g(id,)g(and)g(group)g(id)f(of)g(a)h(\034le,)f(resp)s(ectiv)m(ely)
-8 b(.)42 b(The)227 3657 y(\034le)30 b(can)g(b)s(e)g(sp)s(eci\034ed)g
(b)m(y)g(using)f(a)h(\034le)g(name:)41 b Fj(set_file_..._fn)29
b Fg(\034lename)p Fi(,)h(or)g(either)g(an)g(in)m(teger)h(\034le)227
3770 y(descriptor:)42 b Fj(set_file_..._fd)30 b Fg(fd)g
Fi(or)g(a)g(c)m(hannel:)42 b Fj(set_file_..._{in,out})30
b Fg(channel)h Fi(op)s(en)f(on)h(the)227 3882 y(\034le.)41
b(Setting)32 b(\034le)e(user)h(o)m(wnership)g(usually)g(requires)f(ro)s
(ot)h(privileges.)0 4094 y Fj(val)47 b(set_file_times)g(:)g
(?times:float)f(*)h(float)g(->)g(string)g(->)g(unit)227
4231 y Fi(This)31 b(pro)s(cedure)g(sets)f(the)h(access)f(and)g(mo)s
(di\034ed)i(times)e(for)g(the)h(\034le)g(to)f(the)h(supplied)g(v)-5
b(alues)30 b(\(see)227 4344 y(around)i Fj(date)p Fi([3.11.4])f(for)f
(the)h(Cash)f(represen)m(tation)j(of)d(time\).)41 b(If)29
b(the)i Fg(\003times)f Fi(argumen)m(t)i(is)e(not)227
4457 y(supplied,)h(they)g(are)g(b)s(oth)f(tak)m(en)h(to)g(b)s(e)f(the)g
(curren)m(t)i(time.)41 b(Y)-8 b(ou)31 b(m)m(ust)g(pro)m(vide)g(b)s(oth)
g(times)f(or)227 4570 y(neither.)42 b(If)29 b(the)i(pro)s(cedure)g
(completes)h(successfully)-8 b(,)30 b(the)h(\034le's)f(time)h(of)f
(last)g(status-c)m(hange)i(\()p Fj(ctime)p Fi(\))227
4683 y(is)e(set)g(to)h(the)g(curren)m(t)g(time.)0 4894
y Fj(val)47 b(sync_file_fd)g(:)g(int)f(->)h(unit)0 5031
y(val)g(sync_file_out)g(:)g(Pervasives.out_channel)f(->)h(unit)0
5167 y(val)g(sync_file_system)g(:)f(unit)h(->)g(unit)1905
5589 y Fi(25)p eop
%%Page: 26 26
26 25 bop 227 91 a Fi(Calling)32 b Fj(sync_file_...)40
b Fi(causes)30 b(Unix)g(to)g(up)s(date)h(the)g(disk)f(data)g
(structures)h(for)g(a)f(giv)m(en)h(\034le.)41 b(F)-8
b(or)227 204 y Fj(sync_file_out)p Fi(,)30 b(an)m(y)h(bu\033ered)g(data)
g(the)g(c)m(hannel)h(ma)m(y)e(ha)m(v)m(e)i(is)e(\034rst)g(\035ushed.)41
b(Calling)227 317 y Fj(sync_file_system)30 b Fi(sync)m(hronises)h(the)g
(k)m(ernel's)g(en)m(tire)g(\034le)g(system)f(with)h(the)f(disk.)227
430 y(These)h(pro)s(cedures)g(are)g(not)f(P)m(osix.)41
b(In)m(terestingly)32 b(enough,)f Fj(sync_file_system)f
Fi(do)s(esn't)g(actually)227 543 y(do)h(what)g(it)f(is)g(claimed)i(to)e
(do.)41 b(W)-8 b(e)30 b(just)g(threw)h(it)g(in)f(for)g(h)m(umor)i(v)-5
b(alue.)41 b(See)31 b(the)f Fj(sync\(2\))g Fi(man)h(page)227
656 y(for)f(Unix)g(enligh)m(tenmen)m(t.)0 867 y Fj(val)47
b(truncate_file_fn)g(:)f(string)h(->)g(int)g(->)g(unit)0
1004 y(val)g(truncate_file_fd)g(:)f(fd)h(->)g(int)g(->)g(unit)0
1140 y(val)g(truncate_file_in)g(:)f(Pervasives.in_channel)h(->)g(int)g
(->)g(unit)0 1277 y(val)g(truncate_file_out)f(:)h
(Pervasives.out_channel)g(->)g(int)g(->)g(unit)227 1415
y(truncate_file_...)40 b Fg(fname/\034le)32 b(descriptor/channel)i(len)
d Fi(truncates)g(the)g(sp)s(eci\034ed)f(\034le)h(is)f(to)g
Fg(len)227 1527 y Fi(b)m(ytes)h(in)f(length.)0 1852 y
Fj(type)94 b(file_kind)47 b(=)g(Unix.file_kind)f(=)94
1965 y(|)h(S_REG)94 2077 y(|)g(S_DIR)94 2190 y(|)g(S_CHR)94
2303 y(|)g(S_BLK)94 2416 y(|)g(S_LNK)94 2529 y(|)g(S_FIFO)94
2642 y(|)g(S_SOCK)0 2779 y(type)94 b(file_info)47 b(=)g(Unix.stats)f(=)
h({)94 2891 y(st_dev)g(:)g(int)g(;)94 3004 y(st_ino)g(:)g(int)g(;)94
3117 y(st_kind)g(:)g(file_kind)f(;)94 3230 y(st_perm)h(:)g(file_perm)f
(;)94 3343 y(st_nlink)h(:)g(int)g(;)94 3456 y(st_uid)g(:)g(int)g(;)94
3569 y(st_gid)g(:)g(int)g(;)94 3682 y(st_rdev)g(:)g(int)g(;)94
3795 y(st_size)g(:)g(int)g(;)94 3908 y(st_atime)g(:)g(float)g(;)94
4021 y(st_mtime)g(:)g(float)g(;)94 4133 y(st_ctime)g(:)g(float)g(;)0
4246 y(})227 4384 y Fi(What)31 b(is)f(returned)h(b)m(y)g
Fj(file_info_...)p Fi(.)40 b(An)30 b(alias)g(for)h Fj(Unix.stats)p
Fi(.)0 4595 y Fj(val)47 b(file_info_fn)g(:)g(?chase:bool)f(->)h(string)
g(->)g(file_info)0 4732 y(val)g(file_info_fd)g(:)g(fd)f(->)h(file_info)
0 4868 y(val)g(file_info_in)g(:)g(Pervasives.in_channel)f(->)h
(file_info)0 5005 y(val)g(file_info_out)g(:)g(Pervasives.out_channel)f
(->)h(file_info)227 5143 y Fi(The)31 b Fj(file_info_...)40
b Fi(pro)s(cedures)31 b(return)g(a)g(record)g(structure)g(con)m
(taining)h(ev)m(erything)g(there)f(is)f(to)227 5256 y(kno)m(w)h(ab)s
(out)g(a)f(\034le.)41 b Fj(file_info_fn)30 b Fi(tak)m(es)h(a)f
Fg(\003chase)h Fi(\035ag;)g(if)f(it's)g(is)g(true)h(\(the)g(default\),)
g(then)g(the)1905 5589 y(26)p eop
%%Page: 27 27
27 26 bop 227 91 a Fi(pro)s(cedure)32 b(c)m(hases)e(symlinks)g(and)h
(rep)s(orts)f(on)h(the)f(\034les)h(to)f(whic)m(h)i(they)e(refer.)41
b(If)29 b Fg(\003chase)j Fi(is)e(false,)227 204 y(then)h(the)g(pro)s
(cedure)g(c)m(hec)m(ks)g(the)g(actual)g(\034le)g(itself,)f(ev)m(en)h
(if)f(it's)g(a)h(symlink.)141 414 y(The)36 b(follo)m(wing)g(pro)s
(cedures)g(all)f(return)h(selected)g(information)h(ab)s(out)e(a)g
(\034le;)j(they)d(are)h(built)f(on)h(top)f(of)0 527 y
Fj(file_info_...)p Fi(,)30 b(and)h(are)f(called)i(with)e(the)h(same)g
(argumen)m(ts)h(that)e(are)h(passed)f(to)h(it.)0 663
y Fj(val)47 b(file_type_fn)g(:)g(?chase:bool)f(->)h(string)g(->)g
(file_kind)0 800 y(val)g(file_type_fd)g(:)g(fd)f(->)h(file_kind)0
936 y(val)g(file_type_in)g(:)g(Pervasives.in_channel)f(->)h(file_kind)0
1073 y(val)g(file_type_out)g(:)g(Pervasives.out_channel)f(->)h
(file_kind)227 1210 y Fi(Return)31 b(the)g(t)m(yp)s(e)f(of)g(fn/fd/c)m
(hannel.)0 1420 y Fj(val)47 b(file_inode_fn)g(:)g(?chase:bool)f(->)h
(string)g(->)g(int)0 1557 y(val)g(file_inode_fd)g(:)g(fd)f(->)h(int)0
1693 y(val)g(file_inode_in)g(:)g(Pervasives.in_channel)f(->)h(int)0
1830 y(val)g(file_inode_out)g(:)g(Pervasives.out_channel)f(->)h(int)227
1967 y Fi(Return)31 b(the)g(ino)s(de)f(of)g(fn/fd/c)m(hannel.)0
2177 y Fj(val)47 b(file_mode_fn)g(:)g(?chase:bool)f(->)h(string)g(->)g
(file_perm)0 2313 y(val)g(file_mode_fd)g(:)g(fd)f(->)h(file_perm)0
2450 y(val)g(file_mode_in)g(:)g(Pervasives.in_channel)f(->)h(file_perm)
0 2586 y(val)g(file_mode_out)g(:)g(Pervasives.out_channel)f(->)h
(file_perm)227 2724 y Fi(Return)31 b(the)g(mo)s(de)f(bits)g(\(p)s
(ermissions,)h(setuid,)g(setgid\))f(of)g(fn/fd/c)m(hannel.)0
2933 y Fj(val)47 b(file_nlinks_fn)g(:)g(?chase:bool)f(->)h(string)g(->)
g(int)0 3070 y(val)g(file_nlinks_fd)g(:)g(fd)f(->)h(int)0
3207 y(val)g(file_nlinks_in)g(:)g(Pervasives.in_channel)f(->)h(int)0
3343 y(val)g(file_nlinks_out)g(:)f(Pervasives.out_channel)h(->)g(int)
227 3480 y Fi(Return)31 b(the)g(n)m(um)m(b)s(er)g(of)f(hard)h(links)f
(to)h(this)f(fn/fd/c)m(hannel.)0 3690 y Fj(val)47 b(file_owner_fn)g(:)g
(?chase:bool)f(->)h(string)g(->)g(int)0 3827 y(val)g(file_owner_fd)g(:)
g(fd)f(->)h(int)0 3963 y(val)g(file_owner_in)g(:)g
(Pervasives.in_channel)f(->)h(int)0 4100 y(val)g(file_owner_out)g(:)g
(Pervasives.out_channel)f(->)h(int)227 4237 y Fi(Return)31
b(the)g(o)m(wner)g(of)f(fn/fd/c)m(hannel.)0 4447 y Fj(val)47
b(file_group_fn)g(:)g(?chase:bool)f(->)h(string)g(->)g(int)0
4583 y(val)g(file_group_fd)g(:)g(fd)f(->)h(int)0 4720
y(val)g(file_group_in)g(:)g(Pervasives.in_channel)f(->)h(int)0
4856 y(val)g(file_group_out)g(:)g(Pervasives.out_channel)f(->)h(int)227
4994 y Fi(Return)31 b(the)g(group)g(id)f(of)g(fn/fd/c)m(hannel.)0
5203 y Fj(val)47 b(file_size_fn)g(:)g(?chase:bool)f(->)h(string)g(->)g
(int)0 5340 y(val)g(file_size_fd)g(:)g(fd)f(->)h(int)1905
5589 y Fi(27)p eop
%%Page: 28 28
28 27 bop 0 91 a Fj(val)47 b(file_size_in)g(:)g(Pervasives.in_channel)f
(->)h(int)0 228 y(val)g(file_size_out)g(:)g(Pervasives.out_channel)f
(->)h(int)227 366 y Fi(Return)31 b(the)g(size)f(in)g(b)m(ytes)h(of)f
(fn/fd/c)m(hannel.)0 577 y Fj(val)47 b(file_last_access_fn)f(:)h
(?chase:bool)g(->)g(string)g(->)g(float)0 713 y(val)g
(file_last_access_fd)f(:)h(fd)g(->)g(float)0 850 y(val)g
(file_last_access_in)f(:)h(Pervasives.in_channel)g(->)g(float)0
987 y(val)g(file_last_access_out)f(:)h(Pervasives.out_channel)g(->)g
(float)227 1124 y Fi(Return)31 b(the)g(time)f(of)g(last)h(access)f(of)g
(fn/fd/c)m(hannel.)0 1336 y Fj(val)47 b(file_last_mod_fn)g(:)f
(?chase:bool)h(->)g(string)g(->)g(float)0 1472 y(val)g
(file_last_mod_fd)g(:)f(fd)h(->)g(float)0 1609 y(val)g
(file_last_mod_in)g(:)f(Pervasives.in_channel)h(->)g(float)0
1745 y(val)g(file_last_mod_out)f(:)h(Pervasives.out_channel)g(->)g
(float)227 1883 y Fi(Return)31 b(the)g(time)f(of)g(last)h(mo)s
(di\034cation)h(of)d(fn/fd/c)m(hannel.)0 2094 y Fj(val)47
b(file_last_status_change_fn)f(:)h(?chase:bool)g(->)g(string)g(->)g
(float)0 2231 y(val)g(file_last_status_change_fd)f(:)h(fd)g(->)g(float)
0 2367 y(val)g(file_last_status_change_in)f(:)h(Pervasives.in_channel)g
(->)g(float)0 2504 y(val)g(file_last_status_change_out)f(:)h
(Pervasives.out_channel)g(->)g(float)227 2642 y Fi(Return)31
b(the)g(time)f(of)g(last)h(status)f(c)m(hange)i(of)e(fn/fd/c)m(hannel.)
141 2853 y(Example)282 2966 y Fj(\(*)47 b(All)g(my)g(files)f(in)h
(/usr/tmp:)g(*\))376 3079 y(with_cwd)g("/usr/tmp")470
3192 y(\(fun)g(\(\))g(->)g(List.filter)f(\(fun)h(f)g(->)g
(file_owner_fn)g(f)g(=)g(user_uid\(\)\))564 3305 y(\(directory_files)f
("."\)\))141 3554 y Fi(The)i(follo)m(wing)i(pro)s(cedures)e(are)g
(\034le-t)m(yp)s(e)h(predicates)g(that)f(test)g(the)g(t)m(yp)s(e)g(of)f
(a)h(giv)m(en)g(\034le.)94 b(They)0 3667 y(are)46 b(applied)g(to)g(the)
g(same)g(argumen)m(ts)h(to)f(whic)m(h)g Fj(file_info_...)86
b Fi(is)45 b(applied;)54 b(the)46 b(sole)g(exception)g(is)0
3780 y Fj(file_symlink_fn)p Fi(,)30 b(whic)m(h)i(do)s(es)d(not)i(tak)m
(e)g(the)g(optional)g Fg(chase)h Fi(second)e(argumen)m(t.)43
b(F)-8 b(or)31 b(example,)329 3893 y Fj(is_file_directory_fn)46
b("/usr/dalbertz")470 b(=>)47 b(true)0 4029 y(val)g
(is_file_directory_fn)f(:)h(?chase:bool)g(->)g(string)g(->)g(bool)0
4166 y(val)g(is_file_directory_fd)f(:)h(fd)g(->)g(bool)0
4302 y(val)g(is_file_directory_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 4439 y(val)g(is_file_directory_out)f(:)h
(Pervasives.out_channel)g(->)g(bool)0 4575 y(val)g(is_file_fifo_fn)g(:)
f(?chase:bool)h(->)g(string)g(->)g(bool)0 4712 y(val)g(is_file_fifo_fd)
g(:)f(fd)h(->)g(bool)0 4848 y(val)g(is_file_fifo_in)g(:)f
(Pervasives.in_channel)h(->)g(bool)0 4985 y(val)g(is_file_fifo_out)g(:)
f(Pervasives.out_channel)h(->)g(bool)0 5122 y(val)g(is_file_regular_fn)
f(:)h(?chase:bool)g(->)g(string)g(->)g(bool)0 5258 y(val)g
(is_file_regular_fd)f(:)h(fd)g(->)g(bool)1905 5589 y
Fi(28)p eop
%%Page: 29 29
29 28 bop 0 91 a Fj(val)47 b(is_file_regular_in)f(:)h
(Pervasives.in_channel)g(->)g(bool)0 228 y(val)g(is_file_regular_out)f
(:)h(Pervasives.out_channel)g(->)g(bool)0 364 y(val)g
(is_file_socket_fn)f(:)h(?chase:bool)g(->)g(string)g(->)g(bool)0
501 y(val)g(is_file_socket_fd)f(:)h(fd)g(->)g(bool)0
637 y(val)g(is_file_socket_in)f(:)h(Pervasives.in_channel)g(->)g(bool)0
774 y(val)g(is_file_socket_out)f(:)h(Pervasives.out_channel)g(->)g
(bool)0 911 y(val)g(is_file_special_fn)f(:)h(?chase:bool)g(->)g(string)
g(->)g(bool)0 1047 y(val)g(is_file_special_fd)f(:)h(fd)g(->)g(bool)0
1184 y(val)g(is_file_special_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 1320 y(val)g(is_file_special_out)f(:)h(Pervasives.out_channel)g
(->)g(bool)0 1457 y(val)g(is_file_symlink_fn)f(:)h(string)g(->)g(bool)0
1593 y(val)g(is_file_symlink_fd)f(:)h(fd)g(->)g(bool)0
1730 y(val)g(is_file_symlink_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 1866 y(val)g(is_file_symlink_out)f(:)h(Pervasives.out_channel)g
(->)g(bool)0 2003 y(type)94 b(accessibility)47 b(=)94
2116 y(|)g(Accessible)227 2254 y Fi(A)m(ccess)31 b(p)s(ermitted.)94
2441 y Fj(|)47 b(Unaccessible)227 2579 y Fi(Can't)31
b(stat)g(\026)f(a)h(protected)g(directory)h(is)e(blo)s(c)m(king)h
(access.)94 2767 y Fj(|)47 b(Permission)227 2904 y Fi(P)m(ermission)32
b(denied.)94 3092 y Fj(|)47 b(No_directory)227 3230 y
Fi(Some)31 b(directory)h(do)s(esn't)e(exist.)94 3417
y Fj(|)47 b(Nonexistent)227 3555 y Fi(File)31 b(do)s(esn't)f(exist.)227
3743 y(The)h(follo)m(wing)h Fj(is_file_not_...)40 b Fi(pro)s(cedures)31
b(return)g(this)f(accessibilit)m(y)h(information)h(ab)s(out)f(a)227
3856 y(named)h(\034le/\034le)f(descriptor/c)m(hannel.)141
4067 y(A)k(\034le)g(is)g(considered)h(writeable)h(if)e(either)g(\(1\))h
(it)f(exists)g(and)g(is)g(writeable)h(or)g(\(2\))f(it)g(do)s(esn't)h
(exist)e(and)0 4180 y(the)g(directory)g(is)e(writeable.)51
b(Since)34 b(symlink)e(p)s(ermission)i(bits)f(are)g(ignored)h(b)m(y)g
(the)f(\034lesystem,)h(these)g(calls)0 4293 y(do)d(not)f(tak)m(e)h(a)f
Fg(chase)i Fi(\035ag.)141 4406 y(Note)27 b(that)g(these)g(pro)s
(cedures)g(use)g(the)g(pro)s(cess')f Fg(e\033e)-5 b(ctive)29
b Fi(user)e(and)g(group)g(ids)g(for)f(p)s(ermission)h(c)m(hec)m(king.)0
4519 y(P)m(osix)f(de\034nes)f(an)h Fj(access\(\))f Fi(function)h(that)g
(uses)e(the)i(pro)s(cess')f(real)h(uid)f(and)h(gids.)39
b(This)25 b(is)g(handy)g(for)g(setuid)0 4632 y(programs)36
b(that)g(w)m(ould)h(lik)m(e)f(to)f(\034nd)h(out)g(if)e(the)i(actual)g
(user)g(has)f(sp)s(eci\034c)g(righ)m(ts;)k(Cash)d(ough)m(t)g(to)g(pro)m
(vide)0 4745 y(this)30 b(functionalit)m(y)i(\(but)f(do)s(esn't)f(at)h
(the)g(curren)m(t)h(time\).)141 4857 y(There)e(are)g(sev)m(eral)f
(problems)h(with)g(these)g(pro)s(cedures.)40 b(First,)30
b(there's)f(an)h(atomicit)m(y)h(issue.)39 b(In)29 b(b)s(et)m(w)m(een)0
4970 y(c)m(hec)m(king)45 b(p)s(ermissions)f(for)f(a)g(\034le)h(and)g
(then)g(trying)g(an)g(op)s(eration)g(on)g(the)g(\034le,)j(another)e
(pro)s(cess)e(could)0 5083 y(c)m(hange)d(the)f(p)s(ermissions,)i(so)d
(a)h(return)h(v)-5 b(alue)39 b(from)f(these)h(functions)g(guaran)m
(tees)i(nothing.)67 b(Second,)41 b(the)0 5196 y(co)s(de)31
b(sp)s(ecial-cases)h(p)s(ermission)f(c)m(hec)m(king)i(when)f(the)g(uid)
g(is)f(ro)s(ot)g(\026)h(if)e(the)i(\034le)g(exists,)f(ro)s(ot)g(is)g
(assumed)h(to)0 5309 y(ha)m(v)m(e)j(the)g(requested)g(p)s(ermission.)52
b(Ho)m(w)m(ev)m(er,)37 b(not)e(ev)m(en)g(ro)s(ot)f(can)h(write)g(a)f
(\034le)h(that)g(is)e(on)i(a)f(read-only)h(\034le)1905
5589 y(29)p eop
%%Page: 30 30
30 29 bop 0 91 a Fi(system,)28 b(suc)m(h)g(as)f(a)g(CD)h(R)m(OM.)g(In)f
(this)g(case,)h Fj(is_file_not_writable_...)39 b Fi(will)28
b(lie,)g(sa)m(ying)g(that)g(ro)s(ot)g(has)0 204 y(write)36
b(access,)g(when)g(in)f(fact)g(the)h(op)s(ening)g(the)f(\034le)h(for)e
(write)i(access)f(will)h(fail.)55 b(Finally)-8 b(,)37
b(write)f(p)s(ermission)0 317 y(confounds)31 b(write)g(access)f(and)h
(create)g(access.)40 b(These)31 b(should)g(b)s(e)f(disen)m(tangled.)141
430 y(Some)f(of)e(these)h(problems)g(could)h(b)s(e)e(a)m(v)m(oided)i
(if)f(P)m(osix)g(had)g(a)g(real-uid)h(v)-5 b(arian)m(t)28
b(of)g(the)g Fj(access\(\))f Fi(call)h(w)m(e)0 543 y(could)f(use,)h
(but)f(the)g(atomicit)m(y)h(issue)f(is)f(still)h(a)f(problem.)41
b(In)26 b(the)h(\034nal)g(analysis,)h(the)f(only)f(w)m(a)m(y)i(to)f
(\034nd)g(out)g(if)0 656 y(y)m(ou)j(ha)m(v)m(e)h(the)e(righ)m(t)i(to)f
(p)s(erform)g(an)f(op)s(eration)i(on)f(a)f(\034le)h(is)f(to)h(try)f
(and)h(op)s(en)g(it)f(for)h(the)g(desired)g(op)s(eration.)0
769 y(These)f(p)s(ermission-c)m(hec)m(king)j(functions)e(are)f(mostly)g
(in)m(tended)i(for)e(script-writing,)i(where)f(lo)s(ose)f(guaran)m
(tees)0 882 y(are)i(tolerated.)0 1018 y Fj(val)47 b
(is_file_not_readable_fn)f(:)h(string)g(->)g(accessibility)0
1155 y(val)g(is_file_not_readable_fd)f(:)h(fd)g(->)g(accessibility)0
1291 y(val)g(is_file_not_readable_in)f(:)h(Pervasives.in_channel)g(->)g
(accessibility)0 1428 y(val)g(is_file_not_readable_out)f(:)h
(Pervasives.out_channel)g(->)g(accessibility)0 1564 y(val)g
(is_file_not_writable_fn)f(:)h(string)g(->)g(accessibility)0
1701 y(val)g(is_file_not_writable_fd)f(:)h(fd)g(->)g(accessibility)0
1837 y(val)g(is_file_not_writable_in)f(:)h(Pervasives.in_channel)g(->)g
(accessibility)0 1974 y(val)g(is_file_not_writable_out)f(:)h
(Pervasives.out_channel)g(->)g(accessibility)0 2110 y(val)g
(is_file_not_executable_fn)f(:)h(string)g(->)g(accessibility)0
2247 y(val)g(is_file_not_executable_fd)f(:)h(fd)g(->)g(accessibility)0
2384 y(val)g(is_file_not_executable_in)f(:)h(Pervasives.in_channel)g
(->)g(accessibility)0 2520 y(val)g(is_file_not_executable_out)f(:)h
(Pervasives.out_channel)g(->)g(accessibility)141 2657
y Fi(The)21 b(follo)m(wing)h Fj(is_file_...)36 b Fi(pro)s(cedures)21
b(are)g(the)f(logical)i(negation)f(of)f(the)h(preceding)h
Fj(is_file_not_...)0 2770 y Fi(pro)s(cedures.)41 b(Refer)30
b(to)g(them)h(for)g(a)f(discussion)g(of)g(their)h(problems)g(and)g
(limitations.)0 2906 y Fj(val)47 b(is_file_readable_fn)f(:)h(string)g
(->)g(bool)0 3043 y(val)g(is_file_readable_fd)f(:)h(fd)g(->)g(bool)0
3179 y(val)g(is_file_readable_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 3316 y(val)g(is_file_readable_out)f(:)h(Pervasives.out_channel)
g(->)g(bool)0 3452 y(val)g(is_file_writable_fn)f(:)h(string)g(->)g
(bool)0 3589 y(val)g(is_file_writable_fd)f(:)h(fd)g(->)g(bool)0
3725 y(val)g(is_file_writable_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 3862 y(val)g(is_file_writable_out)f(:)h(Pervasives.out_channel)
g(->)g(bool)0 3998 y(val)g(is_file_executable_fn)f(:)h(string)g(->)g
(bool)0 4135 y(val)g(is_file_executable_fd)f(:)h(fd)g(->)g(bool)0
4271 y(val)g(is_file_executable_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 4408 y(val)g(is_file_executable_out)f(:)h
(Pervasives.out_channel)g(->)g(bool)0 4544 y(type)94
b(existing)47 b(=)94 4657 y(|)g(Existing)227 4795 y Fi(Exists.)94
4983 y Fj(|)g(Unexisting)227 5121 y Fi(Do)s(esn't)30
b(exist.)94 5308 y Fj(|)47 b(Search_denied)1905 5589
y Fi(30)p eop
%%Page: 31 31
31 30 bop 227 91 a Fi(Some)31 b(protected)h(directory)f(is)f(blo)s(c)m
(king)h(the)g(searc)m(h.)227 279 y(What)g(the)g(follo)m(wing)g
Fj(file_not_exists_...)40 b Fi(return.)0 490 y Fj(val)47
b(file_not_exists_fn)f(:)h(?chase:bool)g(->)g(string)g(->)g(existing)0
627 y(val)g(file_not_exists_fd)f(:)h(fd)g(->)g(existing)0
763 y(val)g(file_not_exists_in)f(:)h(Pervasives.in_channel)g(->)g
(existing)0 900 y(val)g(file_not_exists_out)f(:)h
(Pervasives.out_channel)g(->)g(existing)141 1036 y Fi(The)31
b(logical)g(negations)h(of)d(the)i(preceding)h(functions.)0
1173 y Fj(val)47 b(is_file_existing_fn)f(:)h(?chase:bool)g(->)g(string)
g(->)g(bool)0 1309 y(val)g(is_file_existing_fd)f(:)h(fd)g(->)g(bool)0
1446 y(val)g(is_file_existing_in)f(:)h(Pervasives.in_channel)g(->)g
(bool)0 1582 y(val)g(is_file_existing_out)f(:)h(Pervasives.out_channel)
g(->)g(bool)0 1850 y Ff(3.4)112 b(Directories,)35 b(globbing)i(and)h
(temp)f(\034les)0 2045 y Fj(val)47 b(fold_directory)g(:)g(\('a)f(->)h
(string)g(->)g('a\))g(->)g('a)g(->)g(string)g(->)g('a)227
2183 y(fold_directory)30 b Fi(folds)g(the)h(\034le)f(names)h(of)f(a)g
(directory)i(in)e(the)h(same)f(w)m(a)m(y)i(as)e Fj(fold_input)p
Fi([3.2.6],)227 2295 y Fg(exc)-5 b(ept)33 b Fi(`)p Fj(.)p
Fi(')40 b(and)31 b(`)p Fj(..)p Fi('.)0 2620 y Fj(val)47
b(directory_files)g(:)f(?dot_files:bool)h(->)g(string)g(->)g(string)g
(list)227 2757 y(directory_files)30 b Fg(dir)g Fi(return)h(the)g(list)f
(of)g(\034les)g(in)h(directory)g Fg(dir)p Fi(.)40 b(The)31
b Fg(\003dot_\034les)g Fi(\035ag)g(\(default)227 2870
y(false\))f(causes)f(dot)h(\034les)f(to)h(b)s(e)f(included)i(in)e(the)h
(list.)40 b(Regardless)30 b(of)f(the)h(v)-5 b(alue)29
b(of)g Fg(\003dot_\034les)p Fi(,)i(the)e(t)m(w)m(o)227
2983 y(\034les)i Fj(.)40 b Fi(and)31 b Fj(..)40 b Fi(are)30
b Fg(never)i Fi(returned.)227 3096 y(The)f(directory)g
Fg(dir)f Fi(is)g(not)h(prep)s(ended)g(to)g(eac)m(h)g(\034le)g(name)g
(in)f(the)h(result)g(list.)40 b(That)31 b(is,)227 3209
y Fj(directory_files)47 b("/etc")30 b Fi(returns)415
3322 y Fj(["chown";)47 b("exports";)g("fstab";)f(...])227
3435 y Fg(not)415 3548 y Fj(["/etc/chown";)h("/etc/exports";)f
("/etc/fstab";)h(...])227 3661 y Fi(T)-8 b(o)31 b(use)g(the)f(\034les)h
(in)f(returned)i(list,)e(the)h(programmer)h(can)f(either)g(man)m(ually)
h(prep)s(end)f(the)f(directory:)415 3774 y Fj(List.map)47
b(\(fun)g(f)g(->)g(file_name_as_directory)f(dir)h(^)g(f\))g
(\(directory_files)g(dir\))227 3887 y Fi(or)31 b(cd)f(to)h(the)f
(directory)i(b)s(efore)e(using)g(the)h(\034le)g(names:)415
3999 y Fj(with_cwd)47 b(dir)g(\(fun)g(\(\))g(->)g(List.iter)f
(delete_file)h(\(directory_files)g("."\)\))227 4112 y
Fi(or)31 b(use)f(the)h Fj(glob)f Fi(pro)s(cedure,)h(de\034ned)h(b)s
(elo)m(w.)227 4225 y(A)e(directory)h(list)g(can)f(b)s(e)g(generated)i
(b)m(y)f Fj(run_with_strings)46 b(\(fun)h(\(\))g(->)g(exec_path)g("ls")
g([]\))p Fi(,)227 4338 y(but)31 b(this)f(is)g(unreliable,)i(as)e
(\034lenames)h(with)g(whitespace)h(in)e(their)h(names)g(will)g(b)s(e)f
(split)g(in)m(to)i(separate)227 4451 y(en)m(tries.)42
b(Using)30 b Fj(directory_files)g Fi(is)g(reliable.)0
4662 y Fj(val)47 b(glob)g(:)g(string)g(list)f(->)h(string)g(list)227
4800 y(glob)g([)p Fg(p)-5 b(atterns)p Fj(])31 b Fi(glob)g(eac)m(h)g
(pattern)h(against)e(the)h(\034lesystem)g(and)f(return)i(the)e(sorted)h
(list.)227 4913 y(Duplicates)g(are)g(not)g(remo)m(v)m(ed.)42
b(P)m(atterns)32 b(matc)m(hing)g(nothing)g(are)e(not)h(included)h
(literally)-8 b(.)41 b(\(Wh)m(y)227 5026 y(b)s(other)31
b(to)g(men)m(tion)h(suc)m(h)e(a)h(silly)f(p)s(ossibilit)m(y?)40
b(Because)31 b(that)f(is)g(what)h(sh)f(do)s(es.\))41
b(C)30 b(shell)g({a,b,c})227 5139 y(patterns)h(are)g(expanded.)41
b(Bac)m(kslash)31 b(quotes)f(c)m(haracters,)i(turning)g(o\033)e(the)h
(sp)s(ecial)f(meaning)h(of)f({,)h(},)227 5252 y(*,)g([,)f(])g(and)h(?.)
1905 5589 y(31)p eop
%%Page: 32 32
32 31 bop 227 91 a Fi(Note)31 b(that)g(the)f(rules)h(of)f(bac)m(kslash)
h(for)f(Caml)h(strings)f(and)h(glob)g(patterns)g(w)m(ork)g(together)g
(to)g(require)227 204 y(four)e(bac)m(kslashes)g(in)g(a)g(ro)m(w)g(to)g
(sp)s(ecify)f(a)h(single)g(literal)g(bac)m(kslash.)41
b(F)-8 b(ortunately)g(,)31 b(it)e(is)f(v)m(ery)h(rare)g(that)227
317 y(a)i(bac)m(kslash)f(o)s(ccurs)h(in)f(a)g(Unix)g(\034le)h(name.)227
430 y(A)f(glob)h(subpattern)h(will)e(not)h(matc)m(h)h(against)f(dot)f
(\034les)h(unless)f(the)h(\034rst)f(c)m(haracter)i(of)e(the)227
543 y(subpattern)i(is)e(a)g(literal)h(\020)8 b Fj(.)p
Fi(\021.)40 b(F)-8 b(urther,)32 b(a)e(dot)h(subpattern)h(will)f(not)f
(matc)m(h)i(the)f(\034les)f Fj(.)40 b Fi(or)31 b Fj(..)40
b Fi(unless)227 656 y(it)31 b(is)f(a)g(constan)m(t)i(pattern,)f(as)f
(in)h Fj(glob)46 b("../*/*.c")p Fi(.)41 b(So)30 b(a)g(directory's)h
(dot)g(\034les)g(can)f(b)s(e)g(reliably)227 769 y(generated)i(with)f
(the)g(simple)f(glob)h(pattern)h Fj(".*")p Fi(.)40 b(Some)31
b(examples:)321 882 y Fj(\(*)47 b(All)g(the)g(C)g(and)g(#include)g
(files)f(in)h(my)g(directory.)g(*\))415 995 y(glob)g(["*.c";)g("*.h"])
321 1108 y(\(*)g(All)g(the)g(C)g(files)g(in)g(this)g(directory)f(and)h
(its)g(immediate)g(subdirectories.)g(*\))415 1220 y(glob)g(["*.c";)g
("*/*.c"])321 1333 y(\(*)g(All)g(the)g(C)g(files)g(in)g(the)g(lexer)f
(and)h(parser)g(dirs.)g(*\))415 1446 y(glob)g(["lexer/*.c";)g
("parser/*.c"])415 1559 y(glob)g(["{lexer,parser}/*.c"])321
1672 y(\(*)g(All)g(the)g(C)g(files)g(in)g(the)g(strange)f(directory)h
("{lexer,parser}".)g(*\))415 1785 y(glob)g("\\{lexer,parser\\}/*.c"])
321 1898 y(\(*)g(All)g(the)g(files)g(ending)g(in)g("*",)f(e.g.,)h
(["foo*";)g("bar*"])g(*\))462 2011 y(glob)g(["*\\\\*"])368
2124 y(\(*)g(All)g(files)g(containing)g(the)g(string)f("lexer",)509
2237 y(e.g.,)h(["mylexer.c";)g("lexer1.notes"])f(*\))462
2350 y(glob)h(["*lexer*"])368 2462 y(\(*)g(Either)g(["lexer"])g(or)g
([].)g(*\))462 2575 y(glob)g(["lexer"])227 2688 y Fi(If)30
b(the)g(\034rst)h(c)m(haracter)h(of)e(the)h(pattern)g(\(after)g
(expanding)g(braces\))g(is)f(a)g(slash,)g(the)h(searc)m(h)g(b)s(egins)g
(at)227 2801 y(ro)s(ot;)g(otherwise,)g(the)g(searc)m(h)g(b)s(egins)f
(in)h(the)g(curren)m(t)g(w)m(orking)h(directory)-8 b(.)227
2914 y(If)30 b(the)g(last)h(c)m(haracter)h(of)e(the)h(pattern)g
(\(after)g(expanding)g(braces\))g(is)f(a)g(slash,)g(then)h(the)g
(result)227 3027 y(matc)m(hes)h(m)m(ust)f(b)s(e)f(directories,)h
Fg(e.g.)p Fi(,)415 3140 y Fj(glob)47 b(["/usr/man/man?/"])469
b(=>)47 b(["/usr/man/man1/";)g("/usr/man/man2/";)f(...])227
3253 y Fi(Globbing)32 b(can)e(sometimes)h(b)s(e)f(useful)g(when)h(w)m
(e)h(need)e(a)h(list)f(of)g(a)g(directory's)h(\034les)g(where)g(eac)m
(h)227 3366 y(elemen)m(t)h(in)f(the)f(list)h(includes)g(the)f(pathname)
i(for)e(the)h(\034le.)41 b(Compare:)415 3479 y Fj(directory_files)47
b("../include/*")140 b(=>)47 b(["cig.h";)g("decls.h";)g(...])415
3592 y(glob)g(["../include/*"])282 b(=>)46 b(["../include/cig.h";)h
("../include/decls.h";)f(...])0 3916 y(val)h(glob_quote)g(:)g(string)f
(->)h(string)227 4054 y(glob_quote)30 b Fg(str)g Fi(returns)h(a)f
(constan)m(t)i(glob)f(pattern)g(that)g(exactly)g(matc)m(hes)g
Fg(str)p Fi(.)40 b(All)30 b(wild-card)227 4166 y(c)m(haracters)i(in)f
Fg(str)f Fi(are)g(quoted)h(with)g(a)f(bac)m(kslash.)0
4491 y Fj(type)94 b(file_match_pattern)46 b(=)94 4603
y(|)h(String_pat)g(of)g(string)94 4716 y(|)g(Regexp_pat)g(of)g
(Pcre.regexp)94 4829 y(|)g(Predicate_pat)g(of)g(\(string)f(->)h(bool\))
0 4966 y(val)g(file_match)g(:)94 5079 y(?dot_files:bool)g(->)g(string)f
(->)h(file_match_pattern)g(list)g(->)g(string)g(list)227
5217 y(file_match)30 b Fg(r)-5 b(o)g(ot)33 b([p)-5 b(at)1055
5231 y Fb(1)1095 5217 y Fg(;)32 b(p)-5 b(at)1272 5231
y Fb(2)1312 5217 y Fg(;)32 b Fd(:)15 b(:)g(:)q Fg(])30
b Fi(pro)m(vides)h(a)f(more)h(p)s(o)m(w)m(erful)h(\034le-matc)m(hing)h
(service,)d(at)h(the)227 5329 y(exp)s(ense)f(of)g(a)h(less)e(con)m(v)m
(enien)m(t)k(notation.)42 b(It)30 b(is)g(in)m(termediate)j(in)d(p)s(o)m
(w)m(er)i(b)s(et)m(w)m(een)g(most)e(shell)1905 5589 y(32)p
eop
%%Page: 33 33
33 32 bop 227 91 a Fi(matc)m(hing)32 b(mac)m(hinery)g(and)f(recursiv)m
(e)g Fj(find\(1\))p Fi(.)227 204 y(Eac)m(h)h Fj(String_pat)e
Fi(or)g Fj(Regexp_pat)g Fi(pattern)i(is)e(a)g(regexp.)41
b(The)31 b(pro)s(cedure)g(searc)m(hes)g(from)g Fg(r)-5
b(o)g(ot)p Fi(,)227 317 y(matc)m(hing)32 b(the)f(\034rst-lev)m(el)h
(\034les)e(against)h(pattern)g Fg(p)-5 b(at)2101 331
y Fb(1)2141 317 y Fi(,)30 b(the)h(second-lev)m(el)h(\034les)e(against)h
Fg(p)-5 b(at)3460 331 y Fb(2)3500 317 y Fi(,)30 b(and)h(so)227
430 y(forth.)41 b(The)31 b(list)f(of)g(\034les)g(matc)m(hing)i(the)f
(whole)g(path)g(pattern)h(is)e(returned,)h(in)g(sorted)g(order.)227
543 y(The)g(\034les)f Fj(.)41 b Fi(and)30 b Fj(..)40
b Fi(are)31 b(nev)m(er)g(matc)m(hed.)42 b(Other)32 b(dot)e(\034les)h
(are)f(only)h(matc)m(hed)h(if)e(the)g Fg(\003dot_\034les)227
656 y Fi(argumen)m(t)j(is)c Fj(true)p Fi(.)227 769 y(A)h(giv)m(en)g
Fg(p)-5 b(at)677 783 y Fa(i)735 769 y Fi(pattern)31 b(is)f(matc)m(hed)h
(as)f(a)f(regexp,)i(so)e(it)h(is)f(not)h(forced)h(to)f(matc)m(h)h(the)f
(en)m(tire)h(\034le)f(name.)227 882 y(E.g.,)h(pattern)h
Fj("t")e Fi(matc)m(hes)i(an)m(y)e(\034le)h(con)m(taining)h(a)f
(\020t\021)38 b(in)30 b(its)g(name,)i(while)f(pattern)g
Fj("^t$")f Fi(matc)m(hes)227 995 y(only)h(a)f(\034le)h(whose)f(en)m
(tire)i(name)f(is)f(\020)8 b Fj(t)p Fi(\021.)227 1108
y(The)31 b Fg(p)-5 b(at)530 1122 y Fa(i)589 1108 y Fi(patterns)31
b(can)g(b)s(e)f(more)h(general)g(than)g(stated)g(ab)s(o)m(v)m(e.)306
1235 y Fe(\017)46 b Fi(A)30 b(single)h(pattern)g(can)g(sp)s(ecify)e(m)m
(ultiple)j(lev)m(els)f(of)f(the)h(path)g(b)m(y)f(em)m(b)s(edding)i
Fj(/)e Fi(c)m(haracters)397 1348 y(within)i(the)e(pattern.)42
b(F)-8 b(or)31 b(example,)g(the)g(pattern)g Fj("a/b/c")f
Fi(giv)m(es)h(a)f(matc)m(h)i(equiv)-5 b(alen)m(t)31 b(to)f(the)397
1461 y(list)g(of)g(patterns)i Fj("a";)46 b("b";)h("c")p
Fi(.)306 1594 y Fe(\017)f Fi(A)30 b Fj(Predicate_pat)g
Fi(pattern)h(is)f(a)h(pro)s(cedure,)g(whic)m(h)h(is)e(used)g(as)g(a)g
(matc)m(h)i(predicate.)42 b(It)30 b(will)h(b)s(e)397
1707 y(rep)s(eatedly)g(called)g(with)g(a)g(candidate)g(\034le-name)h
(to)f(test.)40 b(The)31 b(\034le-name)h(will)e(b)s(e)h(the)f(en)m(tire)
397 1820 y(path)h(accum)m(ulated.)43 b(If)30 b(the)g(pro)s(cedure)i
(raises)e(an)g(error)h(condition,)h Fj(file_match)e Fi(will)h(catc)m(h)
g(the)397 1932 y(error)g(and)g(treat)g(it)f(as)g(a)g(failed)g(matc)m
(h.)42 b(This)31 b(k)m(eeps)f Fj(file_match)g Fi(from)g(b)s(eing)h(blo)
m(wn)g(out)g(of)e(the)397 2045 y(w)m(ater)j(b)m(y)e(applying)i(tests)e
(to)g(dangling)i(symlinks)d(and)i(other)g(similar)g(situations.)227
2179 y(Some)g(examples:)274 2291 y Fj(file_match)47 b("/usr/lib")g
([String_pat)f("m$";)h(String_pat)g("^tab"])462 2404
y(=>)g(["/usr/lib/term/tab300";)g("/usr/lib/term/tab300-12";)f(...])274
2517 y(file_match)h(".")g([String_pat)g("^lex|parse|codegen$";)f
(String_pat)h("\\\\\\\\.c$"])462 2630 y(=>)g(["lex/lex.c";)g
("lex/lexinit.c";)f("lex/test.c";)h("parse/actions.c";)462
2743 y("parse/error.c";)g("parse/test.c";)f("codegen/io.c";)h
("codegen/walk.c"])274 2856 y(file_match)g(".")94 b([String_pat)47
b("^lex|parse|codegen$/\\\\\\\\.c$"\))462 2969 y(=>)g(\(*)g(The)g
(same.)g(*\))274 3082 y(file_match)g(".")g([Predicate_pat)g
(is_file_directory_fn])462 3195 y(=>)g(\(*)g(All)g(subdirs)g(of)g(the)g
(current)f(directory.)h(*\))274 3308 y(file_match)g("/")g
([Predicate_pat)g(is_file_directory_fn])415 3421 y(=>)g(["/bin";)g
("/dev";)g("/etc";)g("/tmp";)f("/usr"])556 3533 y(\(*)h(All)g(subdirs)g
(of)g(root.)g(*\))274 3646 y(file_match)g(".")94 b([String_pat)47
b("\\\\\\\\.c"])415 3759 y(=>)g(\(*)g(All)g(the)g(C)g(files)g(in)g(my)g
(directory.)f(*\))274 3872 y(let)h(ext)g(extension)g(=)g(fun)g(fn)g(->)
g(String_13.has_suffix)f(fn)h(extension)g(in)274 3985
y(let)g(trew)g(_)g(->)g(true)g(in)274 4098 y(file_match)g(".")g
([String_pat)g("./\\\\\\\\.c"];)274 4211 y(file_match)g(".")g
([String_pat)g("";)g(String_pat)f("\\\\\\\\.c"];)274
4324 y(file_match)h(".")g([Predicate_pat)g(trew;)f(String_pat)h
("\\\\\\\\.c"];)274 4437 y(file_match)g(".")g([Predicate_pat)g(trew;)f
(Predicate_pat)h(\(ext)g(".c"\)])415 4550 y(=>)g(\(*)g(All)g(the)g(C)g
(files)g(of)g(all)g(my)f(immediate)h(subdirs.)g(*\))274
4663 y(file_match)g(".")g(["lexer"])415 4775 y(=>)g(["mylexer.c";)g
("lexer.notes"])556 4888 y(\(*)g(Compare)g(with)g(glob)g(["lexer"],)f
(above.)h(*\))227 5001 y Fi(Note)31 b(that)f(when)h Fg(r)-5
b(o)g(ot)31 b Fi(is)f(the)g(curren)m(t)i(w)m(orking)f(directory)g(\()p
Fj(".")p Fi(\),)g(when)g(it)f(is)f(con)m(v)m(erted)k(to)d(directory)227
5114 y(form,)h(it)f(b)s(ecomes)h Fj("")p Fi(,)f(and)h(do)s(esn't)f(sho)
m(w)h(up)g(in)f(the)h(result)g(\034le-names.)227 5227
y(It)f(is)g(regrettable)h(that)g(the)f(regexp)h(wild)f(card)h(c)m(har,)
g(\020)8 b Fj(.)p Fi(\021,)30 b(is)g(suc)m(h)g(an)g(imp)s(ortan)m(t)i
(\034le)e(name)h(literal,)g(as)227 5340 y(dot-\034le)h(pre\034x)e(and)h
(extension)g(delimiter.)1905 5589 y(33)p eop
%%Page: 34 34
34 33 bop 0 91 a Fj(val)47 b(create_temp_file)g(:)f(?prefix:string)h
(->)g(unit)g(->)g(string)227 227 y(create_temp_file)g(\(\))30
b Fi(creates)h(a)f(new)h(temp)s(orary)g(\034le)g(and)f(return)i(its)e
(name.)41 b(The)31 b(optional)227 340 y(argumen)m(t)i(sp)s(eci\034es)d
(the)g(\034lename)i(pre\034x)f(to)f(use,)g(and)h(defaults)g(to)f
Fj("/usr/tmp/)p Fg(pid)p Fj(")p Fi(,)g(where)h Fg(pid)f
Fi(is)227 453 y(the)h(curren)m(t)h(pro)s(cess')e(id.)41
b(The)30 b(pro)s(cedure)i(generates)f(a)f(sequence)h(of)f(\034lenames)h
(that)g(ha)m(v)m(e)g Fg(\003pr)-5 b(e\034x)32 b Fi(as)227
566 y(a)c(common)h(pre\034x,)g(lo)s(oking)f(for)f(a)h(\034lename)h
(that)g(do)s(esn't)e(already)i(exist)e(in)h(the)g(\034le)h(system.)39
b(When)28 b(it)227 679 y(\034nds)j(one,)g(it)f(creates)h(it,)f(with)h
(p)s(ermission)g Fj(0o600)f Fi(and)h(returns)g(the)f(\034lename.)42
b(\(The)31 b(\034le)g(p)s(ermission)227 792 y(can)g(b)s(e)f(c)m(hanged)
i(to)f(a)f(more)h(p)s(ermissiv)m(e)f(p)s(ermission)h(with)g
Fj(set_file_mode)f Fi(after)g(b)s(eing)h(created\).)227
905 y(This)g(\034le)f(is)g(guaran)m(teed)j(to)d(b)s(e)g(brand)i(new.)40
b(No)31 b(other)g(pro)s(cess)f(will)g(ha)m(v)m(e)i(it)e(op)s(en.)41
b(This)30 b(pro)s(cedure)227 1017 y(do)s(es)g(not)h(simply)f(return)h
(a)g(\034lename)g(that)g(is)f(v)m(ery)h(lik)m(ely)f(to)h(b)s(e)f(un)m
(used.)41 b(It)30 b(returns)h(a)f(\034lename)i(that)227
1130 y(de\034nitely)g(did)e(not)h(exist)f(at)g(the)h(momen)m(t)h
Fj(create_temp_file)e Fi(created)h(it.)227 1243 y(It)f(is)g(not)h
(necessary)f(for)g(the)h(pro)s(cess')f(pid)h(to)f(b)s(e)g(a)h(part)f
(of)g(the)h(\034lename)h(for)e(the)g(uniqueness)227 1356
y(guaran)m(tees)i(to)f(hold.)41 b(The)31 b(pid)f(comp)s(onen)m(t)i(of)e
(the)h(default)g(pre\034x)f(simply)h(serv)m(es)f(to)g(scatter)h(the)227
1469 y(name)g(searc)m(hes)g(in)m(to)h(sparse)e(regions,)h(so)f(that)h
(collisions)g(are)f(less)g(lik)m(ely)h(to)f(o)s(ccur.)41
b(This)30 b(sp)s(eeds)227 1582 y(things)h(up,)g(but)f(do)s(es)g(not)h
(a\033ect)g(correctness.)227 1695 y(Securit)m(y)h(note:)41
b(doing)31 b(i/o)g(to)f(\034les)g(created)i(this)e(w)m(a)m(y)h(in)g
Fj(/usr/tmp/)f Fi(is)g(not)h(necessarily)f(secure.)227
1808 y(General)h(users)f(ha)m(v)m(e)i(write)f(access)f(to)h
Fj(/usr/tmp/)p Fi(,)f(so)g(ev)m(en)h(if)e(an)i(attac)m(k)m(er)h(cannot)
f(access)g(the)f(new)227 1921 y(temp)h(\034le,)g(he)g(can)f(delete)i
(it)e(and)h(replace)g(it)g(with)f(one)h(of)f(his)g(o)m(wn.)42
b(A)30 b(subsequen)m(t)h(op)s(en)f(of)g(this)227 2034
y(\034lename)i(will)f(then)g(giv)m(e)f(y)m(ou)h(his)f(\034le,)h(to)g
(whic)m(h)g(he)g(has)f(access)g(righ)m(ts.)41 b(There)32
b(are)e(sev)m(eral)h(w)m(a)m(ys)g(to)227 2147 y(defeat)g(this)f(attac)m
(k,)306 2274 y Fe(\017)46 b Fi(Use)30 b Fj(temp_file_iterate)p
Fi(,)g(b)s(elo)m(w,)h(to)g(return)g(the)g(\034le)f(descriptor)i(allo)s
(cated)f(when)g(the)g(\034le)f(is)397 2387 y(op)s(ened.)41
b(This)31 b(will)f(w)m(ork)h(if)f(the)h(\034le)g(only)f(needs)h(to)f(b)
s(e)g(op)s(ened)h(once.)306 2514 y Fe(\017)46 b Fi(If)30
b(the)g(\034le)h(needs)g(to)f(b)s(e)g(op)s(ened)h(t)m(wice)h(or)e
(more,)h(create)g(it)g(in)f(a)h(protected)g(directory)-8
b(,)32 b Fg(e.g.)p Fi(,)397 2627 y Fj($HOME)p Fi(.)306
2755 y Fe(\017)46 b Fi(Ensure)31 b(that)g Fj(/usr/tmp)f
Fi(has)g(its)g(stic)m(ky)h(bit)f(set.)41 b(This)30 b(requires)h(system)
e(administrator)397 2868 y(privileges.)0 3088 y Fj(val)47
b(set_temp_file_template)f(:)h(string)g(*)g(string)g(->)g(unit)0
3224 y(val)g(with_temp_file_template)f(:)h(string)g(*)g(string)g(->)g
(\(unit)g(->)g('a\))g(->)g('a)227 3360 y Fi(The)31 b(actual)g(default)g
(pre\034x)g(used)f(b)m(y)h Fj(create_temp_file)f Fi(and)g(template)i
(for)e Fj(temp_file_iterate)227 3473 y Fi(can)h(b)s(e)f(o)m(v)m
(erridden)j(for)d(increased)h(securit)m(y)-8 b(,)32 b(and)e(is)g(con)m
(trolled)j(b)m(y)d(these)h(t)m(w)m(o)g(pro)s(cs,)g(whic)m(h)g(mo)s
(dify)227 3586 y(it)g(p)s(ermanen)m(tly)g(\()p Fj
(set_temp_file_template)p Fi(\))f(or)h(temp)s(orarily)g(\()p
Fj(with_temp_file_template)p Fi(\).)227 3699 y(This)g(template)g(is)f
(a)h(pair)f(of)g(strings)h(used)f(as)g(pre\034x)h(and)g(su\036x)f(for)g
(the)g(names;)h(it)g(defaults)f(to)227 3812 y Fj(\("/usr/tmp/)p
Fg(pid)p Fj(.",)47 b(""\))p Fi(,)30 b(where)h Fg(pid)f
Fi(is)g(the)h(curren)m(t)h(pro)s(cess')e(pro)s(cess)g(id.)40
b(File)31 b(names)f(are)227 3924 y(generated)i(b)m(y)f(inserting)g(a)f
(v)-5 b(arying)31 b(string)f(b)s(et)m(w)m(een)i(them.)0
4130 y Fj(val)47 b(temp_file_iterate)f(:)94 4243 y(?template:string)h
(*)g(string)f(->)h(\(string)g(->)g('a)g(option\))g(->)g('a)227
4378 y Fi(This)31 b(pro)s(cedure)g(can)g(b)s(e)f(used)g(to)h(p)s
(erform)f(certain)i(atomic)f(transactions)g(on)g(the)f(\034le)h(system)
227 4491 y(in)m(v)m(olving)h(\034lenames.)41 b(Some)31
b(examples:)306 4619 y Fe(\017)46 b Fi(Linking)31 b(a)g(\034le)f(to)h
(a)f(fresh)g(bac)m(kup)i(temp)f(name.)306 4746 y Fe(\017)46
b Fi(Creating)32 b(and)f(op)s(ening)g(an)f(un)m(used,)i(secure)e(temp)h
(\034le.)306 4874 y Fe(\017)46 b Fi(Creating)32 b(an)e(un)m(used)i
(temp)s(orary)f(directory)-8 b(.)227 5001 y(This)31 b(pro)s(cedure)g
(uses)f Fg(template)h Fi(to)f(generate)i(a)e(series)h(of)e(trial)i
(\034le)g(names)g(\(see)227 5114 y Fj(with_temp_file_template)p
Fi(\).)227 5227 y(The)g(second)g(argumen)m(t)h(is)e(a)g
Fg(maker)h Fi(pro)s(cedure)h(whic)m(h)f(is)f(serially)h(called)g(on)f
(eac)m(h)i(\034le)f(name)227 5340 y(generated.)42 b(It)30
b(returns)h(one)g(v)-5 b(alue)30 b(wrapp)s(ed)h(in)g(an)f(option)i(t)m
(yp)s(e.)40 b(If)30 b(it)g(is)g Fj(None)g Fi(or)h(if)e
Fg(maker)i Fi(raises)1905 5589 y(34)p eop
%%Page: 35 35
35 34 bop 227 91 a Fj(Unix.Unix_error)47 b(Unix.EEXIST)g(...)p
Fi(,)30 b Fj(temp_file_iterate)g Fi(will)g(lo)s(op,)h(generating)h(a)e
(new)h(\034le)227 204 y(name)g(and)g(calling)g Fg(maker)g
Fi(again.)42 b(If)29 b(the)i(returned)g(v)-5 b(alue)31
b(is)f Fj(Some)47 b(v)p Fi(,)30 b(the)h(lo)s(op)f(is)g(terminated,)227
317 y(returning)i Fj(v)p Fi(.)227 430 y(After)e(a)h(n)m(um)m(b)s(er)h
(of)e(unsuccessful)g(trials,)g Fj(temp_file_iterate)g
Fi(ma)m(y)h(giv)m(e)g(up)f(and)h(signal)g(an)f(error.)227
543 y(Th)m(us,)h(if)f(w)m(e)h(ignore)h(its)e(optional)h
Fg(template)g Fi(argumen)m(t,)i Fj(create_temp_file)c
Fi(could)j(b)s(e)e(de\034ned)h(as:)321 769 y Fj(let)47
b(create_temp_file)g(\(\))g(=)415 882 y(let)g(flags)g(=)g([O_WRONLY;)g
(O_CREAT;)f(O_EXCL])h(in)415 995 y(temp_file_iterate)509
1108 y(\(fun)g(fname)g(->)650 1220 y(ignore)g(\(Io_3_2.close_fd)g
(\(Io_3_2.open_fdes)f(~perms:0o600)h(fname)g(flags\)\);)650
1333 y(Some)g(fname\))227 1559 y Fi(T)-8 b(o)31 b(rename)h(a)e(\034le)h
(to)f(a)h(temp)s(orary)g(name:)321 1785 y Fj(temp_file_iterate)415
1898 y(~template:)47 b(\(".#temp.",)g(""\))563 b(\(*)47
b(Keep)g(link)g(in)g(cwd.)g(*\))415 2011 y(\(fun)g(backup)g(->)g
(create_hard_link)f(old_file)h(backup;)g(Some)g(backup\);)321
2124 y(delete_file)g(old_file)227 2350 y Fi(Recall)31
b(that)g(Cash)f(rep)s(orts)g(syscall)g(failure)h(b)m(y)g(raising)f(an)h
(error)g(exception,)g(not)g(b)m(y)g(returning)g(an)227
2462 y(error)g(co)s(de.)41 b(This)30 b(is)g(critical)i(to)e(to)h(this)f
(example)h(\026)f(the)h(programmer)h(can)f(assume)f(that)h(if)f(the)227
2575 y Fj(temp_file_iterate)g Fi(call)h(returns,)g(it)f(returns)h
(successully)-8 b(.)41 b(So)30 b(the)h(follo)m(wing)h
Fj(delete_file)e Fi(call)227 2688 y(can)h(b)s(e)f(reliably)h(in)m(v)m
(ok)m(ed,)h(safe)e(in)g(the)h(kno)m(wledge)h(that)f(the)g(bac)m(kup)g
(link)f(has)g(de\034nitely)i(b)s(een)227 2801 y(established.)227
2914 y(T)-8 b(o)31 b(create)h(a)e(unique)h(temp)s(orary)g(directory:)
321 3140 y Fj(temp_file_iterate)415 3253 y(~template:)47
b(\("/usr/tmp/tempdir.",)f(""\))415 3366 y(\(fun)h(dir)g(->)g
(create_directory)g(dir;)f(Some)h(dir\))227 3592 y Fi(Similar)32
b(op)s(erations)f(can)f(b)s(e)g(used)h(to)f(generate)i(unique)f
(symlinks)e(and)i(\034fos,)f(or)h(to)f(return)h(v)-5
b(alues)227 3704 y(other)31 b(than)g(the)g(new)g(\034lename)g(\()p
Fg(e.g.)p Fi(,)g(an)g(op)s(en)f(\034le)h(descriptor)g(or)g(c)m
(hannel\).)227 3817 y(F)-8 b(or)31 b(increased)g(securit)m(y)-8
b(,)32 b(a)e(user)h(ma)m(y)g(wish)f(to)h(c)m(hange)g(the)g(template)h
(to)e(use)g(a)h(directory)g(not)227 3930 y(allo)m(wing)h(w)m(orld)g
(write)f(access)f(\()p Fg(e.g.)p Fi(,)h(his)f(home)h(directory\).)0
4142 y Fj(val)47 b(temp_file_channel)f(:)94 4254 y(unit)h(->)g
(Pervasives.in_channel)f(*)h(Pervasives.out_channel)227
4392 y Fi(This)31 b(pro)s(cedure)g(can)g(b)s(e)f(used)g(to)h(pro)m
(vide)g(an)g(in)m(terpro)s(cess)g(comm)m(unications)i(c)m(hannel)f
(with)227 4505 y(arbitrary-sized)g(bu\033ering.)41 b(It)30
b(returns)h(t)m(w)m(o)h(v)-5 b(alues,)30 b(an)h(input)g(c)m(hannel)h
(and)f(an)f(output)h(c)m(hannel,)227 4618 y(b)s(oth)g(op)s(en)f(on)h(a)
f(new)h(temp)g(\034le.)41 b(The)31 b(temp)g(\034le)f(itself)g(is)g
(deleted)i(from)e(the)h(Unix)f(\034le)g(tree)h(b)s(efore)227
4731 y Fj(temp_file_channel)f Fi(returns,)h(so)f(the)h(\034le)f(is)g
(essen)m(tially)h(unnamed,)h(and)f(its)f(disk)g(storage)h(is)227
4844 y(reclaimed)h(as)e(so)s(on)g(as)g(the)h(t)m(w)m(o)g(c)m(hannels)h
(are)f(closed.)227 4957 y Fj(Temp_file_channel)f Fi(is)g(analogous)h
(to)g Fj(pipe)f Fi(with)h(t)m(w)m(o)g(exceptions:)306
5086 y Fe(\017)46 b Fi(If)30 b(the)g(writer)i(pro)s(cess)d(gets)i
(ahead)g(of)f(the)h(reader)g(pro)s(cess,)f(it)g(will)h(not)g(hang)g(w)m
(aiting)h(for)e(some)397 5199 y(small)h(pip)s(e)f(bu\033er)h(to)f
(drain.)42 b(It)30 b(will)g(simply)h(bu\033er)f(the)h(data)g(on)f
(disk.)40 b(This)31 b(is)f(go)s(o)s(d.)306 5329 y Fe(\017)46
b Fi(If)30 b(the)g(reader)i(pro)s(cess)d(gets)i(ahead)g(of)f(the)h
(writer)g(pro)s(cess,)f(it)g(will)h(also)f(not)h(hang)g(w)m(aiting)h
(for)1905 5589 y(35)p eop
%%Page: 36 36
36 35 bop 397 91 a Fi(data)31 b(from)g(the)f(writer)i(pro)s(cess.)40
b(It)29 b(will)i(simply)g(see)f(and)g(rep)s(ort)h(an)g(end)g(of)e
(\034le.)41 b(This)31 b(is)f(bad.)227 221 y(In)g(order)h(to)g(ensure)g
(that)f(an)h(end-of-\034le)g(returned)h(to)f(the)f(reader)h(is)f
(legitimate,)i(the)f(reader)g(and)227 334 y(writer)g(m)m(ust)g
(serialise)g(their)g(i/o.)41 b(The)31 b(simplest)f(w)m(a)m(y)h(to)g(do)
g(this)f(is)g(for)g(the)h(reader)g(to)f(dela)m(y)h(doing)227
447 y(input)g(un)m(til)h(the)f(writer)g(has)f(completely)h(\034nished)g
(doing)h(output,)f(or)f(exited.)0 788 y Ff(3.5)112 b(Pro)s(cesses)0
984 y Fj(val)47 b(exec)g(:)g(string)g(->)g(string)f(list)h(->)g(unit)0
1120 y(val)g(exec_path)g(:)g(string)f(->)h(string)g(list)g(->)g('a)0
1257 y(val)g(exec_with_env)g(:)94 1370 y(string)g(->)g(?env:\(string)f
(*)h(string\))g(list)g(->)g(string)g(list)g(->)g(unit)0
1506 y(val)g(exec_path_with_env)f(:)94 1619 y(string)h(->)g
(?env:\(string)f(*)h(string\))g(list)g(->)g(string)g(list)g(->)g('a)227
1757 y Fi(The)30 b Fj(..._with_env)f Fi(v)-5 b(arian)m(ts)30
b(tak)m(e)g(an)g(optional)g(en)m(vironmen)m(t)i(as)d(2d)h(argumen)m(t.)
42 b(The)30 b(default)g(v)-5 b(alue)227 1870 y(is)30
b(tak)m(en)h(to)g(mean)g(the)g(curren)m(t)g(pro)s(cess')f(en)m
(vironmen)m(t)j(\()p Fg(i.e.)p Fi(,)d(the)h(v)-5 b(alue)30
b(of)g(the)h Fj(external)47 b(char)227 1983 y(**environ)p
Fi(\).)227 2096 y(The)31 b(path-searc)m(hing)i(v)-5 b(arian)m(ts)31
b(searc)m(h)g(the)g(directories)g(in)g(the)f(list)h Fj(exec_path_list)e
Fi(for)i(the)227 2209 y(program.)42 b(A)30 b(path-searc)m(h)i(is)e(not)
h(p)s(erformed)g(if)e(the)i(program)h(name)f(con)m(tains)g(a)g(slash)f
(c)m(haracter)i(\026)227 2321 y(it)f(is)f(used)g(directly)-8
b(.)42 b(So)30 b(a)h(program)g(with)g(a)f(name)h(lik)m(e)g
Fj("bin/prog")f Fi(alw)m(a)m(ys)h(executes)g(the)g(program)227
2434 y Fj(bin/prog)f Fi(in)h(the)f(curren)m(t)i(w)m(orking)g(directory)
-8 b(.)42 b(See)30 b Fj($PATH)g Fi(and)h Fj(exec_path_list)p
Fi([3.12.2],)g(b)s(elo)m(w.)227 2547 y(All)f(of)g(these)h(pro)s
(cedures)g(\035ush)f(bu\033ered)h(output)h(and)f(close)f(unrev)m(ealed)
i(c)m(hannels)g(b)s(efore)e(executing)227 2660 y(the)h(new)g(binary)-8
b(.)41 b(T)-8 b(o)31 b(a)m(v)m(oid)h(\035ushing)f(bu\033ered)g(output,)
g(see)f Fj(low_exec)g Fi(b)s(elo)m(w.)227 2773 y(Note)h(that)g(the)f(C)
h Fj(exec\(\))f Fi(pro)s(cedure)h(allo)m(ws)g(the)g(zeroth)g(elemen)m
(t)h(of)e(the)h(argumen)m(t)h(v)m(ector)f(to)g(b)s(e)227
2886 y(di\033eren)m(t)h(from)e(the)h(\034le)g(b)s(eing)f(executed,)i
Fg(e.g.)321 2999 y Fj(char)47 b(*argv[])g(=)g({"-",)g("-f",)g(0};)321
3112 y(exec\("/bin/csh",)g(argv,)g(envp\);)227 3225 y
Fi(The)31 b(Cash)g Fj(exec)p Fi(,)f Fj(exec_path)p Fi(,)g
Fj(exec_with_env)p Fi(,)g(and)h Fj(exec_path_with_env)e
Fi(pro)s(cedures)i(do)g(not)227 3338 y(giv)m(e)g(this)f(functionalit)m
(y)i(\026)f(elemen)m(t)h(0)e(of)g(the)h(arg)f(v)m(ector)i(is)e(alw)m(a)
m(ys)h(iden)m(tical)h(to)f(the)f Fj(prog)227 3451 y Fi(argumen)m(t.)43
b(In)30 b(the)g(rare)h(case)g(the)f(user)h(wishes)f(to)g(di\033eren)m
(tiate)j(these)d(t)m(w)m(o)i(items,)f(he)f(can)h(use)f(the)227
3563 y(lo)m(w-lev)m(el)h Fj(low_exec)e Fi(and)h Fj(exec_path_search)e
Fi(pro)s(cedures.)41 b(These)29 b(pro)s(cedures)h(nev)m(er)g(return)g
(under)227 3676 y(an)m(y)h(circumstances.)42 b(As)29
b(with)i(an)m(y)g(other)g(system)f(call,)h(if)f(there)h(is)f(an)g
(error,)h(they)g(raise)f(an)227 3789 y(exception.)0 4001
y Fj(val)47 b(low_exec)g(:)g(string)f(->)h(?env:\(string)g(*)g
(string\))g(list)g(->)g(string)g(list)f(->)h(unit)0 4137
y(val)g(exec_path_search)g(:)f(string)h(->)g(string)g(list)g(->)g
(string)227 4275 y Fi(The)31 b Fj(low_exec)f Fi(pro)s(cedure)h(is)f
(the)h(lo)m(w-lev)m(el)h(in)m(terface)g(to)e(the)h(system)f(call.)41
b(In)30 b Fj(low_exec)g Fg(pr)-5 b(o)g(g)33 b(\003env)227
4388 y(ar)-5 b(glist)p Fi(,)31 b(the)g Fg(ar)-5 b(glist)31
b Fi(parameter)g(is)f(a)h(list)f(of)g(argumen)m(ts;)i
Fg(\003env)p Fi(,)f(if)f(an)m(y)-8 b(,)31 b(is)f(a)h(string)f
Fe(!)g Fi(string)h(alist;)f(if)227 4501 y(none,)h(it)g(means)f(the)h
(curren)m(t)h(pro)s(cess')e(en)m(vironmen)m(t.)43 b(The)31
b(new)g(program's)g Fj(argv[0])f Fi(will)h(b)s(e)f(tak)m(en)227
4614 y(from)h Fj(List.hd)f Fg(ar)-5 b(glist)p Fi(,)31
b Fg(not)e Fi(from)i Fg(pr)-5 b(o)g(g)p Fi(.)42 b Fj(low_exec)30
b Fi(do)s(es)g(not)g(\035ush)h(bu\033ered)g(output)g(\(see)227
4727 y Fj(flush_all_chans)p Fi([3.2.7]\).)227 4839 y
Fj(exec_path_search)f Fg(fname)i(p)-5 b(athlist)30 b
Fi(searc)m(hes)h(the)g(directories)h(of)e Fg(p)-5 b(athlist)30
b Fi(lo)s(oking)g(for)h(an)227 4952 y(o)s(ccurrence)g(of)d(\034le)i
Fg(fname)p Fi(.)39 b(If)29 b(no)g(executable)h(\034le)g(is)e(found,)i
(it)f(raises)g Fj(Not_found)p Fi(.)40 b(If)28 b Fg(fname)h
Fi(con)m(tains)227 5065 y(a)i(slash)f(c)m(haracter,)i(the)f(path)g
(searc)m(h)g(is)f(short-circuited,)i(but)f(the)g(pro)s(cedure)g(still)f
(c)m(hec)m(ks)h(to)g(ensure)227 5178 y(that)g(the)g(\034le)g(exists)e
(and)i(is)f(executable)h(\026)g(if)f(not,)h(it)f(still)g(raises)g
Fj(Not_found)p Fi(.)41 b(Users)29 b(of)h(this)227 5291
y(pro)s(cedure)i(should)e(b)s(e)g(a)m(w)m(are)j(that)d(it)h(in)m(vites)
g(a)f(p)s(oten)m(tial)i(race)f(condition:)41 b(b)s(et)m(w)m(een)33
b(c)m(hec)m(king)f(the)1905 5589 y(36)p eop
%%Page: 37 37
37 36 bop 227 91 a Fi(\034le)31 b(with)g Fj(exec_path_search)f
Fi(and)g(executing)i(it)e(with)h Fj(low_exec)p Fi(,)f(the)h(\034le's)f
(status)g(migh)m(t)i(c)m(hange.)227 204 y(The)f(only)f(atomic)i(w)m(a)m
(y)f(to)g(do)f(the)h(searc)m(h)g(is)f(to)g(lo)s(op)h(o)m(v)m(er)g(the)g
(candidate)h(\034le)e(names,)h(exec'ing)g(eac)m(h)227
317 y(one)g(and)g(lo)s(oping)g(when)g(the)f(exec)h(op)s(eration)g
(fails.)227 430 y(See)g Fj($PATH)f Fi(and)h Fj(exec_path_list)p
Fi([3.12.2],)g(b)s(elo)m(w.)0 641 y Fj(val)47 b(exit)g(:)g(int)g(->)g
('a)0 778 y(val)g(low_exit)g(:)g(int)g(->)f('a)227 915
y Fi(These)31 b(pro)s(cedures)g(terminate)h(the)e(curren)m(t)i(pro)s
(cess)e(with)h(a)f(giv)m(en)i(exit)e(status.)40 b(The)31
b(lo)m(w-lev)m(el)227 1028 y Fj(low_exit)f Fi(pro)s(cedure)i
(immediately)f(terminates)h(the)f(pro)s(cess)e(without)j(\035ushing)f
(bu\033ered)g(output.)0 1239 y Fj(val)47 b(call_terminally)g(:)f
(\(unit)h(->)g(unit\))g(option)g(->)g('a)g(option)227
1377 y(call_terminally)30 b Fi(calls)g(its)h(th)m(unk.)41
b(When)30 b(the)h(th)m(unk)g(returns,)g(the)g(pro)s(cess)f(exits.)40
b(Although)227 1490 y Fj(call_terminally)30 b Fi(could)h(b)s(e)f
(implemen)m(ted)j(as)415 1603 y Fj(fun)47 b(thunk)g(->)g(thunk\(\);)g
(exit)g(0)227 1716 y Fi(an)31 b(implemen)m(tation)i(can)e(tak)m(e)g
(adv)-5 b(an)m(tage)32 b(of)e(the)g(fact)h(that)f(this)h(pro)s(cedure)g
(nev)m(er)g(returns.)41 b(F)-8 b(or)227 1828 y(example,)31
b(a)g(Sc)m(heme)h(run)m(time)g(can)e(start)h(with)g(a)f(fresh)g(stac)m
(k)h(and)f(also)h(start)f(with)h(a)f(fresh)g(dynamic)227
1941 y(en)m(vironmen)m(t,)j(where)e(shado)m(w)m(ed)i(bindings)e(are)f
(discarded.)42 b(This)30 b(can)h(allo)m(w)g(the)g(old)g(stac)m(k)f(and)
227 2054 y(dynamic)h(en)m(vironmen)m(t)i(to)e(b)s(e)f(collected)h
(\(assuming)g(this)g(data)f(is)g(not)h(reac)m(hable)h(through)g(some)e
(liv)m(e)227 2167 y(con)m(tin)m(uation\).)227 2280 y(Useless)g(to)g(sa)
m(y)-8 b(,)31 b(this)f(b)s(eha)m(viour)i(is)d(not)i(implemen)m(ted)i
(in)e(Caml.)0 2491 y Fj(val)47 b(suspend)g(:)g(unit)g(->)f(unit)227
2629 y Fi(Susp)s(end)31 b(the)g(curren)m(t)g(pro)s(cess)f(with)h(a)g
(SIGSTOP)g(signal.)0 2840 y Fj(val)47 b(fork)g(:)g(unit)g(->)g(proc)f
(option)0 2976 y(val)h(fork_child)g(:)g(\(unit)f(->)h(unit\))g(->)g
(proc)0 3113 y(val)g(low_fork)g(:)g(?child:\(unit)f(->)h(unit\))g(->)g
(unit)g(->)g(proc)g(option)227 3250 y(fork)g(\(\))30
b Fi(is)g(lik)m(e)h(C)f Fj(fork\(\))p Fi(.)41 b(In)29
b(the)i(paren)m(t)h(pro)s(cess,)e(it)g(returns)h Fj(\(Some)f
Fd(<)p Fi(the)h(c)m(hild's)g Fg(pr)-5 b(o)g(c)g(ess)227
3363 y(obje)g(ct)p Fd(>)p Fj(\))30 b Fi(\(see)f([3.5.1])h(for)e(more)i
(information)g(on)f(pro)s(cess)g(ob)5 b(jects\).)40 b(In)28
b(the)h(c)m(hild)h(pro)s(cess,)f(it)g(returns)227 3476
y Fj(None)p Fi(.)227 3589 y Fj(fork_child)h Fg(thunk)h
Fi(only)f(returns)h(in)g(the)f(paren)m(t)i(pro)s(cess,)e(returning)i
(the)f(c)m(hild's)g Fg(pr)-5 b(o)g(c)g(ess)34 b(obje)-5
b(ct)p Fi(.)227 3702 y(The)31 b(c)m(hild)h(pro)s(cess)d(calls)i
Fg(thunk)g Fi(and)f(then)h(exits.)227 3815 y Fj(fork)f
Fi(and)h Fj(fork_child)f Fi(\035ush)g(bu\033ered)i(output)f(b)s(efore)f
(forking,)h(and)f(set)g(the)h(c)m(hild)h(pro)s(cess)e(to)227
3928 y(non-in)m(teractiv)m(e.)44 b Fj(low_fork)30 b Fi(do)s(es)g(not)g
(p)s(erform)h(this)f(b)s(o)s(okk)m(eeping;)h(it)f(simply)h(forks.)0
4252 y Fj(val)47 b(fork_with_pipe)g(:)g(unit)f(->)h(proc)g(option)0
4388 y(val)g(fork_child_with_pipe)f(:)h(\(unit)g(->)g(unit\))g(->)g
(proc)0 4525 y(val)g(low_fork_with_pipe)f(:)h(?child:\(unit)g(->)g
(unit\))g(->)g(unit)g(->)g(proc)g(option)227 4663 y Fi(Lik)m(e)31
b Fj(fork)p Fi(,)g Fj(fork_child)e Fi(and)i Fj(low_fork)p
Fi(,)f(but)h(the)g(paren)m(t)h(and)e(c)m(hild)i(comm)m(unicate)h(via)d
(a)g(pip)s(e)227 4775 y(connecting)i(the)f(paren)m(t's)h
Fj(stdin)e Fi(to)g(the)h(c)m(hild's)g(stdout.)41 b(These)31
b(pro)s(cedures)g(side-e\033ect)f(the)h(paren)m(t)227
4888 y(b)m(y)g(c)m(hanging)h(his)e Fj(stdin)p Fi(.)227
5001 y(In)g(e\033ect,)h Fj(fork_...with_pipe)f Fi(splice)g(a)h(pro)s
(cess)f(in)m(to)h(the)g(data)g(stream)f(immediately)i(upstream)f(of)227
5114 y(the)f(curren)m(t)h(pro)s(cess.)39 b(This)30 b(is)f(the)g(basic)h
(function)g(for)f(creating)h(pip)s(elines.)41 b(Long)30
b(pip)s(elines)g(are)f(built)227 5227 y(b)m(y)i(p)s(erforming)g(a)f
(sequence)h(of)f Fj(fork_child_with_pipe)g Fi(calls.)40
b(F)-8 b(or)31 b(example,)g(to)g(create)g(a)227 5340
y(bac)m(kground)h(t)m(w)m(o-pro)s(cess)g(pip)s(e)e Fj(a)47
b(|)g(b)p Fi(,)31 b(w)m(e)g(write:)1905 5589 y(37)p eop
%%Page: 38 38
38 37 bop 368 91 a Fj(fork_child)47 b(\(fun)g(\(\))g(->)g
(fork_child_with_pipe)f(a;)h(b)g(\(\)\))227 204 y Fi(whic)m(h)32
b(returns)f(the)f(pro)s(cess)g(ob)5 b(ject)31 b(for)f
Fj(b)p Fi('s)g(pro)s(cess.)227 317 y(T)-8 b(o)31 b(create)h(a)e(bac)m
(kground)i(three-pro)s(cess)f(pip)s(e)f Fj(a)47 b(|)g(b)g(|)g(c)p
Fi(,)30 b(w)m(e)h(write:)368 543 y Fj(fork_child)556
656 y(\(fun)47 b(\(\))g(->)744 769 y(fork_child_with_pipe)g(a;)744
882 y(fork_child_with_pipe)g(b;)744 995 y(c)g(\(\)\);;)227
1108 y Fi(whic)m(h)32 b(returns)f(the)f(pro)s(cess)g(ob)5
b(ject)31 b(for)f Fj(c)p Fi('s)g(pro)s(cess.)227 1220
y(Note)h(that)f(these)h(pro)s(cedures)f(a\033ect)h(\034le)f
(descriptors,)h(not)g(c)m(hannels.)42 b(That)31 b(is,)e(the)i(pip)s(e)f
(is)g(allo)s(cated)227 1333 y(connecting)i(the)f(c)m(hild's)g(\034le)g
(descriptor)g(1)g(to)f(the)h(paren)m(t's)g(\034le)g(descriptor)g(0.)41
b Fg(A)n(ny)31 b(pr)-5 b(evious)34 b(Caml)227 1446 y(channel)f(built)g
(over)g(these)h(a\033e)-5 b(cte)g(d)35 b(\034le)d(descriptors)h(is)f
(shifte)-5 b(d)33 b(to)f(a)g(new,)g(unuse)-5 b(d)34 b(\034le)f
(descriptor)227 1559 y(with)e Fj(dup)g Fg(b)-5 b(efor)g(e)33
b(al)5 b(lo)-5 b(c)g(ating)33 b(the)e(I/O)g(pip)-5 b(e.)41
b Fi(This)29 b(means,)h(for)f(example,)h(that)f(the)h(c)m(hannels)g(b)s
(ound)g(to)227 1672 y Fj(stdin)g Fi(and)h Fj(stdout)f
Fi(in)h(either)g(pro)s(cess)f(are)g(not)h(a\033ected)g(\026)g(they)f
(still)g(refer)h(to)f(the)h(same)f(I/O)227 1785 y(sources)h(and)f
(sinks)g(as)g(b)s(efore.)40 b(Remem)m(b)s(er)31 b(the)g(simple)g(Cash)f
(rule:)41 b(Caml)31 b(c)m(hannels)h(are)f(b)s(ound)f(to)227
1898 y(I/O)h(sources)f(and)h(sinks,)e Fg(not)h Fi(particular)i(\034le)f
(descriptors.)227 2011 y(If)f(the)g(c)m(hild)i(pro)s(cess)e(wishes)g
(to)h(rebind)g(the)f(curren)m(t)i Fj(stdout)e Fi(to)h(the)g(pip)s(e)f
(on)g(\034le)h(descriptor)h(1,)e(it)227 2124 y(can)h(do)g(this)f(using)
g Fj(with_stdout)g Fi(or)h(a)f(related)h(function)h(\(see)e([3.2.2]\).)
41 b(Similarly)-8 b(,)32 b(if)e(the)h(paren)m(t)227 2237
y(wishes)g(to)f(c)m(hange)i(the)f(curren)m(t)g Fj(stdin)f
Fi(to)h(the)g(pip)s(e)f(on)h(\034le)f(descriptor)i(0,)e(it)h(can)f(do)h
(this)f(using)227 2350 y Fj(set_stdin)f Fi(or)g(a)f(related)i
(function.)41 b(Here)29 b(is)f(an)h(example)h(sho)m(wing)f(ho)m(w)h(to)
f(set)g(up)g(the)g(I/O)g(c)m(hannels)227 2462 y(on)i(b)s(oth)f(sides)g
(of)g(the)h(pip)s(e:)368 2575 y Fj(fork_child_with_pipe)556
2688 y(\(fun)47 b(\(\))g(->)697 2801 y(with_stdout)g
(\(out_channel_of_fd)f(1\))791 2914 y(\(fun)h(\(\))g(->)g
(print_endline)f("Hello,)h(world."\)\);)368 3027 y(set_stdin)g
(\(in_channel_of_fd)g(0\);)368 3140 y(print_endline)g(\(read_line)g
(stdin\);;)93 b(\(*)47 b(Read)g(the)g(string)g(output)g(by)g(the)g
(child.)f(*\))227 3253 y Fi(None)31 b(of)f(this)g(is)g(necessary)g
(when)h(the)g(I/O)f(is)g(p)s(erformed)h(b)m(y)g(an)f(exec'd)h(program)g
(in)g(the)g(c)m(hild)g(or)227 3366 y(paren)m(t)h(pro)s(cess,)e(only)g
(when)h(the)g(pip)s(e)g(will)f(b)s(e)g(referenced)i(b)m(y)e(Caml)h(co)s
(de)g(through)g(one)g(of)f(the)227 3479 y(default)h(curren)m(t)h(I/O)e
(c)m(hannels.)0 3688 y Fj(val)47 b(fork_with_pipe_plus)f(:)h(fd)g(list)
g(list)g(->)g(proc)g(option)0 3824 y(val)g(fork_child_with_pipe_plus)f
(:)94 3937 y(\(unit)h(->)g('a\))g(->)g(fd)g(list)f(list)h(->)g(proc)0
4074 y(val)g(low_fork_with_pipe_plus)f(:)94 4187 y(?child:\(unit)h(->)g
('a\))f(->)h(fd)g(list)g(list)g(->)g(proc)g(option)227
4324 y Fi(Lik)m(e)31 b Fj(fork_with_pipe)f Fg(et)j(al.)p
Fi(,)d(but)h(the)f(pip)s(e)h(connections)h(b)s(et)m(w)m(een)g(the)e(c)m
(hild)i(and)e(paren)m(t)i(are)227 4437 y(sp)s(eci\034ed)f(b)m(y)f(a)h
(connection)h(list.)227 4550 y(A)e Fg(c)-5 b(onne)g(ct-list)32
b Fi(is)e(a)g(sp)s(eci\034cation)i(of)d(ho)m(w)j(the)e(t)m(w)m(o)i(pro)
s(cesses)e(are)h(to)f(b)s(e)g(wired)h(together)h(b)m(y)e(pip)s(es.)227
4663 y(It)g(has)g(the)h(form)g Fj(\(\()p Fg(fr)-5 b(om1)30
b(fr)-5 b(om2)30 b Fj(...)40 b Fg(to)p Fj(\))47 b(...\))p
Fi(.)40 b(F)-8 b(or)31 b(example,)g(with)415 4775 y Fj([[1;)47
b(2;)g(0];)g([3;)g(1]])227 4888 y Fi(the)31 b(\034rst)f(clause)h
Fj([1;)47 b(2;)g(0])30 b Fi(causes)g(c)m(hild's)h(stdout)g(\(1\))g(and)
g(stderr)f(\(2\))h(to)f(b)s(e)h(connected)g(via)g(pip)s(e)227
5001 y(to)g(paren)m(t's)g(stdin)g(\(0\).)41 b(The)30
b(second)h(clause)g Fj([3;)47 b(1])30 b Fi(causes)g(c)m(hild's)h
(\034le)g(descriptor)h(3)e(to)g(b)s(e)227 5114 y(connected)i(to)f
(paren)m(t's)g(\034le)g(descriptor)g(1.)227 5227 y Fg(Note)i(that)g(al)
5 b(l)32 b(fr)-5 b(om's)31 b(ar)-5 b(e)34 b Fj(out_channel)p
Fg(s,)d(and)h(al)5 b(l)33 b(to's)e(ar)-5 b(e)34 b Fj(in_channel)p
Fg(s;)d(the)i(child)g(pr)-5 b(o)g(duc)g(es,)35 b(the)227
5340 y(p)-5 b(ar)g(ent)34 b(c)-5 b(onsumes.)1905 5589
y Fi(38)p eop
%%Page: 39 39
39 38 bop 0 91 a Fk(3.5.1)103 b(Pro)s(cess)35 b(ob)6
b(jects)35 b(and)f(pro)s(cess)g(reaping)0 287 y Fi(Cash)27
b(uses)f Fg(pr)-5 b(o)g(c)g(ess)31 b(obje)-5 b(cts)28
b Fi(to)f(represen)m(t)h(Unix)e(pro)s(cesses.)39 b(They)27
b(are)g(created)h(b)m(y)e(the)h Fj(fork)g Fi(pro)s(cedure,)h(and)0
399 y(ha)m(v)m(e)j(the)g(follo)m(wing)h(hidden)f(structure:)47
512 y Fj(type)47 b(proc)g(=)g({)g(p_id)g(:)f(int;)h(p_status)g(:)g
(Unix.process_status)g(})141 738 y Fi(The)35 b(only)f(alw)m(a)m(ys)h
(accessible)g(slot)f(in)g(a)g(pro)s(c)g(record)h(is)f(the)g(pro)s
(cess')g(pid,)i(the)e(in)m(teger)i(id)e(assigned)h(b)m(y)0
851 y(Unix)28 b(to)g(the)g(pro)s(cess:)39 b(to)28 b(get)h(it,)g(use)e
(the)i(only)f(\(lo)m(w)h(lev)m(el\))g(exp)s(orted)f(pro)s(cedure)h(for)
f(manipulating)i(pro)s(cess)0 964 y(ob)5 b(jects:)41
b Fj(pid_of_proc)p Fi(.)0 1101 y Fj(val)47 b(pid_of_proc)g(:)g(proc)f
(->)h(int)227 1237 y Fi(Extract)31 b(the)g(pro)s(cess)f(id)h(out)f(of)g
(a)h(pro)s(c)f(ob)5 b(ject.)0 1442 y Fj(type)94 b(probe_pid)47
b(=)g(Proc_3_4.probe_pid)f(=)94 1555 y(|)h(Probe)227
1691 y Fg(Signal)32 b(err)-5 b(or)34 b(c)-5 b(ondition.)94
1874 y Fj(|)47 b(Create)227 2010 y Fi(Create)32 b(new)e(pro)s(c)h(ob)5
b(ject.)94 2192 y Fj(|)47 b(Don't_probe)227 2328 y Fi(Return)31
b Fj(None)p Fi(.)227 2510 y(The)g(t)m(yp)s(e)f(of)g(the)h
Fg(\003pr)-5 b(ob)g(e)32 b Fi(argumen)m(t)h(to)d Fj(proc_of_pid)p
Fi(,)g(that)h(determines)h(what)f(action)g(to)f(tak)m(e)h(if)227
2623 y(there)g(is)f(no)h(pro)s(cess)f(ob)5 b(ject)30
b(indexed)h(b)m(y)g(the)g(giv)m(en)g(pid)f(in)h(the)g(system.)0
2829 y Fj(val)47 b(proc_of_pid)g(:)g(?probe:probe_pid)f(->)h(int)g(->)g
(proc)g(option)227 2965 y Fi(This)31 b(pro)s(cedure)g(maps)g(in)m
(teger)g(Unix)f(pro)s(cess)g(ids)g(to)h(Cash)f(pro)s(cess)g(ob)5
b(jects.)41 b(It)30 b(is)g(in)m(tended)i(for)e(use)227
3078 y(in)h(in)m(teractiv)m(e)h(and)f(debugging)h(co)s(de,)e(and)h(is)f
(deprecated)i(for)e(use)g(in)h(pro)s(duction)g(co)s(de.)141
3284 y(Sometime)f(after)f(a)g(c)m(hild)h(pro)s(cess)e(terminates,)i
(Cash)f(will)g(p)s(erform)g(a)g Fj(wait)f Fi(system)h(call)g(on)g(the)g
(c)m(hild)h(in)0 3397 y(bac)m(kground,)i(cac)m(hing)g(the)f(pro)s
(cess')f(exit)h(status)f(in)h(the)f(c)m(hild's)i(pro)s(c)e(ob)5
b(ject.)41 b(This)31 b(is)f(called)h(\020reaping\021)39
b(the)0 3509 y(pro)s(cess.)g(Once)27 b(the)h(c)m(hild)f(has)g(b)s(een)g
(w)m(aited,)i(the)e(Unix)g(k)m(ernel)g(can)h(free)e(the)h(storage)h
(allo)s(cated)f(for)g(the)g(dead)0 3622 y(pro)s(cess')38
b(exit)g(information,)j(so)d(pro)s(cess)f(reaping)i(prev)m(en)m(ts)h
(the)e(pro)s(cess)g(table)g(from)g(b)s(ecoming)h(cluttered)0
3735 y(with)d(un-w)m(aited)h(dead)f(c)m(hild)g(pro)s(cesses)e(\(a.k.a.)
56 b(\020zom)m(bies\021\).)g(This)35 b(can)h(b)s(e)f(esp)s(ecially)g
(sev)m(ere)g(if)g(the)h(Cash)0 3848 y(pro)s(cess)31 b(nev)m(er)h(w)m
(aits)g(on)g(c)m(hild)h(pro)s(cesses)e(at)g(all;)i(if)e(the)h(pro)s
(cess)f(table)h(o)m(v)m(er\035o)m(ws)h(with)f(forgotten)h(zom)m(bies,)0
3961 y(the)e(OS)f(ma)m(y)h(b)s(e)f(unable)i(to)e(fork)g(further)h(pro)s
(cesses.)141 4074 y(Reaping)d(a)f(c)m(hild)i(pro)s(cess)e(mo)m(v)m(es)h
(its)f(exit)h(status)f(information)i(from)e(the)h(k)m(ernel)g(in)m(to)h
(the)f(Cash)f(pro)s(cess,)0 4187 y(where)43 b(it)g(is)f(cac)m(hed)i
(inside)e(the)h(c)m(hild's)g(pro)s(cess)f(ob)5 b(ject.)77
b(If)42 b(the)h(Cash)f(user)g(drops)h(all)g(p)s(oin)m(ters)g(to)f(the)0
4300 y(pro)s(cess)29 b(ob)5 b(ject,)30 b(it)f(will)h(simply)f(b)s(e)g
(garbage)h(collected.)41 b(On)30 b(the)f(other)h(hand,)g(if)f(the)h
(Cash)f(program)h(retains)0 4413 y(a)c(p)s(oin)m(ter)i(to)f(the)f(pro)s
(cess)g(ob)5 b(ject,)28 b(it)f(can)f(use)h(Cash's)f Fj(wait)g
Fi(system)g(call)h(to)g(sync)m(hronise)g(with)g(the)g(c)m(hild)g(and)0
4526 y(retriev)m(e)i(its)f(exit)g(status)g(m)m(ultiple)h(times)g
(\(this)f(is)f(not)i(p)s(ossible)e(with)i(simple)f(Unix)g(in)m(teger)h
(pids)f(in)g(C)g(\026)g(the)0 4639 y(programmer)k(can)f(only)f(w)m(ait)
i(on)e(a)h(pid)f(once\).)141 4751 y(Th)m(us,)24 b(pro)s(cess)d(ob)5
b(jects)22 b(allo)m(w)h(Cash)e(programmer)j(to)e(do)f(t)m(w)m(o)i
(things)f(not)g(allo)m(w)m(ed)i(in)d(other)i(programming)0
4864 y(en)m(vironmen)m(ts:)136 5043 y Fe(\017)46 b Fi(Subpro)s(cesses)
41 b(that)g(are)g(nev)m(er)g(w)m(aited)h(on)f(are)g(still)g(remo)m(v)m
(ed)h(from)f(the)g(pro)s(cess)f(table,)k(and)d(their)227
5156 y(asso)s(ciated)31 b(exit)f(status)g(data)h(is)f(ev)m(en)m(tually)
i(automatically)g(garbage)f(collected.)136 5340 y Fe(\017)46
b Fi(Subpro)s(cesses)31 b(can)f(b)s(e)g(w)m(aited)i(on)f(m)m(ultiple)h
(times.)1905 5589 y(39)p eop
%%Page: 40 40
40 39 bop 141 91 a Fi(Ho)m(w)m(ev)m(er,)39 b(note)d(that)g(once)g(a)g
(c)m(hild)g(has)g(exited,)h(if)e(the)h(Cash)g(programmer)h(drops)f(all)
g(p)s(oin)m(ters)g(to)f(the)0 204 y(c)m(hild's)j(pro)s(c)f(ob)5
b(ject,)39 b(the)e(c)m(hild's)h(exit)f(status)g(will)g(b)s(e)g(reap)s
(ed)g(and)g(thro)m(wn)i(a)m(w)m(a)m(y)-8 b(.)62 b(This)37
b(is)g(the)g(in)m(tended)0 317 y(b)s(eha)m(viour,)42
b(and)e(it)f(means)h(that)f(in)m(teger)i(pids)e(are)h(not)f(enough)h
(to)g(cause)f(a)g(pro)s(cess's)g(exit)g(status)g(to)g(b)s(e)0
430 y(retained)d(b)m(y)f(the)g(Cash)g(run)m(time.)56
b(\(This)35 b(is)g(b)s(ecause)g(it)g(is)f(clearly)h(imp)s(ossible)g(to)
g(GC)g(data)h(referenced)g(b)m(y)0 543 y(in)m(tegers.\))141
656 y(As)j(a)g(con)m(v)m(enience)i(for)e(in)m(teractiv)m(e)j(use)d(and)
g(debugging,)k(all)d(pro)s(cedures)g(that)f(tak)m(e)h(pro)s(cess)f(ob)5
b(jects)0 769 y(ha)m(v)m(e)33 b(corresp)s(onding)g Fj(..._pid)f
Fi(v)m(ersions)g(taking)h(in)m(teger)g(Unix)f(pids)g(as)g(argumen)m
(ts,)i(co)s(ercing)f(them)f(to)g(the)0 882 y(corresp)s(onding)g(pro)s
(cess)e(ob)5 b(jects.)41 b(Since)31 b(in)m(teger)h(pro)s(cess)e(ids)h
(are)f(not)h(reliable)h(w)m(a)m(ys)f(to)g(k)m(eep)g(a)f(c)m(hild's)i
(exit)0 995 y(status)26 b(from)f(b)s(eing)h(reap)s(ed)h(and)f(garbage)h
(collected,)h(programmers)f(are)f(encouraged)i(to)e(use)f(pro)s(cess)h
(ob)5 b(jects)0 1108 y(in)30 b(pro)s(duction)i(co)s(de.)0
1244 y Fj(type)94 b(autoreap_policy)46 b(=)h(Proc_3_4.autoreap_policy)g
(=)94 1357 y(|)g(No_autoreaping)94 1470 y(|)g(Early)94
1583 y(|)g(Late)0 1719 y(val)g(autoreap_policy)g(:)94
1832 y(?policy:autoreap_policy)f(->)h(unit)g(->)g(autoreap_policy)227
1970 y Fi(The)31 b(Cash)g(programmer)h(can)f(c)m(ho)s(ose)f(di\033eren)
m(t)i(p)s(olicies)e(for)g(automatic)i(pro)s(cess)e(reaping.)42
b(The)227 2083 y(p)s(olicy)30 b(is)g(determined)i(b)m(y)f(using)g(a)f
Fg(\003p)-5 b(olicy)31 b Fi(argumen)m(t)h(whose)f(v)-5
b(alues)30 b(ha)m(v)m(e)h(the)g(follo)m(wing)h(meaning:)306
2212 y Fe(\017)46 b Fj(Early)30 b Fi(\(the)h(default\):)41
b(The)31 b(c)m(hild)h(is)e(reap)s(ed)g(from)h(the)f(Unix)g(k)m(ernel's)
h(pro)s(cess)f(table)h(in)m(to)h(Cash)397 2325 y(as)e(so)s(on)g(as)g
(it)h(dies.)40 b(This)31 b(is)e(done)i(b)m(y)g(ha)m(ving)g(a)g(signal)f
(handler)i(for)e(the)g Fj(SIGCHLD)g Fi(signal)h(reap)397
2438 y(the)g(pro)s(cess.)40 b Fg(If)32 b(a)g(Cash)g(pr)-5
b(o)g(gr)g(am)34 b(sets)f(its)e(own)h(hand)5 b(ler)33
b(for)f(the)h Fj(SIGCHLD)f Fg(signal,)g(the)h(hand)5
b(ler)397 2550 y(must)33 b(r)-5 b(e)g(ap)33 b(de)-5 b(ad)34
b(childr)-5 b(en)33 b(by)g(c)-5 b(al)5 b(ling)33 b Fj(wait)p
Fg(,)e Fj(wait_any)p Fg(,)h(or)h Fj(reap_zombies)p Fg(.)39
b(Scsh)33 b(only)f(note:)397 2663 y(we)h(depr)-5 b(e)g(c)g(ate)36
b(interrupt-driven)d(c)-5 b(o)g(de,)34 b(and)e(hop)-5
b(e)34 b(to)e(pr)-5 b(ovide)34 b(alternative)f(to)-5
b(ols)33 b(in)e(a)i(futur)-5 b(e,)397 2776 y(multi-thr)g(e)g(ade)g(d)35
b(r)-5 b(ele)g(ase)35 b(of)d(Scsh)p Fi(.)306 2905 y Fe(\017)46
b Fj(Late)p Fi(:)40 b(The)31 b(c)m(hild)h(is)e(not)g(autoreap)s(ed)i
(un)m(til)f(it)g(dies)f Fg(and)g Fi(the)h(Cash)f(program)i(drops)f(all)
f(p)s(oin)m(ters)397 3018 y(to)h(its)f(pro)s(cess)g(ob)5
b(ject.)41 b(That)31 b(is,)f(the)g(pro)s(cess)g(table)h(is)f(cleaned)i
(out)e(during)i(garbage)f(collection.)397 3131 y Fg(Oops:)42
b(The)32 b Fj(late)e Fg(p)-5 b(olicy)33 b(is)f(not)g(supp)-5
b(orte)g(d)34 b(under)f(the)g(curr)-5 b(ent)34 b(r)-5
b(ele)g(ase)34 b(of)e(Cash.)41 b(It)32 b(r)-5 b(e)g(quir)g(es)397
3244 y(mor)g(e)33 b(sophistic)-5 b(ate)g(d)34 b(gc)f(ho)-5
b(oks)33 b(than)g(we)f(c)-5 b(an)33 b(get)h(fr)-5 b(om)32
b(this)g(r)-5 b(ele)g(ase)34 b(of)e(Caml.)306 3373 y
Fe(\017)46 b Fj(No_autoreaping)p Fi(:)40 b(If)30 b(autoreaping)i(is)e
(turned)h(o\033,)f(pro)s(cess)g(reaping)i(is)e(completely)h(under)397
3486 y(con)m(trol)h(of)e(the)h(programmer,)h(who)f(can)g(force)f
(outstanding)i(zom)m(bies)f(to)g(b)s(e)f(reap)s(ed)h(b)m(y)397
3599 y(man)m(ually)h(calling)f(the)g Fj(reap_zombies)f
Fi(pro)s(cedure)h(\(see)g(b)s(elo)m(w\).)227 3728 y(Note)g(that)g
(under)g(an)m(y)f(of)g(the)h(autoreap)h(p)s(olicies,)e(a)h(particular)h
(pro)s(cess)d Fg(p)i Fi(can)f(b)s(e)g(man)m(ually)i(reap)s(ed)227
3841 y(in)m(to)e(Cash)f(b)m(y)g(simply)f(calling)i Fj(wait)e
Fg(p)p Fi(.)40 b Fg(A)n(l)5 b(l)28 b Fi(zom)m(bies)i(can)f(b)s(e)g(man)
m(ually)h(reap)s(ed)f(with)g Fj(reap_zombies)p Fi(.)227
3954 y(The)i Fj(autoreap_policy)f Fi(pro)s(cedure)h(returns)g(the)g(p)s
(olicy's)f(previous)g(v)-5 b(alue.)41 b(Calling)227 4067
y Fj(autoreap_policy)47 b(\(\))30 b Fi(returns)h(the)g(curren)m(t)g(p)s
(olicy)g(without)g(no)g(c)m(hange.)0 4277 y Fj(val)47
b(reap_zombies)g(:)g(unit)f(->)h(bool)227 4415 y Fi(This)29
b(pro)s(cedure)h(reaps)f(all)g(outstanding)h(exited)f(c)m(hild)h(pro)s
(cesses)f(in)m(to)g(Cash.)41 b(It)28 b(returns)h(true)h(if)e(there)227
4528 y(are)j(no)g(more)f(c)m(hild)i(pro)s(cesses)e(to)g(w)m(ait)i(on,)e
(and)h(false)f(if)g(there)h(are)g(outstanding)g(pro)s(cesses)f(still)
227 4641 y(running)i(or)e(susp)s(ended.)0 5001 y Fk(Issues)39
b(with)h(pro)s(cess)f(reaping)90 b Fi(Reaping)35 b(a)g(pro)s(cess)f(do)
s(es)g(not)h(rev)m(eal)h(its)e(pro)s(cess)g(group)h(at)g(the)g(time)0
5114 y(of)29 b(death;)h(this)f(information)i(is)e(lost)g(when)h(the)f
(pro)s(cess)g(reap)s(ed.)41 b(This)29 b(means)h(that)f(a)g(dead,)i
(reap)s(ed)e(pro)s(cess)0 5227 y(is)36 b Fg(not)i(eligible)f
Fi(as)g(a)f(return)h(v)-5 b(alue)37 b(for)f(a)h(future)g
Fj(wait_process_group)f Fi(call.)59 b(This)36 b(is)g(not)h(lik)m(ely)g
(to)g(b)s(e)f(a)0 5340 y(problem)25 b(for)e(most)h(co)s(de,)h(as)e
(programs)h(almost)g(nev)m(er)g(w)m(ait)h(on)e(exited)h(pro)s(cesses)f
(b)m(y)h(pro)s(cess)f(group.)39 b(Pro)s(cess)1905 5589
y(40)p eop
%%Page: 41 41
41 40 bop 0 91 a Fi(group)30 b(w)m(aiting)g(is)e(usually)h(applied)h
(to)f Fg(stopp)-5 b(e)g(d)30 b Fi(pro)s(cesses,)f(whic)m(h)h(are)f(nev)
m(er)h(reap)s(ed.)40 b(So)29 b(it)g(is)g(unlik)m(ely)g(that)0
204 y(this)h(will)h(b)s(e)f(a)g(problem)i(for)e(most)h(programs.)141
341 y(Automatic)23 b(pro)s(cess)e(reaping)i(is)f(a)g(useful)f
(programming)j(con)m(v)m(enience.)40 b(Ho)m(w)m(ev)m(er,)26
b(if)21 b(a)h(program)h(is)e(careful)0 454 y(to)k(w)m(ait)h(for)f(all)g
(c)m(hildren,)j(and)d(do)s(es)g(not)g(wish)g(automatic)i(reaping)f(to)f
(happ)s(en,)h(the)g(programmer)h(can)e(simply)0 567 y(turn)31
b(pro)s(cess)f(autoreaping)i(o\033.)141 679 y(Programs)j(that)f(do)g
(not)f(wish)h(to)g(use)f(automatic)i(pro)s(cess)e(reaping)i(should)f(b)
s(e)f(a)m(w)m(are)i(that)f(some)g(Cash)0 792 y(routines)d(create)g
(subpro)s(cesses)f(but)h(do)g(not)g(return)g(the)g(c)m(hild's)g(pro)s
(c)g(ob)5 b(ject:)41 b Fj(run_with_in_channel)p Fi([2.2],)0
905 y(and)30 b(related)h(pro)s(cedures)f(\()p Fj(run_with_strings)p
Fi(,)g Fg(et)i(al.)p Fi(\).)40 b(Automatic)31 b(pro)s(cess)e(reaping)i
(will)f(clean)h(the)f(c)m(hild)0 1018 y(pro)s(cesses)35
b(created)i(b)m(y)f(these)g(pro)s(cedures)g(out)g(of)f(the)h(k)m
(ernel's)h(pro)s(cess)e(table.)57 b(If)35 b(a)g(program)i(do)s(esn't)f
(use)0 1131 y(pro)s(cess)27 b(reaping,)j(it)e(should)g(either)h(a)m(v)m
(oid)g(these)f(forms,)g(or)g(use)f Fj(wait_any)h Fi(to)g(w)m(ait)h(for)
e(the)h(c)m(hildren)i(to)e(exit.)0 1395 y Fk(3.5.2)103
b(Pro)s(cess)35 b(w)m(aiting)0 1590 y Fj(type)94 b(process_status)47
b(=)f(Unix.process_status)h(=)94 1703 y(|)g(WEXITED)g(of)g(int)94
1816 y(|)g(WSIGNALED)g(of)g(int)94 1929 y(|)g(WSTOPPED)g(of)g(int)0
2065 y(exception)g(Child_not_ready)0 2202 y(type)94 b(wait_flag)47
b(=)g(Unix.wait_flag)f(=)94 2315 y(|)h(WNOHANG)227 2453
y Fi(Raise)30 b Fj(Child_not_ready)g Fi(immediately)i(if)e(c)m(hild)h
(still)f(activ)m(e.)94 2640 y Fj(|)47 b(WUNTRACED)227
2778 y Fi(W)-8 b(ait)31 b(for)f(susp)s(end)g(as)g(w)m(ell)i(as)e(exit.)
0 2989 y Fj(val)47 b(wait)g(:)g(?wflags:wait_flag)f(list)h(->)g(proc)g
(->)g(process_status)0 3126 y(val)g(wait_pid)g(:)g(?wflags:wait_flag)f
(list)h(->)g(int)g(->)g(process_status)227 3264 y Fi(These)31
b(pro)s(cedures)g(w)m(ait)g(un)m(til)h(a)e(c)m(hild)i(pro)s(cess)e
(exits,)g(and)g(returns)h(its)f(exit)h(co)s(de.)40 b(The)31
b Fg(pr)-5 b(o)g(c)227 3377 y Fi(argumen)m(t)33 b(to)d
Fj(wait)g Fi(is)g(a)g(pro)s(cess)g(ob)5 b(ject)31 b(\(section)g
([3.5.1]\))g(or,)g(to)f Fj(wait_pid)p Fi(,)h(an)f(in)m(teger)i(pro)s
(cess)e(id.)227 3489 y(They)f(return)h(the)f(c)m(hild's)h(exit)f
(status)g(co)s(de)g(\(or)g(susp)s(ension)g(co)s(de,)g(if)g(the)g
Fj(WUNTRACED)f Fi(option)i(is)f(used,)227 3602 y(see)h(ab)s(o)m(v)m
(e\).)42 b(See)31 b(section)f([3.5.3])i(ab)s(out)e(querying)h(status)f
(v)-5 b(alues.)227 3715 y(The)31 b Fg(\035ags)g Fi(argumen)m(t)h(is)e
(a)g(list)g(of)g(additional)i(options.)41 b(See)31 b(ab)s(o)m(v)m(e.)0
3927 y Fj(type)94 b(wait_any)47 b(=)g(Proc_3_4.wait_any)f(=)94
4039 y(|)h(None_ready)94 4152 y(|)g(No_children)94 4265
y(|)g(Exited)g(of)g(\(proc)g(*)f(process_status\))0 4402
y(val)h(wait_any)g(:)g(?wflags:wait_flag)f(list)h(->)g(unit)g(->)g
(wait_any)227 4540 y Fi(The)31 b(optional)h Fg(\035ags)e
Fi(argumen)m(t)j(is)c(as)h(for)h Fj(wait)p Fi(.)40 b(This)30
b(pro)s(cedure)i(w)m(aits)f(for)f(an)m(y)h(c)m(hild)g(pro)s(cess)f(to)
227 4653 y(exit)h(\(or)f(stop,)h(if)f(the)g Fj(WUNTRACED)g
Fi(\035ag)h(is)f(used\).)41 b(If)29 b(one)i(c)m(hild)g(has)g(exited,)f
(it)h(returns)g(the)f(pro)s(cess')227 4765 y(pro)s(cess)g(ob)5
b(ject)31 b(and)g(status)f(co)s(de.)40 b(If)30 b(there)h(are)g(no)f(c)m
(hildren)i(left)e(for)h(whic)m(h)g(to)g(w)m(ait,)g Fj(No_children)227
4878 y Fi(is)f(returned.)42 b(If)29 b(the)i Fj(WNOHANG)f
Fi(\035ag)h(is)f(used,)g(and)h(none)g(of)f(the)h(c)m(hildren)h(are)e
(immediately)i(eligible)g(for)227 4991 y(w)m(aiting,)g(then)f
Fj(None_ready)f Fi(is)g(returned.)227 5104 y Fj(wait_any)g
Fi(will)h(not)g(return)g(a)f(pro)s(cess)g(that)h(has)f(b)s(een)h
(previously)f(w)m(aited)i(b)m(y)e(an)m(y)h(other)227
5217 y(pro)s(cess-w)m(ait)h(pro)s(cedure)f(\()p Fj(wait)p
Fi(,)f Fj(wait_pid)p Fi(,)g Fj(wait_any)p Fi(,)g(and)h
Fj(wait_process_group)p Fi(\).)40 b(It)30 b(will)227
5330 y(return)i(reap)s(ed)e(pro)s(cesses)g(that)h(ha)m(v)m(en't)h(y)m
(et)f(b)s(een)f(w)m(aited.)1905 5589 y(41)p eop
%%Page: 42 42
42 41 bop 227 91 a Fi(The)31 b(use)f(of)g Fj(wait_any)g
Fi(is)g(deprecated.)0 299 y Fj(val)47 b(wait_process_group)f(:)94
412 y(?wflags:wait_flag)h(list)f(->)h(proc)g(->)g(wait_any)0
548 y(val)g(wait_process_group_pgrp)f(:)94 661 y(?wflags:wait_flag)h
(list)f(->)h(int)g(->)g(wait_any)227 798 y Fi(These)31
b(pro)s(cedures)g(w)m(ait)g(for)f(an)m(y)h(c)m(hild)h(whose)e(pro)s
(cess)g(group)h(is)f Fg(pr)-5 b(o)g(c)32 b Fi(\(a)e(pro)s(cess)g(ob)5
b(ject,)31 b(for)227 911 y Fj(wait_process_group)p Fi(\))f(or)h
Fg(p)-5 b(grp)31 b Fi(\(an)g(in)m(teger)g(pro)s(cess)f(group)h(id,)g
(for)f Fj(wait_process_group_pgrp)p Fi(\).)227 1024 y(The)h
Fg(\035ags)g Fi(argumen)m(t)h(is)e(as)g(for)g Fj(wait)p
Fi(.)227 1137 y(Note)h(that)g(if)e(the)i(programmer)h(wishes)f(to)f(w)m
(ait)i(for)e(exited)g(pro)s(cesses)g(b)m(y)h(pro)s(cess)f(group,)h(the)
227 1250 y(program)h(should)f(tak)m(e)f(care)h(not)g(to)g(use)f(pro)s
(cess)g(reaping)h(\(section)g([3.5.1],)g(as)f(this)h(loses)f(pro)s
(cess)227 1362 y(group)h(information.)42 b(Ho)m(w)m(ev)m(er,)32
b(most)f(pro)s(cess-group)g(w)m(aiting)h(is)e(for)g(stopp)s(ed)g(pro)s
(cesses)g(\(to)227 1475 y(implemen)m(t)j(job)d(con)m(trol\),)i(so)e
(this)g(is)g(rarely)h(an)f(issue,)h(as)f(stopp)s(ed)g(pro)s(cesses)g
(are)h(not)f(sub)5 b(ject)31 b(to)227 1588 y(reaping.)0
1922 y Fk(3.5.3)103 b(Analysing)35 b(pro)s(cess)f(status)h(co)s(des)0
2117 y Fi(When)e(a)f(c)m(hild)h(pro)s(cess)f(dies)h(\(or)f(is)g(susp)s
(ended\),)i(its)e(paren)m(t)h(can)g(call)g(the)g Fj(wait)f
Fi(pro)s(cedure)h(to)g(reco)m(v)m(er)g(the)0 2230 y(exit)c(\(or)h(susp)
s(ension\))g(status)f(of)g(the)h(c)m(hild.)41 b(The)30
b(exit)g(status)f(is)g(a)h(small)g(in)m(teger)h(that)f(enco)s(des)f
(information)0 2343 y(describing)g(ho)m(w)f(the)g(c)m(hild)g
(terminated.)42 b(The)28 b(bit-lev)m(el)g(format)g(of)f(the)h(exit)g
(status)f(is)g(not)h(de\034ned)h(b)m(y)e(P)m(osix;)0
2456 y(y)m(ou)34 b(m)m(ust)h(use)f(pattern-matc)m(h)j(to)d(deco)s(de)h
(it.)51 b(Ho)m(w)m(ev)m(er,)37 b(if)d(a)g(c)m(hild)h(terminates)g
(normally)g(with)g(exit)f(co)s(de)0 2569 y(0,)c(P)m(osix)f(do)s(es)g
(require)h Fj(wait)f Fi(to)g(return)i(an)e(exit)g(status)h(that)f(is)g
(exactly)h(zero.)40 b(So)30 b Fg(status)f Fj(=)47 b(WEXITED)g(0)29
b Fi(is)g(a)0 2682 y(correct)i(w)m(a)m(y)h(to)e(test)g(for)h
(non-error,)g(normal)h(termination,)g Fg(e.g.)p Fi(,)141
2795 y Fj(let)47 b(proc)g(=)235 2907 y(\(fork_child)g(\(fun)f(\(\))h
(->)g(exec_path)g("rcp")g(["cash.tar.gz";)g("lambda.csd.hku.hk:"]\)\))
141 3020 y(in)141 3133 y(if)g(wait)g(proc)g(=)g(WEXITED)f(0)h(then)g
(delete_file)g("cash.tar.gz")0 3512 y Ff(3.6)112 b(Pro)s(cess)37
b(state)0 3707 y Fj(val)47 b(umask)g(:)g(unit)g(->)g(int)0
3844 y(val)g(set_umask)g(:)g(int)g(->)f(unit)0 3980 y(val)h(with_umask)
g(:)g(int)g(->)f(\(unit)h(->)g('a\))g(->)g('a)227 4117
y Fi(The)31 b(pro)s(cess')f(curren)m(t)i(umask)e(is)g(retriev)m(ed)i
(with)f Fj(umask)p Fi(,)f(and)h(set)f(with)h Fj(set_umask)f
Fg(p)-5 b(erms)p Fi(.)41 b(Calling)227 4230 y Fj(with_umask)29
b Fg(p)-5 b(erms)31 b(thunk)f Fi(c)m(hanges)g(the)f(umask)g(to)g
Fg(p)-5 b(erms)29 b Fi(for)g(the)g(duration)h(of)f(the)g(call)g(to)g
Fg(thunk)p Fi(.)41 b(If)227 4343 y Fg(thunk)31 b Fi(raises)f(an)h
(exception,)g(the)g(umask)f(is)g(reset)h(to)f(its)g(external)h(v)-5
b(alue.)0 4550 y Fj(val)47 b(chdir)g(:)g(?dir:string)f(->)h(unit)g(->)g
(unit)0 4687 y(val)g(cwd)g(:)g(unit)g(->)g(string)0 4823
y(val)g(with_cwd)g(:)g(string)f(->)h(\(unit)g(->)g('a\))g(->)g('a)141
4960 y Fi(These)42 b(pro)s(cedures)h(manipulate)h(the)e(curren)m(t)h(w)
m(orking)g(directory)-8 b(.)77 b(The)42 b(cwd)h(can)f(b)s(e)g(c)m
(hanged)h(with)0 5073 y Fj(chdir)33 b Fi(\(although)i(in)f(most)g
(cases,)g Fj(with_cwd)f Fi(is)g(preferrable\).)52 b Fj(chdir)46
b(\(\))34 b Fi(c)m(hanges)g(the)g(cwd)g(to)g(the)g(user's)0
5186 y(home)i(directory)-8 b(.)58 b Fj(with_cwd)35 b
Fg(dir)i(thunk)f Fi(calls)g Fg(thunk)g Fi(with)g(the)g(cwd)g(temp)s
(orarily)g(set)f(to)h Fg(dir)p Fi(;)i(when)e Fg(thunk)0
5299 y Fi(returns,)31 b(or)g(raises)f(an)g(exception,)i(the)e(cwd)h(is)
f(returned)i(to)e(its)g(original)i(v)-5 b(alue.)1905
5589 y(42)p eop
%%Page: 43 43
43 42 bop 0 91 a Fj(val)47 b(pid)g(:)g(unit)g(->)g(int)0
228 y(val)g(parent_pid)g(:)g(unit)f(->)h(int)0 364 y(val)g
(process_group)g(:)g(unit)f(->)h(int)0 501 y(val)g(set_process_group)f
(:)h(?proc:proc)g(->)g(int)g(->)g(unit)0 637 y(val)g
(set_process_group_pid)f(:)h(int)g(->)g(int)g(->)g(unit)227
774 y(pid)30 b Fi(and)h Fj(parent_pid)f Fi(retriev)m(e)i(the)e(pro)s
(cess)g(id)h(for)f(the)g(curren)m(t)i(pro)s(cess)e(and)h(its)f(paren)m
(t.)227 887 y Fj(process_group)g Fi(returns)h(the)g(pro)s(cess)f(group)
h(of)f(the)g(curren)m(t)i(pro)s(cess.)40 b(A)30 b(pro)s(cess')g(pro)s
(cess-group)227 999 y(can)h(b)s(e)f(set)g(with)h Fj
(set_process_group...)p Fi(;)f(the)h(v)-5 b(alue)30 b
Fg(pr)-5 b(o)g(c)32 b Fi(\(for)e Fj(set_process_group_pid)p
Fi(,)g(an)227 1112 y(in)m(teger)i(pro)s(cess)e(id\))h(sp)s(eci\034es)f
(the)g(a\033ected)h(pro)s(cess.)41 b Fg(pr)-5 b(o)g(c)31
b Fi(defaults)g(to)f(the)h(curren)m(t)h(pro)s(cess.)0
1432 y Fj(type)94 b(prio)47 b(=)g(Proc_state_3_5.prio)f(=)94
1545 y(|)h(Prio_process)94 1658 y(|)g(Prio_pgrp)94 1770
y(|)g(Prio_user)227 1907 y Fi(T)-8 b(ells)31 b(to)g(the)f(follo)m(wing)
i Fj(priority)e Fi(and)h Fj(set_priority)f Fi(pro)s(cedures)h(if)f
Fg(\003who)g Fi(is)g(a)g(pro)s(cess)g(id,)h(a)227 2020
y(pro)s(cess)f(group)h(id)g(or)f(a)h(user)f(id,)h(resp)s(ectiv)m(ely)-8
b(.)0 2226 y Fj(val)47 b(set_priority)g(:)g(?who:proc)f(->)h(prio)g(->)
g(int)g(->)g(unit)0 2363 y(val)g(set_priority_pid)g(:)f(int)h(->)g
(prio)g(->)g(int)g(->)g(unit)0 2499 y(val)g(priority)g(:)g(?who:proc)f
(->)h(prio)g(->)g(int)0 2636 y(val)g(priority_pid)g(:)g(int)f(->)h
(prio)g(->)g(int)0 2772 y(val)g(nice)g(:)g(?proc:proc)f(->)h(int)g(->)g
(unit)0 2909 y(val)g(nice_pid)g(:)g(int)g(->)f(int)h(->)g(unit)227
3045 y Fi(These)31 b(pro)s(cedures)g(manipulate)h(nice)f(v)-5
b(alues)30 b(of)g(pro)s(cesses.)40 b(The)31 b(optional)g(argumen)m(ts)h
(of)e(t)m(yp)s(e)h Fj(proc)227 3158 y Fi(default)g(to)g(the)f(curren)m
(t)i(pro)s(cess.)40 b(The)31 b(ones)f(of)g(t)m(yp)s(e)h
Fj(prio)f Fi(indicate)h(ho)m(w)h(to)e(in)m(terpret)i(the)f(\034rst)227
3271 y(argumen)m(t.)43 b(The)30 b Fj(int)h Fi(last)f(argumen)m
(ts/results)i(are)f(the)g(nice)f(v)-5 b(alues,)31 b(except)f(for)h
Fj(nice...)p Fi(,)f(where)h(it)227 3384 y(is)f(a)h(delta)g(to)f(b)s(e)g
(added)h(to)g(the)f(nice)h(v)-5 b(alue.)41 b(If)29 b(y)m(ou)i(insist)f
(on)h(using)f(pids,)h(there)g(are)g Fj(..._pid)227 3496
y Fi(v)-5 b(arian)m(ts,)31 b(where)h(the)e(\034rst)h(argumen)m(t)h(is)e
(an)g(in)m(teger)i(pro)s(cess)e(id.)41 b(The)31 b(corresp)s(onding)g(P)
m(osix)227 3609 y(pro)s(cedures)g(are)g Fj({set,get}priority)p
Fi(.)0 3816 y Fj(val)47 b(user_login_name)g(:)f(unit)h(->)g(string)0
3952 y(val)g(user_uid)g(:)g(unit)g(->)f(int)0 4089 y(val)h
(user_effective_uid)f(:)h(unit)g(->)g(int)0 4225 y(val)g(user_gid)g(:)g
(unit)g(->)f(int)0 4362 y(val)h(user_effective_gid)f(:)h(unit)g(->)g
(int)0 4498 y(val)g(user_supplementary_gids)f(:)h(unit)g(->)g(int)g
(array)0 4635 y(val)g(set_uid)g(:)g(int)g(->)g(unit)0
4772 y(val)g(set_gid)g(:)g(int)g(->)g(unit)227 4908 y
Fi(These)31 b(routines)g(get)g(and)f(set)h(the)f(e\033ectiv)m(e)h(and)g
(real)g(user)f(and)h(group)g(ids.)40 b(The)31 b Fj(set_uid)f
Fi(and)227 5021 y Fj(set_gid)g Fi(routines)h(corresp)s(ond)g(to)g(the)g
(P)m(osix)f Fj(setuid\(\))g Fi(and)h Fj(setgid\(\))f
Fi(pro)s(cedures.)0 5227 y Fj(type)94 b(process_times)47
b(=)f(Unix.process_times)h(=)g({)94 5340 y(tms_utime)g(:)g(float)g(;)
1905 5589 y Fi(43)p eop
%%Page: 44 44
44 43 bop 94 91 a Fj(tms_stime)47 b(:)g(float)g(;)94
204 y(tms_cutime)g(:)g(float)g(;)94 317 y(tms_cstime)g(:)g(float)g(;)0
430 y(})227 563 y Fi(The)31 b(pro)s(cess)f(times)h(are:)306
687 y Fe(\017)46 b Fj(tms_utime)p Fi(:)40 b(user)31 b(CPU)f(time)306
812 y Fe(\017)46 b Fj(tms_stime)p Fi(:)40 b(system)30
b(CPU)h(time)306 937 y Fe(\017)46 b Fj(tms_cutime)p Fi(:)40
b(the)31 b(sames)f(for)g(all)p Fd(:)15 b(:)g(:)306 1061
y Fe(\017)46 b Fj(tms_cstime)p Fi(:)40 b Fd(:)15 b(:)g(:)q
Fi(descendan)m(t)32 b(\(terminated\))h(pro)s(cesses)227
1186 y(Note)e(that)g(CPU)f(time)h(clo)s(c)m(k)g(resolution)g(is)f(not)h
(the)f(same)h(as)f(the)h(real-time)g(clo)s(c)m(k)g(resolution)227
1299 y(pro)m(vided)h(b)m(y)e Fj(time_plus_ticks)p Fi(.)40
b(That's)31 b(Unix.)0 1495 y Fj(val)47 b(process_times)g(:)g(unit)f(->)
h(process_times)227 1628 y Fi(Get)31 b(the)f(pro)s(cess_times)h(of)f
(the)h(curren)m(t)h(pro)s(cess.)0 1824 y Fj(val)47 b(cpu_ticks_per_sec)
f(:)h(unit)g(->)g(int)227 1957 y Fi(Returns)31 b(the)f(resolution)i(of)
e(the)g(CPU)h(timer)g(in)f(clo)s(c)m(k)h(tic)m(ks)f(p)s(er)h(second.)41
b(This)30 b(can)h(b)s(e)f(used)g(to)227 2070 y(con)m(v)m(ert)i(the)f
(times)f(rep)s(orted)i(b)m(y)e Fj(process_times)g Fi(to)g(tic)m(ks.)0
2392 y Ff(3.7)112 b(User)38 b(and)g(group)g(database)h(access)0
2588 y Fi(These)25 b(pro)s(cedures)f(are)h(used)f(to)h(access)f(the)g
(user)h(and)f(group)h(databases)g(\()p Fg(e.g.)p Fi(,)h(the)e(ones)h
(traditionally)g(stored)0 2701 y(in)30 b Fj(/etc/passwd)g
Fi(and)h Fj(/etc/group)p Fi(.\))0 2837 y Fj(type)94 b(user_info)47
b(=)g(User_group_3_6.user_info)f(=)h({)94 2950 y(ui_name)g(:)g(string)g
(;)94 3063 y(ui_uid)g(:)g(int)g(;)94 3176 y(ui_gid)g(:)g(int)g(;)94
3289 y(ui_home_dir)g(:)g(string)f(;)94 3402 y(ui_shell)h(:)g(string)g
(;)0 3515 y(})227 3647 y Fi(This)31 b(record)g(giv)m(es)f(the)h
(recorded)h(information)f(for)g(a)f(particular)i(user.)0
3844 y Fj(val)47 b(user_info)g(:)g(int)g(->)f(user_info)0
3980 y(val)h(user_info_name)g(:)g(string)f(->)h(user_info)227
4113 y Fi(Return)31 b(a)f(user_info)h(record)g(for)f(this)h(user:)40
b(an)31 b(in)m(teger)h(uid)e(\(for)h Fj(user_info)p Fi(\),)f(or)g(a)h
(string)227 4226 y(user-name)h(\(for)e Fj(user_info_name)p
Fi(\).)0 4423 y Fj(val)47 b(username_to_uid)g(:)f(string)h(->)g(int)0
4559 y(val)g(uid_to_username)g(:)f(int)h(->)g(string)227
4692 y Fi(These)31 b(t)m(w)m(o)h(pro)s(cedures)f(con)m(v)m(ert)h(in)m
(teger)f(uid's)g(and)g(user)f(names)h(to)f(the)h(other)g(form.)0
4888 y Fj(type)94 b(group_info)47 b(=)g(User_group_3_6.group_info)f(=)h
({)94 5001 y(gi_name)g(:)g(string)g(;)94 5114 y(gi_gid)g(:)g(int)g(;)94
5227 y(gi_members)g(:)g(string)f(list)h(;)0 5340 y(})1905
5589 y Fi(44)p eop
%%Page: 45 45
45 44 bop 227 91 a Fi(This)31 b(record)g(giv)m(es)f(the)h(recorded)h
(information)f(for)g(a)f(particular)i(group.)0 303 y
Fj(val)47 b(group_info)g(:)g(int)g(->)f(group_info)0
439 y(val)h(group_info_name)g(:)f(string)h(->)g(group_info)227
577 y Fi(Return)31 b(a)f(group_info)i(record)f(for)f(this)g(group:)42
b(an)30 b(in)m(teger)i(gid)f(\(for)f Fj(group_info)p
Fi(\),)g(or)h(a)f(string)227 690 y(group-name)i(\(for)f
Fj(group_info_name)p Fi(\).)0 901 y Fj(val)47 b(groupname_to_gid)g(:)f
(string)h(->)g(int)0 1038 y(val)g(gid_to_groupname)g(:)f(int)h(->)g
(string)227 1175 y Fi(These)31 b(t)m(w)m(o)h(pro)s(cedures)f(con)m(v)m
(ert)h(in)m(teger)f(gid's)g(and)g(group)g(names)f(to)h(the)g(other)g
(form.)0 1517 y Ff(3.8)112 b(A)m(ccessing)37 b(command-line)e(argumen)m
(ts)0 1712 y Fj(val)47 b(command_line_arguments)f(:)h(string)g(list)g
(option)g(Pervasives.ref)0 1849 y(val)g(command_line)g(:)g(unit)f(->)h
(string)g(list)227 1987 y Fi(The)31 b(list)f(of)g(strings)h
Fj(command_line_arguments)e Fi(con)m(tains)j(the)e(argumen)m(ts)i
(passed)f(to)f(the)h(Cash)227 2100 y(pro)s(cess)f(on)h(the)f(command)i
(line.)41 b(Calling)32 b Fj(command_line)46 b(\(\))30
b Fi(returns)h(the)g(complete)h Fj(argv)e Fi(string)227
2213 y(list,)h(including)g(the)g(program.)42 b(So)30
b(if)g(w)m(e)h(run)g(a)f(Cash)h(program)603 2326 y Fj
(/usr/shivers/bin/myls)47 b(-CF)f(src)227 2438 y Fi(then)31
b Fj(command_line_arguments)f Fi(is)603 2551 y Fj(["-CF";)47
b("src"])227 2664 y Fi(and)31 b Fj(command_line)47 b(\(\))30
b Fi(returns)603 2777 y Fj(["/usr/shivers/bin/myls";)46
b("-CF";)h("src"])227 2890 y Fg(Oops:)40 b Fj(command_line_arguments)30
b Fg(should)j(b)-5 b(e)34 b(a)e(string)g(list)g(r)-5
b(ef,)32 b(sans)g(option.)41 b(This)31 b(is)h(due)i(to)e(the)227
3003 y(way)g(Oc)-5 b(aml)34 b(script)e(exe)-5 b(cution)34
b(munges)f(Sys.ar)-5 b(gv:)42 b(it's)32 b(done)g(after)h(o)-5
b(c)g(amlrun)34 b(ar)-5 b(gument)33 b(pr)-5 b(o)g(c)g(essing,)227
3116 y(and)32 b(just)h(b)-5 b(efor)g(e)34 b Fj(#use)p
Fg(-ing)e(the)h(script.)41 b(No)32 b(way)g(to)h(insert)d
Fj(command_line_arguments)f Fg(initialization)227 3229
y(her)-5 b(e.)43 b(So)30 b Fj(!command_line_arguments)f
Fg(wil)5 b(l)32 b(b)-5 b(e)34 b Fj(None)c Fg(until)i(the)h(\034rst)f(c)
-5 b(al)5 b(l)33 b(to)d Fj(command_line)47 b(\(\))p Fg(.)41
b(T)-7 b(o)227 3342 y(r)i(eset)34 b(things)e(as)g(they)h(should)g(b)-5
b(e,)33 b(use)g(the)g(r)-5 b(e)g(cip)g(e)35 b(describ)-5
b(e)g(d)34 b(b)-5 b(elow)34 b(and)e(for)-5 b(get)34 b(al)5
b(l)32 b(this)g(mess.)0 3553 y Fj(val)47 b(make_command_line_arguments)
f(:)h(unit)g(->)g(string)g(list)227 3691 y Fi(Usage:)41
b(insert)30 b(the)h(follo)m(wing)h(co)s(de)e(in)h(fron)m(t)g(of)e(y)m
(our)i(script:)321 3804 y Fj(let)47 b(command_line_arguments)g(=)g(ref)
f(\(make_command_line_arguments)h(\(\)\))227 3917 y Fi(\(suppress)31
b Fj(ref)f Fi(if)g(y)m(ou)g(don't)h(in)m(tend)h(to)f(mo)s(dify)e(it.\))
41 b(Then)31 b(y)m(ou)g(get)g(the)f(in)m(tended)227 4029
y Fj(command_line_arguments)p Fi(.)40 b(Sorry)-8 b(.)0
4241 y Fj(val)47 b(arg)g(:)g(?default:'a)f(->)h('a)g(list)g(->)g(int)g
(->)g('a)0 4377 y(val)g(arg_star)g(:)g(?default_thunk:\(unit)f(->)h
('a\))g(->)g('a)g(list)g(->)g(int)g(->)g('a)0 4514 y(val)g(argv)g(:)g
(?default:string)f(->)h(int)g(->)g(string)227 4652 y
Fi(These)31 b(pro)s(cedures)g(are)g(useful)f(for)g(accessing)h(argumen)
m(ts)h(from)e(argumen)m(t)i(lists.)40 b Fj(arg)30 b Fg(ar)-5
b(glist)33 b(n)227 4765 y Fi(returns)e(the)g Fg(n)p Fi(th)f(elemen)m(t)
i(of)e Fg(ar)-5 b(glist)p Fi(.)41 b(The)31 b(index)f(is)g(1-based.)41
b(If)30 b Fg(n)g Fi(is)g(to)s(o)g(large,)h Fg(default)g
Fi(is)f(returned;)227 4877 y(if)g(no)h Fg(default)p Fi(,)g(then)g(an)f
(error)h(is)f(signaled.)227 4990 y Fj(arg_star)g Fi(is)g(similar,)h
(except)g(that)g(the)f Fg(default-thunk)i Fi(is)e(called)h(to)g
(generate)h(the)e(default)h(v)-5 b(alue.)227 5103 y Fj(argv)30
b Fg(n)g Fi(is)g(simply)g Fj(arg)47 b(\(command_line)g(\(\)\))g(\()p
Fg(n)30 b Fj(+)47 b(1\))p Fi(.)40 b(The)31 b(+1)f(o\033set)g(ensures)h
(that)g(the)f(t)m(w)m(o)227 5216 y(expressions:)368 5329
y Fj(arg)47 b(!command_line_arguments)g(n;)1905 5589
y Fi(45)p eop
%%Page: 46 46
46 45 bop 368 91 a Fj(argv)47 b(n)227 204 y Fi(return)32
b(the)e(same)h(argumen)m(t)h(\(assuming)f(the)g(user)f(has)g(not)h(reb)
s(ound)g(or)f(mo)s(di\034ed)227 317 y Fj(command_line_arguments)p
Fi(\).)40 b(Example:)321 430 y Fj(if)47 b(!command_line_arguments)g(=)g
([])f(then)415 543 y(fork_child)509 656 y(\(fun)h(\(\))g(->)603
769 y(exec_path)g("xterm")g(["-n";)g(host;)f("-title";)h(host;)g
("-name";)g("xterm_")g(^)g(host]\))321 882 y(else)415
995 y(let)g(progname)g(=)g(file_name_nondirectory)f(\(argv)h(1\))g(in)
415 1108 y(let)g(title)g(=)g(host)g(^)g(":")g(^)g(progname)f(in)415
1220 y(fork_child)509 1333 y(\(fun)h(\(\))g(->)650 1446
y(exec_path)g("xterm")744 1559 y(\("-n")g(::)g(title)g(::)g("-title")f
(::)h(title)g(::)g("-e")g(::)g(!command_line_arguments\)\))141
1883 y Fi(A)32 b(subtlet)m(y:)44 b(when)33 b(the)f(o)s(caml)g(in)m
(terpreter)i(is)e(used)g(to)g(execute)g(a)g(Cash)g(program,)i(the)e
(program)h(name)0 1996 y(rep)s(orted)38 b(in)g(the)g(head)g(of)f(the)h
Fj(command_line)47 b(\(\))37 b Fi(list)h(is)f(the)h(Cash)g(program,)j
Fg(not)c Fi(the)h(in)m(terpreter.)64 b(F)-8 b(or)0 2109
y(example,)31 b(if)f(w)m(e)h(ha)m(v)m(e)h(a)e(shell)g(script)h(in)f
(\034le)h Fj(fullecho)p Fi(:)376 2222 y Fj(#!/usr/local/bin/cash)376
2335 y(open)47 b(Cash;;)376 2448 y(List.iter)g(\(fun)f(arg)h(->)g
(print_string)g(arg;)g(print_char)g(')g('\))g(\(command_line)f
(\(\)\);;)141 2561 y Fi(and)31 b(w)m(e)g(run)g(the)f(program)376
2674 y Fj(fullecho)47 b(hello)f(world)141 2787 y Fi(the)31
b(program)g(will)g(prin)m(t)h(out)376 2900 y Fj(./fullecho)47
b(hello)f(world)141 3012 y Fi(not)376 3125 y Fj(/usr/local/bin/cashtop)
g(-I)h(mydir)g(./fullecho)g(hello)g(world)141 3238 y
Fg(The)40 b Fj(./)e Fg(pr)-5 b(ep)g(ende)g(d)43 b(to)c(the)i(name)e(of)
h(the)g(pr)-5 b(o)g(gr)g(am)42 b(is)d(an)g(artifact)h(of)f(the)i(inter)
-5 b(active)41 b(shel)5 b(l)40 b(\(b)-5 b(ash,)42 b(or)0
3351 y(some)32 b(so\))h(on)f(a)g(p)-5 b(articular)34
b(OS)e(\026)g(it)g(may)g(or)h(may)e(not)i(app)-5 b(e)g(ar)33
b(elsewher)-5 b(e.)141 3464 y Fi(This)34 b(argumen)m(t)h(line)f(pro)s
(cessing)g(ensures)g(that)g(if)f(a)g(Cash)h(program)h(is)e(subsequen)m
(tly)h(compiled)h(in)m(to)g(a)0 3577 y(standalone)i(executable)g(or)e
(b)m(yte-compiled)j(to)e(a)f(custom)i(executable,)h(or)e(ev)m(en)g(a)f
(b)m(yte-co)s(de)i(dynamically)0 3690 y(link)m(ed)k(\034le,)i
(executable)e(b)m(y)f(the)g(o)s(camlrun)h(virtual)f(mac)m(hine,)45
b(its)39 b(seman)m(tics)i(will)g(b)s(e)e(unc)m(hanged)j(\026)e(the)0
3803 y(arglist)26 b(pro)s(cessing)g(is)g(in)m(v)-5 b(arian)m(t.)41
b(In)25 b(e\033ect,)i(the)f Fj(/usr/local/bin/cash)g
Fi(is)f(not)h(part)h(of)e(the)h(program;)j(it's)d(a)0
3916 y(sp)s(eci\034cation)k(for)e(the)h(mac)m(hine)i(to)e(execute)g
(the)g(program)h(on,)f(so)g(it)g(is)f(not)h(prop)s(erly)g(part)g(of)g
(the)g(program's)0 4029 y(argumen)m(t)j(list.)0 4296
y Ff(3.9)112 b(System)37 b(parameters)0 4491 y Fj(val)47
b(system_name)g(:)g(unit)f(->)h(string)227 4629 y Fi(Returns)31
b(the)f(name)h(of)f(the)h(host)f(on)h(whic)m(h)g(w)m(e)h(are)e
(executing.)42 b(This)30 b(ma)m(y)h(b)s(e)f(a)g(lo)s(cal)h(name,)g(suc)
m(h)g(as)227 4742 y(\020solar,\021)39 b(as)30 b(opp)s(osed)g(to)h(a)f
(fully-quali\034ed)h(domain)h(name)f(suc)m(h)f(as)g(\020solar.csie.n)m
(tu.edu.t)m(w.\021)0 5083 y Ff(3.10)112 b(Signal)37 b(system)0
5279 y Fj(val)47 b(signal_process)g(:)g(proc)f(->)h(int)g(->)g(unit)
1905 5589 y Fi(46)p eop
%%Page: 47 47
47 46 bop 0 91 a Fj(val)47 b(signal_process_pid)f(:)h(int)g(->)g(int)g
(->)g(unit)0 228 y(val)g(signal_process_group)f(:)h(proc)g(->)g(int)g
(->)g(unit)0 364 y(val)g(signal_process_group_pgrp)f(:)h(int)g(->)g
(int)g(->)g(unit)227 502 y Fi(These)31 b(t)m(w)m(o)h(pair)f(of)e(pro)s
(cedures)i(send)g(signals)f(to)h(a)f(sp)s(eci\034c)g(pro)s(cess,)h(and)
f(all)h(the)g(pro)s(cesses)e(in)i(a)227 615 y(sp)s(eci\034c)g(pro)s
(cess)f(group,)h(resp)s(ectiv)m(ely)-8 b(.)41 b(The)31
b Fg(pr)-5 b(o)g(c)32 b Fi(argumen)m(ts)g(are)e(pro)s(cesses,)g(or,)h
(for)227 728 y Fj(signal_..._pid)p Fi(,)f(in)m(teger)i(pro)s(cess)e
(ids.)0 938 y Fj(type)94 b(itimer)47 b(=)g(Unix.interval_timer)f(=)94
1051 y(|)h(ITIMER_REAL)227 1188 y Fi(decremen)m(ts)32
b(in)f(real)g(time,)g(and)f(sends)g(the)h(signal)g Fj(SIGALRM)f
Fi(when)h(expired.)94 1375 y Fj(|)47 b(ITIMER_VIRTUAL)227
1512 y Fi(decremen)m(ts)32 b(in)f(pro)s(cess)f(virtual)h(time,)g(and)f
(sends)g Fj(SIGVTALRM)g Fi(when)h(expired.)94 1699 y
Fj(|)47 b(ITIMER_PROF)227 1836 y Fi(\(for)31 b(pro\034ling\))g
(decremen)m(ts)h(b)s(oth)f(when)g(the)g(pro)s(cess)e(is)h(running)i
(and)f(when)g(the)f(system)g(is)g(running)227 1949 y(on)h(b)s(ehalf)f
(of)g(the)h(pro)s(cess;)f(it)g(sends)g Fj(SIGPROF)g Fi(when)h(expired.)
227 2136 y(The)g(three)g(kinds)f(of)g(in)m(terv)-5 b(al)32
b(timers.)0 2346 y Fj(type)94 b(itimer_status)47 b(=)f
(Unix.interval_timer_status)h(=)g({)94 2459 y(it_interval)g(:)g(float)f
(;)227 2597 y Fi(P)m(erio)s(d)94 2783 y Fj(it_value)h(:)g(float)g(;)227
2921 y Fi(Curren)m(t)32 b(v)-5 b(alue)31 b(of)f(the)g(timer)0
3107 y Fj(})227 3245 y Fi(The)h(status)f(of)g(an)h(in)m(terv)-5
b(al)31 b(timer)0 3455 y Fj(val)47 b(itimer)g(:)g
(?newstat:itimer_status)f(->)h(itimer)g(->)g(itimer_status)227
3592 y Fi(This)31 b(is)f(a)g(straighforw)m(ard)i(in)m(terface)g(to)e
(Unix.getitimer)i(\(if)e(no)h Fg(newstat)p Fi(\))f(and)h
(Unix.setitimer.)0 3803 y Fj(val)47 b(pause_until_interrupt)f(:)h(unit)
g(->)g(unit)227 3940 y Fi(The)31 b(name)g(sa)m(ys)f(it)g(all.)0
4150 y Fj(val)47 b(sleep)g(:)g(int)g(->)g(unit)0 4287
y(val)g(sleep_until)g(:)g(float)f(->)h(unit)227 4424
y Fi(The)31 b Fj(sleep)f Fi(pro)s(cedure)h(causes)g(the)f(pro)s(cess)g
(to)h(sleep)f(for)g Fg(se)-5 b(cs)32 b Fi(seconds.)40
b(The)31 b Fj(sleep_until)227 4537 y Fi(pro)s(cedure)h(causes)e(the)h
(pro)s(cess)e(to)i(sleep)f(un)m(til)i Fg(time)e Fi(\(see)g(section)h
([3.11]\).)0 4878 y Ff(3.11)112 b(Time)0 5073 y Fi(Cash's)44
b(time)h(system)f(is)f(fairly)h(sophisticated,)49 b(particularly)d
(with)f(resp)s(ect)f(to)g(its)g(careful)h(treatmen)m(t)h(of)0
5186 y(time)33 b(zones.)49 b(Ho)m(w)m(ev)m(er,)35 b(casual)e(users)g
(shouldn't)g(b)s(e)g(in)m(timidated;)j(all)d(of)g(the)g(complexit)m(y)h
(is)f(optional,)h(and)0 5299 y(defaulting)d(all)g(the)g(optional)g
(argumen)m(ts)h(reduces)f(the)g(system)f(to)g(a)g(simple)h(in)m
(terface.)1905 5589 y(47)p eop
%%Page: 48 48
48 47 bop 0 91 a Fk(3.11.1)103 b(T)-9 b(erminology)0
287 y Fi(\020UTC\021)46 b(and)38 b(\020UCT\021)46 b(stand)38
b(for)f(\020univ)m(ersal)i(co)s(ordinated)g(time,\021)48
b(whic)m(h)39 b(is)f(the)g(o\036cial)h(name)f(for)g(what)g(is)0
399 y(collo)s(quially)31 b(referred)g(to)f(as)g(\020Green)m(wic)m(h)j
(Mean)d(Time.\021)141 512 y(P)m(osix)e(allo)m(ws)g(a)g(single)g(time)g
(zone)g(to)f(sp)s(ecify)g Fg(two)g Fi(di\033eren)m(t)i(o\033sets)e
(from)g(UTC:)h(one)g(standard)g(one,)g(and)0 625 y(one)j(for)f
(\020summer)h(time.\021)49 b(Summer)31 b(time)g(is)f(frequen)m(tly)h
(some)f(sort)h(of)f(da)m(yligh)m(t)i(sa)m(vings)e(time.)141
738 y(The)42 b(Cash)f(time)h(pac)m(k)-5 b(age)42 b(consisten)m(tly)h
(uses)d(this)h(terminology:)64 b(w)m(e)42 b(nev)m(er)g(sa)m(y)f(\020gm)
m(t\021)50 b(or)42 b(\020dst;\021)54 b(w)m(e)0 851 y(alw)m(a)m(ys)31
b(sa)m(y)f(\020utc\021)39 b(and)31 b(\020summer)g(time.\021)0
1115 y Fk(3.11.2)103 b(Basic)35 b(data)h(t)m(yp)s(es)0
1310 y Fi(W)-8 b(e)31 b(ha)m(v)m(e)g(t)m(w)m(o)h(t)m(yp)s(es:)40
b Fg(time)30 b Fi(and)h Fg(date)p Fi(.)141 1447 y(A)f
Fg(time)h Fi(sp)s(eci\034es)f(an)h(instan)m(t)h(in)f(the)g(history)g
(of)f(the)h(univ)m(erse.)43 b(It)30 b(is)g(lo)s(cation)i(and)f
(time-zone)h(indep)s(en-)0 1559 y(den)m(t.)40 b(A)26
b(time)h(is)f(a)g(real)h(v)-5 b(alue)27 b(giving)f(the)h(n)m(um)m(b)s
(er)h(of)e(elapsed)h(seconds)g(since)f(the)h(Unix)f(\020ep)s(o)s(c)m
(h\021)34 b(\(Midnigh)m(t,)0 1672 y(Jan)m(uary)i(1,)g(1970)f(UTC\).)g
(Time)h(v)-5 b(alues)34 b(pro)m(vide)i(nearly)f(arbitrary)h(time)f
(resolution,)i(limited)f(only)f(b)m(y)f(the)0 1785 y(Caml)d(\035oats)g
(\(IEEE\).)141 1898 y(A)g Fg(date)i Fi(is)e(a)h(name)g(for)g(an)g
(instan)m(t)h(in)f(time)g(that)g(is)g(sp)s(eci\034ed)g(relativ)m(e)g
(to)g(some)g(lo)s(cation/time-zone)j(in)0 2011 y(the)c(w)m(orld,)g
Fg(e.g.)p Fi(:)141 2124 y(F)-8 b(rida)m(y)32 b(Octob)s(er)f(31,)f(1994)
h(3:47:21)h(pm)e(EST.)141 2261 y(Dates)h(pro)m(vide)h(one-second)f
(resolution,)h(and)f(are)g(expressed)g(with)g(the)g(follo)m(wing)h
(record)g(t)m(yp)s(e)f(\(a)f(P)m(osix)0 2373 y(tm)h(struct\):)0
2510 y Fj(type)94 b(date)47 b(=)g(Time_3_10.date)f(=)h({)94
2623 y(seconds)g(:)g(int)g(;)227 2761 y Fi(Seconds)31
b(after)g(the)f(min)m(ute)i([0-59].)94 2948 y Fj(minute)47
b(:)g(int)g(;)227 3086 y Fi(Min)m(utes)31 b(after)g(the)f(hour)h
([0-59].)94 3274 y Fj(hour)47 b(:)g(int)g(;)227 3412
y Fi(Hours)30 b(since)h(midnigh)m(t)h([0-23].)94 3599
y Fj(month_day)47 b(:)g(int)g(;)227 3737 y Fi(Da)m(y)31
b(of)f(the)g(mon)m(th)i([1-31].)94 3925 y Fj(month)47
b(:)g(int)g(;)227 4063 y Fi(Mon)m(ths)31 b(since)g(Jan)m(uary)g
([0-11].)94 4250 y Fj(year)47 b(:)g(int)g(;)227 4388
y Fi(Y)-8 b(ears)31 b(since)f(1900.)94 4576 y Fj(tz_name)47
b(:)g(string)g(option)f(;)227 4713 y Fi(Time-zone)32
b(name:)41 b(an)31 b(optional)h(string.)94 4901 y Fj(tz_secs)47
b(:)g(int)g(option)f(;)227 5039 y Fi(Time-zone)32 b(o\033set:)40
b(an)31 b(optional)h(in)m(teger.)94 5226 y Fj(is_summer)47
b(:)g(bool)g(option)f(;)1905 5589 y Fi(48)p eop
%%Page: 49 49
49 48 bop 227 91 a Fi(Summer)32 b(\(Da)m(yligh)m(t)g(Sa)m(vings\))f
(time)g(in)f(e\033ect?)94 279 y Fj(week_day)47 b(:)g(int)g(;)227
417 y Fi(Da)m(ys)30 b(since)h(Sunda)m(y)g([0-6].)94 604
y Fj(year_day)47 b(:)g(int)g(;)227 742 y Fi(Da)m(ys)30
b(since)h(Jan.)41 b(1)30 b([0-365].)0 930 y Fj(})141
1066 y Fi(If)37 b(the)h Fj(tz_secs)g Fi(\034eld)h(is)e(giv)m(en,)k(it)d
(sp)s(eci\034es)f(the)i(time-zone's)g(o\033set)f(from)g(UTC)g(in)g
(seconds.)63 b(If)37 b(it)h(is)0 1179 y(sp)s(eci\034ed,)28
b(the)e Fj(tz_name)g Fi(and)h Fj(is_summer)f Fi(\034elds)g(are)h
(ignored)g(when)g(using)g(the)g(date)g(structure)g(to)f(determine)0
1292 y(a)k(sp)s(eci\034c)h(instan)m(t)g(in)g(time.)141
1405 y(If)f(the)g Fj(tz_name)g Fi(\034eld)h(is)f(giv)m(en,)i(it)e(is)g
(a)h(time-zone)h(string)e(suc)m(h)h(as)f Fj("EST")g Fi(or)h
Fj("HKT")f Fi(understo)s(o)s(d)h(b)m(y)f(the)0 1518 y(OS.)d(Since)g(P)m
(osix)g(time-zone)g(strings)g(can)f(sp)s(ecify)g(dual)h
(standard/summer)h(time-zones)f(\()p Fg(e.g.)p Fi(,)h("EST5EDT")0
1631 y(sp)s(eci\034es)34 b(U.S.)g(Eastern)h(Standard/Eastern)i(Da)m
(yligh)m(t)e(Time\),)i(the)d(v)-5 b(alue)34 b(of)g(the)h
Fj(is_summer)e Fi(\034eld)i(is)f(used)0 1744 y(to)29
b(resolv)m(e)f(the)h(am)m(biguous)h(b)s(oundary)f(cases.)39
b(F)-8 b(or)29 b(example,)h(on)f(the)f(morning)i(of)e(the)h(F)-8
b(all)29 b(da)m(yligh)m(t)h(sa)m(vings)0 1857 y(c)m(hange-o)m(v)m(er,)
38 b(1:00am\0252:00am)f(happ)s(ens)e(t)m(wice.)54 b(Hence)34
b(the)h(date)g(1:30)g(am)f(on)h(this)f(morning)i(can)f(sp)s(ecify)0
1970 y(t)m(w)m(o)d(di\033eren)m(t)f(seconds;)g(the)g
Fj(is_summer)f Fi(\035ag)g(sa)m(ys)g(whic)m(h)i(one.)141
2083 y(A)38 b(date)i(with)f Fj(tz_name)g Fc(=)f Fj(tz_secs)g
Fc(=)g Fj(None)h Fi(is)f(a)h(date)g(that)h(is)e(sp)s(eci\034ed)h(in)g
(terms)g(of)f(the)i(system's)0 2195 y(curren)m(t)32 b(time)f(zone.)141
2308 y(There)h(is)f(redundancy)i(in)e(the)h Fj(date)f
Fi(data)h(structure.)44 b(F)-8 b(or)32 b(example,)g(the)g
Fj(year_day)f Fi(\034eld)h(is)f(redundan)m(t)0 2421 y(with)41
b(the)h Fj(month_day)e Fi(and)h Fj(month)g Fi(\034elds.)72
b(Either)42 b(of)f(these)g(implies)g(the)g(v)-5 b(alues)41
b(of)f(the)i Fj(week_day)e Fi(\034eld.)0 2534 y(The)32
b Fj(is_summer)f Fi(and)h Fj(tz_name)f Fi(\034elds)h(are)g(redundan)m
(t)i(with)e(the)g Fj(tz_secs)f Fi(\034eld)h(in)g(terms)f(of)h(sp)s
(ecifying)f(an)0 2647 y(instan)m(t)c(in)g(time.)40 b(This)26
b(redundancy)i(is)e(pro)m(vided)h(b)s(ecause)g(consumers)g(of)f(dates)g
(ma)m(y)h(w)m(an)m(t)h(it)f(brok)m(en)g(out)g(in)0 2760
y(di\033eren)m(t)32 b(w)m(a)m(ys.)42 b(The)31 b(Cash)g(pro)s(cedures)g
(that)h(pro)s(duce)f(date)g(records)g(\034ll)g(them)h(out)f(completely)
-8 b(.)43 b(Ho)m(w)m(ev)m(er,)0 2873 y(when)31 b(date)g(records)g(pro)s
(duced)h(b)m(y)e(the)h(programmer)i(are)d(passed)h(to)g(Cash)f(pro)s
(cedures,)i(the)e(redundancy)i(is)0 2986 y(resolv)m(ed)f(b)m(y)g
(ignoring)g(some)g(of)f(the)g(secondary)h(\034elds.)41
b(This)30 b(is)g(describ)s(ed)h(for)f(eac)m(h)i(pro)s(cedure)f(b)s(elo)
m(w.)0 3122 y Fj(val)47 b(make_date)g(:)94 3235 y(?tzn:string)g(->)94
3348 y(?tzs:int)g(->)94 3461 y(?summ:bool)g(->)94 3574
y(?wday:int)g(->)94 3687 y(?yday:int)g(->)g(int)g(->)f(int)h(->)g(int)g
(->)g(int)g(->)g(int)g(->)g(int)g(->)g(date)227 3825
y Fi(When)31 b(making)g(a)f Fj(date)g Fi(record,)h(the)g(last)f(\034v)m
(e)h(elemen)m(ts)h(of)e(the)h(record)g(are)f(optional;)i(the)f(\034rst)
f(three)227 3938 y(default)g(\()p Fg(tzn,)g(tzs,)h(summ)p
Fi(\))d(to)h Fj(None)p Fi(,)g(the)h(last)e(t)m(w)m(o)j(\()p
Fg(wday,)f(yday)p Fi(\))f(to)g(0.)40 b(This)29 b(is)f(useful)h(when)h
(creating)227 4051 y(a)h Fj(date)f Fi(record)h(to)f(pass)g(as)g(an)h
(argumen)m(t)h(to)f Fj(time)p Fi(.)0 4389 y Fk(3.11.3)103
b(Time)35 b(zones)0 4584 y Fi(Sev)m(eral)h(time)f(pro)s(cedures)g(tak)m
(e)h(time)f(zones)g(as)f(argumen)m(ts.)55 b(When)35 b(optional,)i(the)e
(time)h(zone)f(defaults)g(to)0 4697 y(lo)s(cal)30 b(time)h(zone.)41
b(Otherwise)32 b(the)f(time)f(zone)h(can)g(b)s(e)f(one)h(of:)0
4834 y Fj(type)94 b(time_zone)47 b(=)g(Time_3_10.time_zone)f(=)94
4947 y(|)h(Tz_local)227 5084 y Fi(Lo)s(cal)31 b(time.)94
5272 y Fj(|)47 b(Tz_secs)g(of)g(int)1905 5589 y Fi(49)p
eop
%%Page: 50 50
50 49 bop 227 91 a Fi(Seconds)31 b(of)e(o\033set)g(from)h(UTC.)g(F)-8
b(or)30 b(example,)g(New)g(Y)-8 b(ork)30 b(Cit)m(y)g(is)f(-18000)h
(\(-5)g(hours\),)h(San)f(F)-8 b(rancisco)227 204 y(is)30
b(-28800)h(\(-8)g(hours\).)94 392 y Fj(|)47 b(Tz_name)g(of)g(string)227
530 y Fi(A)30 b(P)m(osix)h(time)g(zone)g(string)f(understo)s(o)s(d)h(b)
m(y)g(the)f(OS)h(\()p Fg(i.e.)p Fi(,)f(the)h(sort)f(of)g(time)h(zone)g
(assigned)f(to)h(the)227 643 y Fj($TZ)f Fi(en)m(vironmen)m(t)j(v)-5
b(ariable\).)141 854 y(An)37 b(in)m(teger)h(time)f(zone)h(giv)m(es)f
(the)g(n)m(um)m(b)s(er)h(of)e(seconds)h(y)m(ou)h(m)m(ust)f(add)g(to)g
(UTC)g(to)g(get)g(time)g(in)g(that)0 967 y(zone.)k(It)30
b(is)g Fg(not)g Fi(\020seconds)g(w)m(est\021)39 b(of)30
b(UTC)g(\026)h(that)g(\035ips)f(the)h(sign.)141 1080
y(T)-8 b(o)31 b(get)g(UTC)f(time,)h(use)g(a)f(time)h(zone)g(of)f
(either)h(0)f(or)h Fj("UCT0")p Fi(.)0 1343 y Fk(3.11.4)103
b(Pro)s(cedures)0 1539 y Fj(val)47 b(time_plus_ticks)g(:)f(unit)h(->)g
(float)0 1675 y(val)g(ticks_per_sec)g(:)g(unit)f(->)h(float)227
1813 y Fi(The)31 b(curren)m(t)h(time,)f(with)g(sub-second)g
(resolution.)41 b(Sub-second)32 b(resolution)f(is)f(not)h(pro)m(vided)h
(b)m(y)227 1926 y(P)m(osix,)f(but)g(is)f(a)m(v)-5 b(ailable)32
b(on)e(man)m(y)h(systems.)40 b(The)31 b(time)g(is)e(returned)j(as)e(a)g
(\035oat,)h(whose)g(in)m(teger)h(part)227 2039 y(is)e(the)h(n)m(um)m(b)
s(er)h(of)e(elapsed)h(seconds)f(since)h(the)f(Unix)g(ep)s(o)s(c)m(h,)h
(and)g(fractional)g(part)g(corresp)s(onds)g(to)f(a)227
2152 y(n)m(um)m(b)s(er)i(of)e(sub-second)h(\020tic)m(ks.\021)49
b(The)30 b(length)i(of)e(a)g(tic)m(k)h(ma)m(y)g(v)-5
b(ary)29 b(from)i(implemen)m(tation)i(to)227 2265 y(implemen)m(tation;)
h(it)c(can)h(b)s(e)f(determined)i(from)e Fj(ticks_per_sec)47
b(\(\))p Fi(.)227 2378 y(The)28 b(system)e(clo)s(c)m(k)h(is)g(not)g
(required)h(to)f(rep)s(ort)g(time)g(at)h(the)f(full)g(resolution)h(giv)
m(en)f(b)m(y)g Fj(ticks_per_sec)227 2490 y(\(\))p Fi(.)41
b(F)-8 b(or)30 b(example,)i(on)e(BSD,)h(time)g(is)f(rep)s(orted)h(at)f
(1)g(micro-second)i(resolution,)g(so)e Fj(ticks_per_sec)227
2603 y(\(\))g Fi(is)g(1,000,000.)42 b(That)31 b(do)s(esn't)g(mean)g
(the)f(system)g(clo)s(c)m(k)h(has)f(micro-second)i(resolution.)227
2716 y(If)e(the)g(OS)h(do)s(es)f(not)h(supp)s(ort)f(sub-second)h
(resolution,)h(the)e(fractional)i(part)f(is)e(alw)m(a)m(ys)j(0,)e(and)
227 2829 y Fj(ticks_per_sec)47 b(\(\))30 b Fi(returns)h(1.)0
3040 y Fj(val)47 b(date)g(:)g(unit)g(->)g(date)0 3177
y(val)g(date_of_time)g(:)g(?tz:time_zone)f(->)h(float)g(->)g(date)227
3315 y Fi(Simple)32 b Fj(date)46 b(\(\))31 b Fi(returns)f(the)h(curren)
m(t)h(date,)f(in)g(the)f(lo)s(cal)h(time)g(zone.)227
3428 y Fj(date_of_time)f Fg(\003tz)i(time)e Fi(con)m(v)m(erts)i(the)f
(time)g(to)f(the)h(date)g(as)f(sp)s(eci\034ed)g(b)m(y)h(the)g(time)f
(zone)h Fg(tz)p Fi(.)41 b Fg(tz)227 3541 y Fi(defaults)31
b(to)f(lo)s(cal)h(time,)g(and)g(is)e(as)h(describ)s(ed)h(in)g(the)f
(time-zone)i(section.)41 b(Use)30 b Fj(date_of_time)47
b(\003tz)227 3653 y(\(time)g(\(\)\))30 b Fi(if)g(y)m(ou)h(need)g(the)f
(curren)m(t)i(date)f(in)g(a)f(non-lo)s(cal)h(time)g(zone.)227
3766 y(If)f(the)g Fg(tz)g Fi(argumen)m(t)j(is)d(an)g(in)m(teger,)i(the)
f(date's)f Fj(tz_name)g Fi(\034eld)h(is)f(a)h(P)m(osix)f(time)h(zone)g
(of)f(the)h(form)227 3879 y(\020)8 b Fj(UTC+)p Fg(hh)p
Fj(:)p Fg(mm)p Fj(:)p Fg(ss)p Fi(\021;)30 b(the)g(trailing)i
Fj(:)p Fg(mm)p Fj(:)p Fg(ss)d Fi(p)s(ortion)i(is)f(deleted)h(if)f(it)h
(is)f(zero)s(es.)227 3992 y Fg(The)i(Posix)g(facility)g(for)f(c)-5
b(onverting)34 b(dates)e(to)g(times,)g Fj(mktime)47 b(\(\))p
Fg(,)31 b(has)h(a)g(br)-5 b(oken)34 b(design:)41 b(it)32
b(indic)-5 b(ates)227 4105 y(an)32 b(err)-5 b(or)34 b(by)e(r)-5
b(eturning)33 b(-1,)g(which)f(is)g(also)h(a)f(le)-5 b(gal)34
b(r)-5 b(eturn)33 b(value)h(\(for)e(date)h(23:59:59)f(UCT,)227
4218 y(12/31/1969\).)42 b(Cash)30 b(r)-5 b(esolves)33
b(the)f(ambiguity)f(in)f(a)i(p)-5 b(ar)g(anoid)31 b(fashion:)40
b(it)31 b(always)f(r)-5 b(ep)g(orts)33 b(an)e(err)-5
b(or)32 b(if)227 4331 y(the)h(underlying)g(Unix)f(facility)g(r)-5
b(eturns)33 b(-1.)41 b(W)-7 b(e)33 b(fe)-5 b(el)34 b(your)e(p)-5
b(ain.)0 4542 y Fj(val)47 b(time)g(:)g(unit)g(->)g(float)0
4679 y(val)g(time_of_date)g(:)g(date)f(->)h(float)227
4817 y Fi(Simple)32 b Fj(time)46 b(\(\))31 b Fi(returns)f(the)h(curren)
m(t)h(time.)41 b Fj(time_of_date)30 b Fg(date)h Fi(con)m(v)m(erts)g(a)g
(date)g(to)f(a)g(time.)227 4929 y(Note)h(that)g(the)f(input)h
Fg(date)g Fi(record)g(is)f(o)m(v)m(erconstrained.)43
b Fj(time)30 b Fi(ignores)h Fg(date)p Fi('s)g Fj(week_day)f
Fi(and)227 5042 y Fj(year_day)g Fi(\034elds.)41 b(If)29
b(the)i(date's)g Fj(tz_secs)f Fi(\034eld)h(is)f(set,)g(the)g
Fj(tz_name)g Fi(and)h Fj(is_summer)f Fi(\034elds)h(are)227
5155 y(ignored.)1905 5589 y(50)p eop
%%Page: 51 51
51 50 bop 227 91 a Fi(If)30 b(the)g Fj(tz_secs)g Fi(\034eld)h(is)f
Fj(None)p Fi(,)g(then)h(the)g(time-zone)h(is)e(tak)m(en)h(from)f(the)h
Fj(tz_name)f Fi(\034eld.)41 b(A)30 b Fj(None)227 204
y Fi(v)-5 b(alue)31 b(of)f Fj(tz_name)g Fi(means)g(the)h(system's)f
(curren)m(t)i(time)f(zone.)41 b(When)30 b(calculating)i(with)f
(time-zones,)227 317 y(the)g(date's)g Fj(is_summer)f
Fi(\034eld)g(is)g(used)h(to)f(resolv)m(e)h(am)m(biguities:)306
445 y Fe(\017)46 b Fj(Some)h(false)p Fi(:)40 b(Resolv)m(e)31
b(an)f(am)m(biguous)i(time)f(in)f(fa)m(v)m(or)h(of)f(non-summer)i
(time.)306 573 y Fe(\017)46 b Fj(Some)h(true)p Fi(:)40
b(Resolv)m(e)31 b(an)f(am)m(biguous)i(time)f(in)f(fa)m(v)m(or)h(of)f
(summer)h(time.)306 702 y Fe(\017)46 b Fj(None)p Fi(:)40
b(unsp)s(eci\034ed)32 b(\(mktime\(3\))f(sa)m(ys)f(`the)h(information)h
(is)d(not)i(a)m(v)-5 b(ailable'\))227 830 y(The)31 b
Fj(Some)f Fi(b)s(o)s(ol)g(v)-5 b(alues)30 b(are)h(useful)f(in)h(b)s
(oundary)f(cases)g(during)i(the)e(c)m(hange-o)m(v)m(er.)44
b(F)-8 b(or)31 b(example,)g(in)227 943 y(the)g(F)-8 b(all,)31
b(when)g(US)f(da)m(yligh)m(t)i(sa)m(vings)f(time)g(c)m(hanges)g(o)m(v)m
(er)g(at)g(2:00)g(am,)g(1:30)f(am)h(happ)s(ens)g(t)m(wice)g(\026)227
1055 y(it)g(names)f(t)m(w)m(o)i(instan)m(ts)f(in)g(time,)g(an)f(hour)h
(apart.)227 1168 y(Outside)g(of)f(these)h(b)s(oundary)g(cases,)f(the)g
Fj(is_summer)g Fi(\035ag)h(is)f(ignored.)42 b(F)-8 b(or)31
b(example,)g(if)f(the)227 1281 y(standard/summer)i(c)m(hange-o)m(v)m
(ers)h(happ)s(en)e(in)g(the)f(F)-8 b(all)31 b(and)g(the)g(Spring,)g
(then)g(the)g(v)-5 b(alue)30 b(of)227 1394 y Fj(is_summer)g
Fi(is)g(ignored)i(for)e(a)g(Jan)m(uary)i(or)e(July)h(date.)41
b(A)30 b(Jan)m(uary)i(date)f(w)m(ould)g(b)s(e)f(resolv)m(ed)h(with)227
1507 y(standard)g(time,)g(and)g(a)g(July)f(date)h(with)g(summer)g
(time,)g(regardless)g(of)f(the)h Fj(is_summer)e Fi(v)-5
b(alue.)227 1620 y(The)31 b Fj(is_summer)f Fi(\035ag)h(is)f(also)g
(ignored)h(if)f(the)h(time)g(zone)g(do)s(esn't)f(ha)m(v)m(e)i(a)e
(summer)h(time)g(\026)f(for)227 1733 y(example,)h(simple)g(UTC.)0
1940 y Fj(val)47 b(string_of_date)g(:)g(date)f(->)h(string)0
2077 y(val)g(format_date)g(:)g(string)f(->)h(date)g(->)g(string)227
2213 y(string_of_date)30 b Fi(formats)h(the)f(date)h(as)f(a)g(24-c)m
(haracter)j(string)e(of)f(the)h(form:)415 2326 y Fj(Sun)47
b(Sep)g(16)g(01:03:52)g(1973)227 2439 y(format_date)30
b Fg(fmt)i(date)f Fi(formats)f(the)h(date)g(according)g(to)g(the)g
(format)f(string)h Fg(fmt)p Fi(.)40 b(The)31 b(format)227
2552 y(string)g(is)f(copied)h(v)m(erbatim,)h(except)f(that)g(\045)f(c)m
(haracters)i(indicate)f(con)m(v)m(ersion)h(sp)s(eci\034ers)f(that)g
(are)227 2665 y(replaced)h(b)m(y)e(\034elds)h(from)f(the)h(date)g
(record.)41 b(The)31 b(full)f(set)h(of)f(con)m(v)m(ersion)h(sp)s
(eci\034ers)g(supp)s(orted)g(b)m(y)227 2778 y Fj(format_date)f
Fi(is:)306 2906 y Fe(\017)46 b Fi(\045\045)31 b(Con)m(v)m(erted)h(to)f
(the)g(\045)f(c)m(haracter.)306 3034 y Fe(\017)46 b Fi(\045a)31
b(abbreviated)h(w)m(eekda)m(y)f(name)306 3162 y Fe(\017)46
b Fi(\045A)30 b(full)h(w)m(eekda)m(y)g(name)306 3290
y Fe(\017)46 b Fi(\045b)31 b(abbreviated)h(mon)m(th)f(name)306
3418 y Fe(\017)46 b Fi(\045B)31 b(full)f(mon)m(th)i(name)306
3546 y Fe(\017)46 b Fi(\045c)31 b(time)g(and)g(date)f(using)h(the)g
(time)g(and)f(date)h(represen)m(tation)i(for)d(the)h(lo)s(cale)f(\()p
Fj(\003X)47 b(\003x)p Fi(\))306 3674 y Fe(\017)f Fi(\045d)31
b(da)m(y)g(of)f(the)g(mon)m(th)i(as)e(a)g(decimal)i(n)m(um)m(b)s(er)g
(\(01-31\))306 3803 y Fe(\017)46 b Fi(\045H)30 b(hour)h(based)g(on)g(a)
f(24-hour)h(clo)s(c)m(k)g(as)f(a)g(decimal)i(n)m(um)m(b)s(er)g
(\(00-23\))306 3931 y Fe(\017)46 b Fi(\045I)30 b(hour)h(based)g(on)f(a)
h(12-hour)g(clo)s(c)m(k)g(as)f(a)g(decimal)i(n)m(um)m(b)s(er)f
(\(01-12\))306 4059 y Fe(\017)46 b Fi(\045j)30 b(da)m(y)h(of)f(the)h(y)
m(ear)g(as)f(a)g(decimal)h(n)m(um)m(b)s(er)h(\(001-366\))306
4187 y Fe(\017)46 b Fi(\045m)31 b(mon)m(th)h(as)e(a)g(decimal)i(n)m(um)
m(b)s(er)f(\(01-12\))306 4315 y Fe(\017)46 b Fi(\045M)31
b(min)m(ute)g(as)f(a)h(decimal)g(n)m(um)m(b)s(er)h(\(00-59\))306
4443 y Fe(\017)46 b Fi(\045p)31 b(AM/PM)f(designation)i(asso)s(ciated)e
(with)h(a)f(12-hour)i(clo)s(c)m(k)306 4571 y Fe(\017)46
b Fi(\045S)31 b(second)g(as)f(a)g(decimal)i(n)m(um)m(b)s(er)f
(\(00-61\))306 4699 y Fe(\017)46 b Fi(\045U)30 b(w)m(eek)h(n)m(um)m(b)s
(er)h(of)e(the)h(y)m(ear;)g(Sunda)m(y)g(is)f(\034rst)h(da)m(y)f(of)g(w)
m(eek)h(\(00-53\))306 4827 y Fe(\017)46 b Fi(\045w)31
b(w)m(eekda)m(y)h(as)e(a)g(decimal)h(n)m(um)m(b)s(er)h(\(0-6\),)f
(where)h(Sunda)m(y)f(is)f(0)306 4956 y Fe(\017)46 b Fi(\045W)31
b(w)m(eek)g(n)m(um)m(b)s(er)g(of)f(the)h(y)m(ear;)g(Monda)m(y)g(is)f
(\034rst)g(da)m(y)h(of)f(w)m(eek)h(\(00-53\))306 5084
y Fe(\017)46 b Fi(\045x)30 b(date)h(using)g(the)g(date)f(represen)m
(tation)j(for)d(the)h(lo)s(cale)306 5212 y Fe(\017)46
b Fi(\045X)30 b(time)h(using)g(the)g(time)g(represen)m(tation)h(for)e
(the)h(lo)s(cale)306 5340 y Fe(\017)46 b Fi(\045y)30
b(y)m(ear)h(without)h(cen)m(tury)f(\(00-99\))1905 5589
y(51)p eop
%%Page: 52 52
52 51 bop 306 91 a Fe(\017)46 b Fi(\045Y)30 b(y)m(ear)h(with)g(cen)m
(tury)h(\()p Fg(e.g.)40 b Fi(1990\))306 216 y Fe(\017)46
b Fi(\045Z)31 b(time)g(zone)g(name)g(or)f(abbreviation,)i(or)f(no)f(c)m
(haracters)i(if)e(no)h(time)g(zone)f(is)g(determinable)141
424 y(Here,)h(there)g(should)f(b)s(e)h(a)329 537 y Fj(fill_in_date)47
b(:)f(date)h(->)g(date;)141 650 y Fi(pro)s(cedure,)30
b(but)g(it)f(isn't)f(implemen)m(ted)k(\(y)m(et\))d(in)g(Scsh,)h(so)e(I)
g(can't)i(just)e(steal)h(the)g(co)s(de.)40 b(Here's)29
b(the)g(sp)s(ec)0 763 y(an)m(yw)m(a)m(y:)141 876 y(This)f(pro)s(cedure)
h(\034lls)f(in)h(missing,)g(redundan)m(t)h(slots)d(in)i(a)f(date)g
(record.)41 b(In)28 b(decreasing)h(order)g(of)f(priorit)m(y:)136
1039 y Fe(\017)46 b Fk(y)m(ear,)41 b(mon)m(th,)f(mon)m(th_da)m(y)e
Fc(=)p Fd(>)h Fk(y)m(ear_da)m(y)p Fi(:)49 b(If)34 b(the)g
Fj(year)p Fi(,)i Fj(month)p Fi(,)f(and)g Fj(month_day)f
Fi(\034elds)g(are)227 1152 y(all)d(de\034ned)g(\(are)g(all)g(in)m
(tegers\),)g(the)g Fj(year_day)f Fi(\034eld)h(is)f(set)g(to)h(the)f
(corresp)s(onding)i(v)-5 b(alue.)136 1329 y Fe(\017)46
b Fk(y)m(ear,)40 b(y)m(ear_da)m(y)g Fc(=)p Fd(>)e Fk(mon)m(th,)h(mon)m
(th_da)m(y)p Fi(:)47 b(If)33 b(the)h Fj(month)g Fi(and)g
Fj(month_day)g Fi(\034elds)g(aren't)h(set,)227 1442 y(but)c(the)g
Fj(year)f Fi(and)h Fj(year_day)e Fi(\034elds)i(are)g(set,)f(then)h
Fj(month)f Fi(and)h Fj(month_day)f Fi(are)g(calculated.)136
1620 y Fe(\017)46 b Fk(y)m(ear,)33 b(mon)m(th,)f(mon)m(th_da)m(y)-9
b(,)32 b(y)m(ear_da)m(y)h Fc(=)p Fd(>)e Fk(w)m(eek_da)m(y)p
Fi(:)40 b(If)28 b(either)h(of)f(the)g(ab)s(o)m(v)m(e)h(rules)f(is)g
(able)227 1733 y(to)j(determine)h(what)f(da)m(y)f(it)h(is,)f(the)h
Fj(week_day)e Fi(\034eld)i(is)f(then)h(set.)136 1911
y Fe(\017)46 b Fk(tz_secs)33 b Fc(=)p Fd(>)f Fk(tz_name)p
Fi(:)40 b(If)27 b Fj(tz_secs)h Fi(is)g(de\034ned,)i(but)e
Fj(tz_name)g Fi(is)g(not,)h(it)g(is)f(assigned)g(a)g(time-zone)227
2024 y(name)j(of)f(the)h(form)f(\020)8 b Fj(UTC+)p Fg(hh)p
Fj(:)p Fg(mm)p Fj(:)p Fg(ss)p Fi(\021;)30 b(the)g(trailing)i
Fj(:)p Fg(mm)p Fj(:)p Fg(ss)d Fi(p)s(ortion)i(is)f(deleted)i(if)d(it)i
(is)f(zero)s(es.)136 2202 y Fe(\017)46 b Fk(tz_name,)40
b(date,)g(is_summer)d Fc(=)p Fd(>)h Fk(tz_secs,)i(is_summer)p
Fi(:)45 b(If)33 b(the)h(date)g(information)h(is)e(pro-)227
2314 y(vided)27 b(up)f(to)g(second)h(resolution,)h Fj(tz_name)d
Fi(is)h(also)g(pro)m(vided,)i(and)f Fj(tz_secs)f Fi(is)f(not)i(set,)g
(then)f Fj(tz_secs)227 2427 y Fi(and)36 b Fj(is_summer)f
Fi(are)h(set)g(to)f(their)i(correct)f(v)-5 b(alues.)56
b(Summer-time)38 b(am)m(biguities)f(are)f(resolv)m(ed)h(using)227
2540 y(the)d(original)h(v)-5 b(alue)34 b(of)f Fj(is_summer)p
Fi(.)49 b(If)33 b(the)h(time)g(zone)g(do)s(esn't)f(ha)m(v)m(e)i(a)f
(summer)g(time)g(v)-5 b(arian)m(t,)35 b(then)227 2653
y Fj(is_summer)30 b Fi(is)g(set)g(to)h Fj(None)p Fi(.)136
2831 y Fe(\017)46 b Fk(lo)s(cal)40 b(time,)h(date,)h(is_summer)c
Fc(=)p Fd(>)h Fk(tz_name,)i(tz_secs,)h(is_summer)p Fi(:)47
b(If)34 b(the)h(date)h(infor-)227 2944 y(mation)f(is)f(pro)m(vided)i
(up)e(to)g(second)h(resolution,)h(but)f(no)f(time)h(zone)g(information)
g(is)f(pro)m(vided)i(\(b)s(oth)227 3057 y Fj(tz_anme)c
Fi(and)h Fj(tz_secs)f Fi(aren't)h(set\),)f(then)h(w)m(e)g(pro)s(ceed)g
(as)f(in)g(the)h(ab)s(o)m(v)m(e)g(case,)f(except)h(the)g(system's)227
3170 y(curren)m(t)f(time)f(zone)g(is)f(used.)0 3482 y
Ff(3.12)112 b(En)m(vironmen)m(t)36 b(v)-6 b(ariables)0
3677 y Fj(val)47 b(getenv)g(:)g(string)g(->)f(string)0
3814 y(val)h(setenv)g(:)g(?sval:string)f(->)h(string)g(->)g(unit)227
3947 y Fi(These)31 b(functions)g(get)f(and)h(set)f(the)h(pro)s(cess)f
(en)m(vironmen)m(t,)j(stored)d(in)h(the)g(external)g(C)f(v)-5
b(ariable)31 b Fj(char)227 4060 y(**environ)p Fi(.)40
b(An)30 b(en)m(vironmen)m(t)j(v)-5 b(ariable)31 b Fg(var)g
Fi(is)f(a)g(string.)41 b(If)30 b(an)g(en)m(vironmen)m(t)j(v)-5
b(ariable)31 b(is)f(set)g(to)g(a)227 4173 y(string)h
Fg(sval)p Fi(,)g(then)g(the)f(pro)s(cess')g(global)i(en)m(vironmen)m(t)
g(structure)g(is)d(altered)j(with)f(an)f(en)m(try)h(of)f(the)227
4286 y(form)h Fj(")p Fg(var)p Fj(=)p Fg(sval)p Fj(")p
Fi(.)41 b(If)30 b Fg(sval)g Fi(is)g(omitted,)i(then)f(an)m(y)f(en)m
(try)h(for)g Fg(var)f Fi(is)g(deleted.)0 4482 y Fj(val)47
b(alist_of_env)g(:)g(unit)f(->)h(\(string)g(*)g(string\))g(list)227
4615 y Fi(The)31 b Fj(alist_of_env)f Fi(pro)s(cedure)h(con)m(v)m(erts)h
(the)f(en)m(tire)g(en)m(vironmen)m(t)i(in)m(to)e(an)g(alist,)f
Fg(e.g.)p Fi(,)227 4841 y Fj([\("TERM",)47 b("vt100"\);)274
4954 y(\("SHELL",)g("/usr/local/bin/cash"\);)274 5067
y(\("PATH",)g("/sbin:/usr/sbin:/bin:/usr/bin"\);)274
5180 y(\("EDITOR",)g("emacs"\))g(;)274 5292 y(...])1905
5589 y Fi(52)p eop
%%Page: 53 53
53 52 bop 0 91 a Fj(val)47 b(setenv_from_alist)f(:)h(\(string)g(*)g
(string\))g(list)g(->)g(unit)227 227 y Fi(The)31 b(alist)f(argumen)m(t)
j(is)d(installed)h(as)f(the)h(curren)m(t)g(Unix)f(en)m(vironmen)m(t)j
(\()p Fg(i.e.)p Fi(,)d(con)m(v)m(erted)i(to)f(a)227 340
y(n)m(ull-terminated)j(C)c(v)m(ector)h(of)f Fj(")p Fg(var)p
Fj(=)p Fg(val)p Fj(")i Fi(strings)e(whic)m(h)i(is)d(assigned)i(to)g
(the)f(global)h Fj(char)227 453 y(**environ)p Fi(\).)274
566 y Fj(setenv_from_alist)368 679 y([\("TERM",)47 b("vt100"\);)415
791 y(\("SHELL",)g("/usr/local/bin/cash"\);)415 904 y(\("PATH",)g
("/sbin:/usr/sbin:/bin:/usr/bin"\);)415 1017 y(\("EDITOR",)g("emacs"\))
g(;)415 1130 y(...])141 1335 y Fi(The)38 b(follo)m(wing)i(three)e
(functions)h(help)f(the)g(programmer)i(manipulate)g(alist)e(tables)g
(in)g(some)g(generally)0 1448 y(useful)30 b(w)m(a)m(ys.)41
b(They)31 b(are)f(all)h(de\034ned)g(using)g Fj(=)f Fi(for)g(k)m(ey)g
(comparison.)0 1584 y Fj(val)47 b(alist_delete)g(:)g('a)f(->)h(\('a)g
(*)g('b\))g(list)g(->)g(\('a)g(*)g('b\))g(list)227 1720
y(alist_delete)30 b Fg(key)j(alist)d Fi(deletes)h(an)m(y)g(en)m(try)g
(lab)s(elled)g(b)m(y)f(v)-5 b(alue)31 b Fg(key)p Fi(.)0
2037 y Fj(val)47 b(alist_update)g(:)g('a)f(->)h('b)g(->)g(\('a)g(*)g
('b\))g(list)g(->)g(\('a)g(*)g('b\))g(list)227 2173 y(alist_update)30
b Fg(key)j(val)g(alist)d Fi(deletes)h Fg(key)g Fi(from)f
Fg(alist)p Fi(,)g(then)h(cons)f(on)h(a)f Fj(\()p Fg(key)p
Fj(,)48 b Fg(val)p Fj(\))31 b Fi(en)m(try)-8 b(.)0 2491
y Fj(val)47 b(alist_compress)g(:)g(\('a)f(*)h(bool\))g(list)g(->)g
(\('a)g(*)g(bool\))g(list)227 2626 y Fi(Compresses)31
b Fg(alist)f Fi(b)m(y)g(remo)m(ving)i(shado)m(w)m(ed)g(en)m(tries.)42
b(Example:)321 2739 y Fj(\(*)47 b(Shadowed)g(\(1)g(.)g(c\))g(entry)g
(removed.)f(*\))415 2852 y(alist-compress)h([\(1,)g(a\);)g(\(2,)g(b\);)
f(\(1,)h(c\);)g(\(3,)g(d\)])188 b(=>)47 b([\(1,)g(a\);)g(\(2,)g(b\);)g
(\(3,)f(d\)])0 3170 y(val)h(with_env)g(:)g(\(string)f(*)h(string\))g
(list)g(->)g(\(unit)g(->)g('a\))g(->)g('a)0 3306 y(val)g
(with_total_env)g(:)g(\(string)f(*)h(string\))g(list)g(->)g(\(unit)g
(->)g('a\))g(->)g('a)227 3442 y Fi(These)31 b(pro)s(cedures)g(call)g
(their)g(last)f(argumen)m(t)i Fg(thunk)f Fi(in)g(the)f(con)m(text)i(of)
e(an)g(altered)h(en)m(vironmen)m(t.)227 3555 y(They)g(return)g(whatev)m
(er)h(v)-5 b(alues)30 b Fg(thunk)h Fi(returns.)41 b(Non-lo)s(cal)31
b(returns)f(restore)h(the)g(en)m(vironmen)m(t)i(to)d(its)227
3668 y(outer)h(v)-5 b(alue.)227 3780 y(In)30 b Fj(with_env)g
Fg(env_alist_delta)k(thunk)p Fi(,)d(the)f Fg(env_alist_delta)i
Fi(argumen)m(t)g(sp)s(eci\034es)e(a)h Fg(mo)-5 b(di\034c)g(ation)30
b Fi(to)227 3893 y(the)h(curren)m(t)h(en)m(vironmen)m(t)h(\026)d
Fg(thunk)p Fi('s)h(en)m(vironmen)m(t)i(is)c(the)i(original)h(en)m
(vironmen)m(t)g(o)m(v)m(erridden)h(with)227 4006 y(the)e(bindings)g(sp)
s(eci\034ed)g(b)m(y)f(the)h(alist)f(delta.)227 4119 y(In)g
Fj(with_total_env)g Fg(env_alist)j(thunk)p Fi(,)e(the)f
Fg(env_alist)h Fi(argumen)m(t)h(sp)s(eci\034es)e(a)h(complete)227
4232 y(en)m(vironmen)m(t)i(that)e(is)f(installed)h(for)f
Fg(thunk)p Fi(.)141 4437 y(Example:)41 b(These)31 b(three)g(pieces)f
(of)f(co)s(de)i(all)f(run)g(the)h(mailer)f(with)h(sp)s(ecial)f
Fj($TERM)g Fi(and)g Fj($EDITOR)g Fi(v)-5 b(alues.)282
4550 y Fj(let)47 b(mail_me)g(\(\))g(=)f(exec_path)h("mail")g
(["shivers@lcs.mit.edu"];;)282 4775 y(with_env)g(["TERM",)f("kterm";)h
("EDITOR",)g(my_editor])376 4888 y(\(fun)g(\(\))g(->)g(wait)f
(\(fork_child)h(mail_me\)\);;)282 5114 y(wait)376 5227
y(\(fork_child)517 5340 y(\(*)g(Env)g(mutation)f(happens)h(in)g(the)g
(subshell.)g(*\))1905 5589 y Fi(53)p eop
%%Page: 54 54
54 53 bop 517 91 a Fj(\(fun)47 b(\(\))g(->)658 204 y(setenv)g
(~sval:"kterm")f("TERM";)658 317 y(setenv)h(~sval:my_editor)f
("EDITOR";)658 430 y(mail_me)g(\(\)\)\);;)282 656 y(\(*)h(In)g(this)g
(example,)f(we)h(compute)g(an)g(alternate)g(environment)g(env2)f(as)h
(an)g(alist,)g(and)423 769 y(install)g(it)g(with)f(an)h(explicit)g
(call)g(to)g(the)g(exec_path_with_env)f(procedure.)h(*\))282
882 y(let)g(env)g(=)g(alist_of_env)f(\(\))h(in)329 b(\(*)47
b(Get)g(the)g(current)g(environment,)f(*\))282 995 y(let)h(env1)g(=)g
(alist_update)f("TERM")h("kterm")g(env)g(in)282 b(\(*)47
b(and)g(compute)93 b(*\))282 1108 y(let)47 b(env2)g(=)g(alist_update)f
("EDITOR")h(my_editor)g(env1)g(in)g(\(*)g(the)g(new)f(env.)h(*\))282
1220 y(wait)376 1333 y(\(fork_child)517 1446 y(\(fun)g(\(\))g(->)f
(exec_path_with_env)h("mail")g(~env:env2)g
(["shivers@cs.cmu.edu"]\)\);;)0 1823 y Fk(3.12.1)103
b(P)m(ath)36 b(lists)e(and)h(colon)f(lists)0 2018 y Fi(When)21
b(en)m(vironmen)m(t)j(v)-5 b(ariables)21 b(suc)m(h)h(as)f
Fj($PATH)f Fi(need)i(to)f(enco)s(de)h(a)f(list)g(of)f(strings)h(\(suc)m
(h)h(as)f(a)g(list)g(of)g(directories)0 2131 y(to)30
b(b)s(e)f(searc)m(hed\),)i(the)f(common)h(Unix)e(con)m(v)m(en)m(tion)j
(is)d(to)g(separate)i(the)e(list)h(elemen)m(ts)h(with)f(colon)g
(delimiters)0 2244 y(\()p Fd(:)15 b(:)g(:)q Fg(and)34
b(hop)-5 b(e)36 b(the)e(individual)h(list)e(elements)i(don)-9
b('t)34 b(c)-5 b(ontain)34 b(c)-5 b(olons)35 b(themselves.)p
Fi(\))48 b(T)-8 b(o)33 b(con)m(v)m(ert)h(b)s(et)m(w)m(een)g(the)0
2357 y(colon-separated)26 b(string)f(enco)s(ding)g(and)f(the)h
(list-of-strings)f(represen)m(tation,)k(see)c(the)g Fj(infix_splitter)g
Fi(func-)0 2470 y(tion)31 b(\(section)g Fj(field_splitter)p
Fi([7.2]\))g(and)f(the)h(string)g(library's)f Fj(String.concat)g
Fi(function.)41 b(F)-8 b(or)31 b(example,)47 2583 y Fj(let)47
b(split)g(=)g(infix_splitter)f(~delim:\(Regexp)h(\(Pcre.regexp)g
(":"\)\))g(\(\);;)47 2696 y(split)g("/sbin:/bin::/usr/bin")939
b(=>)47 b(["/sbin";)g("/bin";)f("";)h("/usr/bin"])47
2808 y(String.concat)g(":")94 b(["/sbin";)46 b("/bin";)h("";)g
("/usr/bin"])329 b(=>)47 b("/sbin:/bin::/usr/bin")141
3034 y Fi(The)28 b(follo)m(wing)h(t)m(w)m(o)g(functions)e(are)h(useful)
f(for)h(manipulating)h(these)f(ordered)g(lists,)g(once)g(they)f(ha)m(v)
m(e)i(b)s(een)0 3147 y(parsed)i(from)f(their)h(colon-separated)i(form.)
0 3284 y Fj(val)47 b(add_before)g(:)g('a)g(->)f('a)h(->)g('a)g(list)g
(->)g('a)g(list)0 3420 y(val)g(add_after)g(:)g('a)g(->)f('a)h(->)g('a)g
(list)g(->)g('a)g(list)227 3558 y Fi(These)31 b(functions)g(are)f(for)g
(mo)s(difying)h(searc)m(h-path)h(lists,)e(where)h(elemen)m(t)h(order)f
(is)f(signi\034can)m(t.)227 3671 y Fj(add_before)g Fg(elt)j(b)-5
b(efor)g(e)32 b Fi(adds)f Fg(elt)f Fi(to)h(the)f(list)h(immediately)g
(b)s(efore)g(the)f(\034rst)h(o)s(ccurrence)g(of)f Fg(b)-5
b(efor)g(e)32 b Fi(in)227 3784 y(the)f(list.)40 b(If)30
b Fg(b)-5 b(efor)g(e)32 b Fi(is)e(not)h(in)f(the)h(list,)f
Fg(elt)h Fi(is)f(added)h(to)f(the)h(end)g(of)f(the)g(list.)227
3897 y Fj(add_after)g Fg(elt)j(after)d Fi(is)g(similar:)41
b Fg(elt)31 b Fi(is)f(added)h(after)g(the)f(last)h(o)s(ccurrence)g(of)f
Fg(after)p Fi(.)41 b(If)29 b Fg(after)h Fi(is)g(not)227
4010 y(found,)h Fg(elt)g Fi(is)f(added)h(to)f(the)h(b)s(eginning)g(of)f
(the)h(list.)227 4123 y(The)g(result)g(ma)m(y)g(share)f(structure)h
(with)g(the)g(original)g(list.)41 b(Both)31 b(functions)f(use)g
Fj(=)h Fi(for)f(comparing)227 4236 y(elemen)m(ts.)0 4574
y Fk(3.12.2)103 b($USER,)34 b($HOME,)h(and)g($P)-9 b(A)g(TH)0
4769 y Fi(Lik)m(e)38 b(sh)e(and)i(unlik)m(e)f(csh,)i(Cash)e(has)g
Fg(no)f Fi(in)m(teractiv)m(e)j(dep)s(endencies)f(on)g(en)m(vironmen)m
(t)h(v)-5 b(ariables.)61 b(It)36 b(do)s(es,)0 4882 y(ho)m(w)m(ev)m(er,)
i(initialise)e(certain)g(in)m(ternal)h(v)-5 b(alues)35
b(at)g(startup)h(time)f(from)g(the)h(initial)f(pro)s(cess)g(en)m
(vironmen)m(t,)k(in)0 4995 y(particular)32 b Fj($HOME)d
Fi(and)i Fj($PATH)p Fi(.)f(Cash)g(nev)m(er)h(uses)f Fj($USER)g
Fi(at)g(all.)40 b(It)30 b(computes)h Fj(user_login_name)47
b(\(\))30 b Fi(from)0 5108 y(the)h(system)f(call)g Fj(user_uid)47
b(\(\))p Fi(.)0 5244 y Fj(val)g(home_directory)g(:)g(string)f
(Pervasives.ref)1905 5589 y Fi(54)p eop
%%Page: 55 55
55 54 bop 227 91 a Fi(Cash)31 b(accesses)f Fj($HOME)g
Fi(at)g(start-up)h(time,)g(and)g(stores)f(the)h(v)-5
b(alue)31 b(in)f(the)h(global)g(v)-5 b(ariable)227 204
y Fj(home_directory)p Fi(.)40 b(It)30 b(uses)g(this)g(v)-5
b(alue)31 b(for)f Fj(\003)g Fi(lo)s(okups)g(and)h(for)f(returning)i(to)
e(home)h(on)g Fj(chdir)47 b(\(\))p Fi(.)0 399 y Fj(val)g
(exec_path_list)g(:)g(unit)f(->)h(string)g(list)0 535
y(val)g(set_exec_path_list)f(:)h(string)g(list)g(->)g(unit)0
672 y(val)g(with_exec_path_list)f(:)h(string)g(list)g(->)g(\(unit)g(->)
g('a\))g(->)g('a)227 804 y Fi(Cash)31 b(accesses)f Fj($PATH)g
Fi(at)g(start-up)h(time,)g(colon-splits)h(the)e(path)h(list,)f(and)h
(stores)f(the)h(v)-5 b(alue)31 b(in)f(an)227 917 y(unexp)s(orted)h(v)-5
b(ariable,)32 b(accessible)e(b)m(y)h Fj(exec_path_list)47
b(\(\))p Fi(.)40 b(This)30 b(list)g(is)g(used)h(for)f
Fj(exec_path)g Fi(and)227 1030 y Fj(exec_path_with_env)g
Fi(searc)m(hes.)41 b(It)30 b(can)h(b)s(e)f(p)s(ermanen)m(tly)i(mo)s
(di\034ed)f(b)m(y)f Fj(set_exec_path_list)227 1143 y
Fg(new_list)p Fi(,)g(or)h(for)f(the)h(duration)g(of)f(a)h(call)f(with)h
Fj(with_exec_path_list)f Fg(new_list)i(thunk)f Fi(\026)f(this)h(is)227
1256 y(the)g(recommended)h(w)m(a)m(y)g(to)e(alter)h(it.)0
1575 y Ff(3.13)112 b(T)-9 b(erminal)35 b(device)i(con)m(trol)0
1770 y Fi(Cash)25 b(pro)m(vides)h(a)e(complete)j(set)d(of)h(routines)g
(for)g(manipulating)i(terminal)f(devices)f(\026)g(putting)h(them)f(in)g
(\020ra)m(w\021)0 1883 y(mo)s(de,)i(c)m(hanging)h(and)e(querying)g
(their)h(sp)s(ecial)e(c)m(haracters,)k(mo)s(difying)d(their)g(i/o)g(sp)
s(eeds,)g(and)h(so)e(forth.)39 b(The)0 1996 y(cash)27
b(in)m(terface)h(is)f(designed)h(b)s(oth)f(for)g(generalit)m(y)h(and)g
(p)s(ortabilit)m(y)g(across)f(di\033eren)m(t)h(Unix)e(platforms,)j(so)d
(y)m(ou)0 2109 y(don't)h(ha)m(v)m(e)g(to)g(rewrite)g(y)m(our)g(program)
g(eac)m(h)g(time)g(y)m(ou)g(mo)m(v)m(e)g(to)g(a)f(new)g(system.)39
b(W)-8 b(e'v)m(e)27 b(also)f(made)h(an)g(e\033ort)0 2222
y(to)h(use)f(reasonable,)j(Sc)m(heme-lik)m(e)g(names)e(for)f(the)h(m)m
(ultitudinous)i(named)f(constan)m(ts)g(in)m(v)m(olv)m(ed,)h(so)d(when)h
(y)m(ou)0 2335 y(are)39 b(reading)g(co)s(de,)i(y)m(ou'll)e(ha)m(v)m(e)h
(less)e(lik)m(eliho)s(o)s(d)h(of)f(getting)h(lost)g(in)f(a)h(b)s
(ewildering)g(maze)g(of)f(obfuscatory)0 2448 y(constan)m(ts)31
b(named)h Fj(ICRNL)p Fi(,)e Fj(INPCK)p Fi(,)g Fj(IUCLC)p
Fi(,)g(and)h Fj(ONOCR)p Fi(.)141 2561 y(This)26 b(section)h(can)f(only)
g(la)m(y)g(out)g(the)h(basic)f(functionalit)m(y)h(of)f(the)g(terminal)h
(device)f(in)m(terface.)41 b(F)-8 b(or)26 b(further)0
2674 y(details,)31 b(see)f(the)h(termios\(3\))g(man)g(page)g(on)g(y)m
(our)f(system,)g(or)h(consult)g(one)g(of)f(the)g(standard)h(Unix)f
(texts.)0 2932 y Fk(3.13.1)103 b(P)m(ortabilit)m(y)35
b(across)g(OS)f(v)-6 b(arian)m(ts)0 3127 y Fi(T)e(erminal-con)m(trol)38
b(soft)m(w)m(are)d(is)e(inescapably)i(complex,)h(ugly)-8
b(,)35 b(and)g(lo)m(w-lev)m(el.)53 b(Unix)33 b(v)-5 b(arian)m(ts)35
b(eac)m(h)g(pro)m(vide)0 3240 y(their)43 b(o)m(wn)g(w)m(a)m(y)h(of)e
(con)m(trolling)j(terminal)e(devices,)j(making)d(it)f(di\036cult)i(to)f
(pro)m(vide)g(in)m(terfaces)g(that)g(are)0 3353 y(p)s(ortable)32
b(across)e(di\033eren)m(t)j(Unix)d(systems.)41 b(Cash's)31
b(terminal)h(supp)s(ort)g(is)e(based)h(primarily)h(up)s(on)f(the)g(P)m
(osix)0 3466 y(termios)41 b(in)m(terface.)73 b(Programs)41
b(that)h(can)e(b)s(e)h(written)g(using)g(only)g(the)g(P)m(osix)g(in)m
(terface)h(are)f(lik)m(ely)f(to)h(b)s(e)0 3579 y(widely)31
b(p)s(ortable.)141 3692 y(The)37 b(bulk)g(of)f(the)h(do)s(cumen)m
(tation)i(that)e(follo)m(ws)g(consists)f(of)g(sev)m(eral)h(pages)g(w)m
(orth)h(of)e(tables)h(de\034ning)0 3805 y(di\033eren)m(t)29
b(named)g(constan)m(ts)h(that)e(enable)h(and)g(disable)f(di\033eren)m
(t)i(features)e(of)g(the)g(terminal)i(driv)m(er.)40 b(Some)29
b(of)0 3918 y(these)h(\035ags)g(are)h(P)m(osix;)f(others)h(are)f(tak)m
(en)h(from)f(the)g(t)m(w)m(o)i(common)f(branc)m(hes)g(of)f(Unix)g(dev)m
(elopmen)m(t,)i(SVR4)0 4031 y(and)f(4.3+)g(Berk)m(eley)-8
b(.)41 b(Cash)31 b(guaran)m(tees)h(that)f(the)f(non-P)m(osix)i(constan)
m(ts)f(will)g(b)s(e)f(de\034ned)h(iden)m(ti\034ers.)136
4190 y Fe(\017)46 b Fi(If)25 b(y)m(our)h(OS)g(supp)s(orts)g(a)g
(particular)h(non-P)m(osix)g(\035ag,)g(its)e(named)i(constan)m(t)g
(will)f(b)s(e)g(b)s(ound)g(to)g(the)g(\035ag's)227 4303
y(v)-5 b(alue.)136 4479 y Fe(\017)46 b Fi(If)30 b(y)m(our)h(OS)f(do)s
(esn't)h(supp)s(ort)f(the)h(\035ag,)g(its)f(named)h(constan)m(t)h(will)
e(b)s(e)g(presen)m(t,)i(but)f(b)s(ound)f(to)h(-1.)141
4639 y(This)f(means)g(that)g(if)g(y)m(ou)g(w)m(an)m(t)h(to)f(use)g
(SVR4)f(or)h(Berk)m(eley)g(features)g(in)g(a)g(program,)h(y)m(our)f
(program)h(can)0 4752 y(p)s(ortably)25 b(test)f(the)g(v)-5
b(alues)25 b(of)f(the)g(\035ags)h(b)s(efore)f(using)g(them)h(\026)g
(the)f(\035ags)h(can)f(reliably)h(b)s(e)f(referenced)i(without)0
4865 y(pro)s(ducing)31 b(\020un)m(b)s(ound)h(v)-5 b(alue\021)38
b(errors.)141 4978 y(Finally)-8 b(,)38 b(note)f(that)f(although)h(P)m
(osix,)h(SVR4,)f(and)f(Berk)m(eley)g(co)m(v)m(er)h(the)g(lion's)f
(share)g(of)f(the)h(terminal-)0 5091 y(driv)m(er)h(functionalit)m(y)-8
b(,)40 b(eac)m(h)d(op)s(erating)g(system)f(inevitably)h(has)f
(non-standard)h(extensions.)59 b(While)36 b(a)g(par-)0
5203 y(ticular)i(cash)e(implemen)m(tation)k(ma)m(y)d(pro)m(vide)h
(these)e(extensions,)j(they)d(are)h(not)g(p)s(ortable,)i(and)e(so)g
(are)f(not)0 5316 y(do)s(cumen)m(ted)c(here.)1905 5589
y(55)p eop
%%Page: 56 56
56 55 bop 0 91 a Fk(3.13.2)103 b(Miscellaneous)36 b(pro)s(cedures)0
287 y Fj(val)47 b(is_tty_fd)g(:)g(fd)g(->)f(bool)0 423
y(val)h(is_tty_in)g(:)g(Pervasives.in_channel)f(->)h(bool)0
560 y(val)g(is_tty_out)g(:)g(Pervasives.out_channel)f(->)h(bool)227
697 y Fi(Return)31 b(true)g(if)f(the)g(argumen)m(t)j(is)c(a)i(tt)m(y)-8
b(.)0 909 y Fj(val)47 b(tty_file_name_fd)g(:)f(fd)h(->)g(string)0
1045 y(val)g(tty_file_name_in)g(:)f(Pervasives.in_channel)h(->)g
(string)0 1182 y(val)g(tty_file_name_out)f(:)h(Pervasives.out_channel)g
(->)g(string)227 1320 y Fi(The)30 b(argumen)m(t)h(m)m(ust)f(b)s(e)f(a)g
(\034le)h(descriptor)g(or)f(c)m(hannel)i(op)s(en)e(on)h(a)f(tt)m(y)-8
b(.)41 b(Return)29 b(the)h(\034le-name)h(of)d(the)227
1432 y(tt)m(y)-8 b(.)0 1771 y Fk(3.13.3)103 b(The)35
b(tt)m(y_info)g(record)f(t)m(yp)s(e)0 1966 y Fi(The)45
b(primary)g(data-structure)i(that)e(describ)s(es)f(a)h(terminal's)h(mo)
s(de)e(is)h(a)f Fj(tty_info)g Fi(record,)49 b(de\034ned)d(as)0
2079 y(follo)m(ws:)0 2216 y Fj(type)94 b(tty_info)47
b(=)g({)94 2329 y(control_chars)g(:)g(string)f(;)227
2466 y Fi(Magic)31 b(input)g(c)m(hars)94 2654 y Fj(input_flags)47
b(:)g(nativeint)f(;)227 2792 y Fi(Input)31 b(pro)s(cessing)94
2979 y Fj(output_flags)47 b(:)g(nativeint)f(;)227 3117
y Fi(Output)32 b(pro)s(cessing)94 3305 y Fj(control_flags)47
b(:)g(nativeint)f(;)227 3443 y Fi(Serial-line)32 b(con)m(trol)94
3630 y Fj(local_flags)47 b(:)g(nativeint)f(;)227 3768
y Fi(Line-editting)33 b(UI)94 3956 y Fj(input_speed)47
b(:)g(int)g(;)227 4094 y Fi(Co)s(de)31 b(for)f(input)h(sp)s(eed)94
4281 y Fj(output_speed)47 b(:)g(int)g(;)227 4419 y Fi(Co)s(de)31
b(for)f(output)h(sp)s(eed)94 4607 y Fj(min)47 b(:)g(int)g(;)227
4744 y Fi(Ra)m(w-mo)s(de)31 b(input)h(p)s(olicy)94 4932
y Fj(time)47 b(:)g(int)g(;)227 5070 y Fi(Ra)m(w-mo)s(de)31
b(input)h(p)s(olicy)0 5258 y Fj(})1905 5589 y Fi(56)p
eop
%%Page: 57 57
57 56 bop 227 91 a Fk(The)35 b(con)m(trol-c)m(haracters)g(string)141
250 y Fi(The)d Fj(control_chars)g Fi(\034eld)g(is)g(a)f(c)m(haracter)j
(string;)f(its)f(c)m(haracters)h(ma)m(y)g(b)s(e)e(indexed)i(b)m(y)f(in)
m(teger)h(v)-5 b(alues)0 363 y(tak)m(en)31 b(from)g(the)f(record)h
Fj(ttychar)p Fi(.)0 499 y Fj(type)94 b(tty_chars)47 b(=)g({)94
612 y(delete_char)g(:)g(int)g(;)274 860 y(Posix)329 b(C:)47
b(ERASE)376 b(typ.)46 b(del)94 1153 y(delete_line)h(:)g(int)g(;)274
1401 y(Posix)329 b(C:)47 b(KILL)423 b(typ.)46 b(^U)94
1693 y(eof)h(:)g(int)g(;)274 1941 y(Posix)329 b(C:)47
b(EOF)470 b(typ.)46 b(^D)94 2233 y(eol)h(:)g(int)g(;)274
2481 y(Posix)329 b(C:)47 b(EOL)94 2774 y(interrupt)g(:)g(int)g(;)274
3022 y(Posix)329 b(C:)47 b(INTR)423 b(typ.)46 b(^C)94
3314 y(quit)h(:)g(int)g(;)274 3562 y(Posix)329 b(C:)47
b(QUIT)423 b(typ.)46 b(^\\)94 3854 y(suspend)h(:)g(int)g(;)274
4102 y(Posix)329 b(C:)47 b(SUSP)423 b(typ.)46 b(^Z)94
4394 y(start)h(:)g(int)g(;)274 4642 y(Posix)329 b(C:)47
b(START)376 b(typ.)46 b(^Q)94 4935 y(stop)h(:)g(int)g(;)274
5183 y(Posix)329 b(C:)47 b(STOP)423 b(typ.)46 b(^S)1905
5589 y Fi(57)p eop
%%Page: 58 58
58 57 bop 94 91 a Fj(delayed_suspend)47 b(:)g(int)f(;)274
342 y(SVR4+BSD)188 b(C:)47 b(DSUSP)376 b(typ.)46 b(^Y)94
643 y(delete_word)h(:)g(int)g(;)274 893 y(SVR4+BSD)188
b(C:)47 b(WERASE)329 b(typ.)46 b(^W)94 1194 y(discard)h(:)g(int)g(;)274
1445 y(SVR4+BSD)188 b(C:)47 b(DISCARD)282 b(typ.)46 b(^O)94
1745 y(eol2)h(:)g(int)g(;)274 1996 y(SVR4+BSD)188 b(C:)47
b(EOL2)94 2296 y(literal_next)g(:)g(int)g(;)274 2547
y(SVR4+BSD)188 b(C:)47 b(LNEXT)376 b(typ.)46 b(^V)94
2848 y(reprint)h(:)g(int)g(;)274 3098 y(BSD)423 b(C:)47
b(REPRINT)282 b(typ.)46 b(^R)94 3399 y(status)h(:)g(int)g(;)274
3650 y(BSD)423 b(C:)47 b(STATUS)329 b(typ.)46 b(^T)0
3950 y(})0 4087 y(val)h(ttychar)g(:)g(tty_chars)141 4223
y Fi(As)25 b(discussed)g(ab)s(o)m(v)m(e,)i(only)e(the)g(P)m(osix)h(en)m
(tries)g(in)g Fj(ttychar)e Fi(are)i(guaran)m(teed)h(to)f(b)s(e)f
(legal,)h(in)m(teger)h(indices.)0 4336 y(A)35 b(program)j(can)e
(reliably)h(test)e(the)i(OS)f(to)g(see)g(if)f(the)i(non-P)m(osix)g(c)m
(haracters)g(are)f(supp)s(orted)h(b)m(y)f(c)m(hec)m(king)0
4449 y(the)30 b(index)g(constan)m(ts.)41 b(If)29 b(the)h(con)m(trol-c)m
(haracter)j(function)d(is)g(supp)s(orted)g(b)m(y)g(the)g(terminal)h
(driv)m(er,)f(then)g(the)0 4562 y(corresp)s(onding)38
b(index)g(will)f(b)s(e)g(b)s(ound)h(to)f(a)g(p)s(ositiv)m(e)h(in)m
(teger;)k(if)37 b(it)g(is)g(not)g(supp)s(orted,)j(the)d(index)g(will)h
(b)s(e)0 4675 y(b)s(ound)31 b(to)f(-1.)0 4811 y Fj(val)47
b(disable_tty_char)g(:)f(char)227 4949 y Fi(T)-8 b(o)31
b(disable)g(a)g(giv)m(en)g(con)m(trol-c)m(haracter)j(function,)d(set)f
(its)g(corresp)s(onding)i(en)m(try)f(in)f(the)227 5062
y Fj(control_chars)g Fi(string)h(to)f(the)h(sp)s(ecial)f(c)m(haracter)j
Fj(disable_tty_char)c Fi(\(and)i(then)g(use)f(a)227 5175
y Fj(set_tty_info_...)40 b Fi(pro)s(cedure)31 b(to)g(up)s(date)g(the)f
(terminal's)i(state\).)1905 5589 y(58)p eop
%%Page: 59 59
59 58 bop 0 91 a Fk(The)23 b(\035ag)h(\034elds)90 b Fi(The)21
b Fj(tty_info)e Fi(record's)i Fj(input_flags)p Fi(,)h
Fj(output_flags)p Fi(,)g Fj(control_flags)p Fi(,)g(and)f
Fj(local_flags)0 204 y Fi(\034elds)k(are)h(all)f(bit)h(sets)e(represen)
m(ted)j(as)e(t)m(w)m(o's-complemen)m(t)k(nativ)m(e)d(in)m(tegers.)40
b(Their)26 b(v)-5 b(alues)25 b(are)g(comp)s(osed)h(b)m(y)0
317 y(or'ing)e(together)h(v)-5 b(alues)23 b(tak)m(en)h(from)f(the)g
(named)i(constan)m(ts)f(in)f(records)h Fj(ttyin)p Fi(,)g
Fj(ttyout)f Fi(and)h Fj(ttyc)p Fi(,)g(describ)s(ed)0
430 y(b)s(elo)m(w.)141 543 y(As)41 b(discussed)g(ab)s(o)m(v)m(e,)k
(only)d(the)g(P)m(osix)g(en)m(tries)g(listed)g(in)f(these)h(tables)g
(are)g(guaran)m(teed)h(to)f(b)s(e)f(legal,)0 656 y(in)m(teger)33
b(\035ag)g(v)-5 b(alues.)44 b(A)32 b(program)h(can)f(reliably)h(test)e
(the)i(OS)f(to)g(see)f(if)h(the)g(non-P)m(osix)h(\035ags)f(are)g(supp)s
(orted)0 769 y(b)m(y)42 b(c)m(hec)m(king)i(the)e(named)h(constan)m(ts.)
77 b(If)41 b(the)h(feature)h(is)e(supp)s(orted)i(b)m(y)f(the)h
(terminal)g(driv)m(er,)j(then)c(the)0 882 y(corresp)s(onding)32
b(\035ag)e(will)h(b)s(e)f(b)s(ound)h(to)f(an)h(in)m(teger;)h(if)e(it)g
(is)g(not)h(supp)s(orted,)g(the)g(\035ag)f(will)h(b)s(e)f(b)s(ound)h
(to)f(-1.)0 1018 y Fj(type)94 b(tty_in)47 b(=)g({)94
1131 y(check_parity)g(:)g(nativeint)f(;)274 1380 y(Posix)329
b(C:)47 b(INPCK)141 b(Check)47 b(Parity.)94 1674 y
(ignore_bad_parity_chars)f(:)h(nativeint)g(;)274 1923
y(Posix)329 b(C:)47 b(IGNPAR)94 b(Ignore)47 b(chars)f(with)h(parity)g
(errors.)94 2217 y(mark_parity_errors)g(:)f(nativeint)h(;)274
2466 y(Posix)329 b(C:)47 b(PARMRK)94 b(Insert)47 b(chars)f(to)h(mark)g
(parity)g(errors.)94 2760 y(ignore_break)g(:)g(nativeint)f(;)274
3009 y(Posix)329 b(C:)47 b(IGNBRK)94 b(Ignore)47 b(breaks.)94
3303 y(interrupt_on_break)g(:)f(nativeint)h(;)274 3552
y(Posix)329 b(C:)47 b(BRKINT)94 b(Signal)47 b(on)f(breaks.)94
3847 y(seven_bits)h(:)g(nativeint)f(;)274 4095 y(Posix)329
b(C:)47 b(ISTRIP)94 b(Strip)47 b(char)f(to)h(seven)g(bits.)94
4390 y(cr_to_nl)g(:)g(nativeint)f(;)274 4638 y(Posix)329
b(C:)47 b(ICRNL)141 b(Map)47 b(carriage-return)f(to)h(newline.)94
4933 y(ignore_cr)g(:)g(nativeint)f(;)274 5181 y(Posix)329
b(C:)47 b(IGNCR)141 b(Ignore)47 b(carriage-returns.)1905
5589 y Fi(59)p eop
%%Page: 60 60
60 59 bop 94 91 a Fj(nl_to_cr)47 b(:)g(nativeint)f(;)274
342 y(Posix)329 b(C:)47 b(INLCR)141 b(Map)47 b(newline)f(to)h
(carriage-return.)94 643 y(input_flow_ctl)g(:)g(nativeint)f(;)274
893 y(Posix)329 b(C:)47 b(IXOFF)141 b(Enable)47 b(input)f(flow)h
(control.)94 1194 y(output_flow_ctl)g(:)g(nativeint)f(;)274
1445 y(Posix)329 b(C:)47 b(IXON)188 b(Enable)47 b(output)f(flow)h
(control.)94 1745 y(xon_any)g(:)g(nativeint)f(;)274 1996
y(SVR4+BSD)188 b(C:)47 b(IXANY)141 b(Any)47 b(char)g(restarts)f(after)h
(stop.)94 2296 y(beep_on_overflow)g(:)g(nativeint)f(;)274
2547 y(SVR4+BSD)188 b(C:)47 b(IMAXBEL)g(Ring)g(bell)f(when)h(queue)g
(full.)94 2848 y(lowercase)g(:)g(nativeint)f(;)274 3098
y(SVR4)376 b(C:)47 b(IUCLC)141 b(Map)47 b(upper)f(case)h(to)g(lower)g
(case.)0 3399 y(})0 3535 y(val)g(ttyin)g(:)g(tty_in)227
3673 y Fi(These)31 b(are)g(the)f(named)i(\035ags)e(for)g(the)h
Fj(tty_info)f Fi(record's)h Fg(input_\035ags)f Fi(\034eld.)41
b(These)31 b(\035ags)g(generally)227 3786 y(con)m(trol)h(the)f(pro)s
(cessing)f(of)g(input)h(c)m(hars.)42 b(Only)30 b(the)h(P)m(osix)f(en)m
(tries)i(are)e(guaran)m(teed)j(to)e(b)s(e)f Fd(<>)f Fi(-1.)0
3997 y Fj(type)94 b(tty_out)47 b(=)g({)94 4110 y(enable)g(:)g
(nativeint)g(;)274 4361 y(Posix)188 b(C:)47 b(OPOST)94
b(Enable)47 b(output)f(processing.)94 4662 y(nl_to_crnl)h(:)g
(nativeint)f(;)274 4912 y(Posix)188 b(C:)47 b(ONLCR)94
b(Map)47 b(nl)g(to)g(cr-nl.)94 5213 y(discard_eot)g(:)g(nativeint)f(;)
1905 5589 y Fi(60)p eop
%%Page: 61 61
61 60 bop 274 204 a Fj(Posix)188 b(C:)47 b(ONOEOT)g(Discard)g(EOT)g
(chars.)94 505 y(expand_tabs)g(:)g(nativeint)f(;)274
756 y(Posix)188 b(C:)47 b(OXTABS)g(Expand)g(tabs.)94
1056 y(cr_to_nl)g(:)g(nativeint)f(;)274 1307 y(Posix)188
b(C:)47 b(OCRNL)94 b(Map)47 b(cr)g(to)g(nl.)94 1607 y(nl_does_cr)g(:)g
(nativeint)f(;)274 1858 y(Posix)188 b(C:)47 b(ONLRET)g(Nl)g(performs)g
(cr)f(as)h(well.)94 2159 y(no_col0_cr)g(:)g(nativeint)f(;)274
2409 y(Posix)188 b(C:)47 b(ONOCR)94 b(No)47 b(cr)g(output)g(in)f
(column)h(0.)94 2710 y(delay_with_fill_char)f(:)h(nativeint)g(;)274
2961 y(Posix)188 b(C:)47 b(OFILL)94 b(Send)47 b(fill)g(char)f(to)h
(delay.)94 3261 y(fill_with_del)g(:)g(nativeint)f(;)274
3512 y(Posix)188 b(C:)47 b(OFDEL)94 b(Fill)47 b(char)g(is)g(ASCII)f
(DEL.)94 3812 y(uppercase)h(:)g(nativeint)f(;)274 4063
y(Posix)188 b(C:)47 b(OLCUC)94 b(Map)47 b(lower)g(to)g(upper)f(case.)94
4364 y(bs_delay)h(:)g(nativeint)f(;)274 4614 y(Backspace)h(delay:)g
(Bit-field)g(mask)94 4915 y(bs_delay0)g(:)g(nativeint)f(;)274
5166 y(Backspace)h(delay:)g(values)1905 5589 y Fi(61)p
eop
%%Page: 62 62
62 61 bop 94 91 a Fj(bs_delay1)47 b(:)g(nativeint)f(;)94
204 y(cr_delay)h(:)g(nativeint)f(;)274 455 y(Carriage-return)h(delay:)g
(Bit-field)f(mask)94 756 y(cr_delay0)h(:)g(nativeint)f(;)274
1006 y(Carriage-return)h(delay:)g(values)94 1307 y(cr_delay1)g(:)g
(nativeint)f(;)94 1420 y(cr_delay2)h(:)g(nativeint)f(;)94
1533 y(cr_delay3)h(:)g(nativeint)f(;)94 1645 y(ff_delay)h(:)g
(nativeint)f(;)274 1896 y(Form-feed)h(delay:)g(Bit-field)g(mask)94
2197 y(ff_delay0)g(:)g(nativeint)f(;)274 2447 y(Form-feed)h(delay:)g
(values)94 2748 y(ff_delay1)g(:)g(nativeint)f(;)94 2861
y(tab_delay)h(:)g(nativeint)f(;)274 3112 y(Horizontal-tab)h(delay:)g
(Bit-field)g(mask)94 3412 y(tab_delay0)g(:)g(nativeint)f(;)274
3663 y(Horizontal-tab)h(delay:)g(values)94 3963 y(tab_delay1)g(:)g
(nativeint)f(;)94 4076 y(tab_delay2)h(:)g(nativeint)f(;)94
4189 y(tab_delayx)h(:)g(nativeint)f(;)94 4302 y(nl_delay)h(:)g
(nativeint)f(;)274 4553 y(Newline)h(delay:)g(Bit-field)g(mask)94
4853 y(nl_delay0)g(:)g(nativeint)f(;)274 5104 y(Newline)h(delay:)g
(values)1905 5589 y Fi(62)p eop
%%Page: 63 63
63 62 bop 94 91 a Fj(nl_delay1)47 b(:)g(nativeint)f(;)94
204 y(vtab_delay)h(:)g(nativeint)f(;)274 455 y(Vertical)h(tab)g(delay:)
g(Bit-field)g(mask)94 756 y(vtab_delay0)g(:)g(nativeint)f(;)274
1006 y(Vertical)h(tab)g(delay:)g(values)94 1307 y(vtab_delay1)g(:)g
(nativeint)f(;)94 1420 y(all_delay)h(:)g(nativeint)f(;)274
1670 y(All:)h(Total)g(bit-field)g(mask)0 1971 y(})0 2107
y(val)g(ttyout)g(:)g(tty_out)227 2245 y Fi(Output-\035ags)32
b(\(b)s(efore)e(bs_dela)m(y\).)42 b(These)31 b(are)f(the)h(named)g
(\035ags)g(for)f(the)h Fj(tty_info)f Fi(record's)227
2358 y Fg(output_\035ags)i Fi(\034eld.)41 b(These)31
b(\035ags)f(generally)h(con)m(trol)h(the)f(pro)s(cessing)f(of)g(output)
i(c)m(hars.)41 b(Only)30 b(the)227 2471 y(P)m(osix)h(en)m(tries)g(are)g
(guaran)m(teed)i(to)d(b)s(e)g Fd(<>)g Fi(-1.)227 2584
y(Then,)h(dela)m(y)g(constan)m(ts.)42 b(These)31 b(are)f(the)h(named)g
(\035ags)g(for)f(the)g Fj(tty_info)g Fi(record's)h Fg(output_\035ags)
227 2697 y Fi(\034eld.)41 b(These)31 b(\035ags)f(con)m(trol)i(the)f
(output)g(dela)m(ys)g(asso)s(ciated)f(with)h(prin)m(ting)h(sp)s(ecial)f
(c)m(haracters.)42 b(They)227 2810 y(are)31 b(non-P)m(osix,)h(and)e(ha)
m(v)m(e)i(v)-5 b(alues)30 b Fd(<>)g Fi(-1)g(only)g(on)h(SVR4)f
(systems.)0 3021 y Fj(type)94 b(tty_c)47 b(=)g({)94 3134
y(char_size)g(:)g(nativeint)f(;)274 3385 y(Posix)188
b(C:)47 b(CSIZE)282 b(Character)46 b(size)h(mask)94 3685
y(char_size5)g(:)g(nativeint)f(;)274 3936 y(Posix)188
b(C:)47 b(CS5)376 b(5)47 b(bits.)94 4237 y(char_size6)g(:)g(nativeint)f
(;)274 4487 y(Posix)188 b(C:)47 b(CS6)376 b(6)47 b(bits.)94
4788 y(char_size7)g(:)g(nativeint)f(;)274 5039 y(Posix)188
b(C:)47 b(CS7)376 b(7)47 b(bits.)94 5339 y(char_size8)g(:)g(nativeint)f
(;)1905 5589 y Fi(63)p eop
%%Page: 64 64
64 63 bop 274 204 a Fj(Posix)188 b(C:)47 b(CS8)376 b(8)47
b(bits.)94 505 y(enable_parity)g(:)g(nativeint)f(;)274
756 y(Posix)188 b(C:)47 b(PARENB)235 b(Generate)47 b(and)f(detect)h
(parity.)94 1056 y(odd_parity)g(:)g(nativeint)f(;)274
1307 y(Posix)188 b(C:)47 b(PARODD)235 b(Odd)47 b(parity.)94
1607 y(enable_read)g(:)g(nativeint)f(;)274 1858 y(Posix)188
b(C:)47 b(CREAD)282 b(Enable)47 b(reception)f(of)h(chars.)94
2159 y(hup_on_close)g(:)g(nativeint)f(;)274 2409 y(Posix)188
b(C:)47 b(HUPCL)282 b(Hang)47 b(up)g(on)f(last)h(close.)94
2710 y(no_modem_sync)g(:)g(nativeint)f(;)274 2961 y(Posix)188
b(C:)47 b(LOCAL)282 b(Ignore)47 b(modem)f(lines.)94 3261
y(two_stop_bits)h(:)g(nativeint)f(;)274 3512 y(Posix)188
b(C:)47 b(CSTOPB)235 b(Send)47 b(two)g(stop)f(bits.)94
3812 y(ignore_flags)h(:)g(nativeint)f(;)274 4063 y(Posix)188
b(C:)47 b(CIGNORE)188 b(Ignore)47 b(control)f(flags.)94
4364 y(cts_output_flow_control)g(:)h(nativeint)g(;)274
4614 y(BSD)282 b(C:)47 b(CCTS_OFLOW)g(CTS)g(flow)g(control)f(of)h
(output.)94 4915 y(rts_input_flow_control)f(:)h(nativeint)g(;)274
5166 y(BSD)282 b(C:)47 b(CRTS_IFLOW)g(RTS)g(flow)g(control)f(of)h
(output.)1905 5589 y Fi(64)p eop
%%Page: 65 65
65 64 bop 94 91 a Fj(carrier_flow_ctl)47 b(:)g(nativeint)f(;)274
342 y(BSD)282 b(C:)47 b(MDMBUF)0 643 y(})0 779 y(val)g(ttyc)g(:)g
(tty_c)227 917 y Fi(Con)m(trol-\035ags.)c(These)30 b(are)g(the)g(named)
h(\035ags)f(for)f(the)h Fj(tty_info)g Fi(record's)g Fg(c)-5
b(ontr)g(ol_\035ags)32 b Fi(\034eld.)40 b(These)227 1030
y(\035ags)31 b(generally)g(con)m(trol)h(the)e(details)h(of)f(the)h
(terminal's)g(serial)g(line.)41 b(Only)30 b(the)h(P)m(osix)g(en)m
(tries)g(are)227 1143 y(guaran)m(teed)i(to)d(b)s(e)g
Fd(<>)g Fi(-1.)0 1354 y Fj(type)94 b(tty_l)47 b(=)g({)94
1467 y(canonical)g(:)g(nativeint)f(;)274 1718 y(Posix)376
b(C:)47 b(ICANON)235 b(Canonical)46 b(input)h(processing.)94
2018 y(echo)g(:)g(nativeint)g(;)274 2269 y(Posix)376
b(C:)47 b(ECHO)329 b(Enable)46 b(echoing.)94 2569 y(echo_delete_lines)h
(:)f(nativeint)h(;)274 2820 y(Posix)376 b(C:)47 b(ECHOK)282
b(Echo)47 b(newline)f(after)h(line)g(kill.)94 3121 y(echo_nl)g(:)g
(nativeint)f(;)274 3371 y(Posix)376 b(C:)47 b(ECHONL)235
b(Echo)47 b(newline)f(even)h(if)g(echo)g(is)g(off.)94
3672 y(visual_delete)g(:)g(nativeint)f(;)274 3923 y(Posix)376
b(C:)47 b(ECHOE)282 b(Visually)46 b(erase)h(chars.)94
4223 y(enable_signals)g(:)g(nativeint)f(;)274 4474 y(Posix)376
b(C:)47 b(ISIG)329 b(Enable)46 b(^C,)h(^Z)g(signalling.)94
4775 y(extended)g(:)g(nativeint)f(;)274 5025 y(Posix)376
b(C:)47 b(IEXTEN)235 b(Enable)46 b(extensions.)94 5326
y(no_flush_on_interrupt)g(:)h(nativeint)g(;)1905 5589
y Fi(65)p eop
%%Page: 66 66
66 65 bop 274 204 a Fj(Posix)376 b(C:)47 b(NOFLSH)235
b(Don't)46 b(flush)h(after)g(interrupt.)94 505 y(ttou_signal)g(:)g
(nativeint)f(;)274 756 y(Posix)376 b(C:)47 b(TOSTOP)235
b(SIGTTOU)46 b(on)h(background)g(output.)94 1056 y(echo_ctl)g(:)g
(nativeint)f(;)274 1307 y(SVR4+BSD)235 b(C:)47 b(ECHOCTL)188
b(Echo)47 b(control)f(chars)h(as)g("^X".)94 1607 y(flush_output)g(:)g
(nativeint)f(;)274 1858 y(SVR4+BSD)235 b(C:)47 b(FLUSHO)235
b(Output)46 b(is)h(being)g(flushed.)94 2159 y(hardcopy_delete)g(:)g
(nativeint)f(;)274 2409 y(SVR4+BSD)235 b(C:)47 b(ECHOPRT)188
b(Visual)46 b(erase)h(for)g(hardcopy.)94 2710 y(reprint_unread_chars)f
(:)h(nativeint)g(;)274 2961 y(SVR4+BSD)235 b(C:)47 b(PENDIN)235
b(Retype)46 b(pending)h(input.)94 3261 y(visual_delete_line)g(:)f
(nativeint)h(;)274 3512 y(SVR4+BSD)235 b(C:)47 b(ECHOKE)235
b(Visually)46 b(erase)h(a)g(line-kill.)94 3812 y(alt_delete_word)g(:)g
(nativeint)f(;)274 4063 y(BSD)470 b(C:)47 b(ALTWERASE)94
b(Alternate)46 b(word)h(erase)g(algorithm.)94 4364 y(no_kernel_status)g
(:)g(nativeint)f(;)274 4614 y(BSD)470 b(C:)47 b(NOKERNINFO)g(No)g
(kernel)f(status)h(on)g(^T.)94 4915 y(case_map)g(:)g(nativeint)f(;)274
5166 y(SVR4)423 b(C:)47 b(XCASE)282 b(Canonical)46 b(case)h
(presentation.)1905 5589 y Fi(66)p eop
%%Page: 67 67
67 66 bop 0 91 a Fj(})0 228 y(val)47 b(ttyl)g(:)g(tty_l)227
366 y Fi(Lo)s(cal-\035ags.)42 b(These)30 b(are)h(the)g(named)g(\035ags)
f(for)h(the)f Fj(tty_info)g Fi(record's)h Fg(lo)-5 b(c)g(al_\035ags)33
b Fi(\034eld.)41 b(These)227 479 y(\035ags)29 b(generally)h(con)m(trol)
g(the)f(details)h(of)e(the)h(line-editing)i(user)e(in)m(terface.)41
b(Only)29 b(the)g(P)m(osix)h(en)m(tries)f(are)227 591
y(guaran)m(teed)k(to)d(b)s(e)g Fd(<>)g Fi(-1.)0 954 y
Fk(The)51 b(sp)s(eed)g(\034elds)90 b Fi(The)45 b Fj(input_speed)f
Fi(and)h Fj(output_speed)e Fi(\034elds)i(determine)h(the)e(I/O)h(rate)f
(of)g(the)0 1066 y(terminal's)d(line.)68 b(The)40 b(v)-5
b(alue)40 b(of)f(these)h(\034elds)g(is)f(an)g(in)m(teger)i(giving)f
(the)g(sp)s(eed)g(in)f(bits-p)s(er-second.)69 b(The)0
1179 y(follo)m(wing)32 b(sp)s(eeds)d(are)i(supp)s(orted)g(b)m(y)g(P)m
(osix:)846 1367 y Fj(0)234 b(134)282 b(600)235 b(4800)799
1480 y(50)f(150)h(1200)g(9600)799 1593 y(75)f(200)h(1800)188
b(19200)752 1706 y(110)234 b(300)h(2400)188 b(38400)141
1893 y Fi(Y)-8 b(our)28 b(OS)g(ma)m(y)g(accept)g(others;)h(there's)f
(curren)m(tly)h(no)f(pro)m(vision)g(for)f(the)h(sp)s(ecial)g(v)-5
b(alues)27 b Fj(EXTA)g Fi(and)h Fj(EXTB)p Fi(.)0 2181
y Fk(The)37 b(min)f(and)h(time)g(\034elds)90 b Fi(The)33
b(in)m(teger)h Fj(min)e Fi(and)g Fj(time)g Fi(\034elds)h(determine)h
(input)f(blo)s(c)m(king)g(b)s(eha)m(viour)0 2294 y(during)39
b(non-canonical)h(\(ra)m(w\))f(input;)k(otherwise,)e(they)d(are)g
(ignored.)64 b(See)39 b(the)f(termios\(3\))h(man)f(page)h(for)0
2407 y(further)31 b(details.)141 2519 y(Be)22 b(w)m(arned)h(that)f(P)m
(osix)h(allo)m(ws)f(the)g(base)g(system)f(call's)h(represen)m(tation)i
(of)e(the)g Fj(tty_info)f Fi(record)i(to)f(share)0 2632
y(storage)31 b(for)f(the)h Fj(min)f Fi(\034eld)h(and)g(the)g
Fj(ttychar.eof)f Fi(elemen)m(t)i(of)e(the)h(con)m(trol-c)m(haracters)i
(string,)e(and)g(for)f(the)0 2745 y Fj(time)e Fi(\034eld)h(and)g(the)g
Fj(ttychar/eol)f Fi(elemen)m(t)i(of)f(the)g(con)m(trol-c)m(haracters)i
(string.)41 b(Man)m(y)28 b(implemen)m(tations)k(in)0
2858 y(fact)e(do)h(this.)141 2971 y(T)-8 b(o)39 b(sta)m(y)g(out)f(of)g
(trouble,)k(set)c(the)h Fj(min)f Fi(and)h Fj(time)f Fi(\034elds)g(only)
h(if)f(y)m(ou)g(are)h(putting)g(the)g(terminal)h(in)m(to)0
3084 y(ra)m(w)30 b(mo)s(de;)f(set)g(the)g(eof)g(and)g(eol)g(con)m
(trol-c)m(haracters)k(only)28 b(if)h(y)m(ou)g(are)g(putting)h(the)f
(terminal)i(in)m(to)e(canonical)0 3197 y(mo)s(de.)41
b(It's)29 b(ugly)-8 b(,)31 b(but)g(it's)f(Unix.)0 3484
y Fk(Using)k(tt)m(y-info)g(records)0 3597 y Fj(val)47
b(make_tty_info)g(:)94 3710 y(nativeint)g(->)94 3823
y(nativeint)g(->)94 3936 y(nativeint)g(->)g(nativeint)f(->)h(int)g(->)g
(int)g(->)g(int)g(->)g(int)g(->)g(tty_info)0 4072 y(val)g
(copy_tty_info)g(:)g(tty_info)f(->)h(tty_info)227 4210
y Fi(These)31 b(pro)s(cedures)g(mak)m(e)g(it)f(p)s(ossible)g(to)h
(create)g(new)g Fj(tty_info)f Fi(records.)41 b(The)31
b(t)m(ypical)g(metho)s(d)g(for)227 4323 y(creating)h(a)e(new)h(record)g
(is)f(to)h(cop)m(y)g(one)f(retriev)m(ed)i(b)m(y)f(a)f(call)h(to)f(the)h
Fj(tty_info)f Fi(pro)s(cedure,)h(then)227 4436 y(mo)s(dify)f(the)h(cop)
m(y)g(as)f(desired.)41 b(Note)30 b(that)h(the)g(call)g
Fj(make_tty_info)e Fg(input_\035ags)k(output_\035ags)227
4549 y(c)-5 b(ontr)g(ol_\035ags)34 b(lo)-5 b(c)g(al_\035ags)35
b(isp)-5 b(e)g(e)g(d)34 b(osp)-5 b(e)g(e)g(d)35 b(min)c(time)f
Fi(do)s(es)g(not)h(tak)m(e)g(a)f(parameter)i(to)e(de\034ne)i(the)e(new)
227 4662 y(record's)h(con)m(trol)h(c)m(haracters.)227
4775 y Fg(Why?)42 b(Be)-5 b(c)g(ause)35 b(the)e(length)g(of)f(the)h
(string)f(varies)h(fr)-5 b(om)32 b(Unix)g(to)h(Unix.)41
b(F)-7 b(or)32 b(example,)i(the)227 4888 y(wor)-5 b(d-er)g(ase)35
b(c)-5 b(ontr)g(ol)33 b(char)-5 b(acter)35 b(\(typic)-5
b(al)5 b(ly)32 b(c)-5 b(ontr)g(ol-w\))34 b(is)d(pr)-5
b(ovide)g(d)35 b(by)d(most)g(Unixes,)g(but)h(not)f(p)-5
b(art)33 b(of)227 5001 y(the)g(Posix)g(sp)-5 b(e)g(c.)41
b Fi(Instead,)31 b(it)f(simply)h(returns)f(a)h Fj(tty_info)f
Fi(record)h(whose)g(con)m(trol-c)m(haracter)j(string)227
5113 y(has)c(all)h(elemen)m(ts)h(initialised)f(to)g(ASCI)s(I)e(n)m(ul.)
41 b(Y)-8 b(ou)31 b(ma)m(y)g(then)g(install)f(the)h(sp)s(ecial)f(c)m
(haracters)i(b)m(y)227 5226 y(assigning)f(to)g(the)f(string.)41
b(Similarly)-8 b(,)32 b(the)f(con)m(trol-c)m(haracter)j(string)c(in)h
(the)f(record)i(pro)s(duced)f(b)m(y)1905 5589 y(67)p
eop
%%Page: 68 68
68 67 bop 227 91 a Fj(copy_tty_info)30 b Fi(do)s(es)g(not)h(share)f
(structure)i(with)e(the)h(string)g(in)f(the)h(record)g(b)s(eing)g
(copied,)g(so)f(y)m(ou)227 204 y(ma)m(y)h(m)m(utate)h(it)e(freely)-8
b(.)0 415 y Fj(val)47 b(tty_info_fd)g(:)g(fd)g(->)f(tty_info)0
552 y(val)h(tty_info_in)g(:)g(Pervasives.in_channel)f(->)h(tty_info)0
689 y(val)g(tty_info_out)g(:)g(Pervasives.out_channel)f(->)h(tty_info)0
825 y(val)g(tty_info_fn)g(:)g(string)f(->)h(tty_info)227
963 y Fi(The)31 b Fg(fd/channel/string)g Fi(parameter)g(is)f(an)h(in)m
(teger)h(\034le)e(descriptor,)i(Caml)f(c)m(hannel)h(op)s(ened)f(on)f(a)
227 1076 y(terminal)i(device,)f(or)f(a)h(\034le-name)g(for)f(a)h
(terminal)g(device.)41 b(This)31 b(pro)s(cedure)g(returns)g(a)f
Fj(tty_info)227 1189 y Fi(record)i(describing)f(the)g(terminal's)g
(curren)m(t)h(mo)s(de.)0 1400 y Fj(val)47 b(set_tty_info_now_fd)f(:)h
(fd)g(->)g(tty_info)g(->)g(unit)0 1537 y(val)g(set_tty_info_now_in)f(:)
h(Pervasives.in_channel)g(->)g(tty_info)g(->)g(unit)0
1673 y(val)g(set_tty_info_now_out)f(:)h(Pervasives.out_channel)g(->)g
(tty_info)g(->)g(unit)0 1810 y(val)g(set_tty_info_now_fn)f(:)h(string)g
(->)g(tty_info)g(->)g(unit)0 1946 y(val)g(set_tty_info_drain_fd)f(:)h
(fd)g(->)g(tty_info)g(->)g(unit)0 2083 y(val)g(set_tty_info_drain_in)f
(:)h(Pervasives.in_channel)g(->)g(tty_info)g(->)g(unit)0
2219 y(val)g(set_tty_info_drain_out)f(:)h(Pervasives.out_channel)g(->)g
(tty_info)g(->)f(unit)0 2356 y(val)h(set_tty_info_drain_fn)f(:)h
(string)g(->)g(tty_info)g(->)g(unit)0 2492 y(val)g
(set_tty_info_flush_fd)f(:)h(fd)g(->)g(tty_info)g(->)g(unit)0
2629 y(val)g(set_tty_info_flush_in)f(:)h(Pervasives.in_channel)g(->)g
(tty_info)g(->)g(unit)0 2765 y(val)g(set_tty_info_flush_out)f(:)h
(Pervasives.out_channel)g(->)g(tty_info)g(->)f(unit)0
2902 y(val)h(set_tty_info_flush_fn)f(:)h(string)g(->)g(tty_info)g(->)g
(unit)227 3040 y Fi(The)31 b Fg(fd/channel/string)g Fi(parameter)g(is)f
(an)h(in)m(teger)h(\034le)e(descriptor)i(or)e(Caml)h(c)m(hannel)h(op)s
(ened)f(on)g(a)227 3153 y(terminal)h(device,)f(or)f(a)h(\034le-name)g
(for)f(a)h(terminal)g(device.)41 b(The)31 b(The)g(pro)s(cedure)g(c)m
(hosen)g(determines)227 3265 y(when)g(and)g(ho)m(w)g(the)g(terminal's)g
(mo)s(de)g(is)f(altered:)368 3378 y Fj(set_tty_info_now_...)423
b(Make)46 b(change)h(immediately.)368 3491 y(set_tty_info_drain_...)329
b(Drain)46 b(output,)h(then)g(change.)368 3604 y
(set_tty_info_flush_...)329 b(Drain)46 b(output,)h(flush)g(input,)g
(then)g(change.)0 3943 y Fk(3.13.4)103 b(Other)35 b(terminal-device)g
(pro)s(cedures)0 4138 y Fj(val)47 b(send_tty_break_fd)f(:)h
(?duration:int)g(->)g(fd)g(->)g(unit)0 4274 y(val)g(send_tty_break_in)f
(:)h(?duration:int)g(->)g(Pervasives.in_channel)g(->)f(unit)0
4411 y(val)h(send_tty_break_out)f(:)h(?duration:int)g(->)g
(Pervasives.out_channel)g(->)f(unit)0 4547 y(val)h(send_tty_break_fn)f
(:)h(?duration:int)g(->)g(string)g(->)g(unit)227 4685
y Fi(The)31 b Fg(fd/channel/string)g Fi(parameter)g(is)f(an)h(in)m
(teger)h(\034le)e(descriptor)i(or)e(Caml)h(c)m(hannel)h(op)s(ened)f(on)
g(a)227 4798 y(terminal)h(device,)f(or)f(a)h(\034le-name)g(for)f(a)h
(terminal)g(device.)41 b(Send)31 b(a)g(break)f(signal)h(to)f(the)h
(designated)227 4911 y(terminal.)41 b(A)27 b(break)g(signal)g(is)g(a)g
(sequence)h(of)e(con)m(tin)m(uous)k(zeros)d(on)g(the)h(terminal's)g
(transmission)f(line.)227 5024 y(The)k Fg(dur)-5 b(ation)31
b Fi(argumen)m(t)h(determines)f(the)g(length)g(of)f(the)h(break)g
(signal.)40 b(A)30 b(zero)h(v)-5 b(alue)31 b(\(the)g(default\))227
5137 y(causes)e(a)g(break)g(of)f(b)s(et)m(w)m(een)i(0.25)g(and)f(0.5)g
(seconds)g(to)g(b)s(e)f(sen)m(t;)i(other)f(v)-5 b(alues)29
b(determine)h(a)f(p)s(erio)s(d)g(in)227 5250 y(a)i(manner)g(that)g
(will)g(dep)s(end)g(up)s(on)f(lo)s(cal)h(comm)m(unit)m(y)h(standards.)
1905 5589 y(68)p eop
%%Page: 69 69
69 68 bop 0 91 a Fj(val)47 b(drain_tty_fd)g(:)g(fd)f(->)h(unit)0
228 y(val)g(drain_tty_in)g(:)g(Pervasives.in_channel)f(->)h(unit)0
364 y(val)g(drain_tty_out)g(:)g(Pervasives.out_channel)f(->)h(unit)0
501 y(val)g(drain_tty_fn)g(:)g(string)f(->)h(unit)227
639 y Fi(The)31 b Fg(fd/channel/string)g Fi(parameter)g(is)f(an)h(in)m
(teger)h(\034le)e(descriptor)i(or)e(Caml)h(c)m(hannel)h(op)s(ened)f(on)
g(a)227 752 y(terminal)h(device,)f(or)f(a)h(\034le-name)g(for)f(a)h
(terminal)g(device.)227 865 y(This)g(pro)s(cedure)g(w)m(aits)g(un)m
(til)h(all)e(the)h(output)g(written)h(to)e(the)h(terminal)g(device)g
(has)f(b)s(een)227 977 y(transmitted)i(to)e(the)h(device.)41
b(If)29 b Fg(channel)i Fi(is)f(an)h(out_c)m(hannel)i(with)d(bu\033ered)
h(I/O)g(enabled,)g(then)g(the)227 1090 y(p)s(ort's)f(bu\033ered)h(c)m
(haracters)h(are)f(\035ushed)g(b)s(efore)f(w)m(aiting)i(for)e(the)h
(device)g(to)f(drain.)0 1302 y Fj(val)47 b(flush_tty_input_fd)f(:)h(fd)
g(->)g(unit)0 1438 y(val)g(flush_tty_input_in)f(:)h
(Pervasives.in_channel)g(->)g(unit)0 1575 y(val)g(flush_tty_input_out)f
(:)h(Pervasives.out_channel)g(->)g(unit)0 1711 y(val)g
(flush_tty_input_fn)f(:)h(string)g(->)g(unit)0 1848 y(val)g
(flush_tty_output_fd)f(:)h(fd)g(->)g(unit)0 1984 y(val)g
(flush_tty_output_in)f(:)h(Pervasives.in_channel)g(->)g(unit)0
2121 y(val)g(flush_tty_output_out)f(:)h(Pervasives.out_channel)g(->)g
(unit)0 2257 y(val)g(flush_tty_output_fn)f(:)h(string)g(->)g(unit)0
2394 y(val)g(flush_tty_both_fd)f(:)h(fd)g(->)g(unit)0
2530 y(val)g(flush_tty_both_in)f(:)h(Pervasives.in_channel)g(->)g(unit)
0 2667 y(val)g(flush_tty_both_out)f(:)h(Pervasives.out_channel)g(->)g
(unit)0 2804 y(val)g(flush_tty_both_fn)f(:)h(string)g(->)g(unit)227
2941 y Fi(The)31 b Fg(fd/channel/string)g Fi(parameter)g(is)f(an)h(in)m
(teger)h(\034le)e(descriptor)i(or)e(Caml)h(c)m(hannel)h(op)s(ened)f(on)
g(a)227 3054 y(terminal)h(device,)f(or)f(a)h(\034le-name)g(for)f(a)h
(terminal)g(device.)227 3167 y(These)g(pro)s(cedures)g(discard)g(the)g
(unread)g(input)g(c)m(hars)g(or)f(un)m(written)j(output)e(c)m(hars)g
(in)g(the)f(tt)m(y's)227 3280 y(k)m(ernel)h(bu\033ers.)0
3491 y Fj(val)47 b(start_tty_output_fd)f(:)h(fd)g(->)g(unit)0
3628 y(val)g(start_tty_output_in)f(:)h(Pervasives.in_channel)g(->)g
(unit)0 3764 y(val)g(start_tty_output_out)f(:)h(Pervasives.out_channel)
g(->)g(unit)0 3901 y(val)g(start_tty_output_fn)f(:)h(string)g(->)g
(unit)0 4037 y(val)g(stop_tty_output_fd)f(:)h(fd)g(->)g(unit)0
4174 y(val)g(stop_tty_output_in)f(:)h(Pervasives.in_channel)g(->)g
(unit)0 4311 y(val)g(stop_tty_output_out)f(:)h(Pervasives.out_channel)g
(->)g(unit)0 4447 y(val)g(stop_tty_output_fn)f(:)h(string)g(->)g(unit)0
4584 y(val)g(start_tty_input_fd)f(:)h(fd)g(->)g(unit)0
4720 y(val)g(start_tty_input_in)f(:)h(Pervasives.in_channel)g(->)g
(unit)0 4857 y(val)g(start_tty_input_out)f(:)h(Pervasives.out_channel)g
(->)g(unit)0 4993 y(val)g(start_tty_input_fn)f(:)h(string)g(->)g(unit)0
5130 y(val)g(stop_tty_input_fd)f(:)h(fd)g(->)g(unit)0
5266 y(val)g(stop_tty_input_in)f(:)h(Pervasives.in_channel)g(->)g(unit)
1905 5589 y Fi(69)p eop
%%Page: 70 70
70 69 bop 0 91 a Fj(val)47 b(stop_tty_input_out)f(:)h
(Pervasives.out_channel)g(->)g(unit)0 228 y(val)g(stop_tty_input_fn)f
(:)h(string)g(->)g(unit)227 365 y Fi(These)31 b(pro)s(cedures)g(can)g
(b)s(e)f(used)g(to)h(con)m(trol)g(a)g(terminal's)g(input)g(and)g
(output)g(\035o)m(w.)42 b(The)227 478 y Fg(fd/channel/string)31
b Fi(parameter)h(is)e(an)g(in)m(teger)i(\034le)f(descriptor)g(or)g
(Caml)g(c)m(hannel)h(op)s(ened)e(on)h(a)227 591 y(terminal)h(device,)f
(or)f(a)h(\034le-name)g(for)f(a)h(terminal)g(device.)227
704 y(The)g Fj(stop_tty_output_...)40 b Fi(and)31 b Fj
(start_tty_output_...)39 b Fi(pro)s(cedures)31 b(susp)s(end)f(and)h
(resume)227 817 y(output)h(from)e(a)g(terminal)i(device.)41
b(The)31 b Fj(stop_tty_input_...)39 b Fi(and)31 b Fj
(start_tty_input_...)227 930 y Fi(pro)s(cedures)g(transmit)g(the)g(sp)s
(ecial)f(STOP)i(and)f(ST)-8 b(AR)g(T)31 b(c)m(haracters)h(to)e(the)h
(terminal)g(with)g(the)227 1042 y(in)m(ten)m(tion)i(of)d(stopping)h
(and)g(starting)g(terminal)g(input)h(\035o)m(w.)0 1378
y Fk(3.13.5)103 b(Con)m(trol)34 b(terminals,)h(sessions,)f(and)g
(terminal)h(pro)s(cess)f(groups)0 1573 y Fj(val)47 b
(open_control_tty_in)f(:)94 1686 y(?flags:Io_3_2.open_flag)g(list)h(->)
g(string)g(->)g(Pervasives.in_channel)0 1823 y(val)g
(open_control_tty_out)f(:)94 1936 y(?flags:Io_3_2.open_flag)g(list)h
(->)g(string)g(->)g(Pervasives.out_channel)227 2073 y
Fi(This)31 b(pro)s(cedure)g(op)s(ens)f(terminal)i(device)e
Fg(tty_name)h Fi(as)f(the)g(pro)s(cess')g(con)m(trol)i(terminal)g
(\(see)e(the)227 2186 y Fj(termios)g Fi(man)h(page)g(for)f(more)h
(information)h(on)e(con)m(trol)i(terminals\).)42 b(The)31
b Fg(tty_name)f Fi(argumen)m(t)i(is)e(a)227 2299 y(\034le-name)i(suc)m
(h)f(as)f Fj(/dev/ttya)p Fi(.)40 b(The)31 b Fg(\035ags)f
Fi(argumen)m(t)j(is)d(a)g(v)-5 b(alue)31 b(suitable)g(as)f(the)g(last)h
(argumen)m(t)h(to)227 2412 y(the)f Fj(open_file)f Fi(call;)h(it)f
(defaults)h(to)f Fj(O_RDWR)g Fi(for)g Fj(open_control_tty_in)p
Fi(,)g(causing)h(the)g(terminal)g(to)227 2525 y(b)s(e)f(op)s(ened)h
(for)f(b)s(oth)h(input)g(and)g(output,)g(and)g Fj(O_WRONLY)f
Fi(for)g Fj(open_control_tty_out)p Fi(.)227 2637 y(The)h(c)m(hannel)h
(returned)g(is)e(an)g(in_c)m(hannel)j(if)d(the)g Fg(\035ags)h
Fi(p)s(ermit)g(it,)f(otherwise)i(an)e(out_c)m(hannel.)227
2750 y(Ocaml)i(do)e(not)h(ha)m(v)m(e)g(input/output)i(c)m(hannels,)e
(so)f(it's)h(one)f(or)h(the)f(other.)42 b(Ho)m(w)m(ev)m(er,)32
b(y)m(ou)f(can)f(get)227 2863 y(b)s(oth)h(read)g(and)f(write)h(c)m
(hannels)h(op)s(en)e(on)h(a)f(terminal)i(b)m(y)f(op)s(ening)g(it)f
(read/write)i(with)227 2976 y Fj(open_control_tty_in)p
Fi(,)e(taking)h(the)g(result)f(in_c)m(hannel,)j(and)e(duping)g(it)f(to)
h(an)f(output)i(c)m(hannel)227 3089 y(with)f Fj(out_channel_of_dup_in)p
Fi(.)227 3202 y(This)g(pro)s(cedure)g(guaran)m(tees)h(to)f(mak)m(e)g
(the)f(op)s(ened)h(terminal)h(the)e(pro)s(cess')g(con)m(trol)i
(terminal)g(only)e(if)227 3315 y(the)h(pro)s(cess)f(do)s(es)g(not)g(ha)
m(v)m(e)i(an)e(assigned)h(con)m(trol)h(terminal)g(at)e(the)h(time)g(of)
f(the)g(call.)41 b(If)30 b(the)g(scsh)227 3428 y(pro)s(cess)g(already)h
(has)f(a)h(con)m(trol)h(terminal,)f(the)g(results)f(are)h(unde\034ned.)
227 3541 y(T)-8 b(o)30 b(arrange)g(for)e(the)h(pro)s(cess)f(to)h(ha)m
(v)m(e)h(no)f(con)m(trol)h(terminal)g(prior)g(to)e(calling)i(this)f
(pro)s(cedure,)h(use)e(the)227 3654 y Fj(become_session_leader)i
Fi(pro)s(cedure.)0 3863 y Fj(val)47 b(become_session_leader)f(:)h(unit)
g(->)g(int)227 4000 y Fi(This)31 b(is)f(the)g(C)h Fj(setsid\(\))f
Fi(call.)41 b(P)m(osix)30 b(job-con)m(trol)i(has)f(a)f(three-lev)m(el)i
(hierarc)m(h)m(y:)227 4113 y(session/pro)s(cess-group/pro)s(cess.)41
b(Ev)m(ery)31 b(session)f(has)g(an)h(asso)s(ciated)f(con)m(trol)i
(terminal.)42 b(This)227 4226 y(pro)s(cedure)32 b(places)e(the)h
(curren)m(t)h(pro)s(cess)e(in)m(to)h(a)f(brand)i(new)e(session,)g(and)h
(disasso)s(ciates)f(the)h(pro)s(cess)227 4339 y(from)g(an)m(y)f
(previous)h(con)m(trol)g(terminal.)42 b(Y)-8 b(ou)31
b(ma)m(y)g(subsequen)m(tly)f(use)g Fj(open_control_tty)g
Fi(to)g(op)s(en)h(a)227 4452 y(new)g(con)m(trol)h(terminal.)227
4564 y(It)e(is)g(an)h(error)g(to)f(call)h(this)f(pro)s(cedure)i(if)d
(the)i(curren)m(t)h(pro)s(cess)e(is)g(already)h(a)f(pro)s(cess-group)h
(leader.)227 4677 y(One)g(w)m(a)m(y)g(to)g(guaran)m(tee)h(this)f(is)e
(not)i(the)g(case)f(is)g(only)h(to)f(call)h(this)f(pro)s(cedure)h
(after)g(forking.)0 4887 y Fj(val)47 b(tty_process_group_fd)f(:)h(fd)g
(->)g(int)0 5023 y(val)g(tty_process_group_in)f(:)h
(Pervasives.in_channel)g(->)g(int)0 5160 y(val)g(tty_process_group_out)
f(:)h(Pervasives.out_channel)g(->)g(int)0 5296 y(val)g
(tty_process_group_fn)f(:)h(string)g(->)g(int)1905 5589
y Fi(70)p eop
%%Page: 71 71
71 70 bop 0 91 a Fj(val)47 b(set_tty_process_group_fd)f(:)h(fd)g(->)g
(int)g(->)g(int)0 228 y(val)g(set_tty_process_group_in)f(:)h
(Pervasives.in_channel)g(->)g(int)g(->)g(int)0 364 y(val)g
(set_tty_process_group_out)f(:)h(Pervasives.out_channel)g(->)g(int)g
(->)g(int)0 501 y(val)g(set_tty_process_group_fn)f(:)h(string)g(->)g
(int)g(->)g(int)227 639 y Fi(These)31 b(eigh)m(t)g(pro)s(cedures)g(get)
g(and)g(set)f(the)h(pro)s(cess)f(group)h(of)f(a)g(giv)m(en)h(terminal.)
0 850 y Fj(val)47 b(control_tty_file_name)f(:)h(unit)g(->)g(string)227
988 y Fi(Return)31 b(the)g(\034le-name)g(of)f(the)h(pro)s(cess')f(con)m
(trol)i(tt)m(y)-8 b(.)41 b(On)31 b(ev)m(ery)f(v)m(ersion)h(of)f(Unix)g
(of)g(whic)m(h)i(w)m(e)f(are)227 1101 y(a)m(w)m(are,)i(this)d(is)g
(just)g(the)g(string)h Fj("/dev/tty")p Fi(.)40 b(Ho)m(w)m(ev)m(er,)32
b(this)e(pro)s(cedure)i(uses)e(the)g(o\036cial)i(P)m(osix)227
1214 y(in)m(terface,)g(so)e(it)g(is)g(more)h(p)s(ortable)g(than)g
(simply)g(using)f(a)h(constan)m(t)g(string.)0 1552 y
Fk(3.13.6)103 b(Pseudo-terminals)0 1747 y Fi(Cash)30
b(implemen)m(ts)j(an)d(in)m(terface)i(to)e(Berk)m(eley-st)m(yle)i
(pseudo-terminals.)0 1884 y Fj(val)47 b(fork_pty_session)g(:)94
1997 y(\(unit)g(->)g(unit\))g(->)94 2110 y(Proc_3_4.proc)g(*)g
(Pervasives.in_channel)f(*)h(Pervasives.out_channel)g(*)f(string)227
2247 y(fork_pty_session)30 b Fg(thunk)h Fi(giv)m(es)f(a)h(con)m(v)m
(enien)m(t)i(high-lev)m(el)f(in)m(terface)f(to)g(pseudo-terminals.)42
b(It)30 b(\034rst)227 2360 y(allo)s(cates)h(a)f(pt)m(y/tt)m(y)i(pair)f
(of)f(devices,)g(and)h(then)g(forks)e(a)i(c)m(hild)g(to)g(execute)f
(pro)s(cedure)i Fg(thunk)p Fi(.)41 b(In)30 b(the)227
2473 y(c)m(hild)i(pro)s(cess)306 2603 y Fe(\017)46 b
Fi(Stdio)31 b(and)g(the)g(curren)m(t)h(I/O)e(c)m(hannels)i(are)e(b)s
(ound)h(to)f(the)h(terminal)h(device.)306 2732 y Fe(\017)46
b Fi(The)31 b(c)m(hild)h(is)d(placed)j(in)e(its)g(o)m(wn,)i(new)f
(session)e(\(see)i Fj(become_session_leader)p Fi(\).)306
2862 y Fe(\017)46 b Fi(The)31 b(terminal)h(device)e(b)s(ecomes)h(the)g
(new)f(session's)g(con)m(trolling)j(terminal)e(\(see)397
2975 y Fj(open_control_tty)p Fi(\).)306 3104 y Fe(\017)46
b Fj(stderr)30 b Fi(is)g(un)m(bu\033ered.)227 3234 y(The)h
Fj(fork_pty_session)f Fi(pro)s(cedure)h(returns)g(four)f(v)-5
b(alues:)41 b(the)30 b(c)m(hild's)i(pro)s(cess)e(ob)5
b(ject,)31 b(t)m(w)m(o)227 3347 y(c)m(hannels)h(op)s(en)e(on)h(the)g
(con)m(trolling)h(pt)m(y)f(device,)g(and)f(the)h(name)g(of)f(the)h(c)m
(hild's)g(corresp)s(onding)227 3460 y(terminal)h(device.)0
3671 y Fj(val)47 b(open_pty)g(:)g(unit)g(->)f(Pervasives.in_channel)h
(*)g(string)227 3809 y Fi(This)31 b(pro)s(cedure)g(\034nds)g(a)f(free)g
(pt)m(y/tt)m(y)i(pair,)f(and)f(op)s(ens)g(the)h(pt)m(y)g(device)g(with)
f(read/write)i(access.)41 b(It)227 3922 y(returns)31
b(a)g(c)m(hannel)g(on)g(the)g(pt)m(y)-8 b(,)31 b(and)g(the)f(name)i(of)
d(the)i(corresp)s(onding)h(terminal)f(device.)227 4034
y(The)g(c)m(hannel)h(returned)g(is)e(an)g(input)h(c)m(hannel)h(\025)e
(Caml)i(do)s(esn't)e(allo)m(w)h(input/output)i(c)m(hannels.)227
4147 y(Ho)m(w)m(ev)m(er,)f(y)m(ou)f(can)g(easily)f(use)g
Fj(out_channel_of_dup_in)g Fg(pty_in_channel)g Fi(to)h(pro)s(duce)g(a)
227 4260 y(matc)m(hing)h(output)g(c)m(hannel.)42 b(Y)-8
b(ou)31 b(ma)m(y)g(wish)f(to)g(turn)h(o\033)f(I/O)h(bu\033ering)g(for)f
(this)g(output)i(c)m(hannel.)0 4472 y Fj(val)47 b(tty_name_of_pty_name)
f(:)h(string)g(->)g(string)0 4608 y(val)g(pty_name_of_tty_name)f(:)h
(string)g(->)g(string)227 4746 y Fi(These)31 b(t)m(w)m(o)h(pro)s
(cedures)f(map)g(b)s(et)m(w)m(een)h(corresp)s(onding)f(terminal)h(and)e
(pt)m(y)h(con)m(troller)i(names.)40 b(F)-8 b(or)227 4859
y(example,)368 4972 y Fj(tty_name_of_pty_name)47 b("/dev/ptyq3")469
b(=>)47 b("/dev/ttyq3")368 5085 y(pty_name_of_tty_name)g("/dev/ttyrc")
469 b(=>)47 b("/dev/ptyrc")1905 5589 y Fi(71)p eop
%%Page: 72 72
72 71 bop 227 91 a Fg(This)32 b(is)g(r)-5 b(ather)33
b(Berkeley-sp)-5 b(e)g(ci\034c.)45 b(SVR4)32 b(ptys)g(ar)-5
b(e)34 b(r)-5 b(ar)g(e)33 b(enough)h(that)e(I)g(\(Olin\))g(have)h(no)f
(r)-5 b(e)g(al)34 b(ide)-5 b(a)33 b(if)227 204 y(it)f(gener)-5
b(alises)34 b(acr)-5 b(oss)33 b(the)g(Unix)f(gap.)42
b(Exp)-5 b(erts)34 b(ar)-5 b(e)33 b(invite)-5 b(d)33
b(to)f(advise.)42 b(Users)33 b(fe)-5 b(el)33 b(fr)-5
b(e)g(e)34 b(to)e(not)g(worry)227 317 y(\025)h(the)f(pr)-5
b(e)g(dominanc)g(e)35 b(of)d(curr)-5 b(ent)34 b(p)-5
b(opular)33 b(Unix)f(systems)g(use)h(Berkeley)i(ptys.)0
518 y Fj(val)47 b(make_pty_generator)f(:)h(unit)g(->)g(unit)g(->)g
(string)227 653 y(make_pty_generator)g(\(\))30 b Fi(returns)h(a)f
(generator)i(of)e(candidate)i(pt)m(y)e(names.)41 b(Eac)m(h)32
b(time)f(the)227 766 y(returned)h(pro)s(cedure)f(is)f(called,)h(it)g
(pro)s(duces)g(a)f(new)h(candidate.)42 b(Soft)m(w)m(are)32
b(that)f(wishes)f(to)g(searc)m(h)227 879 y(through)i(the)e(set)h(of)f
(a)m(v)-5 b(ailable)31 b(pt)m(ys)g(can)f(use)h(a)f(pt)m(y)h(generator)g
(to)g(iterate)g(o)m(v)m(er)h(them.)41 b(After)227 992
y(pro)s(ducing)32 b(all)e(the)h(p)s(ossible)f(pt)m(ys,)g(a)h(generator)
h(raises)e Fj(Not_found)g Fi(ev)m(ery)g(time)h(it)g(is)e(called.)227
1105 y(Example:)368 1330 y Fj(let)47 b(pg)g(=)g(make_pty_generator)g
(\(\);)368 1443 y(pg)g(\(\);)1081 b(=>)46 b("/dev/ptyp0")368
1556 y(pg)h(\(\);)1081 b(=>)46 b("/dev/ptyp1")227 1669
y(...)368 1782 y(pg)h(\(\);)1081 b(=>)46 b("/dev/ptyqe")368
1895 y(pg)h(\(\);)1081 b(=>)46 b("/dev/ptyqf")368 2008
y(pg)h(\(\);)1081 b(=>)46 b(Not_found)368 2121 y(pg)h(\(\);)1081
b(=>)46 b(Not_found)227 2234 y(...)0 2831 y Fl(4)131
b(Net)l(w)l(orking)0 3058 y Fi(The)43 b(Caml)f(Shell)h(pro)m(vides)g(a)
f(BSD-st)m(yle)h(so)s(c)m(k)m(ets)f(in)m(terface.)77
b(There)43 b(is)f(not)g(an)h(o\036cial)g(standard)g(for)f(a)0
3170 y(net)m(w)m(ork)k(in)m(terface)g(for)f(Cash)g(to)g(adopt)g(\(this)
g(is)g(the)g(sub)5 b(ject)45 b(of)f(the)h(forthcoming)h(P)m(osix.8)g
(standard\).)0 3283 y(Ho)m(w)m(ev)m(er,)31 b(Berk)m(eley)d(so)s(c)m(k)m
(ets)h(are)f(a)g Fg(de)j(facto)e Fi(standard,)g(b)s(eing)g(found)g(on)f
(most)g(Unix)g(w)m(orkstations)i(and)e(PC)0 3396 y(op)s(erating)j
(systems.)141 3509 y(It)k(is)g(fairly)g(straigh)m(tforw)m(ard)j(to)d
(add)h(higher-lev)m(el)h(net)m(w)m(ork)g(proto)s(cols)f(suc)m(h)g(as)f
(sm)m(tp,)i(telnet,)g(or)f(h)m(ttp)0 3622 y(on)28 b(top)h(of)f(the)g
(the)h(basic)f(so)s(c)m(k)m(et-lev)m(el)i(supp)s(ort)e(Cash)h(pro)m
(vides.)40 b(F)-8 b(or)29 b(those)f(who)h(read)g(sc)m(heme,)h(the)e(Sc)
m(heme)0 3735 y(Underground)35 b(has)f(also)g(released)g(a)g(net)m(w)m
(ork)i(library)e(with)h(man)m(y)f(of)g(these)g(proto)s(cols)g(as)f(a)h
(companion)i(to)0 3848 y(the)31 b(curren)m(t)h(release)e(of)g(Scsh.)41
b(See)31 b(this)f(co)s(de)g(for)h(examples)f(sho)m(wing)i(the)e(use)h
(of)f(the)g(so)s(c)m(k)m(ets)h(in)m(terface.)0 4112 y
Ff(4.1)112 b(So)s(c)m(k)m(ets)0 4307 y Fi(A)35 b(so)s(c)m(k)m(et)g(is)g
(one)h(end)f(of)g(a)g(net)m(w)m(ork)i(connection.)57
b(Three)36 b(sp)s(eci\034c)f(prop)s(erties)h(of)e(so)s(c)m(k)m(ets)i
(are)f(sp)s(eci\034ed)h(at)0 4420 y(creation)c(time:)41
b(the)30 b(proto)s(col-family)-8 b(,)32 b(t)m(yp)s(e,)f(and)g(proto)s
(col.)0 4557 y Fj(type)94 b(socket_domain)47 b(=)f(Unix.socket_domain)h
(=)94 4669 y(|)g(PF_UNIX)94 4782 y(|)g(PF_INET)0 4919
y(type)94 b(protocol_family)46 b(=)h(socket_domain)227
5053 y Fi(The)31 b Fj(protocol_family)f Fi(sp)s(eci\034es)g(the)h
(proto)s(col)g(family)f(to)g(b)s(e)h(used)f(with)h(the)g(so)s(c)m(k)m
(et.)40 b(This)31 b(also)227 5166 y(determines)h(the)e(address)h
(family)f(of)g(so)s(c)m(k)m(et)h(addresses,)f(whic)m(h)i(are)f(describ)
s(ed)f(in)h(more)g(detail)g(b)s(elo)m(w.)227 5279 y(It)f(is)g(the)h
(same)f(t)m(yp)s(e)h(as)f Fj(Unix.socket_domain)p Fi(.)1905
5589 y(72)p eop
%%Page: 73 73
73 72 bop 0 91 a Fj(type)94 b(socket_type)47 b(=)g(Unix.socket_type)f
(=)94 204 y(|)h(SOCK_STREAM)94 317 y(|)g(SOCK_DGRAM)94
430 y(|)g(SOCK_RAW)94 543 y(|)g(SOCK_SEQPACKET)227 681
y Fi(The)31 b Fj(socket_type)f Fi(sp)s(eci\034es)g(the)h(st)m(yle)f(of)
g(comm)m(unication.)44 b(Examples)31 b(that)f(y)m(our)h(op)s(erating)
227 794 y(system)f(probably)h(pro)m(vides)g(are)g(stream)g(and)g
(datagram)g(so)s(c)m(k)m(ets.)41 b(Others)31 b(ma)m(yb)s(e)f(a)m(v)-5
b(ailable)227 907 y(dep)s(ending)32 b(on)e(y)m(our)h(system.)40
b(Cash)31 b(supp)s(orts)f(the)g(same)h(v)-5 b(alues)30
b(as)g Fj(Unix.socket_type)p Fi(.)0 1118 y Fj(type)94
b(protocol_level)47 b(=)f(Network_4.protocol_level)h(=)94
1231 y(|)g(SOL_SOCKET)227 1369 y Fi(The)31 b Fg(pr)-5
b(oto)g(c)g(ol)31 b Fi(sp)s(eci\034es)f(a)g(particular)h(proto)s(col)f
(to)g(use)g(within)h(a)e(proto)s(col)i(family)f(and)g(t)m(yp)s(e.)40
b(Usually)227 1481 y(only)31 b(one)f(c)m(hoice)i(exists,)e(but)h(it's)f
(probably)h(safest)f(to)g(set)g(this)h(explicitly)-8
b(.)41 b(See)31 b(the)f(proto)s(col)227 1594 y(database)h(routines)g
(for)g(information)g(on)g(lo)s(oking)f(up)h(proto)s(col)g(constan)m
(ts.)0 1806 y Fj(type)94 b(socket)47 b(=)g({)94 1919
y(family)g(:)g(protocol_family)f(;)94 2031 y(sock_in)h(:)g
(Pervasives.in_channel)f(;)94 2144 y(sock_out)h(:)g
(Pervasives.out_channel)f(;)0 2257 y(})227 2395 y Fi(T)m(yp)s(e)31
b(of)f(the)g(so)s(c)m(k)m(ets.)227 2508 y(The)h Fj(family)e
Fi(sp)s(eci\034es)h(the)g(proto)s(col)h(family)f(of)f(the)i(so)s(c)m(k)
m(et.)40 b(The)31 b Fj(sock_in)e Fi(and)i Fj(sock_out)e
Fi(\034elds)h(are)227 2621 y(c)m(hannels)i(that)f(can)f(b)s(e)h(used)f
(for)g(input)h(and)g(output,)g(resp)s(ectiv)m(ely)-8
b(.)42 b(F)-8 b(or)31 b(a)f(stream)h(so)s(c)m(k)m(et,)g(they)f(are)227
2734 y(only)h(usable)f(after)h(a)f(connection)i(has)e(b)s(een)h
(established)g(via)f Fj(connect_socket)p Fi([4.4])h(or)227
2847 y Fj(accept_connection)p Fi([4.4].)41 b(F)-8 b(or)31
b(a)f(datagram)i(so)s(c)m(k)m(et,)f(a)f(so)s(c)m(k)m(et)h(can)g(b)s(e)f
(immediately)h(used)g(b)m(y)227 2960 y Fj(send_message)p
Fi([4.5],)g(and)g Fg(so)-5 b(ck_in)31 b Fi(can)g(b)s(e)f(used)g(after)g
Fj(bind_socket)p Fi([4.4])h(has)f(created)i(a)e(lo)s(cal)227
3073 y(address.)0 3284 y Fj(val)47 b(create_socket)g(:)94
3397 y(?protocol:int)g(->)g(protocol_family)f(->)h(socket_type)g(->)g
(socket)0 3533 y(val)g(create_socket_pair)f(:)h(socket_type)g(->)g
(socket)g(*)g(socket)227 3671 y Fi(New)31 b(so)s(c)m(k)m(ets)f(are)h(t)
m(ypically)g(created)g(with)g Fj(create_socket)p Fi(.)40
b(Ho)m(w)m(ev)m(er,)32 b Fj(create_socket_pair)e Fi(can)227
3784 y(also)h(b)s(e)f(used)g(to)h(create)g(a)f(pair)h(of)f(connected)i
(so)s(c)m(k)m(ets)e(in)h(the)f Fj(PF_UNIX)g Fi(proto)s(col-family)-8
b(.)0 3995 y Fj(val)47 b(close_socket)g(:)g(socket)f(->)h(unit)227
4133 y(close_socket)30 b Fi(pro)m(vides)h(a)g(con)m(v)m(enien)m(t)i(w)m
(a)m(y)e(to)f(close)h(a)f(so)s(c)m(k)m(et's)h(c)m(hannel.)42
b(It)30 b(is)g(preferred)h(to)227 4246 y(explicitly)g(closing)g(the)g
(so)s(c)m(k_in)f(and)h(so)s(c)m(k_out)g(b)s(ecause)f(using)h
Fj(close_in)f Fi(or)g Fj(close_out)g Fi(on)227 4359 y(so)s(c)m(k)m(ets)
h(is)f(not)g(curren)m(tly)i(p)s(ortable)f(across)f(op)s(erating)i
(systems.)0 4814 y Ff(4.2)112 b(So)s(c)m(k)m(et)37 b(addresses)0
5009 y Fj(type)94 b(inet_addr)47 b(=)g(Unix.inet_addr)227
5147 y Fi(The)30 b(t)m(yp)s(e)g(of)f(In)m(ternet)h(hosts)f(addresses.)
40 b(Besides)29 b(b)s(eing)h(an)g(opaque)f(host)h(address,)g(an)f(In)m
(ternet)i(host)227 5260 y(address)g(can)f(also)h(b)s(e)f(one)h(of)f
(the)g(follo)m(wing)i(constan)m(ts:)1905 5589 y(73)p
eop
%%Page: 74 74
74 73 bop 0 91 a Fj(val)47 b(inet_addr_any)g(:)g(inet_addr)0
228 y(val)g(inet_addr_loopback)f(:)h(inet_addr)0 364
y(val)g(inet_addr_broadcast)f(:)h(inet_addr)227 502 y
Fi(The)31 b(use)f(of)g Fj(inet_addr_any)g Fi(is)g(describ)s(ed)h(b)s
(elo)m(w)g(in)f Fj(bind_socket)p Fi([4.4].)41 b Fj(inet_addr_loopback)
30 b Fi(is)227 615 y(an)h(address)f(that)h(alw)m(a)m(ys)g(sp)s
(eci\034es)f(the)h(lo)s(cal)g(mac)m(hine.)42 b Fj(inet_addr_broadcast)
30 b Fi(is)f(used)i(for)227 728 y(net)m(w)m(ork)h(broadcast)g(comm)m
(unications.)227 841 y(F)-8 b(or)31 b(information)h(on)e(obtaining)i(a)
f(host's)f(address,)g(see)g(the)h Fj(host_info_name)p
Fi([4.7])g(and)227 954 y Fj(host_info_addr)p Fi([4.7])g(functions)g(b)s
(elo)m(w.)0 1165 y Fj(type)94 b(sockaddr)47 b(=)g(Unix.sockaddr)f(=)94
1278 y(|)h(ADDR_UNIX)g(of)g(string)94 1391 y(|)g(ADDR_INET)g(of)g
(inet_addr)f(*)h(int)227 1529 y Fi(The)31 b(format)g(of)f(a)g(so)s(c)m
(k)m(et-address)h(dep)s(ends)g(on)f(the)h(address)g(family)f(of)g(the)g
(so)s(c)m(k)m(et.)227 1642 y(A)m(ddress-family-sp)s(eci\034c)h
(routines)g(are)g(pro)m(vided)h(to)e(con)m(v)m(ert)i(proto)s(col-sp)s
(eci\034c)g(addresses)e(to)g(so)s(c)m(k)m(et)227 1755
y(addresses.)41 b(The)31 b(v)-5 b(alue)30 b(returned)i(b)m(y)e(these)h
(routines)g(has)f(t)m(yp)s(e)g(so)s(c)m(k)-5 b(addr)31
b(\(an)g(alias)f(of)227 1867 y Fj(Unix.sockaddr)p Fi(\).)0
2079 y Fj(val)47 b(socket_address_of_unix_address)f(:)h(string)g(->)g
(sockaddr)227 2217 y(socket_address_of_unix_address)30
b Fg(p)-5 b(athname)31 b Fi(returns)f(a)h Fg(so)-5 b(cket-addr)g(ess)33
b Fi(based)e(on)f(the)h(string)227 2329 y Fg(p)-5 b(athname)p
Fi(.)41 b(There)31 b(is)f(a)h(system)e(dep)s(enden)m(t)j(limit)f(on)g
(the)g(length)g(of)f Fg(p)-5 b(athname)p Fi(.)0 2654
y Fj(val)47 b(socket_address_of_internet_address)f(:)94
2767 y(inet_addr)h(->)g(int)g(->)f(sockaddr)227 2904
y(socket_address_of_internet_address)30 b Fg(host_addr)-5
b(ess)33 b(servic)-5 b(e_p)g(ort)33 b Fi(returns)e(a)f
Fg(so)-5 b(cket_addr)g(ess)227 3017 y Fi(based)31 b(on)f(an)h
Fg(host_addr)-5 b(ess)31 b Fi(and)g(an)g(in)m(teger)g
Fg(servic)-5 b(e_p)g(ort)p Fi(.)0 3341 y Fj(val)47 b
(sockaddr_of_host_and_port)f(:)h(string)g(->)g(int)g(->)g(sockaddr)0
3478 y(val)g(sockaddr_of_host_and_service)f(:)h(string)g(->)g(string)g
(->)g(sockaddr)227 3616 y Fi(A)m(t)31 b(a)f(sligh)m(tly)h(higher)g(lev)
m(el)g(of)f(in)m(terface,)i(y)m(ou)f(can)f(also)h(giv)m(e)g(an)f(host)h
(name)g(and)f(a)h(p)s(ort)f(n)m(um)m(b)s(er)i(\(or)227
3729 y(service)f(name\))g(to)f(one)h(of)f(these)h(t)m(w)m(o)g(pro)s
(cedures,)g(whic)m(h)h(resolv)m(e)f(the)g(giv)m(en)g(name\(s\))g(to)f
(mak)m(e)h(an)227 3842 y(In)m(ternet)h(so)s(c)m(k)m(et)f(address.)0
4053 y Fj(val)47 b(unix_address_of_socket_address)f(:)h(sockaddr)g(->)g
(string)0 4189 y(val)g(internet_address_of_socket_address)f(:)94
4302 y(sockaddr)h(->)g(inet_addr)f(*)h(int)227 4440 y
Fi(These)31 b(routines)g(return)g(the)g(address-family-sp)s(eci\034c)g
(addresses.)40 b(Be)31 b(a)m(w)m(are)h(that)f(most)227
4553 y(implemen)m(tations)i(don't)e(correctly)g(return)h(an)m(ything)f
(more)g(than)g(an)g(empt)m(y)g(string)g(for)f(addresses)g(in)227
4666 y(the)h Fj(ADDR_UNIX)f Fi(address-family)-8 b(.)0
5008 y Ff(4.3)112 b(High-lev)m(el)35 b(in)m(terface)0
5203 y Fi(F)-8 b(or)21 b(con)m(v)m(enience,)k(and)c(to)g(a)m(v)m(oid)h
(some)e(of)h(the)g(messy)e(details)i(of)g(the)g(so)s(c)m(k)m(et)g(in)m
(terface,)j(w)m(e)d(pro)m(vide)h(a)e(high)h(lev)m(el)0
5316 y(so)s(c)m(k)m(et)27 b(in)m(terface.)41 b(These)28
b(routines)f(attempt)i(to)e(mak)m(e)h(it)f(easy)f(to)i(write)g(simple)f
(clien)m(ts)h(and)g(serv)m(ers)f(without)1905 5589 y(74)p
eop
%%Page: 75 75
75 74 bop 0 91 a Fi(ha)m(ving)43 b(to)f(think)g(of)f(man)m(y)i(of)e
(the)h(details)h(of)e(initiating)i(so)s(c)m(k)m(et)f(connections.)77
b(W)-8 b(e)42 b(w)m(elcome)h(suggested)0 204 y(impro)m(v)m(emen)m(ts)36
b(to)e(this)g(in)m(terface,)i(including)f(b)s(etter)f(names,)h(whic)m
(h)g(righ)m(t)g(no)m(w)f(are)g(solely)g(descriptions)g(of)0
317 y(the)28 b(pro)s(cedure's)g(action.)41 b(This)28
b(migh)m(t)h(b)s(e)e(\034ne)h(for)f(p)s(eople)i(who)f(already)g
(understand)h(so)s(c)m(k)m(ets,)f(but)g(do)s(es)f(not)0
430 y(help)k(the)g(new)f(net)m(w)m(orking)j(programmer.)0
567 y Fj(val)47 b(socket_connect)g(:)g(sockaddr)f(->)h(socket_type)g
(->)g(unit)227 704 y(socket_connect)30 b Fg(so)-5 b(cket_addr)g(ess)35
b(so)-5 b(cket_typ)g(e)33 b Fi(is)d(in)m(tended)i(for)e(creating)i
(clien)m(t)f(applications.)227 817 y Fj(socket_connect)f
Fi(returns)h(a)f Fj(socket)g Fi(whic)m(h)i(can)f(b)s(e)f(used)g(for)g
(input)h(and)g(output)g(from)g(a)f(remote)227 930 y(serv)m(er.)0
1254 y Fj(val)47 b(bind_listen_accept_loop_unix)f(:)94
1367 y(string)h(->)g(\(socket)g(->)f(sockaddr)h(->)g(unit\))g(->)g
(unit)0 1504 y(val)g(bind_listen_accept_loop_port)f(:)94
1617 y(int)h(->)g(\(socket)g(->)g(sockaddr)f(->)h(unit\))g(->)g(unit)0
1753 y(val)g(bind_listen_accept_loop_service)f(:)94 1866
y(string)h(->)g(\(socket)g(->)f(sockaddr)h(->)g(unit\))g(->)g(unit)141
2003 y(bind_listen_accept_loop_...)67 b Fg(what)41 b(pr)-5
b(o)g(c)40 b Fi(is)f(in)m(tended)i(for)f(creating)g(serv)m(er)g
(applications.)69 b Fg(what)0 2116 y Fi(tells)27 b(what)g(to)g(connect)
h(to.)39 b Fg(pr)-5 b(o)g(c)29 b Fi(is)d(a)h(pro)s(cedure)g(whose)g
(argumen)m(ts:)41 b(a)26 b Fj(socket)h Fi(and)g(a)g Fj(sockaddr)p
Fi(,)g(are)g(made)0 2229 y(from)j Fg(what)p Fi(.)141
2341 y Fj(bind_listen_accept_loop_unix)c Fg(p)-5 b(ath)27
b Fi(uses)f(a)g(path)h(to)g(mak)m(e)g(the)f Fj(socket)h
Fi(in)f(the)h Fj(PF_UNIX)f Fi(proto)s(col-)0 2454 y(family)-8
b(.)141 2567 y Fj(bind_listen_accept_loop_port)35 b Fg(p)-5
b(ort)35 b Fi(mak)m(es)h(the)g Fj(socket)f Fi(in)g(the)h
Fj(PF_INET)f Fi(proto)s(col-family)-8 b(.)56 b(Y)-8 b(ou)0
2680 y(ma)m(y)31 b(use)f(a)g(service)h(name)g(instead)g(with)g
Fj(bind_listen_accept_loop_service)e Fg(servic)-5 b(e)p
Fi(.)141 2793 y Fg(pr)g(o)g(c)35 b Fi(is)e(called)i(with)f(a)g(so)s(c)m
(k)m(et)g(and)g(a)g(so)s(c)m(k)m(et)g(address)f(eac)m(h)i(time)f(there)
h(is)e(a)h(connection)h(from)f(a)g(clien)m(t)0 2906 y(application.)63
b(The)37 b(so)s(c)m(k)m(et)h(allo)m(ws)g(comm)m(unications)i(with)d
(the)h(clien)m(t.)62 b(The)38 b(so)s(c)m(k)m(et)f(address)h(sp)s
(eci\034es)e(the)0 3019 y(address)30 b(of)g(the)h(remote)g(clien)m(t.)
141 3132 y(This)38 b(pro)s(cedure)h(do)s(es)e(not)h(return,)j(but)d(lo)
s(ops)f(inde\034nitely)i(accepting)g(connections)g(from)f(clien)m(t)h
(pro-)0 3245 y(grams.)0 3512 y Ff(4.4)112 b(So)s(c)m(k)m(et)37
b(primitiv)m(es)0 3707 y Fi(The)45 b(pro)s(cedures)g(in)g(this)g
(section)g(are)g(presen)m(ted)h(in)f(the)g(order)g(in)g(whic)m(h)h(a)e
(t)m(ypical)i(program)g(will)f(use)0 3820 y(them.)66
b(Consult)39 b(a)f(text)h(on)f(net)m(w)m(ork)i(systems)e(programming)i
(for)f(more)g(information)h(on)e(so)s(c)m(k)m(ets.)65
b(Some)0 3933 y(recommended)32 b(ones)f(are:)136 4120
y Fe(\017)46 b Fi(\020Unix)30 b(Net)m(w)m(ork)i(Programming\021)40
b(b)m(y)31 b(W.)f(Ric)m(hard)h(Stev)m(ens)136 4308 y
Fe(\017)46 b Fi(\020An)38 b(In)m(tro)s(ductory)h(4.3BSD)f(In)m(terpro)s
(cess)g(Comm)m(unication)j(T)-8 b(utorial.\021)73 b(\(reprin)m(ted)40
b(in)d(UNIX)g(Pro-)227 4421 y(grammer's)32 b(Supplemen)m(tary)g(Do)s
(cumen)m(ts)g(V)-8 b(olume)31 b(1,)g(PS1:7\))136 4609
y Fe(\017)46 b Fi(\020An)30 b(A)m(dv)-5 b(anced)32 b(4.3BSD)f(In)m
(terpro)s(cess)f(Comm)m(unication)k(T)-8 b(utorial.\021)49
b(\(reprin)m(ted)33 b(in)d(UNIX)f(Program-)227 4722 y(mer's)i
(Supplemen)m(tary)i(Do)s(cumen)m(ts)e(V)-8 b(olume)31
b(1,)g(PS1:8\))141 4909 y(The)36 b(last)g(t)m(w)m(o)i(tutorials)e(are)g
(freely)g(a)m(v)-5 b(ailable)37 b(as)f(part)g(of)g(BSD.)g(In)f(the)h
(absence)h(of)e(these,)j(y)m(our)e(Unix)0 5022 y(man)m(ual)c(pages)e
(for)h(so)s(c)m(k)m(et)f(migh)m(t)i(b)s(e)e(a)g(go)s(o)s(d)g(starting)h
(p)s(oin)m(t)g(for)f(information.)0 5159 y Fj(val)47
b(connect_socket)g(:)g(socket)f(->)h(sockaddr)g(->)g(unit)1905
5589 y Fi(75)p eop
%%Page: 76 76
76 75 bop 227 91 a Fj(connect_socket)30 b Fg(so)-5 b(cket)34
b(so)-5 b(cket-addr)g(ess)33 b Fi(sets)d(up)h(a)f(connection)i(from)f
(a)f Fg(so)-5 b(cket)32 b Fi(to)e(a)h(remote)227 204
y Fg(so)-5 b(cket-addr)g(ess)p Fi(.)44 b(A)30 b(connection)i(has)e
(di\033eren)m(t)h(meanings)h(dep)s(ending)f(on)g(the)f(so)s(c)m(k)m(et)
h(t)m(yp)s(e.)40 b(A)30 b(stream)227 317 y(so)s(c)m(k)m(et)h(m)m(ust)g
(b)s(e)f(connected)i(b)s(efore)e(use.)40 b(A)30 b(datagram)i(so)s(c)m
(k)m(et)f(can)g(b)s(e)f(connected)h(m)m(ultiple)i(times,)227
430 y(but)e(need)g(not)g(b)s(e)f(connected)i(at)e(all)h(if)f(the)g
(remote)i(address)e(is)g(sp)s(eci\034ed)h(with)f(eac)m(h)i
Fj(send_message)p Fi(,)227 543 y(describ)s(ed)f(b)s(elo)m(w.)41
b(Also,)30 b(datagram)i(so)s(c)m(k)m(ets)e(ma)m(y)h(b)s(e)f(disasso)s
(ciated)h(from)f(a)h(remote)g(address)f(b)m(y)227 656
y(connecting)i(to)f(a)f(n)m(ull)h(remote)h(address.)0
980 y Fj(val)47 b(bind_socket)g(:)g(socket)f(->)h(sockaddr)g(->)g(unit)
227 1118 y(bind_socket)30 b Fg(so)-5 b(cket)34 b(so)-5
b(cket-addr)g(ess)33 b Fi(assigns)d(a)h(certain)g(lo)s(cal)f
Fg(so)-5 b(cket-addr)g(ess)34 b Fi(to)c(a)h Fg(so)-5
b(cket)p Fi(.)42 b(Binding)227 1231 y(a)31 b(so)s(c)m(k)m(et)f(reserv)m
(es)h(the)g(lo)s(cal)f(address.)41 b(T)-8 b(o)31 b(receiv)m(e)g
(connections)h(after)e(binding)i(the)e(so)s(c)m(k)m(et,)h(use)227
1344 y Fj(listen_socket)f Fi(for)g(stream)h(so)s(c)m(k)m(ets)f(and)h
Fj(receive_message)f Fi(for)g(datagram)i(so)s(c)m(k)m(ets.)227
1457 y(Binding)g(an)e(In)m(ternet)i(so)s(c)m(k)m(et)e(with)h(a)g(host)f
(address)g(of)g Fj(inet_addr_any)g Fi(indicates)h(that)g(the)g(caller)
227 1569 y(do)s(es)e(not)g(care)g(to)g(sp)s(ecify)f(from)h(whic)m(h)h
(lo)s(cal)f(net)m(w)m(ork)h(in)m(terface)g(connections)h(are)e(receiv)m
(ed.)41 b(Binding)227 1682 y(an)31 b(In)m(ternet)g(so)s(c)m(k)m(et)g
(with)g(a)f(service)h(p)s(ort)f(n)m(um)m(b)s(er)i(of)e(zero)h
(indicates)g(that)g(the)g(caller)g(has)f(no)227 1795
y(preference)i(as)e(to)g(the)h(p)s(ort)f(n)m(um)m(b)s(er)i(assigned.)
227 1908 y(Binding)g(a)e(so)s(c)m(k)m(et)h(in)f(the)h(Unix)f(address)g
(family)g(creates)h(a)g(so)s(c)m(k)m(et)f(sp)s(ecial)h(\034le)f(in)h
(the)f(\034le)h(system)227 2021 y(that)g(m)m(ust)g(b)s(e)f(deleted)i(b)
s(efore)e(the)g(address)h(can)g(b)s(e)f(reused.)41 b(See)30
b Fj(delete_file)p Fi(.)0 2232 y Fj(val)47 b(listen_socket)g(:)g
(socket)f(->)h(int)g(->)g(unit)227 2370 y(listen_socket)30
b Fg(so)-5 b(cket)34 b(b)-5 b(acklo)g(g)33 b Fi(allo)m(ws)f(a)e(stream)
h Fg(so)-5 b(cket)32 b Fi(to)e(start)h(receiving)g(connections,)h(allo)
m(wing)227 2483 y(a)f(queue)f(of)g(up)h(to)f Fg(b)-5
b(acklo)g(g)33 b Fi(connection)f(requests.)41 b(Queued)31
b(connections)h(ma)m(y)f(b)s(e)f(accepted)h(b)m(y)227
2596 y Fj(accept_connection)p Fi(.)0 2920 y Fj(val)47
b(accept_connection)f(:)h(socket)g(->)g(socket)g(*)g(sockaddr)227
3058 y(accept_connection)30 b Fi(receiv)m(es)h(a)f(connection)i(on)f(a)
f Fg(so)-5 b(cket)p Fi(,)32 b(returning)g(a)e(new)h(so)s(c)m(k)m(et)g
(that)g(can)g(b)s(e)227 3171 y(used)g(for)f(this)g(connection)i(and)f
(the)g(remote)g(so)s(c)m(k)m(et)g(address)f(asso)s(ciated)g(with)h(the)
g(connection.)0 3495 y Fj(val)47 b(socket_local_address)f(:)h(socket)g
(->)g(sockaddr)0 3632 y(val)g(socket_remote_address)f(:)h(socket)g(->)g
(sockaddr)227 3769 y Fi(So)s(c)m(k)m(ets)31 b(can)g(b)s(e)f(asso)s
(ciated)g(with)h(a)g(lo)s(cal)f(address)h(or)f(a)g(remote)i(address)e
(or)h(b)s(oth.)227 3882 y Fj(socket_local_address)f Fi(returns)h(the)g
(lo)s(cal)f Fg(so)-5 b(ckaddr)32 b Fi(record)f(asso)s(ciated)f(with)h
Fg(so)-5 b(cket)p Fi(.)227 3995 y Fj(socket_remote_address)30
b Fi(returns)h(the)g(remote)g Fg(so)-5 b(ckaddr)32 b
Fi(record)f(asso)s(ciated)f(with)h Fg(so)-5 b(cket)p
Fi(.)0 4206 y Fj(type)94 b(shutdown_command)46 b(=)h
(Unix.shutdown_command)g(=)94 4319 y(|)g(SHUTDOWN_RECEIVE)94
4432 y(|)g(SHUTDOWN_SEND)94 4545 y(|)g(SHUTDOWN_ALL)0
4682 y(val)g(shutdown_socket)g(:)f(socket)h(->)g(shutdown_command)g(->)
g(unit)227 4820 y(shutdown_socket)30 b Fg(how_to)h Fi(sh)m(uts)f(do)m
(wn)i(part)e(of)g(a)h(full-duplex)g(so)s(c)m(k)m(et.)41
b(The)30 b(part)h(to)g(sh)m(ut)g(do)m(wn)g(is)227 4932
y(sp)s(eci\034ed)g(b)m(y)f(the)h Fg(how_to)g Fi(argumen)m(t.)1905
5589 y(76)p eop
%%Page: 77 77
77 76 bop 0 91 a Ff(4.5)112 b(P)m(erforming)36 b(input)h(and)h(output)f
(on)h(so)s(c)m(k)m(ets)0 287 y Fj(type)94 b(msg_flag)47
b(=)g(Unix.msg_flag)f(=)94 399 y(|)h(MSG_OOB)94 512 y(|)g
(MSG_DONTROUTE)94 625 y(|)g(MSG_PEEK)0 762 y(val)g(receive_message)g(:)
94 875 y(?flags:msg_flag)g(list)f(->)h(socket)g(->)g(int)g(->)g(string)
g(*)g(sockaddr)0 1011 y(val)g(receive_message_bang)f(:)94
1124 y(?start:int)h(->)94 1237 y(?end_:int)g(->)94 1350
y(?flags:msg_flag)g(list)f(->)h(socket)g(->)g(string)g(->)g(int)g(*)g
(sockaddr)0 1487 y(val)g(receive_message_partial)f(:)94
1599 y(?flags:msg_flag)h(list)f(->)h(socket)g(->)g(int)g(->)g(string)g
(*)g(sockaddr)0 1736 y(val)g(receive_message_bang_partial)f(:)94
1849 y(?start:int)h(->)94 1962 y(?end_:int)g(->)94 2075
y(?flags:msg_flag)g(list)f(->)h(socket)g(->)g(string)g(->)g(int)g(*)g
(sockaddr)0 2211 y(val)g(send_message)g(:)94 2324 y(?start:int)g(->)94
2437 y(?end_:int)g(->)94 2550 y(?flags:msg_flag)g(list)f(->)94
2663 y(?sockaddr:sockaddr)h(->)f(socket)h(->)g(string)g(->)g(unit)0
2799 y(val)g(send_message_partial)f(:)94 2912 y(?start:int)h(->)94
3025 y(?end_:int)g(->)94 3138 y(?flags:msg_flag)g(list)f(->)94
3251 y(?sockaddr:sockaddr)h(->)f(socket)h(->)g(string)g(->)g(int)141
3388 y Fi(F)-8 b(or)41 b(most)f(uses,)i(standard)f(input)g(and)g
(output)g(routines)g(suc)m(h)f(as)g Fj(read_string)g
Fi(and)g Fj(write_string)0 3500 y Fi(should)e(su\036ce.)61
b(Ho)m(w)m(ev)m(er,)41 b(in)c(some)g(cases)g(an)h(extended)g(in)m
(terface)g(is)f(required.)62 b(The)37 b Fj(receive_message)0
3613 y Fi(and)f Fj(send_message)f Fi(calls)h(parallel)h(the)f
Fj(read_string)f Fi(and)h Fj(write_string)g Fi(calls)g(with)g(a)g
(similar)g(naming)0 3726 y(sc)m(heme.)141 3839 y(One)j(additional)i
(feature)e(of)f(these)h(routines)g(is)g(that)g Fj(receive_message)f
Fi(returns)h(the)g(remote)h Fg(so)-5 b(cket-)0 3952 y(addr)g(ess)40
b Fi(and)g Fg(send-message)g Fi(tak)m(es)g(an)g(optional)g(remote)g
Fj(socket_address)p Fi(.)67 b(This)40 b(allo)m(ws)g(a)f(program)i(to)0
4065 y(kno)m(w)30 b(the)g(source)f(of)g(input)i(from)e(a)g(datagram)i
(so)s(c)m(k)m(et)f(and)g(to)f(use)g(a)h(datagram)g(so)s(c)m(k)m(et)g
(for)f(output)i(without)0 4178 y(\034rst)f(connecting)i(it.)141
4291 y(All)e(of)g(these)h(pro)s(cedures)g(tak)m(e)g(an)f(optional)i
Fg(\003\035ags)f Fi(\034eld.)41 b(This)30 b(argumen)m(t)i(is)e(a)h
(list)f(of)g Fj(msg_flag)p Fi('s.)141 4404 y(See)35 b
Fj(read_string_in)f Fi(and)i Fj(write_string)e Fi(for)g(a)h(more)h
(detailed)g(description)g(of)e(the)h(argumen)m(ts)h(and)0
4517 y(return)31 b(v)-5 b(alues.)0 4784 y Ff(4.6)112
b(So)s(c)m(k)m(et)37 b(options)0 4979 y Fj(socket_option_...)51
b Fi(and)34 b Fj(set_socket_option_...)51 b Fi(allo)m(w)35
b(the)f(insp)s(ection)h(and)f(mo)s(di\034cation,)j(resp)s(ec-)0
5092 y(tiv)m(ely)-8 b(,)32 b(of)f(sev)m(eral)h(options)g(a)m(v)-5
b(ailable)33 b(on)e(so)s(c)m(k)m(ets.)44 b(The)32 b Fg(pr)-5
b(oto)g(c)g(ol_level)35 b Fi(argumen)m(t)e(sp)s(eci\034es)e(what)h
(proto)s(col)0 5205 y(lev)m(el)45 b(is)g(to)g(b)s(e)f(examined)i(or)f
(a\033ected.)84 b(A)45 b(lev)m(el)g(of)f Fj(SOL_SOCKET)h
Fi(sp)s(eci\034es)f(the)h(highest)h(p)s(ossible)e(lev)m(el)0
5318 y(that)36 b(is)f(a)m(v)-5 b(ailable)36 b(on)g(all)f(so)s(c)m(k)m
(et)h(t)m(yp)s(es.)55 b(A)35 b(sp)s(eci\034c)h(proto)s(col)g(n)m(um)m
(b)s(er)h(can)e(also)h(b)s(e)f(used)g(as)g(pro)m(vided)i(b)m(y)1905
5589 y(77)p eop
%%Page: 78 78
78 77 bop 0 91 a Fj(protocol_info)p Fi(,)30 b(describ)s(ed)h(b)s(elo)m
(w.)141 204 y(There)g(are)g(sev)m(eral)g(di\033eren)m(t)g(classes)f(of)
g(so)s(c)m(k)m(et)h(options:)0 341 y Fj(type)94 b(socket_bool_option)46
b(=)h(Unix.socket_bool_option)g(=)94 454 y(|)g(SO_DEBUG)94
567 y(|)g(SO_BROADCAST)94 679 y(|)g(SO_REUSEADDR)94 792
y(|)g(SO_KEEPALIVE)94 905 y(|)g(SO_DONTROUTE)94 1018
y(|)g(SO_OOBINLINE)94 1131 y(|)g(SO_ACCEPTCONN)227 1269
y Fi(The)31 b(\034rst)f(class)g(consists)g(of)g(b)s(o)s(olean)h
(options)g(whic)m(h)g(can)g(b)s(e)f(either)h(true)g(or)g(false.)0
1480 y Fj(type)94 b(socket_int_option)46 b(=)h(Unix.socket_int_option)g
(=)94 1593 y(|)g(SO_SNDBUF)94 1706 y(|)g(SO_RCVBUF)94
1819 y(|)g(SO_ERROR)94 1932 y(|)g(SO_TYPE)94 2045 y(|)g(SO_RCVLOWAT)94
2158 y(|)g(SO_SNDLOWAT)227 2295 y Fi(V)-8 b(alue)31 b(options)g(are)g
(another)g(category)h(of)d(so)s(c)m(k)m(et)i(options.)41
b(Options)31 b(of)f(this)h(kind)f(are)h(an)f(in)m(teger)227
2408 y(v)-5 b(alue.)0 2620 y Fj(type)94 b(socket_optint_option)46
b(=)h(Unix.socket_optint_option)g(=)94 2733 y(|)g(SO_LINGER)227
2870 y Fi(A)30 b(third)h(option)g(kind)g(sp)s(eci\034es)f(ho)m(w)h
(long)g(for)f(data)h(to)g(linger)g(after)f(a)h(so)s(c)m(k)m(et)f(has)h
(b)s(een)f(closed.)227 2983 y(There)g(is)f(only)g(one)g(option)h(of)f
(this)g(kind.)40 b(It)29 b(is)g(set)g(with)g(either)h
Fj(None)f Fi(to)g(disable)h(it)f(or)g(\()p Fj(Some)g
Fi(in)m(teger\))227 3096 y(n)m(um)m(b)s(er)j(of)e(seconds)h(to)f
(linger)h(and)g(return)g(a)g(v)-5 b(alue)30 b(of)g(the)h(same)f(t)m(yp)
s(e)h(up)s(on)f(insp)s(ection.)0 3307 y Fj(type)94 b
(socket_float_option)46 b(=)h(Unix.socket_float_option)g(=)94
3420 y(|)g(SO_RCVTIMEO)94 3533 y(|)g(SO_SNDTIMEO)227
3671 y Fi(The)31 b(fourth)g(and)g(\034nal)f(option)i(kind)e(of)g(this)g
(time)h(is)f(a)h(timeout)g(option.)41 b(There)32 b(are)e(t)m(w)m(o)i(v)
-5 b(alues)30 b(of)227 3784 y(this)h(option,)g(for)f(sending)h(or)g
(receiving.)41 b(These)31 b(are)f(set)g(with)h(a)g(real)f(n)m(um)m(b)s
(er)i(of)e(microseconds)227 3897 y(resolution)i(and)e(return)i(a)e
(real)h(v)-5 b(alue)30 b(up)s(on)h(insp)s(ection.)0 4108
y Fj(val)47 b(socket_option_bool)f(:)94 4221 y(socket)h(->)g
(protocol_level)f(->)h(socket_bool_option)g(->)g(bool)0
4358 y(val)g(set_socket_option_bool)f(:)94 4471 y(socket)h(->)94
4583 y(protocol_level)g(->)g(socket_bool_option)f(->)h(bool)g(->)g
(unit)0 4720 y(val)g(socket_option_int)f(:)94 4833 y(socket)h(->)g
(protocol_level)f(->)h(socket_int_option)g(->)g(int)0
4969 y(val)g(set_socket_option_int)f(:)94 5082 y(socket)h(->)g
(protocol_level)f(->)h(socket_int_option)g(->)g(int)g(->)g(unit)0
5219 y(val)g(socket_option_optint)f(:)94 5332 y(socket)h(->)1905
5589 y Fi(78)p eop
%%Page: 79 79
79 78 bop 94 91 a Fj(protocol_level)47 b(->)g(socket_optint_option)f
(->)h(int)g(option)0 228 y(val)g(set_socket_option_optint)f(:)94
341 y(socket)h(->)94 454 y(protocol_level)g(->)g(socket_optint_option)f
(->)h(int)g(option)g(->)g(unit)0 590 y(val)g(socket_option_float)f(:)94
703 y(socket)h(->)g(protocol_level)f(->)h(socket_float_option)g(->)g
(float)0 840 y(val)g(set_socket_option_float)f(:)94 953
y(socket)h(->)94 1065 y(protocol_level)g(->)g(socket_float_option)f(->)
h(float)g(->)g(unit)0 1332 y Ff(4.7)112 b(Database-information)38
b(en)m(tries)0 1527 y Fj(type)94 b(herror)47 b(=)94 1640
y(|)g(HOST_NOT_FOUND)94 1753 y(|)g(TRY_AGAIN)94 1866
y(|)g(NO_RECOVERY)94 1978 y(|)g(NO_DATA)94 2091 y(|)g(NO_ADDRESS)227
2228 y(host_info_...)40 b Fi(could)31 b(fail)f(and)h(raise)g(the)f
(follo)m(wing)i(error)f(for)f(one)h(of)f(these)g(reasons.)0
2550 y Fj(exception)47 b(Netdb_error)f(of)h(herror)0
2686 y(type)94 b(host_info)47 b(=)g(Unix.host_entry)f(=)h({)94
2799 y(h_name)g(:)g(string)g(;)227 2936 y Fi(Host)30
b(name.)94 3121 y Fj(h_aliases)47 b(:)g(string)g(array)f(;)227
3257 y Fi(Alternativ)m(e)32 b(names.)94 3442 y Fj(h_addrtype)47
b(:)g(protocol_family)f(;)94 3555 y(h_addr_list)h(:)g(inet_addr)f
(array)h(;)227 3692 y Fi(Host)30 b(addresses.)0 3877
y Fj(})227 4013 y(host_info_...)40 b Fi(return)31 b(a)g(v)-5
b(alue)30 b(of)g(this)h(t)m(yp)s(e.)0 4335 y Fj(val)47
b(host_info_name)g(:)g(string)f(->)h(host_info)0 4471
y(val)g(host_info_addr)g(:)g(sockaddr)f(->)h(host_info)227
4608 y(host_info_...)40 b Fi(allo)m(w)32 b(a)e(program)i(to)e(lo)s(ok)g
(up)h(a)f(host)g(en)m(try)h(based)g(on)f(either)i(its)e(string)g
Fg(name)h Fi(or)227 4721 y Fg(so)-5 b(cket_addr)g(ess)p
Fi(.)0 5042 y Fj(type)94 b(network_info)47 b(=)g({)94
5155 y(n_name)g(:)g(string)g(;)227 5292 y Fi(Net)m(w)m(ork)32
b(name.)1905 5589 y(79)p eop
%%Page: 80 80
80 79 bop 94 91 a Fj(n_aliases)47 b(:)g(string)g(array)f(;)227
229 y Fi(Alternativ)m(e)32 b(names.)94 415 y Fj(n_addrtype)47
b(:)g(protocol_family)f(;)94 528 y(n_net)h(:)g(int32)g(;)0
641 y(})227 779 y(network_info_...)40 b Fi(return)31
b(a)g(v)-5 b(alue)30 b(of)g(this)g(t)m(yp)s(e.)0 1102
y Fj(val)47 b(network_info_name)f(:)h(string)g(->)g(network_info)0
1238 y(val)g(network_info_addr)f(:)h(sockaddr)g(->)g(network_info)227
1376 y(network_info_...)40 b Fi(allo)m(w)32 b(a)e(program)i(to)e(lo)s
(ok)g(up)g(a)h(net)m(w)m(ork)h(en)m(try)f(based)f(on)h(either)g(its)f
(string)227 1489 y Fg(name)g Fi(or)h Fg(so)-5 b(cket_addr)g(ess)p
Fi(.)0 1812 y Fj(type)94 b(service_info)47 b(=)g(Unix.service_entry)f
(=)h({)94 1925 y(s_name)g(:)g(string)g(;)227 2062 y Fi(Service)31
b(name.)94 2249 y Fj(s_aliases)47 b(:)g(string)g(array)f(;)227
2387 y Fi(Alternativ)m(e)32 b(names.)94 2573 y Fj(s_port)47
b(:)g(int)g(;)227 2711 y Fi(P)m(ort)32 b(n)m(um)m(b)s(er.)94
2897 y Fj(s_proto)47 b(:)g(string)g(;)227 3035 y Fi(Proto)s(col)32
b(name.)0 3221 y Fj(})227 3359 y(service_info_...)40
b Fi(return)31 b(a)g(v)-5 b(alue)30 b(of)g(this)g(t)m(yp)s(e.)0
3682 y Fj(val)47 b(service_info_name)f(:)h(?protocol:string)g(->)g
(string)g(->)g(service_info)0 3819 y(val)g(service_info_port)f(:)h
(?protocol:string)g(->)g(int)g(->)g(service_info)227
3956 y(service_info_...)40 b Fi(allo)m(w)32 b(a)e(program)i(to)e(lo)s
(ok)g(up)g(a)h(service)f(en)m(try)h(based)g(on)f(either)i(its)e(string)
227 4069 y Fg(name)g Fi(or)h(in)m(teger)h Fg(p)-5 b(ort)p
Fi(.)0 4392 y Fj(type)94 b(protocol_info)47 b(=)f(Unix.protocol_entry)h
(=)g({)94 4505 y(p_name)g(:)g(string)g(;)227 4643 y Fi(Proto)s(col)32
b(name.)94 4829 y Fj(p_aliases)47 b(:)g(string)g(array)f(;)227
4967 y Fi(Alternativ)m(e)32 b(names.)94 5153 y Fj(p_proto)47
b(:)g(int)g(;)227 5291 y Fi(Proto)s(col)32 b(n)m(um)m(b)s(er.)1905
5589 y(80)p eop
%%Page: 81 81
81 80 bop 0 91 a Fj(})227 229 y(protocol_info_...)40
b Fi(return)31 b(a)g(v)-5 b(alue)30 b(of)g(this)g(t)m(yp)s(e.)0
553 y Fj(val)47 b(protocol_info_name)f(:)h(string)g(->)g(protocol_info)
0 690 y(val)g(protocol_info_port)f(:)h(int)g(->)g(protocol_info)227
828 y(protocol_info_...)40 b Fi(allo)m(w)32 b(a)e(program)i(to)e(lo)s
(ok)g(up)g(a)h(proto)s(col)g(en)m(try)g(based)g(on)f(either)h(its)f
(string)227 941 y Fg(name)g Fi(or)h(in)m(teger)h Fg(p)-5
b(ort)p Fi(.)0 1438 y Fl(5)131 b(Strings)45 b(and)e(c)l(haracters)0
1665 y Fi(Strings)f(are)h(the)f(basic)g(comm)m(unication)j(medium)e
(for)e(Unix)h(pro)s(cesses,)i(so)e(a)g(Unix)f(programming)j(en)m(vi-)0
1778 y(ronmen)m(t)c(m)m(ust)e(ha)m(v)m(e)i(reasonable)f(facilities)f
(for)g(manipulating)i(them.)64 b(Cash)38 b(pro)m(vides)h(a)f(p)s(o)m(w)
m(erful)h(set)f(of)0 1891 y(pro)s(cedures)27 b(for)f(pro)s(cessing)h
(strings)f(and)h(c)m(haracters.)40 b(Besides)27 b(the)f(the)h
(facilities)g(describ)s(ed)f(in)h(this)f(c)m(hapter,)0
2003 y(Cash)k(also)h(pro)m(vides:)136 2191 y Fe(\017)46
b Fk(Field)25 b(parsing,)g(delimited)g(record)e(I/O)e
Fi(\(c)m(hapter)j([7]\).)38 b(These)21 b(pro)s(cedures)i(let)e(y)m(ou)h
(read)g(in)g(c)m(h)m(unks)227 2304 y(of)38 b(text)g(delimited)h(b)m(y)f
(selected)g(c)m(haracters,)k(and)c(parse)g(eac)m(h)h(record)g(in)m(to)g
(\034elds)f(based)g(on)g(regular)227 2417 y(expressions)30
b(\(for)h(example,)g(splitting)g(a)f(string)h(at)f(ev)m(ery)h(o)s
(ccurrence)g(of)f(colon)i(or)e(white-space\).)136 2605
y Fe(\017)46 b Fk(The)35 b(SRFI-13)f(string)g(libraries.)40
b Fi(This)30 b(pair)h(of)f(libraries)h(con)m(tains)h(pro)s(cedures)f
(that)g(create,)h(fold,)227 2717 y(iterate)22 b(o)m(v)m(er,)i(searc)m
(h,)g(compare,)g(assem)m(ble,)g(cut,)f(hash,)g(case-map,)h(and)d
(otherwise)h(manipulate)h(strings.)227 2830 y(They)k(are)g(pro)m(vided)
h(b)m(y)f(the)g(String_13)i(and)e(String_13_in)m(ternals)j(mo)s(dules,)
e(and)f(are)g(also)f(a)m(v)-5 b(ailable)227 2943 y(in)23
b(the)g(default)g Fj(Cash)p Fi([1])g(mo)s(dule.)39 b(More)22
b(do)s(cumen)m(tation)j(on)e(these)g(pro)s(cedures)g(can)g(b)s(e)g
(found)g(at)g(URLs)227 3056 y(\(h)m(tml\)[)p Fj
(http://srfi.schemers.org/srfi-)t(13/srfi-)t(13.html)p
Fi(])f(and)e(\(text\)[)p Fj(http://srfi.schemers.)227
3169 y(org/srfi-)t(13/srfi-)t(13.txt)p Fi(].)141 3380
y(\(Oops:)41 b(the)31 b(SRFI-13)f(libraries)h(are)f(not)h(implemen)m
(ted)i(for)d(no)m(w\))136 3568 y Fe(\017)46 b Fk(The)33
b(SRFI-14)e(c)m(haracter-set)k(library)p Fi(.)j(This)29
b(library)g(pro)m(vides)g(a)f(set-of-c)m(haracters)i(abstraction,)227
3681 y(whic)m(h)i(is)d(frequen)m(tly)i(useful)f(when)h(searc)m(hing,)h
(parsing,)f(\034ltering)g(or)f(otherwise)h(op)s(erating)g(on)g(strings)
227 3794 y(and)k(c)m(haracter)h(data.)52 b(The)35 b(SRFI)e(is)h(pro)m
(vided)h(b)m(y)f(the)h(Charset_14)g(mo)s(dule;)i(its)d(bindings)g(are)h
(also)227 3907 y(a)m(v)-5 b(ailable)32 b(in)e(the)h(default)g
Fj(Cash)p Fi([1])f(mo)s(dule.)41 b(More)30 b(do)s(cumen)m(tation)j(on)e
(this)f(library)h(can)f(b)s(e)g(found)h(at)227 4020 y(URLs)20
b(\(h)m(tml\)[)p Fj(http://srfi.schemers.org/srfi-)t(14/srfi-)t
(14.html)p Fi(])h(and)g(\(text\)[)p Fj(http://srfi.)227
4133 y(schemers.org/srfi-)t(14/srfi-)t(14.txt)p Fi(].)0
4474 y Ff(5.1)112 b(Manipulating)37 b(\034le)g(names)0
4670 y Fi(These)k(pro)s(cedures)g(do)g(not)f(access)h(the)g
(\034le-system)f(at)h(all;)46 b(they)40 b(merely)h(op)s(erate)g(on)g
(\034le-name)h(strings.)0 4782 y(Muc)m(h)c(of)f(this)h(structure)g(is)f
(patterned)i(after)f(the)f(GNU)g(Emacs)h(design.)62 b(P)m(erhaps)39
b(a)f(more)g(sophisticated)0 4895 y(system)25 b(w)m(ould)i(b)s(e)e(b)s
(etter,)i(something)g(lik)m(e)f(the)f(pathname)i(abstractions)g(of)e
(CommonLisp)i(or)f(MIT)f(Sc)m(heme.)0 5008 y(Ho)m(w)m(ev)m(er,)32
b(b)s(eing)f(Unix-sp)s(eci\034c,)f(w)m(e)h(can)g(b)s(e)f(a)g(little)h
(less)f(general.)1905 5589 y(81)p eop
%%Page: 82 82
82 81 bop 0 91 a Fk(5.1.1)103 b(T)-9 b(erminology)0 287
y Fi(These)35 b(pro)s(cedures)g(carefully)g(adhere)h(to)f(the)g(P)m
(osix)g(standard)h(for)e(\034le-name)i(resolution,)h(whic)m(h)f(o)s
(ccasion-)0 399 y(ally)i(en)m(tails)g(some)g(sligh)m(tly)h(o)s(dd)e
(things.)63 b(This)38 b(section)g(will)h(describ)s(e)f(these)f(rules,)j
(and)f(giv)m(e)f(some)g(basic)0 512 y(terminology)-8
b(.)141 625 y(A)38 b Fg(\034le-name)g Fi(is)g(either)g(the)h
(\034le-system)f(ro)s(ot)g(\(\020/\021\),)i(or)e(a)g(series)g(of)g
(slash-terminated)h(directory)g(com-)0 738 y(p)s(onen)m(ts,)d(follo)m
(w)m(ed)f(b)m(y)g(a)f(a)f(\034le)i(comp)s(onen)m(t.)53
b(Ro)s(ot)33 b(is)h(the)g(only)g(\034le-name)i(that)e(ma)m(y)h(end)f
(in)g(slash.)51 b(Some)0 851 y(examples:)94 1026 y Fj(File)c(name)563
b(Dir)47 b(components)376 b(File)47 b(component)94 1139
y(src/des/main.c)328 b(["src";)47 b("des"])376 b("main.c")94
1252 y(/src/des/main.c)281 b(["";)47 b("src";)g("des"])188
b("main.c")94 1365 y(main.c)704 b([])940 b("main.c")141
1540 y Fi(Note)33 b(that)h(the)f(relativ)m(e)h(\034lename)h
Fk(src/des/main.c)d Fi(and)h(the)h(absolute)g(\034lename)g
Fk(/src/des/main.c)0 1653 y Fi(are)d(distinguished)g(b)m(y)g(the)f
(presence)h(of)f(the)h(ro)s(ot)g(comp)s(onen)m(t)h Fk("")e
Fi(in)g(the)h(absolute)g(path.)141 1766 y(Multiple)j(em)m(b)s(edded)g
(slashes)e(within)i(a)f(path)g(ha)m(v)m(e)h(the)f(same)g(meaning)h(as)e
(a)h(single)g(slash.)47 b(More)33 b(than)0 1879 y(t)m(w)m(o)h(leading)f
(slashes)f(at)h(the)f(b)s(eginning)i(of)e(a)g(path)h(ha)m(v)m(e)g(the)g
(same)g(meaning)g(as)f(a)h(single)f(leading)i(slash)e(\026)0
1992 y(they)25 b(indicate)i(that)f(the)f(\034le-name)i(is)e(an)g
(absolute)h(one,)h(with)f(the)g(path)g(leading)g(from)f(ro)s(ot.)39
b(Ho)m(w)m(ev)m(er,)28 b(P)m(osix)0 2105 y(p)s(ermits)i(the)g(OS)g(to)g
(giv)m(e)g(sp)s(ecial)g(meaning)h(to)f Fg(two)g Fi(leading)h(slashes.)
40 b(F)-8 b(or)30 b(this)g(reason,)g(the)g(routines)h(in)f(this)0
2218 y(section)h(do)f(not)h(simplify)f(t)m(w)m(o)i(leading)f(slashes)f
(to)h(a)f(single)h(slash.)141 2331 y(A)h(\034le-name)i(in)e
Fg(dir)-5 b(e)g(ctory)36 b(form)c Fi(is)g(either)h(a)f(\034le-name)i
(terminated)g(b)m(y)f(a)f(slash,)h Fg(e.g)p Fi(.,)g(\020)8
b Fk(/src/des/)p Fi(\021,)33 b(or)0 2444 y(the)k(empt)m(y)h(string,)h
(\020\021.)61 b(The)38 b(empt)m(y)g(string)f(corresp)s(onds)g(to)h(the)
f(curren)m(t)i(w)m(orking)f(directory)-8 b(,)40 b(whose)d(\034le-)0
2557 y(name)30 b(is)g(dot)g(\(\020)8 b Fk(.)p Fi(\021\).)40
b(W)-8 b(orking)31 b(bac)m(kw)m(ards)g(from)f(the)g(app)s(end-a-slash)h
(rule,)f(w)m(e)h(extend)f(the)g(syn)m(tax)g(of)f(P)m(osix)0
2670 y(\034le-names)37 b(to)e(de\034ne)i(the)e(empt)m(y)i(string)f(to)f
(b)s(e)g(a)h(\034le-name)h(form)e(of)h(the)f(ro)s(ot)h(directory)g
(\020)8 b Fk(/)p Fi(\021.)56 b(\(Ho)m(w)m(ev)m(er,)0
2782 y(\020)8 b Fk(/)p Fi(\021)35 b(is)28 b(also)g(acceptable)i(as)e(a)
h(\034le-name)g(form)g(for)f(ro)s(ot.\))40 b(So)28 b(the)h(empt)m(y)g
(string)f(has)h(t)m(w)m(o)g(in)m(terpretations:)42 b(as)0
2895 y(a)32 b(\034le-name)h(form,)f(it)g(is)f(the)h(\034le-system)g(ro)
s(ot;)h(as)e(a)h(directory)h(form,)f(it)g(is)f(the)h(curren)m(t)h(w)m
(orking)g(directory)-8 b(.)0 3008 y(Slash)31 b(is)e(also)i(an)f(am)m
(biguous)i(form:)41 b Fk(/)30 b Fi(is)g(b)s(oth)g(a)h(directory-form)g
(and)g(a)f(\034le-name)i(form.)141 3121 y(The)40 b(directory)h(form)e
(of)g(a)h(\034le-name)h(is)e(v)m(ery)g(rarely)h(used.)68
b(Almost)40 b(all)g(of)f(the)h(pro)s(cedures)g(in)g(Cash)0
3234 y(name)j(directories)g(b)m(y)f(giving)g(their)h(\034le-name)g
(form)f(\(without)i(the)e(trailing)h(slash\),)i(not)d(their)h
(directory)0 3347 y(form.)k(So,)34 b(y)m(ou)f(sa)m(y)f(\020)8
b Fk(/usr/include)p Fi(\021,)32 b(and)h(\020)8 b Fk(.)p
Fi(\021,)32 b(not)h(\020)8 b Fk(/usr/include/)p Fi(\021)38
b(and)33 b(\020\021.)48 b(The)33 b(sole)f(exceptions)h(are)0
3460 y Fj(file_name_as_directory)24 b Fi(and)h Fj
(directory_as_file_name)p Fi(,)g(whose)g(jobs)g(are)g(to)g(con)m(v)m
(ert)h(bac)m(k-and-forth)0 3573 y(b)s(et)m(w)m(een)33
b(these)f(forms,)g(and)g Fj(file_name_directory)p Fi(,)g(whose)g(job)f
(it)h(is)f(to)h(split)g(out)g(the)g(directory)g(p)s(ortion)0
3686 y(of)f(a)g(\034le-name.)44 b(Ho)m(w)m(ev)m(er,)33
b(most)e(pro)s(cedures)h(that)f(exp)s(ect)g(a)g(directory)h(argumen)m
(t)h(will)f(co)s(erce)f(a)g(\034le-name)0 3799 y(in)41
b(directory)i(form)e(to)g(\034le-name)i(form)e(if)g(it)g(do)s(es)g(not)
h(ha)m(v)m(e)g(a)f(trailing)i(slash.)73 b(Bear)41 b(in)h(mind)g(that)f
(the)0 3912 y(am)m(biguous)32 b(case,)e(empt)m(y)i(string,)e(will)h(b)s
(e)f(in)m(terpreted)j(in)d(\034le-name)i(form,)f(i.e.,)f(as)g(ro)s(ot.)
0 4173 y Fk(5.1.2)103 b(Pro)s(cedures)0 4368 y Fj(val)47
b(is_file_name_directory)f(:)h(string)g(->)g(bool)0 4505
y(val)g(is_file_name_non_directory)f(:)h(string)g(->)g(bool)227
4640 y Fi(These)31 b(predicates)g(return)h(true)e(if)g(the)h(string)g
(is)f(in)g(directory)h(form,)g(or)f(\034le-name)i(form)f(\(see)f(the)
227 4753 y(ab)s(o)m(v)m(e)g(discussion)f(of)f(these)h(t)m(w)m(o)h
(forms\).)40 b(Note)29 b(that)g(they)g(b)s(oth)g(return)h(true)f(on)g
(the)g(am)m(biguous)i(case)227 4866 y(of)f(empt)m(y)h(string,)g(whic)m
(h)h(is)e(b)s(oth)g(a)h(directory)g(\(curren)m(t)h(w)m(orking)f
(directory\),)h(and)f(a)f(\034le)h(name)g(\(the)227 4979
y(\034le-system)g(ro)s(ot\).)227 5114 y Fj(File)47 b(name)329
b(is_..._directory)375 b(is_..._non_directory})227 5227
y("src/des")329 b(false)892 b(true)227 5340 y("src/des/")282
b(true)939 b(false)1905 5589 y Fi(82)p eop
%%Page: 83 83
83 82 bop 227 91 a Fj("/")611 b(true)939 b(false)227
204 y(".")611 b(false)892 b(true)227 317 y("")658 b(true)939
b(true)0 549 y(val)47 b(file_name_as_directory)f(:)h(string)g(->)g
(string)227 686 y Fi(Con)m(v)m(ert)32 b(a)f(\034le-name)g(to)g
(directory)g(form.)41 b(Basically)-8 b(,)31 b(add)f(a)h(trailing)g
(slash)f(if)g(needed:)368 799 y Fj(file_name_as_directory)47
b("src/des")610 b(=>)94 b("src/des/")368 912 y(file_name_as_directory)
47 b("src/des/")563 b(=>)94 b("src/des/")227 1138 y(.)p
Fi(,)31 b Fj(/)p Fi(,)f(and)h Fj("")f Fi(are)g(sp)s(ecial:)368
1250 y Fj(file_name_as_directory)47 b(".")892 b(=>)94
b("")368 1363 y(file_name_as_directory)47 b("/")892 b(=>)94
b("/")368 1476 y(file_name_as_directory)47 b("")939 b(=>)94
b("/")0 1797 y(val)47 b(directory_as_file_name)f(:)h(string)g(->)g
(string)227 1934 y Fi(Con)m(v)m(ert)32 b(a)f(directory)g(to)f(a)h
(simple)f(\034le-name.)42 b(Basically)-8 b(,)31 b(kill)g(a)f(trailing)h
(slash)f(if)g(one)h(is)f(presen)m(t:)368 2047 y Fj
(directory_as_file_name)47 b("foo/bar/")563 b(=>)47 b("foo/bar")227
2273 y(/)30 b Fi(and)h Fj("")f Fi(are)h(sp)s(ecial:)368
2386 y Fj(directory_as_file_name)47 b("/")892 b(=>)47
b("/")368 2499 y(directory_as_file_name)g("")939 b(=>)47
b(".")94 b(\(*)47 b(i.e.,)g(the)g(cwd)g(*\))0 2820 y(val)g
(is_file_name_absolute)f(:)h(string)g(->)g(bool)227 2957
y Fi(Do)s(es)30 b Fg(fname)g Fi(b)s(egin)g(with)h(a)g(ro)s(ot)f(or)h
Fj(\003)f Fi(comp)s(onen)m(t?)41 b(\(Recognising)31 b
Fj(\003)g Fi(as)f(a)g(home-directory)227 3069 y(sp)s(eci\034cation)i
(is)e(an)g(extension)h(of)f(P)m(osix)h(rules.\))368 3182
y Fj(is_file_name_absolute)47 b("/usr/shivers")422 b(=>)47
b(true)368 3295 y(is_file_name_absolute)g("src/des")657
b(=>)47 b(false)368 3408 y(is_file_name_absolute)g("~/src/des")563
b(=>)47 b(true)227 3521 y Fi(Non-ob)m(vious)32 b(case:)368
3634 y Fj(is_file_name_absolute)47 b("")986 b(=>)47 b(true)g(\(*)g
(i.e.,)g(root)g(*\))0 3842 y(val)g(file_name_directory)f(:)h(string)g
(->)g(string)227 3979 y Fi(Return)31 b(the)g(directory)g(comp)s(onen)m
(t)h(of)e Fg(fname)g Fi(in)g(directory)h(form.)41 b(If)29
b(the)i(\034le-name)h(is)e(already)h(in)227 4092 y(directory)g(form,)g
(return)g(it)g(as-is.)368 4205 y Fj(file_name_directory)47
b("/usr/bdc")704 b(=>)47 b("/usr/")368 4318 y(file_name_directory)g
("/usr/bdc/")657 b(=>)47 b("/usr/bdc/")368 4431 y(file_name_directory)g
("bdc/.login")610 b(=>)47 b("bdc")227 4543 y Fi(Ro)s(ot)30
b(has)g(no)h(directory)g(comp)s(onen)m(t:)368 4656 y
Fj(file_name_directory)47 b("/")1033 b(=>)47 b("")368
4769 y(file_name_directory)g("")1080 b(=>)47 b("")0 4977
y(val)g(file_name_nondirectory)f(:)h(string)g(->)g(string)227
5114 y Fi(Return)31 b(non-directory)h(comp)s(onen)m(t)g(of)e(fname.)368
5227 y Fj(file_name_nondirectory)47 b("/usr/ian")563
b(=>)47 b("ian")368 5340 y(file_name_nondirectory)g("/usr/ian/")516
b(=>)47 b("")1905 5589 y Fi(83)p eop
%%Page: 84 84
84 83 bop 368 91 a Fj(file_name_nondirectory)47 b("ian/.login")469
b(=>)47 b(".login")368 204 y(file_name_nondirectory)g("main.c")657
b(=>)47 b("main.c")368 317 y(file_name_nondirectory)g("")939
b(=>)47 b("")368 430 y(file_name_nondirectory)g("/")892
b(=>)47 b("/")0 754 y(val)g(split_file_name)g(:)f(string)h(->)g(string)
g(list)227 892 y Fi(Split)31 b(a)g(\034le-name)g(in)m(to)h(its)e(comp)s
(onen)m(ts.)368 1005 y Fj(split_file_name)47 b("src/des/main.c")610
b(=>)47 b(["src";)g("des";)g("main.c"])368 1118 y(split_file_name)g
("/src/des/main.c")563 b(=>)47 b(["";)g("src";)g("des";)g("main.c"])368
1231 y(split_file_name)g("main.c")986 b(=>)47 b(["main.c"])368
1344 y(split_file_name)g("/")1221 b(=>)47 b([""])0 1668
y(val)g(file_name_of_path_list)f(:)h(?dir:string)g(->)g(string)g(list)g
(->)g(string)227 1806 y Fi(In)m(v)m(erse)31 b(of)f(split_\034le_name.)
368 1919 y Fj(file_name_of_path_list)47 b(["src";)f("des";)h("main.c"])
g(=>)g("src/des/main.c")368 2031 y(file_name_of_path_list)g(["";)g
("src";)f("des";)h("main.c"])g(=>)g("/src/des/main.c")227
2257 y Fi(Optional)32 b Fg(\003dir)e Fi(arg)h(anc)m(hors)g(relativ)m(e)
h(path-lists:)368 2370 y Fj(file_name_of_path_list)47
b(~dir:"/usr/shivers")f(["src";)h("des";)g("main.c"])2482
2483 y(=>)g("/usr/shivers/src/des/main.c")227 2709 y
Fi(The)31 b(optional)h Fg(\003dir)e Fi(argumen)m(t)i(is)e(usefully)g
Fj(\(cwd)47 b(\(\)\))p Fi(.)0 2920 y Fj(val)g(file_name_extension)f(:)h
(string)g(->)g(string)227 3058 y Fi(Return)31 b(the)g(\034le-name's)g
(extension.)368 3171 y Fj(file_name_extension)47 b("main.c")798
b(=>)47 b(".c")368 3284 y(file_name_extension)g("main.c.old")610
b(=>)47 b(".old")368 3397 y(file_name_extension)g("/usr/shivers")516
b(=>)47 b("")227 3623 y Fi(W)-8 b(eird)31 b(cases:)368
3735 y Fj(file_name_extension)47 b("foo.")892 b(=>)47
b(".")368 3848 y(file_name_extension)g("foo..")845 b(=>)47
b(".")227 4074 y Fi(Dot)31 b(\034les)f(are)h(not)g(extensions:)368
4187 y Fj(file_name_extension)47 b(".login")798 b(=>)47
b("")0 4398 y(val)g(file_name_sans_extension)f(:)h(string)g(->)g
(string)227 4536 y Fi(Return)31 b(ev)m(erything)g(but)g(the)g
(extension.)368 4649 y Fj(file_name_sans_extension)47
b("main.c")563 b(=>)47 b("main")368 4762 y(file_name_sans_extension)g
("main.c.old")375 b(=>)47 b("main.c")368 4875 y
(file_name_sans_extension)g("/usr/shivers")281 b(=>)47
b("/usr/shivers")227 5101 y Fi(W)-8 b(eird)31 b(cases:)368
5214 y Fj(file_name_sans_extension)47 b("foo.")657 b(=>)47
b("foo")368 5327 y(file_name_sans_extension)g("foo..")610
b(=>)47 b("foo.")1905 5589 y Fi(84)p eop
%%Page: 85 85
85 84 bop 227 204 a Fi(Dot)31 b(\034les)f(are)h(not)g(extensions:)368
317 y Fj(file_name_sans_extension)47 b("/usr/shivers/.login")f(=>)h
("/usr/shivers/.login")227 430 y Fi(Note)31 b(that)g(app)s(ending)g
(the)g(results)f(of)g Fj(file_name_extension)g Fi(and)g
Fj(file_name_sans_extension)227 543 y Fi(in)h(all)f(cases)g(pro)s
(duces)h(the)g(original)g(\034le-name.)0 754 y Fj(val)47
b(parse_file_name)g(:)f(string)h(->)g(string)g(*)g(string)g(*)g(string)
227 892 y Fi(Let)31 b Fg(f)f Fi(b)s(e)g Fj(file_name_nondirectory)g
Fg(fname)p Fi(.)40 b(This)30 b(function)h(returns)g(the)g(three)g(v)-5
b(alues:)306 1022 y Fe(\017)46 b Fj(file_name_directory)30
b Fg(fname)306 1151 y Fe(\017)46 b Fj(file_name_sans_extension)30
b Fg(f)306 1281 y Fe(\017)46 b Fj(file_name_extension)30
b Fg(f)227 1410 y Fi(The)h(in)m(v)m(erse)g(of)f Fj(parse_file_name)p
Fi(,)g(in)h(all)f(cases,)g(is)g Fj(String.concat)47 b("")p
Fi(.)40 b(The)31 b(b)s(oundary)g(case)f(of)g Fj(/)227
1523 y Fi(w)m(as)h(c)m(hosen)g(to)g(preserv)m(e)g(this)f(in)m(v)m
(erse.)0 1734 y Fj(val)47 b(replace_extension)f(:)h(string)g(->)g
(string)g(->)g(string)227 1872 y(replace_extension)30
b Fg(fname)g(ext)h Fi(replaces)g Fg(fname)p Fi('s)f(extension)g(with)h
Fg(ext)p Fi(.)42 b(It)30 b(is)f(exactly)i(equiv)-5 b(alen)m(t)227
1985 y(to:)227 2098 y Fj(\(file_name_sans_extension)30
b Fg(fname)g Fj(\))47 b(^)30 b Fg(ext)0 2422 y Fj(val)47
b(simplify_file_name)f(:)h(string)g(->)g(string)227 2560
y Fi(Remo)m(v)m(es)31 b(leading)h(and)e(in)m(ternal)i(o)s(ccurrences)f
(of)f(dot.)41 b(A)30 b(trailing)i(dot)e(is)g(left)h(alone,)g(as)f(the)g
(paren)m(t)227 2673 y(could)h(b)s(e)f(a)h(symlink.)40
b(Remo)m(v)m(es)31 b(in)m(ternal)h(and)f(trailing)g(double-slashes.)41
b(A)30 b(leading)i(double-slash)f(is)227 2786 y(left)f(alone,)h(in)f
(accordance)h(with)g(P)m(osix.)40 b(Ho)m(w)m(ev)m(er,)32
b(triple)f(and)f(more)g(leading)h(slashes)f(are)g(reduced)h(to)227
2899 y(a)g(single)f(slash,)g(in)h(accordance)h(with)f(P)m(osix.)41
b(Double-dots)31 b(\(paren)m(t)h(directory\))g(are)e(left)g(alone,)i
(in)227 3012 y(case)f(they)f(come)h(after)g(symlinks)e(or)i(app)s(ear)f
(in)h(a)f Fj(/../)p Fg(machine)p Fj(/...)41 b Fi(\020sup)s(er-ro)s
(ot\021)d(form)30 b(\(whic)m(h)227 3124 y(P)m(osix)h(p)s(ermits\).)0
3336 y Fj(val)47 b(resolve_file_name)f(:)h(?dir:string)g(->)g(string)g
(->)g(string)306 3473 y Fe(\017)f Fi(Do)31 b Fj(\003)f
Fi(expansion.)306 3603 y Fe(\017)46 b Fi(If)28 b Fg(\003dir)h
Fi(is)f(giv)m(en,)i(con)m(v)m(ert)g(a)f(relativ)m(e)h(\034le-name)g(to)
f(an)g(absolute)g(\034le-name,)i(relativ)m(e)f(to)f(directory)397
3716 y Fg(\003dir)p Fi(.)0 4040 y Fj(val)47 b(expand_file_name)g(:)f
(?dir:string)h(->)g(string)g(->)g(string)227 4178 y Fi(Resolv)m(e)30
b(and)h(simplify)f(the)h(\034le-name.)0 4389 y Fj(val)47
b(absolute_file_name)f(:)h(?dir:string)g(->)g(string)g(->)g(string)227
4527 y(absolute_file_name)g(\003dir:)p Fg(dir)30 b(fname)g
Fi(con)m(v)m(erts)h(\034le-name)h Fg(fname)e Fi(in)m(to)h(an)g
(absolute)g(\034le)f(name,)227 4640 y(relativ)m(e)i(to)e(directory)h
Fg(\003dir)p Fi(,)g(whic)m(h)g(defaults)g(to)f(the)h(curren)m(t)h(w)m
(orking)f(directory)-8 b(.)42 b(The)31 b(\034le)g(name)g(is)227
4753 y(simpli\034ed)h(b)s(efore)e(b)s(eing)g(returned.)227
4866 y(This)h(pro)s(cedure)g(do)s(es)f(not)h(treat)g(a)f(leading)h
(tilde)g(c)m(haracter)i(sp)s(ecially)-8 b(.)0 5077 y
Fj(val)47 b(home_dir)g(:)g(?user:string)f(->)h(unit)g(->)g(string)227
5215 y Fi(Returns)31 b Fg(\003user)p Fi('s)f(home)h(directory)-8
b(.)42 b Fg(\003user)31 b Fi(defaults)g(to)f(the)h(curren)m(t)h(user.)
368 5328 y Fj(home_dir)47 b(\(\))1597 b(=>)47 b
("/user1/lecturer/shivers")1905 5589 y Fi(85)p eop
%%Page: 86 86
86 85 bop 368 91 a Fj(home_dir)47 b(~user:"ctkwan")1033
b(=>)47 b("/user0/research/ctkwan")0 415 y(val)g(home_file)g(:)g
(?user:string)f(->)h(string)g(->)g(string)227 553 y Fi(Returns)31
b(\034le-name)g Fg(fname)f Fi(relativ)m(e)i(to)e Fg(\003user)p
Fi('s)h(home)g(directory;)g Fg(\003user)g Fi(defaults)g(to)f(the)h
(curren)m(t)227 666 y(user.)368 779 y Fj(home_file)47
b("man")1409 b(=>)47 b("/usr/shivers/man")368 892 y(home_file)g
(~user:"fcmlau")g("man")704 b(=>)47 b("/usr/fcmlau/man")141
1216 y Fi(The)41 b(general)h Fj(substitute_env_vars)e
Fi(string)h(pro)s(cedure,)k(de\034ned)c(in)g(the)g(next)g(section,)j
(is)c(also)h(fre-)0 1329 y(quen)m(tly)31 b(useful)f(for)g(expanding)i
(\034le-names.)0 1593 y Fk(5.1.3)103 b(Other)35 b(string)f
(manipulation)g(facilities)0 1788 y Fj(val)47 b(substitute_env_vars)f
(:)h(string)g(->)g(string)227 1926 y Fi(Replace)31 b(o)s(ccurrences)g
(of)f(en)m(vironmen)m(t)j(v)-5 b(ariables)31 b(with)f(their)h(v)-5
b(alues.)41 b(An)30 b(en)m(vironmen)m(t)j(v)-5 b(ariable)31
b(is)227 2039 y(denoted)h(b)m(y)e(a)h(dollar)g(sign)f(follo)m(w)m(ed)i
(b)m(y)f(alphan)m(umeric)i(c)m(hars)e(and)g(underscores,)g(or)f(is)g
(surrounded)227 2152 y(b)m(y)h(braces.)368 2265 y Fj
(substitute_env_vars)47 b("$USER/.login")516 b(=>)47
b("shivers/.login")368 2378 y(substitute_env_vars)g("${USER}_log")563
b(=>)47 b("shivers_log")141 2589 y Fi(The)31 b(four)f(next)h(pro)s
(cedures)g(are)f(con)m(v)m(enience)j(alternativ)m(es)f(to)e(the)h
Fj(String)f Fi(ones.)0 2725 y Fj(val)47 b(index)g(:)g(?from:int)f(->)h
(string)g(->)g(char)g(->)g(int)g(option)227 2863 y Fi(This)31
b(is)f(lik)m(e)g Fj(String.index)g Fi(and)h Fj(String.index_from)f
Fi(altogether)i(\()p Fg(\003fr)-5 b(om)30 b Fi(defaults)h(to)f(0\),)h
(but)f(it)227 2976 y(nev)m(er)h(raises)f Fj(Not_found)p
Fi(:)41 b(instead,)31 b(it)f(pac)m(k)-5 b(ages)31 b(their)g(result)g
(in)f(an)h(option)g(t)m(yp)s(e;)g(\(note:)41 b(y)m(ou)31
b(can)227 3089 y(use)f Fj(Env_3_11.internal_index)g Fi(to)h(get)f(-1)h
(if)f(the)g(c)m(har)i(is)e(not)g(found\).)0 3300 y Fj(val)47
b(rindex)g(:)g(?from:int)f(->)h(string)g(->)g(char)g(->)g(int)g(option)
227 3438 y Fi(Same)31 b(with)g Fj(rindex)f Fi(\(and)h
Fj(Env_3_11.internal_rindex)p Fi(\);)f Fg(\003fr)-5 b(om)30
b Fi(defaults)h(to)f(the)h(length)g(of)f(the)227 3551
y(string.)0 3762 y Fj(val)47 b(substring)g(:)g(string)f(->)h(int)g(->)g
(int)g(->)g(string)227 3900 y Fi(This)31 b(is)f(lik)m(e)g
Fj(String.sub)g Fi(but)h(uses)f(t)m(w)m(o)i(indices)e(in)h(the)g
(string,)f(instead)h(of)f(the)h(start)f(p)s(osition)h(and)227
4013 y(the)g(length)g(to)g(searc)m(h.)41 b Fg(This)32
b(is)f(gr)-5 b(atuitous)34 b(Scheme)f(c)-5 b(omp)g(atibility.)0
4224 y Fj(val)47 b(xsubstring)g(:)g(string)f(->)h(int)g(->)g(int)g(->)g
(string)227 4362 y Fi(This)31 b(eXtended)g(substring)g(accepts)g
(negativ)m(e)g(indices,)g(meaning)h(to)e(coun)m(t)i(from)e(the)h(end)g
(of)f(the)227 4475 y(string:)41 b(-1)31 b(is)e(the)i(last)f(c)m(har,)i
(so)e(xsubstring)g(s)g(\(-2\))h(\(-1\))g(extracts)f(the)h(last)f(c)m
(har.)42 b(If)29 b(y)m(ou)i(lo)s(ok)f(at)g(the)227 4588
y(indices)h(as)f(b)s(eing)h(b)s(et)m(w)m(een)h(the)e(c)m(haracters,)i
(0)f(is)f(b)s(efore)g(the)h(\034rst)f(one,)h(and)g(-1)f(after)h(the)f
(last.)0 4926 y Fk(5.1.4)103 b(Character)36 b(predicates)0
5121 y Fj(val)47 b(is_letter)g(:)g(char)g(->)f(bool)0
5258 y(val)h(is_lower_case)g(:)g(char)f(->)h(bool)1905
5589 y Fi(86)p eop
%%Page: 87 87
87 86 bop 0 91 a Fj(val)47 b(is_upper_case)g(:)g(char)f(->)h(bool)0
228 y(val)g(is_title_case)g(:)g(char)f(->)h(bool)0 364
y(val)g(is_digit)g(:)g(char)g(->)f(bool)0 501 y(val)h
(is_letter_or_digit)f(:)h(char)g(->)g(bool)0 637 y(val)g(is_graphic)g
(:)g(char)f(->)h(bool)0 774 y(val)g(is_printing)g(:)g(char)f(->)h(bool)
0 911 y(val)g(is_whitespace)g(:)g(char)f(->)h(bool)0
1047 y(val)g(is_blank)g(:)g(char)g(->)f(bool)0 1184 y(val)h
(is_iso_control)g(:)g(char)f(->)h(bool)0 1320 y(val)g(is_punctuation)g
(:)g(char)f(->)h(bool)0 1457 y(val)g(is_hex_digit)g(:)g(char)f(->)h
(bool)0 1593 y(val)g(is_ascii)g(:)g(char)g(->)f(bool)141
1730 y Fi(Eac)m(h)39 b(of)d(these)i(predicates)g(tests)f(for)g(mem)m(b)
s(ership)h(in)f(one)h(of)e(the)i(standard)g(c)m(haracter)h(sets)d(pro)m
(vided)0 1843 y(b)m(y)d(the)g(SRFI-14)f(c)m(haracter-set)j(library)f
(\(mo)s(dule)f(Charset_14\).)49 b(A)m(dditionally)-8
b(,)36 b(the)d(follo)m(wing)h(redundan)m(t)0 1956 y(bindings)d(are)g
(pro)m(vided)g(for)g(R5RS)e(compatibilit)m(y:)0 2092
y Fj(val)47 b(is_alphabetic)g(:)g(char)f(->)h(bool)227
2230 y Fc(==)30 b Fi(is_letter_or_digit.)0 2441 y Fj(val)47
b(is_alphanumeric)g(:)f(char)h(->)g(bool)227 2579 y Fc(==)30
b Fi(is_letter_or_digit.)0 2790 y Fj(val)47 b(is_numeric)g(:)g(char)f
(->)h(bool)227 2928 y Fc(==)30 b Fi(is_digit.)0 3313
y Fl(6)131 b(Reading)44 b(delimited)g(strings)0 3539
y Fi(Cash)g(pro)m(vides)h(a)f(set)g(of)g(pro)s(cedures)h(that)f(read)h
(delimited)g(strings)f(from)h(input)g(c)m(hannels.)83
b(There)44 b(are)0 3652 y(pro)s(cedures)c(to)f(read)h(a)g(single)f
(line)h(of)f(text)g(\(terminated)i(b)m(y)f(a)f(newline)i(c)m
(haracter\),)i(a)d(single)f(paragraph)0 3765 y(\(terminated)30
b(b)m(y)e(a)f(blank)h(line\),)h(and)f(general)h(delimited)g(strings)f
(\(terminated)i(b)m(y)e(a)f(c)m(haracter)j(b)s(elonging)f(to)0
3878 y(an)i(arbitrary)g(c)m(haracter)h(set\).)141 3991
y(All)k(of)f(the)i(delimited)g(input)f(op)s(erations)h(describ)s(ed)f
(b)s(elo)m(w)h(tak)m(e)f(a)g Fj(handle_delim)g Fi(parameter,)j(whic)m
(h)0 4104 y(determines)29 b(what)f(the)h(pro)s(cedure)f(do)s(es)g(with)
g(the)g(terminating)i(delimiter)f(c)m(haracter.)42 b(There)28
b(are)g(three)h(plus)0 4217 y(one)i(p)s(ossible)f(c)m(hoices)h(for)f(a)
h Fj(handle_delim)e Fi(parameter:)0 4353 y Fj(type)94
b(handle_delim)47 b(=)94 4466 y(|)g(Trim)94 4579 y(|)g(Peek)94
4692 y(|)g(Concat)141 4829 y Fi(The)29 b(fourth)g(option)g(is)f(to)h
(use)f(a)h Fd(:)15 b(:)g(:)q Fi(_split)29 b(v)m(ersion)g(of)f(the)h
(pro)s(cedure,)h(that)f(return)g(delimiter)h(as)e(second)0
4941 y(v)-5 b(alue)31 b(\(so)f(the)g(return)i(t)m(yp)s(e)e(is)g(not)h
(compatible)h(with)f(the)f(standard)h(v)m(ersion\).)141
5054 y(The)24 b(\034rst)f(case,)i Fj(Trim)p Fi(,)g(is)d(the)i(standard)
g(default)g(for)f(all)g(the)h(routines)g(describ)s(ed)g(in)f(this)g
(section.)39 b(The)24 b(last)0 5167 y(three)29 b(cases)f(allo)m(w)h
(the)g(programmer)h(to)e(distinguish)h(b)s(et)m(w)m(een)h(strings)e
(that)h(are)f(terminated)i(b)m(y)e(a)g(delimiter)0 5280
y(c)m(haracter,)k(and)f(strings)f(that)h(are)g(terminated)h(b)m(y)f(an)
f(end-of-\034le.)1905 5589 y(87)p eop
%%Page: 88 88
88 87 bop 0 91 a Fj(type)94 b(termination_kind)46 b(=)94
204 y(|)h(Eof)227 342 y Fi(Read)31 b(terminated)h(b)m(y)e(end)h(of)f
(\034le)94 530 y Fj(|)47 b(Read)g(of)g(char)227 667 y
Fi(Read)31 b(terminated)h(b)m(y)e(this)g(delimiter)94
855 y Fj(|)47 b(Full_buffer)227 993 y Fi(Filled)31 b(bu\033er)g
(without)g(\034nding)h(a)e(delimiter)227 1181 y(T)m(yp)s(e)h(of)f(the)g
(second)h(v)-5 b(alue)31 b(returned)g(b)m(y)g Fj
(low_read_delimited_bang)p Fi([6])f(and)h(the)f Fd(:)15
b(:)g(:)r Fi(_split)227 1293 y(pro)s(cedures.)0 1505
y Fj(val)47 b(read_line)g(:)94 1618 y(?handle_newline:handle_delim)f
(->)h(Pervasives.in_channel)g(->)g(string)227 1755 y
Fi(Reads)30 b(and)h(returns)g(one)g(line)f(of)g(text;)h(on)f(eof,)h
(raises)f(End_of_\034le.)42 b(A)30 b(line)h(is)f(terminated)i(b)m(y)227
1868 y(newline)g(or)e(eof.)227 1981 y Fg(hand)5 b(le_new)g(line)30
b Fi(determines)i(what)f Fj(read_line)f Fi(do)s(es)g(with)h(the)f
(newline)i(or)e(EOF)h(that)g(terminates)227 2094 y(the)g(line;)g(it)f
(defaults)h(to)f Fj(Trim)g Fi(\(discard)h(the)g(newline\).)42
b(Using)30 b(this)g(argumen)m(t)j(allo)m(ws)e(one)f(to)h(tell)227
2207 y(whether)h(or)e(not)h(the)g(last)f(line)h(of)f(input)h(in)f(a)h
(\034le)f(is)g(newline)i(terminated.)0 2418 y Fj(val)47
b(read_line_split)g(:)f(Pervasives.in_channel)h(->)g(string)g(*)g
(termination_kind)227 2556 y Fi(Same)31 b(as)f Fj(read_line)p
Fi(,)g(but)h(returns)g(separately)g(the)g(line)f(and)h(the)g(delimiter)
h(\(ma)m(yb)s(e)e Fj(Eof)p Fi(\).)227 2669 y Fj(Full_buffer)g
Fi(can't)h(happ)s(en.)0 2880 y Fj(val)47 b(read_paragraph)g(:)94
2993 y(?handle_delim:handle_delim)f(->)h(Pervasives.in_channel)g(->)g
(string)0 3130 y(val)g(read_paragraph_split)f(:)h
(Pervasives.in_channel)g(->)g(string)g(*)g(string)227
3268 y Fi(These)31 b(pro)s(cedures)g(skip)f(blank)g(lines,)h(then)g
(read)g(text)f(from)h(a)f(c)m(hannel)i(un)m(til)f(a)g(blank)f(line)h
(or)f(eof)h(is)227 3381 y(found.)41 b(A)30 b(\020blank)h(line\021)38
b(is)30 b(a)g(\(p)s(ossibly)g(empt)m(y\))h(line)g(comp)s(osed)g(only)f
(of)g(white)h(space.)41 b(The)227 3493 y Fg(\003hand)5
b(le_delim)31 b Fi(parameter)h(\(or)e(using)h Fj(read_paragraph_split)p
Fi(\))f(determines)h(ho)m(w)h(the)227 3606 y(terminating)g(blank)f
(line)g(is)f(handled.)41 b(It)30 b(is)g(describ)s(ed)h(ab)s(o)m(v)m(e,)
g(and)g(defaults)g(to)f Fj(Trim)p Fi(.)40 b(The)31 b
Fj(Peek)227 3719 y Fi(option)h(is)d(not)i(a)m(v)-5 b(ailable.)141
3930 y(The)41 b(follo)m(wing)g(pro)s(cedures)g(read)g(in)f(strings)g
(from)g(c)m(hannels)i(delimited)f(b)m(y)g(c)m(haracters)h(b)s(elonging)
f(to)0 4043 y(a)i(sp)s(eci\034c)f(set.)78 b(See)43 b(the)g(c)m
(haracter)i(set)d(library)h(sp)s(eci\034cation[)p Fj
(http://srfi.schemers.org/srfi-)t(14/)0 4156 y(srfi-)t(14.html)p
Fi(])30 b(for)g(information)i(on)e(c)m(haracter)j(set)d(manipulation.)0
4293 y Fj(val)47 b(read_delimited)g(:)94 4406 y
(?chan:Pervasives.in_channel)f(->)94 4519 y(?handle_delim:handle_delim)
g(->)h(Charset_14.any_t)g(->)g(string)0 4655 y(val)g
(read_delimited_split)f(:)94 4768 y(?chan:Pervasives.in_channel)g(->)94
4881 y(Charset_14.any_t)h(->)f(string)h(*)g(termination_kind)227
5019 y Fi(Read)31 b(un)m(til)g(w)m(e)g(encoun)m(ter)h(one)f(of)f(the)h
(c)m(hars)g(in)f Fg(charset)i Fi(or)e(eof.)40 b(The)31
b Fg(\003hand)5 b(le_delim)31 b Fi(parameter)227 5132
y(\(or)g(using)f Fj(read_delimited_split)p Fi(\))g(determines)i(ho)m(w)
f(the)g(terminating)h(c)m(haracter)g(is)e(handled.)42
b(It)227 5245 y(is)30 b(describ)s(ed)h(ab)s(o)m(v)m(e,)g(and)g
(defaults)g(to)f Fj(Trim)p Fi(.)1905 5589 y(88)p eop
%%Page: 89 89
89 88 bop 227 91 a Fi(The)29 b Fg(char_set)h Fi(argumen)m(t)h(ma)m(y)e
(b)s(e)f(a)h(c)m(harset,)h(a)f(string,)g(a)g(c)m(haracter,)i(or)e(a)f
(c)m(haracter)j(predicate;)f(it)f(is)227 204 y(co)s(erced)i(to)g(a)f(c)
m(harset.)227 317 y Fj(Full_buffer)g Fi(can't)h(happ)s(en)g(to)g
Fj(read_delimited_split)p Fi(.)0 528 y Fj(val)47 b(read_delimited_bang)
f(:)94 641 y(?chan:Pervasives.in_channel)g(->)94 754
y(?handle_delim:handle_delim)g(->)94 867 y(?start:int)h(->)g(?end_:int)
f(->)h(Charset_14.any_t)g(->)g(string)g(->)g(int)g(option)0
1004 y(val)g(read_delimited_bang_split)f(:)94 1117 y
(?chan:Pervasives.in_channel)g(->)94 1229 y(?start:int)h(->)94
1342 y(?end_:int)g(->)94 1455 y(Charset_14.any_t)g(->)f(string)h(->)g
(\(int)g(*)g(termination_kind\))g(option)227 1593 y Fi
(Side-e\033ecting)32 b(v)-5 b(arian)m(ts)31 b(of)f Fj(read_delimited)p
Fi(.)227 1706 y(The)h(data)g(is)f(written)h(in)m(to)h(the)e(string)h
Fg(buf)g Fi(at)f(the)h(indices)g(in)f(the)h(half-op)s(en)g(in)m(terv)-5
b(al)31 b([)p Fg(start,end_)p Fi(\);)227 1819 y(the)g(default)g(in)m
(terv)-5 b(al)31 b(is)f(the)h(whole)g(string:)41 b Fg(start)30
b Fc(=)g Fi(0)g(and)h Fg(end_)f Fc(=)g Fi(\()p Fj(String.length)g
Fg(buf)p Fi(\).)41 b(The)227 1932 y(v)-5 b(alues)30 b(of)g
Fg(start)h Fi(and)f Fg(end_)h Fi(m)m(ust)g(sp)s(ecify)e(a)i(w)m
(ell-de\034ned)h(in)m(terv)-5 b(al)32 b(in)e Fg(str)p
Fi(,)g(i.e.,)h(0)g Fe(\024)e Fg(start)h Fe(\024)g Fg(end_)h
Fe(\024)227 2045 y Fi(\()p Fj(String.length)f Fg(buf)p
Fi(\).)227 2158 y Fj(read_delimited_bang)g Fi(returns)h
Fj(Some)f Fg(nbytes)p Fi(,)h(the)f(n)m(um)m(b)s(er)i(of)e(b)m(ytes)h
(read.)41 b(If)29 b(the)i(bu\033er)f(\034lled)h(up)227
2271 y(without)h(a)e(delimiter)i(c)m(haracter)g(b)s(eing)f(found,)f
Fj(None)g Fi(is)g(returned.)42 b(If)30 b(the)g(c)m(hannel)i(is)e(at)h
(eof)f(when)227 2383 y(the)h(read)g(starts,)f(End_of_\034le)i(is)e
(raised.)227 2496 y(If)g(the)g(read)h(is)f(successfully)g(terminated)i
(b)m(y)e(reading)i(a)e(delimiter)i(c)m(haracter)g(\()p
Fg(i.e.,)227 2609 y Fj(read_delimited_bang)e Fi(returns)h
Fj(Some)f Fi(in)m(teger,)i(or)e Fj(read_delimited_bang_split)g
Fi(returns)h(\()p Fg(n)p Fi(,)227 2722 y Fj(Char)f Fg(c)p
Fi(\),)h(then)g(the)g Fg(\003hand)5 b(le_delim)30 b Fi(parameter)i
(\(or)f(using)g Fj(read_delimited_bang_split)p Fi(\))227
2835 y(determines)h(ho)m(w)f(the)g(terminating)h(c)m(haracter)g(is)e
(handled.)42 b(It)30 b(is)g(describ)s(ed)g(ab)s(o)m(v)m(e,)i(and)e
(defaults)h(to)227 2948 y Fj(Trim)p Fi(.)0 3159 y Fj(val)47
b(low_read_delimited_bang)f(:)94 3272 y(?chan:Pervasives.in_channel)g
(->)94 3385 y(?start:int)h(->)94 3498 y(?end_:int)g(->)94
3611 y(Charset_14.any_t)g(->)94 3724 y(string)g(->)g(handle_delim)f(->)
h(termination_kind)g(*)g(int)227 3862 y Fi(This)31 b(lo)m(w-lev)m(el)h
(delimited)g(reader)f(uses)f(an)g(alternate)i(in)m(terface.)42
b(It)30 b(returns)h(t)m(w)m(o)g(v)-5 b(alues:)41 b Fg(terminator)227
3975 y Fi(and)31 b Fg(num_r)-5 b(e)g(ad)p Fi(.)306 4104
y Fe(\017)46 b Fg(terminator)p Fi(:)40 b(A)30 b Fj(termination_kind)g
Fi(v)-5 b(alue)31 b(describing)g(wh)m(y)g(the)g(read)f(w)m(as)h
(terminated.)306 4234 y Fe(\017)46 b Fg(num_r)-5 b(e)g(ad)p
Fi(:)42 b(Num)m(b)s(er)31 b(of)f(c)m(haracters)i(read)f(in)m(to)g
Fg(buf)p Fi(.)227 4363 y(If)f(the)g(read)h(is)f(successfully)g
(terminated)i(b)m(y)e(reading)i(a)e(delimiter)i(c)m(haracter,)g(then)f
(the)227 4476 y Fg(hand)5 b(le_delim)31 b Fi(parameter)h(determines)f
(what)g(to)g(do)f(with)h(the)g(terminating)h(c)m(haracter.)42
b(If)30 b Fj(Peek)p Fi(,)g(the)227 4589 y(c)m(haracter)j(is)c(left)i
(in)f(the)h(input)g(stream)g(where)g(a)f(subsequen)m(t)h(read)g(op)s
(eration)g(will)g(retriev)m(e)h(it;)e(else)227 4702 y(the)h(c)m
(haracter)h(is)e(remo)m(v)m(ed)i(from)f(the)f(input)h(stream:)41
b(if)30 b Fj(Trim)p Fi(,)g(it)h(is)f(not)h(copied)g(in)f(the)h
(bu\033er;)g(if)227 4815 y Fj(Concat)p Fi(,)f(it)g(is)f(put)h(in)g(the)
g(bu\033er.)40 b(In)29 b(either)i(case,)f(the)g(c)m(haracter)h(is)f
(also)f(the)h(\034rst)g(v)-5 b(alue)30 b(returned)h(b)m(y)227
4928 y(the)g(pro)s(cedure)g(call.)227 5041 y(In)m(v)-5
b(arian)m(ts:)306 5170 y Fe(\017)46 b Fg(terminator)30
b Fc(=)g Fj(Full_buffer)g Fc(=)p Fd(>)g Fg(num_r)-5 b(e)g(ad)33
b Fc(=)f Fg(end_)h(-)g(start)p Fi(.)306 5300 y Fe(\017)46
b Fg(terminator)30 b Fc(=)g Fj(Eof)g Fi(and)h Fg(num_r)-5
b(e)g(ad)32 b Fc(=)d Fi(0)i Fc(=)p Fd(>)e Fi(at)i(EOF.)1905
5589 y(89)p eop
%%Page: 90 90
90 89 bop 0 91 a Fj(val)47 b(skip_char_set)g(:)g
(?chan:Pervasives.in_channel)f(->)h(Charset_14.any_t)f(->)h(int)227
227 y(skip_char_set)30 b Fg(skip_chars)h Fi(skips)f(c)m(haracters)i(o)s
(ccurring)f(in)f(the)h(set)f Fg(skip_chars)p Fi(,)h(and)g(returns)g
(the)227 340 y(n)m(um)m(b)s(er)h(of)e(c)m(haracters)i(skipp)s(ed.)40
b(The)31 b Fg(skip_chars)g Fi(argumen)m(t)h(ma)m(y)f(b)s(e)f(a)h(c)m
(harset,)g(a)f(string,)h(a)227 453 y(c)m(haracter,)i(or)d(a)g(c)m
(haracter)j(predicate;)f(it)e(is)g(co)s(erced)h(to)f(a)h(c)m(harset.)0
942 y Fl(7)131 b(Record)44 b(I/O)g(and)f(\034eld)i(parsing)0
1168 y Fi(Unix)c(programs)h(frequen)m(tly)f(pro)s(cess)g(streams)g(of)g
(records,)j(where)e(eac)m(h)g(record)g(is)e(delimited)j(b)m(y)e(a)g
(new-)0 1281 y(line,)c(and)f(records)h(are)f(brok)m(en)g(in)m(to)h
(\034elds)f(with)g(other)g(delimiters)h(\(for)e(example,)j(the)e(colon)
g(c)m(haracter)i(in)0 1394 y Fj(/etc/passwd)p Fi(\).)h(Cash)26
b(has)g(pro)s(cedures)h(that)g(allo)m(w)g(the)g(programmer)h(to)e
(easily)g(do)g(this)h(kind)f(of)g(pro)s(cessing.)0 1507
y(Cash's)c(\034eld)g(parsers)g(can)g(also)g(b)s(e)g(used)f(to)h(parse)g
(other)h(kinds)f(of)f(delimited)i(strings,)h(suc)m(h)e(as)g
(colon-separated)0 1620 y Fj($PATH)30 b Fi(lists.)141
1756 y(The)j(pro)s(cedures)g(in)g(this)f(section)h(are)g(used)f(to)h
(read)g(records)g(from)f(I/O)h(streams)f(and)h(parse)g(them)g(in)m(to)0
1869 y(\034elds.)46 b(A)32 b(record)h(is)e(de\034ned)j(as)d(text)h
(terminated)i(b)m(y)f(some)f(delimiter)h(\(usually)g(a)f(newline\).)47
b(A)31 b(record)i(can)0 1982 y(b)s(e)f(split)g(in)m(to)h(\034elds)g(b)m
(y)f(using)h(regular)g(expressions)f(in)g(one)h(of)e(sev)m(eral)i(w)m
(a)m(ys:)45 b(to)32 b Fg(match)h Fi(\034elds,)g(to)f
Fg(sep)-5 b(ar)g(ate)0 2095 y Fi(\034elds,)29 b(or)g(to)g
Fg(terminate)g Fi(\034elds.)40 b(The)30 b(\034eld)f(parsers)g(can)g(b)s
(e)f(applied)i(to)f(arbitrary)h(strings)f(\(one)g(common)h(use)0
2208 y(is)g(splitting)h(en)m(vironmen)m(t)i(v)-5 b(ariables)31
b(suc)m(h)f(as)g Fj($PATH)g Fi(at)h(colons)g(in)m(to)g(its)f(comp)s
(onen)m(t)i(elemen)m(ts\).)141 2321 y(The)24 b(general)h
(delimited-input)h(pro)s(cedures)e(describ)s(ed)g(in)g(c)m(hapter)h
([6])f(are)g(also)f(useful)g(for)h(reading)g(simple)0
2434 y(records,)31 b(suc)m(h)g(as)f(single)h(lines,)f(paragraphs)i(of)e
(text,)g(or)h(strings)f(terminated)i(b)m(y)f(sp)s(eci\034c)f(c)m
(haracters.)0 2699 y Ff(7.1)112 b(Reading)37 b(records)0
2894 y Fj(val)47 b(record_reader)g(:)94 3007 y
(?delims:Charset_14.any_t)f(->)94 3120 y(?elide_delims:bool)h(->)94
3233 y(?handle_delim:Delim_7.handle_delim)f(->)94 3346
y(unit)h(->)g(Pervasives.in_channel)f(->)h(string)0 3482
y(val)g(record_reader_split)f(:)94 3595 y(?delims:Charset_14.any_t)g
(->)94 3708 y(?elide_delims:bool)h(->)f(unit)h(->)g
(Pervasives.in_channel)g(->)g(string)g(*)f(string)227
3843 y(record_reader)30 b Fg(\003delims)i(\003elide_delims)i(\003hand)5
b(le_delim)30 b Fj(\(\))g Fi(returns)h(a)g(pro)s(cedure)g(that)g(reads)
227 3956 y(records)g(from)g(a)f(c)m(hannel.)227 4069
y(A)g(record)h(is)f(a)h(sequence)f(of)g(c)m(haracters)i(terminated)g(b)
m(y)f(one)g(of)e(the)i(c)m(haracters)h(in)f Fg(delims)f
Fi(or)g(eof.)227 4182 y(The)h Fg(delims)f Fi(set)g(defaults)h(to)f(the)
h(set)f({'\\n'}.)42 b(It)29 b(ma)m(y)i(b)s(e)f(a)h(c)m(harset,)g
(string,)g(c)m(haracter,)h(or)f(c)m(haracter)227 4295
y(predicate,)h(and)f(is)f(co)s(erced)h(to)f(a)h(c)m(harset.)227
4408 y(If)f Fg(elide_delims)h Fi(is)f Fj(true)p Fi(,)g(then)h(a)f(con)m
(tiguous)i(sequence)f(of)f(delimiter)h(c)m(hars)g(are)g(tak)m(en)g(as)f
(a)h(single)227 4521 y(record)h(delimiter.)41 b(If)30
b Fg(elide_delims)h Fi(is)f Fj(false)g Fi(\(the)h(default\),)g(then)g
(a)f(delimiter)i(c)m(har)f(coming)227 4634 y(immediately)h(after)f(a)f
(delimiter)i(c)m(har)f(pro)s(duces)g(an)f(empt)m(y-string)i(record.)41
b(The)31 b(reader)g(consumes)227 4747 y(the)g(delimiting)h(c)m
(har\(s\))f(b)s(efore)f(returning)i(from)f(a)f(read.)227
4860 y(The)h Fg(hand)5 b(le_delim)31 b Fi(argumen)m(t)h(\(or)e(using)h
Fj(record_reader_split)p Fi(\))f(con)m(trols)h(what)g(is)f(done)h(with)
227 4973 y(the)g(record's)g(terminating)h(delimiter.)42
b(It)30 b(has)g(the)h(same)f(meaning)i(as)e(for)g(the)h(pro)s(cedures)g
(of)f(c)m(hapter)227 5085 y([6],)h(except)g(there)g(is)f(no)g(P)m(eek)h
(option:)306 5213 y Fe(\017)46 b Fj(Trim)p Fi(:)40 b(Delimiters)32
b(are)e(trimmed)i(\(the)f(default\).)306 5340 y Fe(\017)46
b Fj(Concat)p Fi(:)40 b(The)31 b(record)g(and)g(its)f(delimiter)i(are)f
(returned)g(as)f(a)h(single)f(string.)1905 5589 y(90)p
eop
%%Page: 91 91
91 90 bop 227 91 a Fi(When)28 b(using)f Fj(record_reader_split)p
Fi(,)g(the)h(reader)g(returns)f(delimiter)i(string)e(as)g(a)g(second)h
(argumen)m(t.)227 204 y(If)i(record)h(is)f(terminated)i(b)m(y)e(EOF,)h
(then)g(the)g(n)m(ull)g(string)g(is)f(returned)i(as)e(this)g(second)h
(argumen)m(t.)227 317 y(The)g(reader)g(pro)s(cedure)h(returned)f(tak)m
(es)g(one)g(argumen)m(t,)h(the)f(c)m(hannel)h(from)e(whic)m(h)i(to)e
(read.)41 b(It)227 430 y(returns)31 b(a)g(string)f(or)h(raises)f
Fj(End_of_file)p Fi(.)227 543 y(T)-8 b(o)30 b(emphasize)f(that)h(these)
e(pro)s(cedures)i(are)f(normally)g(used)g(to)g(mak)m(e)g(a)g(reader)g
(pro)s(cedure,)i(they)d(tak)m(e)227 656 y(a)j(unit)f(argumen)m(t)j
(after)d(the)h(optionals,)g(whic)m(h)h(is)e(not)h(necessary)f(from)g(a)
h(strict)f(t)m(yping)h(p)s(oin)m(t)g(of)227 769 y(view.)41
b(It's)30 b(easier)g(to)h(write:)415 882 y Fj(let)47
b(read)g(=)g(record_reader)g(~handle_delim:Concat)f(\(\))227
995 y Fi(than)31 b(b)s(e)f(forced)h(to)f(use:)415 1108
y Fj(let)47 b(read)g(=)g(record_reader)g(?delims:None)f
(?elide_delims:None)h(~handle_delim:Concat)227 1220 y
Fi(Moreo)m(v)m(er,)32 b Fj(record_reader)e Fi(do)s(es)g(a)g
(non-trivial)i(amoun)m(t)g(of)e(w)m(ork)h(to)f(mak)m(e)h(a)f(faster)h
(reader)227 1333 y(pro)s(cedure;)h(it)e(is)g(not)h(e\036cien)m(t)h(to)e
(use)78 b Fj(record_reader)46 b(\(\))h(channel)77 b Fi(in)31
b(a)f(tigh)m(t)h(lo)s(op)g(\026)f(this)227 1446 y(w)m(ould)i(b)s(e)e
(ev)m(en)h(less)f(noticeable)i(if)d(one)i(could)g(write)g
Fj(record_reader)47 b(channel)p Fi(.)0 1788 y Ff(7.2)112
b(P)m(arsing)37 b(\034elds)0 1983 y Fj(type)94 b(handle_field_delim)46
b(=)94 2096 y(|)h(Trim_f)227 2234 y Fi(Delimiters)31
b(are)g(thro)m(wn)h(a)m(w)m(a)m(y)g(after)e(parsing)h(\(default\).)94
2422 y Fj(|)47 b(Split_f)227 2559 y Fi(Delimiters)31
b(are)g(app)s(ended)g(to)g(the)g(\034eld)g(preceding)g(them.)94
2747 y Fj(|)47 b(Concat_f)227 2885 y Fi(Delimiters)31
b(are)g(returned)h(as)e(separate)h(elemen)m(ts)g(in)g(the)g(\034eld)g
(list.)227 3072 y(Another)g(handle_delim)i(t)m(yp)s(e)d(reserv)m(ed)h
(for)f(\034eld)h(spliting.)0 3284 y Fj(type)94 b(delim_matcher)47
b(=)94 3397 y(|)g(Match_proc)g(of)g(\(string)f(->)h(int)g(->)g(int)g(*)
g(int\))227 3534 y Fi(A)30 b(function)h(of)f(a)h(string,)f(searc)m
(hing)i(from)f(an)f(in)m(t)h(p)s(osition,)g(that)g(returns)g(the)f
(o\033sets)g(of)g(the)h(next)227 3647 y(matc)m(h,)h Fg(i.e)p
Fi(,)e(the)h(indices)g(of)f(its)g(\034rst)g(c)m(haracter,)j(and)d(of)g
(the)h(\034rst)f(c)m(haracter)j(follo)m(wing)e(it.)94
3835 y Fj(|)47 b(String)g(of)g(string)227 3973 y Fi(A)30
b(litteral)i(string.)94 4160 y Fj(|)47 b(Charset)g(of)g
(Charset_14.any_t)227 4298 y Fi(A)30 b(Charset.)94 4486
y Fj(|)47 b(Regexp)g(of)g(Pcre.regexp)227 4624 y Fi(A)30
b(compiled)i(regexp.)94 4811 y Fj(|)47 b(Pattern)g(of)g(string)227
4949 y Fi(The)31 b(string)g(denotation)h(of)e(a)g(regexp.)227
5137 y(The)h(man)m(y)g(w)m(a)m(ys)g(to)g(sp)s(ecify)e(ho)m(w)i(to)g
(matc)m(h)g(\034elds)g(or)f(delimiters.)1905 5589 y(91)p
eop
%%Page: 92 92
92 91 bop 0 91 a Fj(val)47 b(field_splitter)g(:)94 204
y(?field:delim_matcher)f(->)94 317 y(?num_fields:int)h(->)g(unit)f(->)h
(?start:int)g(->)g(string)g(->)g(string)g(list)0 454
y(val)g(infix_splitter)g(:)94 567 y(?delim:delim_matcher)f(->)94
679 y(?num_fields:int)h(->)94 792 y(?handle_delim:handle_field_delim)f
(->)94 905 y(unit)h(->)g(?start:int)g(->)f(string)h(->)g(string)g(list)
0 1042 y(val)g(suffix_splitter)g(:)94 1155 y(?delim:delim_matcher)f(->)
94 1268 y(?num_fields:int)h(->)94 1381 y
(?handle_delim:handle_field_delim)f(->)94 1493 y(unit)h(->)g
(?start:int)g(->)f(string)h(->)g(string)g(list)0 1630
y(val)g(sloppy_suffix_splitter)f(:)94 1743 y(?delim:delim_matcher)g(->)
94 1856 y(?num_fields:int)h(->)94 1969 y
(?handle_delim:handle_field_delim)f(->)94 2082 y(unit)h(->)g
(?start:int)g(->)f(string)h(->)g(string)g(list)227 2219
y Fi(These)31 b(functions)g(return)g(a)f(parser)h(function)g(that)g
(can)g(b)s(e)f(used)g(as)g(follo)m(ws:)415 2332 y Fj(parser)47
b(~start)g(string)563 b(=>)47 b(string)g(list)227 2445
y Fi(The)31 b(returned)h(parsers)e(split)h(strings)f(in)m(to)h
(\034elds)g(de\034ned)g(b)m(y)g(regular)g(expressions.)40
b(Y)-8 b(ou)31 b(can)g(parse)227 2558 y(b)m(y)g(sp)s(ecifying)f(a)g
(pattern)h(that)g Fg(sep)-5 b(ar)g(ates)32 b Fi(\034elds,)f(a)f
(pattern)i(that)f Fg(terminates)f Fi(\034elds,)h(or)f(a)g(pattern)227
2671 y(that)h Fg(matches)g Fi(\034elds:)306 2801 y Fe(\017)46
b Fj(field_splitter)p Fi(:)40 b(matc)m(hes)32 b(\034elds)306
2930 y Fe(\017)46 b Fj(infix_splitter)p Fi(:)40 b(separates)31
b(\034elds)306 3060 y Fe(\017)46 b Fj(suffix_splitter)p
Fi(:)40 b(terminates)32 b(\034elds)306 3189 y Fe(\017)46
b Fj(sloppy_suffix_splitter)p Fi(:)40 b(terminates)32
b(\034elds)227 3319 y(These)f(parser)g(generators)g(are)g(con)m
(trolled)h(b)m(y)f(a)f(range)h(of)f(options,)h(so)f(that)h(y)m(ou)g
(can)f(precisely)227 3432 y(sp)s(ecify)g(what)h(kind)f(of)g(parsing)h
(y)m(ou)g(w)m(an)m(t.)42 b(Ho)m(w)m(ev)m(er,)32 b(these)e(options)h
(default)g(to)g(reasonable)g(v)-5 b(alues)227 3545 y(for)30
b(general)i(use.)227 3657 y(Defaults:)306 3787 y Fe(\017)46
b Fg(\003num_\034elds)p Fi(:)41 b(none)31 b(\(as)f(man)m(y)h(\034elds)g
(as)f(p)s(ossible\))306 3916 y Fe(\017)46 b Fg(\003hand)5
b(le_delim)p Fi(:)41 b Fj(Trim_f)30 b Fi(\(discard)h(delimiter)h(c)m
(hars\))306 4046 y Fe(\017)46 b Fg(\003\034eld,)33 b(\003delim)p
Fi(:)40 b(bindings)31 b(are)g(explicitly)g(a)m(v)-5 b(ailable)p
Fd(:)15 b(:)g(:)0 4274 y Fj(val)47 b(default_field_matcher)f(:)h
(delim_matcher)227 4412 y Fi(The)31 b(default)g(v)-5
b(alue)30 b(of)g Fg(\003\034eld)h Fi(arg)g(to)f Fj(field_splitter)p
Fi(:)40 b("\\S+")31 b(\(non-white-space\).)0 4623 y Fj(val)47
b(default_infix_matcher)f(:)h(delim_matcher)227 4761
y Fi(The)31 b(default)g(v)-5 b(alue)30 b(of)g Fg(\003delim)h
Fi(arg)f(to)h Fj(infix_splitter)p Fi(:)40 b("\\s+")31
b(\(white)g(space\))0 4972 y Fj(val)47 b(default_suffix_matcher)f(:)h
(delim_matcher)227 5110 y Fi(The)31 b(default)g(v)-5
b(alue)30 b(of)g Fg(\003delim)h Fi(arg)f(to)h Fj(suffix_splitter)f
Fi(and)h Fj(sloppy_suffix_splitter)p Fi(:)227 5223 y("\\s+|\\z")g
(\(white)h(space)e(or)h(eos\))1905 5589 y(92)p eop
%%Page: 93 93
93 92 bop 141 91 a Fi(These)31 b(defaults)g(mean:)41
b(break)31 b(the)g(string)g(at)f(white)i(space,)f(discarding)g(the)g
(white)g(space,)g(and)g(parse)g(as)0 204 y(man)m(y)g(\034elds)g(as)f(p)
s(ossible.)141 317 y(The)36 b Fg(delim)f Fi(parameter)i(is)e(a)g
(regular)h(expression)g(matc)m(hing)h(the)e(text)h(that)g(o)s(ccurs)f
(b)s(et)m(w)m(een)i(\034elds.)55 b(In)0 430 y(the)28
b(separator)g(case,)h(it)e(defaults)h(to)g(a)f(pattern)i(matc)m(hing)g
(white)f(space;)h(in)f(the)g(terminator)h(case,)f(it)g(defaults)0
543 y(to)i(white)i(space)e(or)h(end-of-string.)141 656
y(The)e Fg(\034eld)g Fi(parameter)h(is)f(a)f(regular)i(expression)f
(used)g(to)f(matc)m(h)i(\034elds.)41 b(It)28 b(defaults)h(to)g
(non-white-space.)141 769 y(The)35 b Fg(delim)g Fi(patterns)h(ma)m(y)f
(b)s(e)f(giv)m(en)i(as)e(a)h(matc)m(hing)i(pro)s(cedure,)g(a)d
(litteral)i(string,)h(a)d(c)m(harset,)j(an)e(un-)0 882
y(compiled)i(regexp)g(pattern,)h(whic)m(h)g(are)e(all)g(co)s(erced)h
(to)f(compiled)i(regular)f(expressions.)57 b(So)36 b(the)g(follo)m
(wing)0 995 y(expressions)30 b(are)h(all)f(equiv)-5 b(alen)m(t,)32
b(eac)m(h)f(pro)s(ducing)h(a)e(function)h(that)g(splits)f(strings)g
(apart)h(at)g(colons:)188 1220 y Fj(infix_splitter)47
b(~delim:\(String)f(":"\))h(\(\);)188 1333 y(infix_splitter)g
(~delim:\(Charset_14.of_string)f(":"\))h(\(\);)188 1446
y(infix_splitter)g(~delim:\(Regexp)f(\(Pcre.regexp)h(":"\)\))g(\(\);)
188 1559 y(infix_splitter)g(~delim:\(Pattern)f(":"\))h(\(\);)188
1672 y(infix_splitter)282 1785 y(~delim:\(Match_proc)423
1898 y(\(fun)g(s)g(pos)g(->)f(let)h(i)g(=)g(String.index_from)g(s)g
(pos)g(':')g(in)g(i,)g(i)f(+)h(1\)\))282 2011 y(\(\);;)141
2237 y Fi(The)31 b Fg(hand)5 b(le_delim)30 b Fi(determines)i(what)f(to)
f(do)h(with)g(delimiters.)41 b(See)31 b Fj(handle_field_delim)p
Fi([7.2].)141 2350 y(The)45 b Fg(num_\034elds)g Fi(argumen)m(t)i(used)d
(to)h(create)h(the)f(parser)g(sp)s(eci\034es)f(ho)m(w)i(man)m(y)f
(\034elds)g(to)g(parse.)84 b(If)0 2462 y(unsp)s(eci\034ed,)43
b(the)d(pro)s(cedure)h(parses)e(them)i(all.)69 b(If)38
b(a)i(p)s(ositiv)m(e)g(in)m(teger)h Fj(n)p Fi(,)h(exactly)e(that)g(man)
m(y)h(\034elds)e(are)0 2575 y(parsed;)46 b(it)41 b(is)g(an)g(error)g
(if)f(there)i(are)f(more)g(or)g(few)m(er)h(than)f Fj(n)f
Fi(\034elds)h(in)g(the)g(record.)73 b(If)40 b Fg(num_\034elds)g
Fi(is)h(a)0 2688 y(negativ)m(e)34 b(in)m(teger)g(or)f(zero,)h(then)f
Fj(|n|)f Fi(\034elds)h(are)g(parsed,)h(and)f(the)g(remainder)h(of)f
(the)g(string)f(is)h(returned)h(in)0 2801 y(the)d(last)f(elemen)m(t)i
(of)e(the)h(\034eld)g(list;)f(it)g(is)g(an)h(error)g(if)f(few)m(er)h
(than)g Fj(|n|)f Fi(\034elds)g(can)h(b)s(e)f(parsed.)141
2914 y(The)h(\034eld)g(parser)g(pro)s(duced)g(is)f(a)g(pro)s(cedure)h
(that)g(can)g(b)s(e)f(emplo)m(y)m(ed)i(as)e(follo)m(ws:)235
3027 y Fj(parse)47 b(~start)g(string)563 b(=>)47 b(string)g(list)141
3140 y Fi(The)29 b(optional)g Fg(start)f Fi(argumen)m(t)i(\(default)e
(0\))g(sp)s(eci\034es)g(where)h(in)f(the)g(string)h(to)f(b)s(egin)g
(the)g(parse.)40 b(It)28 b(is)g(an)0 3253 y(error)j(if)f
Fg(start)g Fj(>)47 b(String.length)30 b Fg(string)p Fi(.)141
3389 y(The)h(parsers)f(returned)i(b)m(y)e(the)h(four)g(parser)f
(generators)i(implemen)m(t)g(di\033eren)m(t)g(kinds)e(of)g(\034eld)h
(parsing:)136 3577 y Fe(\017)46 b Fj(field_splitter)p
Fi(:)40 b(The)31 b(regular)g(expression)g(sp)s(eci\034es)f(the)h
(actual)g(\034eld.)136 3765 y Fe(\017)46 b Fj(suffix_splitter)p
Fi(:)55 b(Delimiters)38 b(are)g(in)m(terpreted)i(as)d(elemen)m(t)i
Fg(terminators)p Fi(.)61 b(If)37 b(v)m(ertical-bar)i(is)e(the)227
3878 y(the)d(delimiter,)h(then)f(the)g(string)f Fj("")g
Fi(is)g(the)h(empt)m(y)g(record)g Fj(\(\))p Fi(,)g Fj("foo|")f
Fi(pro)s(duces)g(a)g(one-\034eld)i(record)227 3990 y
Fj(\("foo"\))p Fi(,)30 b(and)h Fj("foo")f Fi(is)g(an)h(error.)41
b Fj(\("foo"\))p Fi(,)30 b(and)h Fj("foo")f Fi(is)g(an)g(error.)227
4141 y(The)h(syn)m(tax)f(of)g(su\036x-delimited)i(records)f(is:)227
4291 y Fd(<)p Fg(r)-5 b(e)g(c)g(or)g(d)p Fd(>)33 b Fj(::=)d
Fg("")g Fi(\(empt)m(y)h(record\))h Fj(|)e Fd(<)p Fg(element)p
Fd(>)j(<)p Fg(delim)p Fd(>)e(<)p Fg(r)-5 b(e)g(c)g(or)g(d)p
Fd(>)227 4441 y Fi(It)28 b(is)h(an)f(error)i(if)e(a)g(non-empt)m(y)j
(record)e(do)s(es)f(not)h(end)g(with)g(a)g(delimiter.)41
b(T)-8 b(o)30 b(mak)m(e)f(the)g(last)f(delimiter)227
4554 y(optional,)k(mak)m(e)f(sure)f(the)h(delimiter)h(regexp)f(matc)m
(hes)g(the)g(end-of-string)g(\()p Fj("\\z")p Fi(\).)136
4742 y Fe(\017)46 b Fj(infix_splitter)p Fi(:)39 b(Delimiters)27
b(are)h(in)m(terpreted)h(as)d(elemen)m(t)j Fg(sep)-5
b(ar)g(ators)p Fi(.)41 b(If)26 b(comma)h(is)g(the)g(delimiter,)227
4855 y(then)k(the)g(string)g Fj("foo,")f Fi(pro)s(duces)g(a)h(t)m(w)m
(o-\034eld)h(record)f Fj(\("foo")47 b(""\))p Fi(.)227
5005 y(The)31 b(syn)m(tax)f(of)g(in\034x-delimited)j(records)d(is:)227
5155 y Fd(<)p Fg(r)-5 b(e)g(c)g(or)g(d)p Fd(>)33 b Fj(::=)d
Fg("")g Fi(\(forced)h(to)f(b)s(e)g(empt)m(y)i(record\))f
Fj(|)f Fd(<)p Fg(r)-5 b(e)g(al-in\034x-r)g(e)g(c)g(or)g(d)p
Fd(>)227 5305 y(<)p Fg(r)g(e)g(al-in\034x-r)g(e)g(c)g(or)g(d)p
Fd(>)34 b Fj(::=)c Fd(<)p Fg(element)p Fd(>)j(<)p Fg(delim)p
Fd(>)f(<)p Fg(r)-5 b(e)g(al-in\034x-r)g(e)g(c)g(or)g(d)p
Fd(>)34 b Fj(|)c Fd(<)p Fg(element)p Fd(>)1905 5589 y
Fi(93)p eop
%%Page: 94 94
94 93 bop 227 91 a Fi(Note)35 b(that)f(separator)h(seman)m(tics)h(do)s
(esn't)e(really)g(allo)m(w)i(for)e(empt)m(y)h(records)f(\026)h(the)f
(straigh)m(tforw)m(ard)227 204 y(grammar)f(\()p Fg(i.e.)p
Fi(,)d Fd(<)p Fg(r)-5 b(e)g(al-in\034x-r)g(e)g(c)g(or)g(d)p
Fd(>)p Fi(\))35 b(parses)c(an)g(empt)m(y)h(string)f(as)g(a)g(singleton)
h(list)f(whose)g(one)g(\034eld)227 317 y(is)36 b(the)h(empt)m(y)g
(string,)h Fj(\(""\))p Fi(,)f(not)g(as)f(the)g(empt)m(y)i(record)f
Fj(\(\))p Fi(.)58 b(This)36 b(is)g(unfortunate,)j(since)d(it)g(means)
227 430 y(that)31 b(in\034x)g(string)f(parsing)h(do)s(esn't)g(mak)m(e)g
Fj(^)f Fi(and)g Fj(@)h Fi(isomorphic.)41 b(F)-8 b(or)31
b(example,)g(with)274 543 y Fj(let)47 b(split)g(=)g(infix_splitter)g
(~delim:\(String)f(":"\))h(\(\);)274 769 y(split)g(\(x)g(^)g(":")g(^)g
(y\))227 914 y Fi(do)s(esn't)31 b(alw)m(a)m(ys)g(equal)274
1026 y Fj(\(split)47 b(x\))g(@)g(\(split)g(y\))227 1171
y Fi(It)e(fails)f(when)h Fg(x)g Fi(or)g Fg(y)f Fi(are)h(the)h(empt)m(y)
f(string.)84 b(T)-8 b(erminator)47 b(seman)m(tics)f Fg(do)-5
b(es)45 b Fi(preserv)m(e)h(a)e(similar)227 1284 y(isomorphism.)227
1429 y(Ho)m(w)m(ev)m(er,)38 b(separator)e(seman)m(tics)f(is)g(frequen)m
(tly)g(what)g(other)h(Unix)e(soft)m(w)m(are)i(uses,)g(so)e(to)h(parse)g
(their)227 1542 y(strings,)30 b(w)m(e)g(need)g(to)g(use)f(it.)40
b(F)-8 b(or)30 b(example,)g(Unix)f Fj($PATH)h Fi(lists)e(ha)m(v)m(e)j
(separator)f(seman)m(tics.)41 b(The)30 b(path)227 1655
y(list)38 b Fj("/bin:")g Fi(is)f(brok)m(en)i(up)f(in)m(to)h
Fj(\("/bin")47 b(""\))p Fi(,)40 b(not)e Fj(\("/bin"\))p
Fi(.)63 b(Comma-separated)40 b(lists)d(should)227 1768
y(also)31 b(b)s(e)f(parsed)g(this)h(w)m(a)m(y)-8 b(.)136
1944 y Fe(\017)46 b Fj(sloppy_suffix_splitter)p Fi(:)60
b(The)40 b(same)h(as)e(the)i Fj(suffix)f Fi(case,)i(except)f(that)g
(the)f(parser)h(will)f(skip)227 2057 y(an)g(initial)g(delimiter)h
(string)f(if)f(the)h(string)g(b)s(egins)f(with)h(one)g(instead)g(of)f
(parsing)h(an)g(initial)g(empt)m(y)227 2170 y(\034eld.)51
b(This)34 b(can)g(b)s(e)f(used,)i(for)e(example,)i(to)f(\034eld-split)h
(a)e(sequence)h(of)g(English)g(text)g(at)f(white-space)227
2283 y(b)s(oundaries,)e(where)h(the)e(string)h(ma)m(y)g(b)s(egin)f(or)h
(end)g(with)f(white)i(space,)e(b)m(y)h(using)f(regexp:)274
2396 y Fj("\\s+|\\z")227 2541 y Fi(\(But)h(y)m(ou)g(w)m(ould)g(b)s(e)f
(b)s(etter)h(o\033)f(using)h Fj(field_splitter)f Fi(in)g(this)g
(case.\))141 2701 y(The)35 b(next)f(table)g(sho)m(ws)h(ho)m(w)g(the)f
(di\033eren)m(t)h(parser)g(grammars)g(split)f(apart)g(the)h(same)f
(strings.)51 b(Ha)m(ving)0 2814 y(to)34 b(c)m(ho)s(ose)g(b)s(et)m(w)m
(een)h(the)f(di\033eren)m(t)g(grammars)h(requires)e(y)m(ou)h(to)g
(decide)g(what)g(y)m(ou)g(w)m(an)m(t,)i(but)e(at)g(least)f(y)m(ou)0
2927 y(can)i(b)s(e)g(precise)h(ab)s(out)f(what)h(y)m(ou)f(are)h
(parsing.)55 b(T)-8 b(ak)m(e)36 b(\034fteen)f(seconds)g(and)h(think)f
(it)g(out.)55 b(Sa)m(y)36 b(what)f(y)m(ou)0 3040 y(mean;)c(mean)g(what)
g(y)m(ou)g(sa)m(y)-8 b(.)0 3219 y Fj(Record)564 b(:)47
b(suffix)469 b(:|$)47 b(suffix)376 b(:)47 b(infix)516
b(non-:)47 b(field)0 3332 y("")752 b([])f([])h([])f([])0
3445 y(":")705 b([""])657 b([""])h(["";)47 b(""])469
b([])0 3558 y("foo:")564 b(["foo"])516 b(["foo)188 b("])329
b(["foo";)47 b(""])328 b(["foo"])0 3671 y(":foo")564
b(error)610 b(["";)47 b("foo"])329 b(["";)47 b("foo"])328
b(["foo"])0 3784 y("foo:bar")423 b(error)610 b(["foo";)47
b("bar"])188 b(["foo";)47 b("bar"])187 b(["foo";)47 b("bar"])0
4109 y Fk(7.2.1)103 b(Field)35 b(readers)0 4304 y Fj(val)47
b(field_reader)g(:)94 4417 y(?field_parser:\(?start:int)f(->)h(string)g
(->)g(string)g(list\))g(->)94 4530 y
(?rec_reader:\(Pervasives.in_channel)f(->)h(string\))g(->)94
4643 y(unit)g(->)g(Pervasives.in_channel)f(->)h(string)g(*)g(string)g
(list)227 4775 y Fi(This)31 b(utilit)m(y)g(returns)g(a)f(pro)s(cedure)i
(that)e(reads)h(records)g(with)g(\034eld)g(structure)g(from)f(a)h(c)m
(hannel.)42 b(The)227 4888 y(reader)32 b(is)d(used)i(as)f(follo)m(ws:)
274 5001 y Fj(reader)47 b(channel)517 b(=>)47 b(\(raw-record,)f
(parsed-record\))227 5114 y Fi(When)31 b(the)g(reader)g(is)f(applied)h
(to)g(an)f(input)h(c)m(hannel,)h(it)f(reads)f(a)h(record)g(using)f
Fg(r)-5 b(e)g(c_r)g(e)g(ader)p Fi(.)45 b(This)227 5227
y(record)32 b(is)d(parsed)i(with)g Fg(\034eld_p)-5 b(arser)p
Fi(.)42 b(These)31 b(t)m(w)m(o)g(v)-5 b(alues)31 b(\026)f(the)h
(record,)g(and)g(its)f(parsed)227 5340 y(represen)m(tation)j(\026)d
(are)h(returned)h(as)e(a)g(pair)h(from)f(the)h(reader.)1905
5589 y(94)p eop
%%Page: 95 95
95 94 bop 227 91 a Fi(When)31 b(called)g(at)g(eof,)f(the)g(reader)i
(raises)e Fj(End_of_file)p Fi(.)227 204 y(F)-8 b(or)31
b(example,)g(if)f(c)m(hannel)i Fj(p)e Fi(is)g(op)s(en)h(on)f
Fj(/etc/passwd)p Fi(,)g(then)274 317 y Fj(let)47 b(field_parser)g(=)g
(infix_splitter)f(~delim:\(String)h(":"\))g(~num_fields:7)g(\(\))g(in)
274 430 y(let)g(parse)g(=)g(field_reader)g(~field_parser)f(\(\))h(in)
274 543 y(parse)g(p;;)227 656 y Fi(returns)31 b(t)m(w)m(o)h(v)-5
b(alues:)227 882 y Fj(\("dalbertz:mx3Uaqq0:107:22:David)47
b(Albertz:/users/dalbertz:/bin/csh",)227 995 y(["dalbertz";)g
("mx3Uaqq0";)g("107";)g("22";)f("David)h(Albertz";)g
("/users/dalbertz";)g("/bin/csh"]\))227 1220 y Fi(The)31
b Fg(r)-5 b(e)g(c_r)g(e)g(ader)34 b Fi(defaults)d(to)f
Fj(read_line)p Fi(.)0 1432 y Fj(val)47 b(default_field_parser)f(:)h
(?start:int)g(->)g(string)g(->)g(string)g(list)227 1569
y Fi(The)30 b(default)h(v)-5 b(alue)30 b(of)f(the)h Fg(\003\034eld_p)-5
b(arser)31 b Fi(argumen)m(t)h(to)e Fj(field_reader)p
Fi(:)39 b(it)30 b(is)f Fj(field_splitter)47 b(\(\))p
Fi(,)227 1682 y(a)31 b(parser)f(that)h(pic)m(ks)g(out)f(sequences)h(of)
f(non-white-space)i(strings.)0 1894 y Fj(val)47 b(gen_field_reader)g(:)
f(\('a)h(->)g('b\))g(->)g(\('c)g(->)g('a\))g(->)g('c)g(->)g('a)g(*)g
('b)227 2031 y Fi(Although)31 b(the)g(record)g(reader)h(t)m(ypically)f
(returns)g(a)f(string,)h(and)g(the)f(\034eld-parser)i(t)m(ypically)f
(tak)m(es)g(a)227 2144 y(string)g(argumen)m(t,)h(this)f(is)f(not)g
(required.)41 b(The)31 b(record)h(reader)f(can)f(pro)s(duce,)i(and)e
(the)h(\034eld-parser)227 2257 y(consume,)g(v)-5 b(alues)31
b(of)f(an)m(y)g(t)m(yp)s(e.)41 b(Ho)m(w)m(ev)m(er,)32
b(the)f(t)m(yp)s(es)f(of)g(defaults)g(argumen)m(ts)i(to)f
Fj(field_reader)227 2370 y Fi(constrain)h(its)e(t)m(yp)s(e.)40
b(So)31 b(y)m(ou)f(can)h(use)f(this)h(alternate)g(v)m(ersion;)g(its)f
(standard)i(use)e(is)g(to)g(b)s(e)g(partially)227 2483
y(applied)i(to)e(2)h(argumen)m(ts,)h(returning)f(a)g(reader)g(lik)m(e)g
Fj(field_reader)p Fi(.)40 b(See)30 b(examples)h(b)s(elo)m(w.)141
2694 y(Some)g(examples)g(of)f(\034eld_reader:)188 2807
y Fj(\(*)47 b(/etc/passwd)g(reader.)f(*\))188 2920 y(let)h
(passwd_reader)f(=)282 3033 y(field_reader)h
(~field_parser:\(infix_splitter)f(~delim:\(String)h(":"\))f
(~num_fields:7)h(\(\)\))g(\(\))282 3146 y(\(*)g
(wandy:3xuncWdpKhR.:73:22:Wandy)f(Saetan:/usr/wandy:/bin/csh.)g(*\))188
3259 y(;;)188 3372 y(\(*)h(Two)g(ls)g(-l)g(output)f(readers.)h(*\))188
3485 y(let)g(ls_long_reader)f(=)282 3598 y(field_reader)h
(~field_parser:\(infix_splitter)f(~delim:\(Pattern)h("\\s+"\))f
(~num_fields:8)h(\(\)\))g(\(\))282 3711 y(\(*)g(-rw-r--r--)94
b(1)46 b(shivers)188 b(22880)47 b(Sep)g(24)g(12:45)g(scsh.scm)g(*\))188
3823 y(;;)188 3936 y(let)g(ls_long_with_blanks_in_filenames_reader)f(=)
282 4049 y(field_reader)h(~field_parser:\(infix_splitter)f
(~delim:\(Pattern)h("\\s+"\))f(~num_fields:\(-7\))h(\(\)\))g(\(\))282
4162 y(\(*)g(-rw-r--r--)94 b(1)46 b(shivers)376 b(8)47
b(Sep)g(24)g(12:45)g(who)g(am)g(I)g(*\))188 4275 y(;;)188
4388 y(\(*)g(Internet)g(hostname)f(reader.)h(*\))188
4501 y(let)g(hostname_reader)f(=)282 4614 y(field_reader)h
(~field_parser:\(field_splitter)f(~field:\(Pattern)h("[^.]+"\))f
(\(\)\))h(\(\))282 4727 y(\(*)g(stat.sinica.edu.tw)f(*\))188
4840 y(;;)188 4953 y(\(*)h(Internet)g(IP)g(address)f(reader.)h(*\))188
5065 y(let)g(numeric_IP_address_reader)f(=)282 5178 y(field_reader)h
(~field_parser:\(field_splitter)f(~field:\(Pattern)h("[^.]+"\))f
(~num_fields:4)h(\(\)\))g(\(\))282 5291 y(\(*)g(18.24.0.241)g(*\))1905
5589 y Fi(95)p eop
%%Page: 96 96
96 95 bop 188 91 a Fj(;;)188 204 y(\(*)47 b(Line)g(of)g(integers.)f
(*\))188 317 y(let)h(parse_num)g(=)g(field_splitter)f(~field:\(Pattern)
h("[-+]?\\d+"\))g(\(\);;)188 430 y(let)g(line_of_ints_reader)f(=)282
543 y(let)h(field_parser)f(s)h(=)g(List.map)g(int_of_string)g
(\(parse_num)g(s\))g(in)282 656 y(gen_field_reader)f(field_parser)h
(read_line)282 769 y(\(*)g(18)g(24)g(0)g(241)g(*\))188
882 y(;;)188 995 y(\(*)g(Same)g(as)g(above.)f(*\))188
1108 y(let)h(another_line_of_ints_reader)f(=)282 1220
y(let)h(read)g(=)g(field_reader)f(~field_parser:parse_num)h(\(\))g(in)
282 1333 y(fun)g(chan)g(->)g(let)f(\(record,)h(fields\))g(=)g(\(read)g
(chan\))g(in)g(\(record,)g(List.map)f(int_of_string)h(fields\))282
1446 y(\(*)g(Yale)g(beat)g(harvard)f(26)h(to)g(7.)g(*\))188
1559 y(;;)0 1936 y Fk(7.2.2)103 b(F)-9 b(orw)m(ard-progress)34
b(guaran)m(tees)h(and)g(empt)m(y-string)f(matc)m(hes)0
2131 y Fi(A)20 b(lo)s(op)h(that)g(pulls)g(text)f(o\033)h(a)f(string)h
(b)m(y)g(rep)s(eatedly)g(matc)m(hing)i(a)e(regexp)g(against)g(that)g
(string)g(can)g(conceiv)-5 b(ably)0 2244 y(get)27 b(stuc)m(k)g(in)g(an)
g(in\034nite)h(lo)s(op)e(if)h(the)g(regexp)g(matc)m(hes)h(the)f(empt)m
(y)h(string.)39 b(F)-8 b(or)28 b(example,)g(the)f(regexps)g
Fj("\\A")p Fi(,)0 2357 y Fj("\\z")p Fi(,)j Fj(".*")p
Fi(,)g(and)h Fj("foo|[^f]*")f Fi(can)h(all)f(matc)m(h)i(the)f(empt)m(y)
g(string.)141 2470 y(The)38 b(routines)g(in)g(this)g(pac)m(k)-5
b(age)38 b(that)h(iterate)f(through)h(strings)e(with)h(regular)h
(expressions)e(are)h(careful)0 2583 y(to)i(handle)h(this)f(empt)m
(y-string)h(case.)69 b(If)39 b(a)h(regexp)g(matc)m(hes)h(the)g(empt)m
(y)f(string,)j(the)d(next)g(searc)m(h)h(starts,)0 2696
y(not)33 b(from)g(the)g(end)g(of)f(the)h(matc)m(h)h(\(whic)m(h)g(in)f
(the)f(empt)m(y)i(string)f(case)f(is)h(also)f(the)h(b)s(eginning)h
(\026)f(that's)f(the)0 2808 y(problem\),)43 b(but)d(from)f(the)h(next)f
(c)m(haracter)i(o)m(v)m(er.)69 b(This)39 b(is)g(the)g(correct)i(b)s
(eha)m(viour.)68 b(Regexps)39 b(matc)m(h)h(the)0 2921
y(longest)31 b(p)s(ossible)g(string)g(at)g(a)f(giv)m(en)i(lo)s(cation,)
g(so)e(if)g(the)h(regexp)h(matc)m(hed)g(the)f(empt)m(y)h(string)f(at)g
(lo)s(cation)g Fg(i)p Fi(,)0 3034 y(then)j(it)f(is)g(guaran)m(teed)j
(it)d(could)h(not)g(ha)m(v)m(e)g(matc)m(hed)h(a)f(longer)g(pattern)g
(starting)g(with)g(c)m(haracter)i Fg(i)p Fi(.)49 b(So)33
b(w)m(e)0 3147 y(can)e(safely)e(b)s(egin)i(our)g(searc)m(h)g(for)f(the)
h(next)f(matc)m(h)i(at)e(c)m(har)i Fg(i)g(+)g(1)p Fi(.)141
3260 y(With)25 b(this)g(pro)m(vision,)j(ev)m(ery)d(iteration)h(through)
h(the)e(lo)s(op)g(mak)m(es)h(some)f(forw)m(ard)h(progress,)h(and)e(the)
h(lo)s(op)0 3373 y(is)k(guaran)m(teed)i(to)f(terminate.)141
3486 y(This)26 b(has)f(the)h(e\033ect)f(y)m(ou)h(w)m(an)m(t)h(with)f
(\034eld)g(parsing.)40 b(F)-8 b(or)26 b(example,)h(if)e(y)m(ou)h(split)
f(a)g(string)h(with)g(the)g(empt)m(y)0 3599 y(pattern,)32
b(y)m(ou)e(will)h(explo)s(de)g(the)f(string)h(in)m(to)g(its)f
(individual)i(c)m(haracters:)47 3712 y Fj(\(suffix_splitter)47
b(~delim:\(String)f(""\))h(\(\)\))g("foo")705 b(=>)47
b(["";)f("f";)h("o";)g("o"])141 3825 y Fi(Ho)m(w)m(ev)m(er,)40
b(ev)m(en)e(though)f(this)g(b)s(oundary)g(case)g(is)f(handled)i
(correctly)-8 b(,)39 b(w)m(e)f(don't)f(recommend)i(using)e(it.)0
3938 y(Sa)m(y)31 b(what)g(y)m(ou)f(mean)i(\026)e(just)g(use)g(a)g
(\034eld)h(splitter:)47 4050 y Fj(\(field_splitter)47
b(~field:\(Pattern)f("."\))h(\(\)\))g("foo")705 b(=>)47
b(["f";)f("o";)h("o"])0 4360 y Fl(8)131 b(Running)44
b(Cash)0 4587 y Fi(There)38 b(are)f(sev)m(eral)h(di\033eren)m(t)g(w)m
(a)m(ys)g(to)f(in)m(v)m(ok)m(e)h(cash.)61 b(Y)-8 b(ou)37
b(can)h(run)f(it)g(as)g(an)g(in)m(teractiv)m(e)i(Ocaml)f(system,)0
4700 y(with)31 b(a)f(standard)h(read-ev)-5 b(al-prin)m(t)33
b(in)m(teraction)g(lo)s(op.)141 4813 y(Cash)21 b(can)f(also)h(b)s(e)f
(in)m(v)m(ok)m(ed)h(as)f(the)h(in)m(terpreter)i(for)d(a)g(shell)g
(script)h(b)m(y)g(putting)g(a)f(\020)8 b Fj(#!/usr/local/bin/cash)p
Fi(\021)0 4926 y(line)31 b(at)f(the)h(top)g(of)f(the)g(shell)h(script.)
141 5039 y(Descending)26 b(a)f(lev)m(el,)i(it)e(is)f(also)h(p)s
(ossible)g(to)g(compile)h(to)f(b)m(yte-)g(or)h(nativ)m(e)f(co)s(de,)i
(with)e(or)g(without)h(-custom)0 5152 y(for)k(b)m(yte-co)s(de)h
(executables.)1905 5589 y(96)p eop
%%Page: 97 97
97 96 bop 141 91 a Fi(This)42 b(c)m(hapter)h(will)f(co)m(v)m(er)g
(these)g(v)-5 b(arious)41 b(w)m(a)m(ys)h(of)f(in)m(v)m(oking)i(cash)e
(programs,)46 b(from)41 b(bigger/faster)i(to)0 204 y(smaller/slo)m(w)m
(er)33 b(metho)s(ds.)0 471 y Ff(8.1)112 b(Making)38 b(true)f
(executables)0 666 y Fi(Y)-8 b(ou)31 b(just)f(use)g(cash)g(as)g(a)h
(library)-8 b(.)41 b(Standard)32 b(linking)f(is)e(as)h(follo)m(w:)141
779 y Fj(ocamlc)47 b(-custom)30 b Fg(other)j(options)d
Fj(unix.cma)46 b(pcre.cma)h(cash.cma)30 b Fg(other)j(\034les)141
892 y Fj(ocamlopt)d Fg(other)j(options)d Fj(unix.cmxa)47
b(pcre.cmxa)f(cash.cmxa)30 b Fg(other)j(\034les)141 1005
y Fi(This)i(giv)m(es)g(fast)g(startup,)i(plus)e(faster)g(execution)h
(with)f(o)s(camlopt.)55 b(With)36 b(o)s(camlc)f(-g,)i(and)e(the)g(prop)
s(er)0 1118 y(en)m(vironmen)m(t)e(v)-5 b(ariable)31 b(OCAMLR)m(UNP)-8
b(ARAM,)30 b(y)m(ou)h(get)f(bac)m(ktraces.)42 b(Y)-8
b(ou)31 b(can)g(use)f(o)s(camldebug.)0 1385 y Ff(8.2)112
b(Making)38 b(b)m(yteco)s(de-only)f(executables)0 1580
y Fi(Y)-8 b(ou)31 b(don't)g(link)f(in)h(the)f(run)m(time)i(system:)141
1693 y Fj(ocamlc)e Fg(other)j(options,)f(no)g(-custom)f
Fj(unix.cma)46 b(pcre.cma)h(cash.cma)30 b Fg(other)j(\034les)141
1806 y Fi(Same)43 b(as)f(b)m(yte-co)s(de)h(executable)h(of)e(the)h
(preceding)g(section)g([8.1],)j(but)d(the)g(b)m(yteco)s(de)g
(executable)g(is)0 1919 y(smaller,)35 b(the)e(startup)h(time)g
(negligibly)g(longer.)50 b(This)33 b(w)m(orks)g(only)h(if)e(none)i(of)f
(the)g(libraries)h(used)g(has)f(b)s(een)0 2032 y(compiled)f(with)f(the)
f(-custom)h(\035ag.)0 2298 y Ff(8.3)112 b(Cash)38 b(scripts)0
2494 y Fi(Caml)33 b(scripts)f(\(so)g(do)s(es)g(Cash\))h(use)f(a)h
(toplev)m(el)g(to)g(compile)g(on)g(the)f(\035y)-8 b(,)33
b(then)g(execute)g(source)g(scripts.)46 b(Y)-8 b(ou)0
2607 y(just)22 b(put)i(an)f Fj(#!/usr/local/bin/cash)f
Fi(as)h(the)g(\034rst)g(line)h(of)e(the)i(source.)38
b(This)23 b(giv)m(es)g(y)m(ou)h(minimal)g(fo)s(otprin)m(t,)0
2719 y(but)36 b(y)m(ou)g(ha)m(v)m(e)g(longer)h(startup-time)f(b)s
(ecause)g(of)f(the)h(compilation)h(to)f(b)m(yte-co)s(de)g(prior)g(to)g
(execution.)57 b(As)0 2832 y(toplev)m(els)30 b(don't)g(kno)m(w)g(ho)m
(w)g(to)f(dump)h(bac)m(ktraces)h(on)e(unhandled)i(exceptions,)f(y)m(ou)
g(can't)g(get)f(one)h(this)f(w)m(a)m(y)0 2945 y(\(see)h([8.1])h(and)g
([8.2]\).)141 3058 y(If)h(y)m(ou're)h(concerned)h(b)m(y)f(startup)h
(time)f(and)g(disk)f(usage,)h(but)g(don't)h(care)f(of)f(using)h(2)g
(\034les)f(for)h(a)f(script,)0 3171 y(y)m(ou)d(can)h(mak)m(e)f(a)g
(compromise)h(b)m(y)f(doing)h(the)f(follo)m(wing:)41
b(Y)-8 b(ou)29 b(\034rst)g(compile)h(y)m(ou)g(source)f(to)g(a)g(.cmo)g
Fj(ocamlc)0 3284 y Fg(options)39 b Fj(-c)47 b(myscript.ml)39
b Fi(but)h(y)m(ou)g(don't)g(link)g(it.)68 b(Then)40 b(y)m(ou)g(write)g
(a)g(wrapp)s(er)g(in)g(a)g(\034le)f(named,)k(sa)m(y)-8
b(,)0 3397 y(m)m(yscript:)94 3623 y Fj(#!/usr/local/bin/cash)94
3736 y(#load)47 b("myscript.cmo";;)141 3961 y Fi(and)31
b(y)m(ou)g(mak)m(e)g(it)f(executable)i(with:)41 b Fj(chmod)47
b(+x)f(myscript)141 4074 y Fi(Then)35 b(y)m(ou)f(don't)h(get)f(t)m(yp)s
(e)g(errors)g(afterw)m(ards,)i(don't)e(pa)m(y)h(for)e(compilation)j(at)
e(eac)m(h)h(execution)g(of)e(the)0 4187 y(script,)44
b(and)e(link)f(no)g(b)m(yte-co)s(de)h(caml)g(library)-8
b(,)44 b(as)d(the)h(toplev)m(el)g(already)g(has)e(them)i(in)f(\025)g
(unix.cma)h(and)0 4300 y(esp)s(ecially)30 b(cash.cma)i(aren't)f(that)g
(small.)141 4437 y(No)m(w)g(w)m(e)g(get)g(at)f(OS)h(limits)g
(concerning)h Fj(#!)40 b Fi(lines:)141 4550 y(First,)29
b(the)f(standard)h(cash)g(toplev)m(el)g(is)f(itself)g(\(in)g(the)h(OS)f
(terminology\))i(an)e(o)s(camlrun)h(script)g(\(o)s(camlrun)0
4663 y(b)s(eing)i(termed)h(\020in)m(terpreter\021\),)i(as)d(its)g
(\034rst)g(line)g(is)g(a)g Fj(#!)42 b Fi(line)32 b(to)s(o.)42
b(But)31 b(generally)-8 b(,)33 b(Unix/Lin)m(ux)f(OSes)f(don't)0
4775 y(allo)m(w)j(suc)m(h)f(\020scripts\021)40 b(to)33
b(b)s(e)f(used)g(themselv)m(es)h(in)g(another)h Fj(#!)46
b Fi(line.)i(The)33 b(solution)g(to)f(o)m(v)m(ercome)j(this)d(limit)0
4888 y(is)d(easy:)39 b(mak)m(e)30 b(a)f(cash)g(toplev)m(el)h(with)f
(-custom,)h(so,)f(b)m(y)g(including)i(the)e(o)s(camlrun)h(executable,)h
(it)e(b)s(ecomes)g(a)0 5001 y(true)i(executable)g(to)g(the)g(OS')f(ey)m
(es.)141 5114 y(The)22 b(second)f(limit)h(is)e(that)i(some)f(Unices)g
(truncate)h(the)f Fj(#!)37 b Fi(line)22 b(to)f(some)g(ev)m(er)g(to)s(o)
g(short)g(size,)i(and/or)f(limit)0 5227 y(the)27 b(n)m(um)m(b)s(er)i
(of)d(argumen)m(ts)j(that)e(can)h(b)s(e)f(added)g(there)h(\(generally)g
(no)f(less)g(than)g(one)g(after)g(the)h(\020in)m(terpreter\021)0
5340 y(name\))43 b(to)g(an)g(ev)m(er)f(to)s(o)h(small)f(n)m(um)m(b)s
(er,)48 b(and)42 b(do)h(so)f(either)h(silen)m(tly)-8
b(,)47 b(or)c(with)g(an)f(imprecise)i(error)f(co)s(de)1905
5589 y(97)p eop
%%Page: 98 98
98 97 bop 0 91 a Fi(\(./m)m(yscript:)40 b(No)28 b(suc)m(h)g(\034le)f
(or)h(directory)-8 b(,)29 b Fg(e.g.)p Fi(,)g(though)f(./m)m(yscript)h
(do)s(es)e(exist\).)39 b(And)27 b(y)m(ou)h(sometimes)g(need)0
204 y(those)j(-unsafe)f(or)g(-w)h(\035ags)f(to)h(y)m(our)g(script.)141
317 y(There)h(w)m(e)g(use)e(a)h(solution)h(from)f(Scsh:)42
b(the)31 b(toplev)m(el)h(itself)f(is)f(named)i(cash)m(top,)g(and)g(w)m
(e)f(use)g(a)g(so-called)0 430 y(\020tramp)s(oline\021)36
b(to)27 b(start)g(it,)g(named)h(cash)f(\(there)g(are)g(v)m(ersions)g
(with)h(Camlp4)f(revised)g(syn)m(tax,)h(resp.)39 b(cashrtop)0
543 y(and)d(cashr\).)58 b(Cash)36 b(is)f(a)h(true)h(executable,)h(so)e
(a)g(custom)g(toplev)m(el)h(isn't)f(necessary)g(an)m(ymore)h(\(but)g
(can)f(b)s(e)0 656 y(used)30 b(to)f(regain)i(some)f(dozens)g(of)f(ms)g
(of)g(startup)h(time\).)41 b(It)30 b(do)s(esn't)f(supp)s(ort)h(cash)m
(top)h(options,)f(but)g(use)f(the)0 769 y(second)i(line)g(of)f(the)g
(script)h(to)f(gather)i(them.)41 b(So)30 b(if)g(y)m(our)h(script)g
(starts)f(lik)m(e)h(this:)94 995 y Fj(#!/usr/local/bin/cash)94
1108 y(cashtop)47 b(arguments)g(...)94 1220 y(!#)141
1446 y Fi(i.e.)38 b(the)21 b(3d)h(line)g(is)e(\020)8
b Fj(!#\\n)p Fi(\021,)23 b(the)f(second)g(line)f(will)h(b)s(e)f(parsed)
h(as)f(describ)s(ed)g(b)s(elo)m(w,)j(to)e(mak)m(e)g(the)f(argumen)m(ts)
0 1559 y(to)30 b(cash)m(top.)0 1846 y Fk(Secondary)i(argumen)m(t)g(syn)
m(tax)91 b Fi(Cash)29 b(uses)f(a)g(v)m(ery)h(simple)f(grammar)i(to)f
(enco)s(de)g(the)g(extra)f(argumen)m(ts)0 1959 y(on)41
b(the)h(second)f(line)h(of)e(the)i(cash)f(script.)73
b(The)41 b(only)g(sp)s(ecial)g(c)m(haracters)i(are)e(space,)j(tab,)g
(newline,)h(and)0 2072 y(bac)m(kslash.)136 2285 y Fe(\017)h
Fi(Eac)m(h)28 b(space)f(c)m(haracter)h(terminates)f(an)g(argumen)m(t.)
41 b(This)27 b(means)f(that)h(t)m(w)m(o)h(spaces)e(in)h(a)f(ro)m(w)h
(in)m(tro)s(duce)227 2398 y(an)k(empt)m(y-string)h(argumen)m(t.)136
2585 y Fe(\017)46 b Fi(The)25 b(tab)g(c)m(haracter)i(is)d(not)h(p)s
(ermitted)h(\(unless)f(y)m(ou)g(quote)g(it)f(with)i(the)f(bac)m(kslash)
g(c)m(haracter)h(describ)s(ed)227 2698 y(b)s(elo)m(w\).)42
b(This)30 b(is)f(to)h(prev)m(en)m(t)i(the)e(insidious)h(bug)f(where)h
(y)m(ou)g(b)s(eliev)m(e)f(y)m(ou)g(ha)m(v)m(e)i(six)d(space)h(c)m
(haracters,)227 2811 y(but)h(y)m(ou)g(really)f(ha)m(v)m(e)i(a)e(tab)h
(c)m(haracter,)h(and)f Fg(vic)-5 b(e-versa)p Fi(.)136
2999 y Fe(\017)46 b Fi(The)32 b(newline)g(c)m(haracter)g(terminates)g
(an)g(argumen)m(t,)h(lik)m(e)e(the)g(space)g(c)m(haracter,)i(and)f
(also)f(terminates)227 3112 y(the)e(argumen)m(t)i(sequence.)40
b(This)29 b(means)g(that)h(an)f(empt)m(y)g(line)g(parses)g(to)g(the)g
(singleton)h(list)e(whose)h(one)227 3225 y(elemen)m(t)j(is)e(the)h
(empt)m(y)g(string:)41 b(\()p Fj("")p Fi(\).)f(The)31
b(grammar)h(do)s(esn't)e(admit)h(the)g(empt)m(y)g(list.)136
3412 y Fe(\017)46 b Fi(The)32 b(bac)m(kslash)f(c)m(haracter)i(is)e(the)
h(escap)s(e)f(c)m(haracter.)44 b(It)31 b(escap)s(es)g(bac)m(kslash,)g
(space,)h(tab,)g(turning)g(o\033)227 3525 y(their)j(sp)s(ecial)g
(functions,)h(and)f(allo)m(wing)h(them)f(to)g(b)s(e)f(included)h(in)g
(argumen)m(ts.)54 b(The)35 b(Ansi)f(C)h(escap)s(e)227
3638 y(sequences)g(\()p Fj(\\b)p Fi(,)g Fj(\\n)p Fi(,)g
Fj(\\r)f Fi(and)h Fj(\\t)p Fi(\))f(are)g(also)h(supp)s(orted;)h(these)f
(also)f(pro)s(duce)h(argumen)m(t-constituen)m(ts)227
3751 y(\025)c Fj(\\n)g Fi(do)s(esn't)g(act)g(lik)m(e)g(a)g(terminating)
i(newline.)43 b(Bac)m(kslash)31 b(follo)m(w)m(ed)i(b)m(y)e(other)g(c)m
(hars)h(is)e(not)i(allo)m(w)m(ed)227 3864 y(\(so)e(w)m(e)i(can)e
(extend)h(the)g(escap)s(e-co)s(de)f(space)h(later)g(if)f(w)m(e)h(lik)m
(e\).)141 4076 y(Y)-8 b(ou)33 b(ha)m(v)m(e)g(to)f(construct)i(these)e
(line-t)m(w)m(o)i(argumen)m(t)g(lines)f(carefully)-8
b(.)47 b(In)31 b(particular,)k(b)s(ew)m(are)e(of)f(trailing)0
4189 y(spaces)39 b(at)f(the)h(end)g(of)g(the)g(line\026they'll)h(giv)m
(e)f(y)m(ou)g(extra)g(trailing)h(empt)m(y-string)g(argumen)m(ts.)67
b(Here's)39 b(an)0 4302 y(example:)0 4528 y Fj(#!/bin/interpreter)47
b(\\)0 4641 y(foo)g(bar)94 b(quux\\)47 b(yow\\end{verbatim})141
4867 y Fi(w)m(ould)32 b(pro)s(duce)f(the)f(argumen)m(ts)i
Fj(["foo";)47 b("bar";)g("";)g("quux)g(yow"])0 5134 y
Ff(8.4)112 b(Cash)38 b(switc)m(hes)0 5329 y Fi(The)31
b(cash)f(tramp)s(oline)i(tak)m(es)e(command-line)j(switc)m(hes)e(in)f
(this)h(format:)1905 5589 y(98)p eop
%%Page: 99 99
99 98 bop 188 204 a Fj($)47 b(./cash)g(-help)188 317
y(Usage:)g(cash)g([switches])f([--])h([scriptfile])g([arguments])188
430 y(switches)g(are:)282 543 y(-v)564 b(tell)46 b(about)h(syscalls;)g
(and)g(don't)g(unlink)g(-c)g(tempfile)282 656 y(-c)g(<code>)235
b(execute)46 b(code.)h(Several)g(-c)g(allowed.)g(Omit)g(<scriptfile>)
282 769 y(-sfd)g(<num>)188 b(like)46 b(-c,)h(but)g(code)g(is)g(read)g
(on)g(file)g(descriptor)g(num)282 882 y(--)564 b(end)46
b(my)h(switches)282 995 y(-help)94 b(display)47 b(this)f(list)h(of)g
(options)141 1220 y Fi(In)29 b(the)g(tradition)i(of)d(sh)h(-c,)h(or)f
(sed)g(-e,)g(y)m(ou)h(can)f(giv)m(e)h(a)f(program)h(text)f(as)g(one)h
(or)f(more)g(argumen)m(ts)i(\(that)0 1333 y(are)g(strictly)f
(concatenated\):)188 1559 y Fj($)47 b(cash)g(-c)g('print_endline)f
("hello)h(world";;')188 1672 y(hello)g(world)141 1898
y Fi(or)31 b(ev)m(en:)188 2124 y Fj($)47 b(/cash)g(-c)g('print_endline)
f("hello')h(-c)g(')g(world";;')188 2237 y(hello)g(world)141
2462 y Fi(if)30 b(y)m(ou)h(understand)g(enough)h(the)e(quoting)h(syn)m
(tax)g(of)f(y)m(our)h(shell.)141 2575 y(Y)-8 b(ou)32
b(can)g(read)g(a)g(program)h(text)e(from)h(a)g(\034le)g(descriptor)g
(to)s(o,)g(b)m(y)g(using)g(the)g(-sfd)f(switc)m(h.)45
b(F)-8 b(or)32 b(example,)0 2688 y(to)h(read)h(a)g(script)f(from)h
(standard)g(input,)h(use)e(-sfd)g(0.)49 b(Y)-8 b(ou)34
b(can)g(use)f(-sfd)f(sev)m(eral)i(times,)h(and)e(mix)h(with)g(-c:)0
2801 y(all)d(the)f(fragmen)m(ts)i(are)e(concatenated)j(in)d(the)h
(order)g(of)f(the)h(switc)m(hes.)1905 5589 y(99)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
